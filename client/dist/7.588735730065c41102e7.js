(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{A4A1:function(t,e,i){"use strict";var n;Object.defineProperty(e,"__esModule",{value:!0}),e.HttpError=void 0,(n=e.HttpError||(e.HttpError={})).UNKNOWN="unknown",n.UNAUTHORIZED="unauthorized",n.PARAMS_MISSING="parameters-missing",n.INVALID_ENVIRONMENT="invalid-environment"},Chfi:function(t,e,i){"use strict";i.r(e),i.d(e,"MyStacksModule",(function(){return yt}));var n=i("ofXK"),c=i("tyNb"),s=i("mrSG"),o=i("HdQx"),r=i("quSY"),a=i("cp0P"),b=i("b5vT"),d=i("IzEk"),l=i("vkgz"),u=i("40nA"),p=i("Mzu6"),f=i("EVKI"),g=i("5Trv"),v=i("0IaG"),m=i("OAzE"),h=i("XNiG"),k=i("Kj3r"),S=i("/uUt"),I=i("fXoL"),R=i("oCqB"),j=i("kmnG"),Q=i("qFsG"),y=i("bTqV");function A(t,e){if(1&t){const t=I.Sb();I.Rb(0,"button",3),I.Zb("click",(function(){I.rc(t);const i=e.$implicit;return I.dc().addTag(i)})),I.Fc(1),I.ec(2,"titlecase"),I.Qb()}if(2&t){const t=e.$implicit,i=I.dc();I.jc("disabled",i.currentTags.has(t)||i.newTags.has(t)),I.Ab(1),I.Gc(I.fc(2,2,t))}}let w=(()=>{class t{constructor(e,i,n){this.data=e,this.ngZone=i,this.stackService=n,this.availableTags=Array.from(t.allTags),this.searchChanged=new h.a,this.newTags=new Set,this.currentTags=new Set(e.tags),this.stack=e.stack}static generateTagList(t){let e=new Set;for(const i in t)"string"==typeof t[i]?e.add(t[i]):"object"==typeof t[i]&&(e=new Set([...e,...this.generateTagList(t[i])]));return e}ngOnInit(){this.searchChanged.pipe(Object(k.a)(300),Object(S.a)()).subscribe(t=>{this.updateSearch(t)})}ngOnDestroy(){}updateSearch(e){this.availableTags=Array.from(t.allTags).filter(t=>t.includes(e))}addTag(t){var e;this.stackService.addTag(null===(e=this.stack.remote)||void 0===e?void 0:e.id,t).pipe(Object(d.a)(1)).subscribe(()=>{this.newTags.add(t)})}}return t.allTags=t.generateTagList(m.Tags),t.\u0275fac=function(e){return new(e||t)(I.Lb(v.a),I.Lb(I.A),I.Lb(R.a))},t.\u0275cmp=I.Fb({type:t,selectors:[["add-tag-dialog"]],decls:6,vars:1,consts:[["appearance","fill"],["matInput","","placeholder","Search",3,"input"],["mat-button","","mat-raised-button","","class","ml-2 mr-2 my-2",3,"disabled","click",4,"ngFor","ngForOf"],["mat-button","","mat-raised-button","",1,"ml-2","mr-2","my-2",3,"disabled","click"]],template:function(t,e){1&t&&(I.Rb(0,"mat-form-field",0),I.Rb(1,"mat-label"),I.Fc(2,"Search Tags"),I.Qb(),I.Rb(3,"input",1),I.Zb("input",(function(t){return e.searchChanged.next(t.target.value)})),I.Qb(),I.Qb(),I.Rb(4,"div"),I.Dc(5,A,3,4,"button",2),I.Qb()),2&t&&(I.Ab(5),I.jc("ngForOf",e.availableTags))},directives:[j.c,j.g,Q.a,n.s,y.b],pipes:[n.F],styles:[""]}),t})();var O=i("3sFK"),x=i("biaL"),D=i("nZ6g"),F=i("a8/g"),T=i("xm+p"),E=i("k1Ex"),C=i("aSHc"),P=i("bv9b");function L(t,e){if(1&t){const t=I.Sb();I.Pb(0),I.Rb(1,"button",1),I.Zb("click",(function(){return I.rc(t),I.dc().downloadRemoteStack()})),I.Mb(2,"i",2),I.Fc(3," Download Remote Stack"),I.Qb(),I.Ob()}}function $(t,e){1&t&&(I.Pb(0),I.Rb(1,"div",3),I.Mb(2,"mat-progress-bar",4),I.Rb(3,"div",5),I.Fc(4,"downloading stack"),I.Qb(),I.Qb(),I.Ob())}function M(t,e){if(1&t&&(I.Pb(0),I.Rb(1,"div",6),I.Mb(2,"i",7),I.Fc(3),I.Qb(),I.Ob()),2&t){const t=I.dc();I.Ab(3),I.Hc(" Error Downloading Stack ",t.stack.name,"")}}let _=(()=>{class t{constructor(t){this.stackService=t,this.onFinished=new I.o,this.actionState=C.a,this.currentState=C.a.IDLE,this.subs=new r.a}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}downloadRemoteStack(){this.currentState=this.actionState.ACQUIRING,this.subs.add(this.stackService.downloadStack(this.stack.remote.id,this.stack.name,this.stack.remote.version,o.a.Environment.Type.Stack).subscribe(t=>{this.currentState=this.actionState.SUCCESS,this.onFinished.emit(!0)}))}}return t.\u0275fac=function(e){return new(e||t)(I.Lb(R.a))},t.\u0275cmp=I.Fb({type:t,selectors:[["download-remote-stack"]],inputs:{stack:"stack"},outputs:{onFinished:"onFinished"},decls:3,vars:3,consts:[[4,"ngIf"],["mat-button","",3,"click"],[1,"fa","fa-download","text-muted"],[1,"text-center"],["mode","buffer"],[1,"text-small"],[1,"text-warning"],[1,"fa","fa-exclamation-triangle"]],template:function(t,e){1&t&&(I.Dc(0,L,4,0,"ng-container",0),I.Dc(1,$,5,0,"ng-container",0),I.Dc(2,M,4,1,"ng-container",0)),2&t&&(I.jc("ngIf",e.currentState===e.actionState.IDLE),I.Ab(1),I.jc("ngIf",e.currentState===e.actionState.ACQUIRING),I.Ab(1),I.jc("ngIf",e.currentState===e.actionState.FAILED))},directives:[n.t,y.b,P.a],styles:[""]}),t})();var Z=i("3Pt+"),N=i("Qu3c");function H(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",12),I.Rb(1,"div",13),I.Rb(2,"div",14),I.Rb(3,"div",15),I.Rb(4,"div"),I.Fc(5),I.ec(6,"titlecase"),I.Qb(),I.Rb(7,"div",16),I.Fc(8),I.ec(9,"titlecase"),I.Qb(),I.Qb(),I.Rb(10,"div"),I.Rb(11,"button",17),I.Zb("click",(function(){I.rc(t);const i=e.$implicit;return I.dc(3).acceptInvite(i.eid)})),I.Fc(12,"Accept"),I.Qb(),I.Rb(13,"button",17),I.Zb("click",(function(){I.rc(t);const i=e.$implicit;return I.dc(3).declineInvite(i.eid)})),I.Fc(14,"Decline"),I.Qb(),I.Qb(),I.Qb(),I.Qb(),I.Qb()}if(2&t){const t=e.$implicit;I.Ab(5),I.Gc(I.fc(6,2,t.name)),I.Ab(3),I.Hc("Owner: ",I.fc(9,4,t.owner.displayName)||t.owner.email,"")}}function G(t,e){if(1&t&&(I.Pb(0),I.Rb(1,"div",10),I.Fc(2,"Stack Invites"),I.Qb(),I.Dc(3,H,15,6,"div",11),I.Ob()),2&t){const t=I.dc(2);I.Ab(3),I.jc("ngForOf",t.invites)}}function J(t,e){if(1&t){const t=I.Sb();I.Pb(0),I.Rb(1,"div",18),I.Rb(2,"div",19),I.Zb("click",(function(){return I.rc(t),I.dc(2).gotoLogin()})),I.Mb(3,"i",20),I.Fc(4," Please Log In to use this section. "),I.Mb(5,"i",21),I.Qb(),I.Rb(6,"div",22),I.Zb("click",(function(){return I.rc(t),I.dc(2).goToCreateAccount()})),I.Fc(7," You can also create an account and receive an additional workspace. "),I.Qb(),I.Qb(),I.Ob()}}function U(t,e){1&t&&(I.Rb(0,"div",24),I.Fc(1,"No stacks present"),I.Qb())}function z(t,e){1&t&&(I.Rb(0,"div",35),I.Rb(1,"button",36),I.Mb(2,"i",37),I.Qb(),I.Qb())}function W(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",4),I.Rb(1,"button",38),I.Zb("click",(function(){I.rc(t);const e=I.dc().$implicit;return I.dc(3).switchEnvironment(e)})),I.Mb(2,"i",39),I.Qb(),I.Qb()}if(2&t){const t=I.dc().$implicit,e=I.dc(3);I.Ab(1),I.jc("disabled",e.isCurrentEnv(t))}}function V(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",4),I.Rb(1,"button",41),I.Zb("click",(function(){I.rc(t);const e=I.dc(4).$implicit;return I.dc(3).pushStack(e)})),I.Mb(2,"i",42),I.Fc(3," Push your changes"),I.Qb(),I.Qb()}2&t&&(I.Ab(1),I.jc("title","Push Your Changes"))}function q(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",4),I.Rb(1,"button",41),I.Zb("click",(function(){I.rc(t);const e=I.dc(4).$implicit;return I.dc(3).pullStack(e)})),I.Mb(2,"i",37),I.Fc(3," Pull new updates"),I.Qb(),I.Qb()}2&t&&(I.Ab(1),I.jc("title","Pull New Updates"))}function K(t,e){1&t&&(I.Rb(0,"div",43),I.Fc(1,"Requires merge!"),I.Qb())}function X(t,e){if(1&t&&(I.Rb(0,"div",4),I.Dc(1,V,4,1,"div",28),I.Dc(2,q,4,1,"div",28),I.Dc(3,K,2,0,"div",40),I.Qb()),2&t){const t=I.dc(3).$implicit;I.Ab(1),I.jc("ngIf",!t.remote.isClean),I.Ab(1),I.jc("ngIf",t.localVersion!=(null==t.remote?null:t.remote.version)),I.Ab(1),I.jc("ngIf",null==t.remote?null:t.remote.requiresMerge)}}function Y(t,e){if(1&t&&(I.Pb(0),I.Dc(1,X,4,3,"div",28),I.Ob()),2&t){const t=I.dc(2).$implicit;I.Ab(1),I.jc("ngIf",t.remote)}}function B(t,e){if(1&t){const t=I.Sb();I.Pb(0),I.Rb(1,"download-remote-stack",44),I.Zb("onFinished",(function(){return I.rc(t),I.dc(5).stackService.refresh()})),I.Qb(),I.Ob()}if(2&t){const t=I.dc(2).$implicit;I.Ab(1),I.jc("stack",t)}}function tt(t,e){if(1&t&&(I.Pb(0),I.Dc(1,Y,2,1,"ng-container",0),I.Dc(2,B,2,1,"ng-container",0),I.Ob()),2&t){const t=I.dc().$implicit;I.Ab(1),I.jc("ngIf",!t.remoteOnly),I.Ab(1),I.jc("ngIf",t.remoteOnly)}}function et(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",4),I.Fc(1),I.Rb(2,"i",60),I.Zb("click",(function(){I.rc(t);const e=I.dc(3).$implicit;return I.dc(3).toggleEdit("description",e.description)})),I.Qb(),I.Qb()}if(2&t){const t=I.dc(3).$implicit;I.Ab(1),I.Hc(" ",t.description||"No description"," ")}}function it(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div"),I.Rb(1,"input",61),I.Zb("ngModelChange",(function(e){return I.rc(t),I.dc(6).editables.description.value=e})),I.Qb(),I.Rb(2,"button",62),I.Zb("click",(function(){I.rc(t);const e=I.dc(3).$implicit;return I.dc(3).updateDescription(e)})),I.Fc(3,"Save"),I.Qb(),I.Rb(4,"button",8),I.Zb("click",(function(){return I.rc(t),I.dc(6).toggleEdit("description")})),I.Fc(5,"Cancel"),I.Qb(),I.Qb()}if(2&t){const t=I.dc(3).$implicit,e=I.dc(3);I.Ab(1),I.jc("ngModel",e.editables.description.value),I.Ab(1),I.jc("disabled",e.editables.description.value==t.description)}}function nt(t,e){1&t&&(I.Rb(0,"span",66),I.Fc(1,"None"),I.Qb())}function ct(t,e){if(1&t){const t=I.Sb();I.Rb(0,"span",67),I.Zb("mouseenter",(function(){I.rc(t);const i=e.$implicit;return I.dc(7).tagHover=i}))("mouseleave",(function(){return I.rc(t),I.dc(7).tagHover=null}))("click",(function(){I.rc(t);const i=e.$implicit,n=I.dc(4).$implicit;return I.dc(3).removeTag(n,i)})),I.Fc(1),I.ec(2,"titlecase"),I.Qb()}if(2&t){const t=e.$implicit,i=I.dc(7);I.jc("ngClass",i.tagHover==t?"badge-danger":"badge-primary"),I.Ab(1),I.Ic(" ",I.fc(2,3,t)," ",i.tagHover==t?"X":""," ")}}function st(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",4),I.Dc(1,nt,2,0,"span",63),I.Dc(2,ct,3,5,"span",64),I.Rb(3,"span",65),I.Zb("click",(function(){I.rc(t);const e=I.dc(3).$implicit;return I.dc(3).addTag(e)})),I.Mb(4,"i",9),I.Qb(),I.Qb()}if(2&t){const t=I.dc(3).$implicit,e=I.dc(3);I.Ab(1),I.jc("ngIf",0==e.tags[t.id].length),I.Ab(1),I.jc("ngForOf",e.tags[t.id])}}function ot(t,e){if(1&t&&(I.Pb(0),I.Rb(1,"div",57),I.Rb(2,"div",58),I.Fc(3,"Description"),I.Qb(),I.Dc(4,et,3,1,"div",28),I.Dc(5,it,6,2,"div",0),I.Qb(),I.Rb(6,"div",57),I.Rb(7,"div",58),I.Mb(8,"i",59),I.Fc(9," Tags"),I.Qb(),I.Dc(10,st,5,2,"div",28),I.Qb(),I.Ob()),2&t){const t=I.dc(2).$implicit,e=I.dc(3);I.Ab(4),I.jc("ngIf",!e.editables.description),I.Ab(1),I.jc("ngIf",e.editables.description),I.Ab(5),I.jc("ngIf",!!e.tags[t.id])}}function rt(t,e){1&t&&(I.Rb(0,"div",68),I.Mb(1,"i",69),I.Fc(2," Shared"),I.Qb())}function at(t,e){1&t&&(I.Rb(0,"div",70),I.Mb(1,"i",71),I.Fc(2," Local"),I.Qb())}function bt(t,e){if(1&t&&(I.Rb(0,"div",48),I.Mb(1,"i",72),I.Fc(2),I.Qb()),2&t){const t=I.dc(2).$implicit;I.Ab(2),I.Hc(" ",t.seed,"")}}function dt(t,e){if(1&t){const t=I.Sb();I.Rb(0,"button",53),I.Zb("click",(function(){I.rc(t);const e=I.dc(2).$implicit;return I.dc(3).switchEnvironment(e)})),I.Fc(1,"Switch To This Stack"),I.Qb()}if(2&t){const t=I.dc(2).$implicit,e=I.dc(3);I.jc("disabled",e.isCurrentEnv(t))}}function lt(t,e){if(1&t){const t=I.Sb();I.Rb(0,"button",55),I.Zb("click",(function(){I.rc(t);const e=I.dc(2).$implicit;return I.dc(3).deleteStack(e)})),I.Rb(1,"span"),I.Fc(2,"Delete Stack"),I.Qb(),I.Qb()}}function ut(t,e){if(1&t){const t=I.Sb();I.Rb(0,"button",55),I.Zb("click",(function(){I.rc(t);const e=I.dc(2).$implicit;return I.dc(3).revokeStack(e)})),I.Fc(1,"Purge Stack"),I.Qb()}}function pt(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",45),I.Rb(1,"div",12),I.Dc(2,ot,11,3,"ng-container",0),I.Dc(3,rt,3,0,"div",46),I.Dc(4,at,3,0,"div",47),I.Rb(5,"div",48),I.Mb(6,"i",49),I.Fc(7),I.Qb(),I.Dc(8,bt,3,1,"div",50),I.Qb(),I.Rb(9,"div",51),I.Dc(10,dt,2,1,"button",52),I.Rb(11,"button",53),I.Zb("click",(function(){I.rc(t);const e=I.dc().$implicit;return I.dc(3).installIntoCurrentEnvironment(e)})),I.Fc(12,"Install Into Current "),I.Rb(13,"span",54),I.Fc(14),I.Qb(),I.Qb(),I.Rb(15,"button",55),I.Zb("click",(function(){I.rc(t);const e=I.dc().$implicit;return I.dc(3).installIntoNewWorkspace(e)})),I.Fc(16,"Install Into New Workspace"),I.Qb(),I.Rb(17,"button",55),I.Zb("click",(function(){I.rc(t);const e=I.dc().$implicit;return I.dc(3).shareStack(e)})),I.Fc(18,"Share Stack"),I.Qb(),I.Rb(19,"button",55),I.Zb("click",(function(){I.rc(t);const e=I.dc().$implicit;return I.dc(3).renameStack(e)})),I.Fc(20,"Rename Stack"),I.Qb(),I.Dc(21,lt,3,0,"button",56),I.Dc(22,ut,2,0,"button",56),I.Qb(),I.Qb()}if(2&t){const t=I.dc().$implicit,e=I.dc(3);I.Ab(2),I.jc("ngIf",!(null==t.remote||!t.remote.id)),I.Ab(1),I.jc("ngIf",t.remote),I.Ab(1),I.jc("ngIf",!t.remote&&t.isLocal),I.Ab(3),I.Hc(" ",t.codebasePath,""),I.Ab(1),I.jc("ngIf",t.seed),I.Ab(2),I.jc("ngIf",!t.remoteOnly),I.Ab(1),I.jc("disabled",e.isCurrentEnv(t)),I.Ab(3),I.Gc(e.currentEnvironment.type),I.Ab(7),I.jc("ngIf",!t.remoteOnly),I.Ab(1),I.jc("ngIf",(null==t.remote?null:t.remote.owner)===(null==e.user?null:e.user.uid))}}function ft(t,e){if(1&t){const t=I.Sb();I.Rb(0,"div",12),I.Rb(1,"div",13),I.Rb(2,"div",25),I.Rb(3,"div",26),I.Dc(4,z,3,0,"div",27),I.Dc(5,W,3,1,"div",28),I.Qb(),I.Rb(6,"div",4),I.Mb(7,"i",29),I.Qb(),I.Rb(8,"div",30),I.Zb("click",(function(){I.rc(t);const i=e.$implicit;return I.dc(3).toggleItemList(i)})),I.Fc(9),I.Qb(),I.Rb(10,"div",7),I.Dc(11,tt,3,2,"ng-container",0),I.Qb(),I.Rb(12,"div",31),I.Rb(13,"button",32),I.Zb("click",(function(){I.rc(t);const i=e.$implicit;return I.dc(3).toggleItemList(i)})),I.Mb(14,"i",33),I.Qb(),I.Qb(),I.Qb(),I.Dc(15,pt,23,10,"div",34),I.Qb(),I.Qb()}if(2&t){const t=e.$implicit,i=I.dc(3);I.Ab(4),I.jc("ngIf",t.remoteOnly),I.Ab(1),I.jc("ngIf",!t.remoteOnly),I.Ab(2),I.Db("text-primary",i.isCurrentEnv(t))("text-muted",!i.isCurrentEnv(t)),I.Ab(1),I.Db("text-primary",i.isCurrentEnv(t)),I.Ab(1),I.Gc(t.name),I.Ab(2),I.jc("ngIf",i.isLoggedIn),I.Ab(3),I.Db("fa-chevron-up",i.itemList[t.id])("fa-chevron-down",!i.itemList[t.id]),I.Ab(1),I.jc("ngIf",i.itemList[t.id])}}function gt(t,e){if(1&t&&(I.Pb(0),I.Dc(1,U,2,0,"div",23),I.Dc(2,ft,16,15,"div",11),I.Ob()),2&t){const t=I.dc(2);I.Ab(1),I.jc("ngIf",0===t.stacks.length),I.Ab(1),I.jc("ngForOf",t.stacks)}}function vt(t,e){if(1&t){const t=I.Sb();I.Pb(0),I.Rb(1,"div",1),I.Rb(2,"div",2),I.Rb(3,"div",3),I.Rb(4,"div",4),I.Dc(5,G,4,1,"ng-container",0),I.Rb(6,"div",5),I.Rb(7,"div",6),I.Fc(8,"My Stacks"),I.Qb(),I.Rb(9,"div",7),I.Rb(10,"button",8),I.Zb("click",(function(){return I.rc(t),I.dc().createNewStack()})),I.Mb(11,"i",9),I.Fc(12," New Stack"),I.Qb(),I.Qb(),I.Qb(),I.Dc(13,J,8,0,"ng-container",0),I.Dc(14,gt,3,2,"ng-container",0),I.Qb(),I.Qb(),I.Qb(),I.Qb(),I.Ob()}if(2&t){const t=I.dc();I.Ab(5),I.jc("ngIf",t.invites.length>0),I.Ab(8),I.jc("ngIf",!t.isLoggedIn),I.Ab(1),I.jc("ngIf",t.isLoggedIn)}}const mt=c.f.forChild([{path:"",component:(()=>{class t{constructor(t,e,i,n,c,s,o,a){this.appEnvironmentService=t,this.dialog=e,this.userService=i,this.stackService=n,this.dialogService=c,this.appConsoleService=s,this.navigationService=o,this.myItemsService=a,this.invites=[],this.isLoggedIn=!1,this.itemList={},this.editables={},this.tags={},this.tagHover=null,this.subs=new r.a}ngOnInit(){this.getEnvironments(),this.getPendingInvites(),this.subs.add(this.userService.user$.subscribe(t=>{this.user=t,this.isLoggedIn=t.isLoggedIn})),this.subs.add(this.appEnvironmentService.currentEnvironment$.subscribe(t=>{this.currentEnvironment=t}))}toggleItemList(t){this.itemList[t.id]||this.loadTags(t),this.itemList[t.id]=!this.itemList[t.id]}loadTags(t){t.remote&&t.remote.id&&this.stackService.getTags(t.remote.id).pipe(Object(d.a)(1)).subscribe(e=>{this.tags[t.id]=e})}getEnvironments(){this.subs.add(this.stackService.userStacks().subscribe(t=>{this.stacks=t}))}createNewStack(){this.isLoggedIn?this.dialog.open(b.a,{data:{type:o.a.Environment.Type.Stack},minWidth:"600px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(()=>this.stackService.refresh()):this.dialogService.openMustLoginDialog()}ngOnDestroy(){}isCurrentEnv(t){var e;return(null===(e=this.currentEnvironment)||void 0===e?void 0:e.id)===t.id}switchEnvironment(t){this.appEnvironmentService.switchToEnvironment(t.id).pipe(Object(l.a)(()=>this.navigationService.navigateToEnvironmentHome())).subscribe(()=>null)}pushStack(t){this.stackService.publishStack(t.id).subscribe(e=>{var i;this.dialogService.openAlertDialog({title:"Push Successful",text:`${t.name} v${null===(i=e.remote)||void 0===i?void 0:i.version} has been published`})})}pullStack(t){this.stackService.syncStack(t.id,t.remote.version).subscribe(()=>{this.stackService.refresh(),this.dialogService.openAlertDialog({title:"Sync Stack",text:"Stack has been synced"})},t=>{var e;this.dialogService.openAlertDialog({title:"Sync Stack",text:(null===(e=t.error)||void 0===e?void 0:e.message)||"Server error!"})})}deleteStack(t){const e=this.dialogService.openConfirmationDialog({title:`Delete stack ${t.name}?`,text:"Deleting this stack is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}});Object(a.a)([e.afterClosed(),this.appEnvironmentService.currentEnvironment$.pipe(Object(d.a)(1))]).subscribe(([e,i])=>{!0===e&&this.stackService.deleteStack(t.id).subscribe(()=>{t.id===i.id&&this.dialog.open(u.a,{data:{},disableClose:!0,position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>console.log("dialog result: ",t)),this.stackService.refresh()})})}revokeStack(t){const e=this.dialog.open(p.a,{data:{title:`Revoke stack ${t.name}?`,text:"Revoking this stack will remove it from the stackjoy community. It will no longer be public and other users will no longer be able to install it. This is a permanent action and cannot be undone.",button:{yes:"Revoke",no:"Cancel"}},position:{top:"100px"},autoFocus:!0});Object(a.a)([e.afterClosed(),this.appEnvironmentService.currentEnvironment$.pipe(Object(d.a)(1))]).subscribe(([e,i])=>{!1!==e&&this.stackService.purge(t.remote.id).subscribe(()=>{this.dialogService.openAlertDialog({title:"Revoke Stack",text:`Stack ${t.name} revoked successfully. `}),this.stackService.refresh()},t=>{this.dialogService.openAlertDialog({title:"Revoke Stack",text:"Something went wrong: "+(t.message||"Unknown error occurred...")})})})}test(){this.stackService.installIntoCurrentEnvironment("UIkhUmgApyOKEKtEridz").subscribe(()=>{this.stackService.refresh()},()=>{})}installIntoCurrentEnvironment(t){this.appConsoleService.openBluConsole({command:"install "+t.name,extraInfo:{stack:t,source:"local"}})}renameStack(t){this.dialog.open(f.a,{data:{environment:t},width:"500px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{t.success&&this.stackService.refresh()})}shareStack(t){this.user?this.dialog.open(g.a,{data:{environment:t,type:"stack"},width:"50vw",maxWidth:"800px",minWidth:"500px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(()=>{this.stackService.refresh()}):this.dialogService.openMustLoginDialog()}getPendingInvites(){this.subs.add(this.stackService.pendingInvites$.subscribe(t=>{this.invites=t}))}installIntoNewWorkspace(t){this.myItemsService.createNewWorkspace(t)}gotoLogin(){this.navigationService.navigateToLogin()}goToCreateAccount(){this.navigationService.navigateToCreateAccount()}acceptInvite(t){return Object(s.a)(this,void 0,void 0,(function*(){this.stackService.acceptInvite(t).pipe(Object(d.a)(1)).subscribe(()=>{this.stackService.fetchPendingInvites()})}))}declineInvite(t){return Object(s.a)(this,void 0,void 0,(function*(){this.stackService.declineInvite(t).pipe(Object(d.a)(1)).subscribe(()=>{this.stackService.fetchPendingInvites()})}))}toggleEdit(t,e){this.editables[t]?delete this.editables[t]:this.editables[t]={dirty:!1,value:e}}updateDescription(t){this.stackService.updateDescription(t.remote.id,this.editables.description.value).pipe(Object(d.a)(1)).subscribe(()=>{t.description=this.editables.description.value,this.toggleEdit("description")})}addTag(t){this.dialog.open(w,{data:{stack:t,tags:this.tags[t.id]},width:"50vw",maxWidth:"800px",minWidth:"500px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(()=>{this.loadTags(t)})}removeTag(t,e){var i;this.stackService.removeTag(null===(i=t.remote)||void 0===i?void 0:i.id,e).pipe(Object(d.a)(1)).subscribe(()=>{this.tags[t.id]=this.tags[t.id].filter(t=>t!==e)})}}return t.\u0275fac=function(e){return new(e||t)(I.Lb(O.a),I.Lb(v.b),I.Lb(x.a),I.Lb(R.a),I.Lb(D.a),I.Lb(F.a),I.Lb(T.a),I.Lb(E.a))},t.\u0275cmp=I.Fb({type:t,selectors:[["my-stacks"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"basic-page","flex-column"],[1,"pt-3",2,"max-width","800px"],[1,"pl-3"],[1,""],[1,"pl-2","d-flex","align-items-start"],[1,"text-bold","py-2"],[1,"ml-auto"],["mat-button","",3,"click"],[1,"fa","fa-plus"],[1,"text-bold","p-2"],["class","p-2",4,"ngFor","ngForOf"],[1,"p-2"],[1,"shadow","p-2","border","rounded"],[1,"d-flex","align-items-center","justify-content-between"],[1,"pl-3","cursor-pointer"],[1,"subheader"],["mat-raised-button","",3,"click"],[1,"p-2","text-center","cursor-pointer"],[1,"",3,"click"],[1,"fa","fa-exclamation-circle"],[1,"fa","fa-arrow-alt-circle-right"],[1,"text-small","text-muted","hover-as-link","pt-2",3,"click"],["class","text-center p-2",4,"ngIf"],[1,"text-center","p-2"],[1,"d-flex","align-items-center"],[1,"pr-3"],["class","","style","width:40px; height:40px;",4,"ngIf"],["class","",4,"ngIf"],[1,"fa","fa-layer-group"],[1,"pl-2","cursor-pointer",3,"click"],[1,"ml-1"],["mat-button","","mat-icon-button","",3,"click"],[1,"fa"],["class","border-top p-2 d-flex align-items-start",4,"ngIf"],[1,"",2,"width","40px","height","40px"],["mat-button","","mat-icon-button",""],[1,"fa","fa-download","text-muted"],["mat-button","","mat-icon-button","",3,"disabled","click"],[1,"fa","fa-exchange-alt"],["style","color: red",4,"ngIf"],["mat-button","",3,"title","click"],[1,"fa","fa-upload","text-muted"],[2,"color","red"],[3,"stack","onFinished"],[1,"border-top","p-2","d-flex","align-items-start"],["class","text-muted text-small","matTooltip","This stack is shared with other users",4,"ngIf"],["class","text-muted text-small","matTooltip","This stack is present only on this machine",4,"ngIf"],[1,"text-small"],[1,"fa","fa-folder-open","mr-1"],["class","text-small",4,"ngIf"],[1,"ml-auto","p-2","border-left"],["mat-button","","class","d-block",3,"disabled","click",4,"ngIf"],["mat-button","",1,"d-block",3,"disabled","click"],[1,"text-capitalize"],["mat-button","",1,"d-block",3,"click"],["mat-button","","class","d-block",3,"click",4,"ngIf"],[1,"my-2"],[1,"text-tiny"],[1,"fa","fa-tags"],[1,"fa","fa-pencil-alt",3,"click"],["type","text",1,"form-control",3,"ngModel","ngModelChange"],["mat-button","","color","primary",3,"disabled","click"],["class","ml-2",4,"ngIf"],["class","ml-2 badge",3,"ngClass","mouseenter","mouseleave","click",4,"ngFor","ngForOf"],[1,"ml-2","badge","badge-secondary",3,"click"],[1,"ml-2"],[1,"ml-2","badge",3,"ngClass","mouseenter","mouseleave","click"],["matTooltip","This stack is shared with other users",1,"text-muted","text-small"],[1,"fa","fa-users","mr-1"],["matTooltip","This stack is present only on this machine",1,"text-muted","text-small"],[1,"fa","fa-desktop","mr-1"],[1,"fa","fa-seedling","mr-1"]],template:function(t,e){1&t&&I.Dc(0,vt,15,3,"ng-container",0),2&t&&I.jc("ngIf",e.stacks)},directives:[n.t,y.b,n.s,_,Z.c,Z.q,Z.t,n.q,N.a],pipes:[n.F],styles:[".codebase-path[_ngcontent-%COMP%]{font-size:9px;line-height:9px}[_nghost-%COMP%]{display:flex;flex:1}"]}),t})(),children:[]}]);var ht=i("STbY"),kt=i("NFeN");let St=(()=>{class t{}return t.\u0275mod=I.Jb({type:t}),t.\u0275inj=I.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,y.c,P.b]]}),t})();var It=i("7n/8"),Rt=i("QibW"),jt=i("d3UM");let Qt=(()=>{class t{}return t.\u0275mod=I.Jb({type:t}),t.\u0275inj=I.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,v.g,Q.b,Z.l,y.c,Rt.c,Z.A,jt.b,P.b]]}),t})(),yt=(()=>{class t{}return t.\u0275mod=I.Jb({type:t}),t.\u0275inj=I.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,mt,y.c,ht.c,kt.b,St,It.a,N.b,Qt,Z.l,Q.b]]}),t})()},OAzE:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var c=Object.getOwnPropertyDescriptor(e,i);c&&!("get"in c?!e.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,c)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),c=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(i("EICP"),e),c(i("OEZC"),e),c(i("Qk56"),e),c(i("h/V3"),e)},OEZC:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Tags=void 0,e.Tags={languages:{JAVASCRIPT:"javascript",TYPESCRIPT:"typescript",JAVA:"java",PYTHON:"python",C:"C"},frameworks:{EXPRESSJS:"expressjs",ANGULARJS:"angularjs",NODEJS:"nodejs",REACTJS:"reactjs"}}},Qk56:function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var c=Object.getOwnPropertyDescriptor(e,i);c&&!("get"in c?!e.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,c)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),c=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(i("A4A1"),e)},"h/V3":function(t,e,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,i,n){void 0===n&&(n=i);var c=Object.getOwnPropertyDescriptor(e,i);c&&!("get"in c?!e.__esModule:c.writable||c.configurable)||(c={enumerable:!0,get:function(){return e[i]}}),Object.defineProperty(t,n,c)}:function(t,e,i,n){void 0===n&&(n=i),t[n]=e[i]}),c=this&&this.__exportStar||function(t,e){for(var i in t)"default"===i||Object.prototype.hasOwnProperty.call(e,i)||n(e,t,i)};Object.defineProperty(e,"__esModule",{value:!0}),c(i("zXtJ"),e)},zXtJ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.stringToDate=e.dateToString=void 0,e.dateToString=function(t){return t.toISOString()},e.stringToDate=function(t){return new Date(t)}}}]);