(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{"4uq3":function(t,e,n){"use strict";n.r(e),n.d(e,"DataModelListModule",(function(){return q}));var i=n("ofXK"),a=n("tyNb"),o=n("Mzu6"),c=n("fXoL"),d=n("0btQ"),l=n("0IaG"),s=n("bTqV"),r=n("dTU6"),b=n("a8/g"),u=n("3Pt+"),f=n("kmnG"),m=n("qFsG");let p=(()=>{class t{constructor(t){this.fb=t,this.onChange=new c.o,this.onDelete=new c.o,this.onCancel=new c.o}ngOnInit(){this.form=this.fb.group({name:[this.dataModel.name]}),this.form.valueChanges.subscribe(t=>{})}ngOnDestroy(){}saveForm(){this.onChange.emit(this.form.value)}deleteModel(){this.onDelete.emit(this.dataModel)}cancel(){this.onCancel.emit(this.dataModel)}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(u.f))},t.\u0275cmp=c.Gb({type:t,selectors:[["model-structure-form"]],inputs:{dataModel:"dataModel"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:15,vars:1,consts:[[1,"p-2","d-flex","align-items-center","border-bottom"],[1,""],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer",3,"click"],[1,"p-2"],[3,"formGroup"],[1,"mat-form-field"],["placeholder","Model Name","matInput","","formControlName","name"],[1,"row"],[1,"col","text-right"],["mat-button","","mat-raised-button","",1,"mr-1",3,"click"],["mat-button","","mat-raised-button","",3,"click"]],template:function(t,e){1&t&&(c.Sb(0,"div",0),c.Sb(1,"div",1),c.Fc(2,"Model Settings"),c.Rb(),c.Sb(3,"div",2),c.Sb(4,"i",3),c.ac("click",(function(){return e.deleteModel()})),c.Rb(),c.Rb(),c.Rb(),c.Sb(5,"div",4),c.Sb(6,"form",5),c.Sb(7,"mat-form-field",6),c.Nb(8,"input",7),c.Rb(),c.Rb(),c.Sb(9,"div",8),c.Sb(10,"div",9),c.Sb(11,"button",10),c.ac("click",(function(){return e.cancel()})),c.Fc(12,"Cancel"),c.Rb(),c.Sb(13,"button",11),c.ac("click",(function(){return e.saveForm()})),c.Fc(14,"Save"),c.Rb(),c.Rb(),c.Rb(),c.Rb()),2&t&&(c.Bb(6),c.kc("formGroup",e.form))},directives:[u.G,u.r,u.j,f.c,m.a,u.c,u.q,u.i,s.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var h=n("Qu3c"),g=n("dEoz");function M(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",3),c.Sb(1,"model-structure-form",4),c.ac("onDelete",(function(e){return c.sc(t),c.ec().deleteModel(e)}))("onCancel",(function(e){return c.sc(t),c.ec().cancelEditModel(e)}))("onChange",(function(e){return c.sc(t),c.ec().updateDataModel(e)})),c.Rb(),c.Rb()}if(2&t){const t=c.ec();c.Bb(1),c.kc("dataModel",t.dataModel)}}function v(t,e){1&t&&(c.Sb(0,"div",23),c.Fc(1,"Fields"),c.Rb())}function S(t,e){1&t&&(c.Sb(0,"span",23),c.Fc(1,"[required]"),c.Rb())}function R(t,e){1&t&&(c.Sb(0,"span",34),c.Nb(1,"i",35),c.Rb()),2&t&&c.kc("title","Primary Key")}function F(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",26),c.ac("click",(function(){c.sc(t);const n=e.$implicit;return c.ec(4).editDataField(n)})),c.Sb(1,"div",17),c.Sb(2,"div",27),c.ac("click",(function(n){c.sc(t);const i=e.$implicit;return c.ec(4).toggleVisibility(i,n)})),c.Nb(3,"i",28),c.Rb(),c.Sb(4,"div",29),c.Fc(5),c.Dc(6,S,2,0,"span",18),c.Dc(7,R,2,1,"span",30),c.Rb(),c.Sb(8,"div",31),c.Fc(9),c.Rb(),c.Sb(10,"div",32),c.Nb(11,"i",33),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=e.$implicit;c.Bb(3),c.Eb("data-property-visible",t.visible)("data-property-hidden",!t.visible),c.Bb(2),c.Hc("",t.name," "),c.Bb(1),c.kc("ngIf",t.required),c.Bb(1),c.kc("ngIf",t.primary),c.Bb(2),c.Gc(t.type)}}function k(t,e){if(1&t&&(c.Sb(0,"div",3),c.Sb(1,"div",24),c.Dc(2,F,12,8,"div",25),c.Rb(),c.Rb()),2&t){const t=c.ec(3);c.Bb(2),c.kc("ngForOf",t.dataModel.fields)}}function D(t,e){1&t&&(c.Sb(0,"div",36),c.Fc(1," Model has no fields "),c.Rb())}function y(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div"),c.Sb(1,"div",16),c.Sb(2,"div",17),c.Dc(3,v,2,0,"div",18),c.Sb(4,"div",19),c.ac("click",(function(){return c.sc(t),c.ec(2).addNewField()})),c.Fc(5,"Add Field "),c.Nb(6,"i",20),c.Rb(),c.Rb(),c.Rb(),c.Dc(7,k,3,1,"div",21),c.Dc(8,D,2,0,"div",22),c.Rb()}if(2&t){const t=c.ec(2);c.Bb(3),c.kc("ngIf",t.dataModel.hasFields),c.Bb(4),c.kc("ngIf",t.dataModel.hasFields),c.Bb(1),c.kc("ngIf",!t.dataModel.hasFields)}}function C(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div"),c.Sb(1,"model-property-form",37),c.ac("onDelete",(function(e){return c.sc(t),c.ec(2).deleteField(e)}))("onCancel",(function(){return c.sc(t),c.ec(2).cancelEditField()}))("onChange",(function(e){return c.sc(t),c.ec(2).updateDataField(e)})),c.Rb(),c.Rb()}if(2&t){const t=c.ec(2);c.Bb(1),c.kc("dataModelField",t.fieldToEdit)}}function x(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",5),c.Sb(1,"div",6),c.ac("click",(function(){c.sc(t);const e=c.ec();return e.toggleModelAuth(e.dataModel)})),c.Nb(2,"i",7),c.Rb(),c.Sb(3,"div",8),c.Fc(4),c.Rb(),c.Sb(5,"div",9),c.ac("click",(function(){return c.sc(t),c.ec().launchConsole()})),c.Nb(6,"i",10),c.Rb(),c.Sb(7,"div",11),c.ac("click",(function(){return c.sc(t),c.ec().editModel()})),c.Nb(8,"i",12),c.Rb(),c.Rb(),c.Sb(9,"div",13),c.Dc(10,y,9,3,"div",14),c.Dc(11,C,2,1,"ng-template",null,15,c.Ec),c.Rb()}if(2&t){const t=c.pc(12),e=c.ec();c.Bb(1),c.kc("matTooltip",(e.dataModel.authorizationRequired?"Requires":"Does not require")+" user authentication"),c.Bb(1),c.Eb("fa-lock",e.dataModel.authorizationRequired)("fa-lock-open",!e.dataModel.authorizationRequired),c.Bb(2),c.Gc(e.dataModel.name),c.Bb(6),c.kc("ngIf",!e.editField)("ngIfElse",t)}}let w=(()=>{class t{constructor(t){this.appConsoleService=t,this.onChange=new c.o,this.onDelete=new c.o,this.edit=!1,this.editField=!1,this.fieldToEdit=null}ngOnInit(){this.dataModel=new r.a(this.dataMember),this.edit=!this.dataModel.name}ngOnDestroy(){}updateDataField(t){this.dataModel.updateField(this.fieldToEdit,t),this.saveModel(),this.cancelEditField()}cancelEditField(){this.fieldToEdit=null,this.editField=!1}editDataField(t){this.fieldToEdit=t,this.editField=!0}addNewField(){const t=r.a.newField();this.dataModel.addField(t),this.editDataField(t)}deleteField(t){this.dataModel.deleteField(t),this.saveModel(),this.cancelEditField()}updateDataModel(t){this.dataModel.name=t.name,this.edit=!1,this.saveModel()}saveModel(){this.onChange.emit(this.dataModel)}editModel(){this.editField=!1,this.edit=!0}deleteModel(t){this.onDelete.emit(t)}cancelEditModel(t){this.edit=!1}launchConsole(){const t=this.dataModel.toJSON();this.appConsoleService.openBluConsole({inputs:{dataModel:t},command:"generate",suggestedNames:[t.name]})}toggleVisibility(t,e){t.visible=!t.visible,e.stopPropagation(),this.saveModel()}toggleModelAuth(t){t.authorizationRequired=!t.authorizationRequired,this.saveModel()}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(b.a))},t.\u0275cmp=c.Gb({type:t,selectors:[["data-model-object"]],inputs:{dataMember:"dataMember"},outputs:{onChange:"onChange",onDelete:"onDelete"},decls:4,vars:2,consts:[[1,"data-model"],["class","",4,"ngIf","ngIfElse"],["displayModel",""],[1,""],[3,"dataModel","onDelete","onCancel","onChange"],[1,"data-model-header","d-flex","align-items-center","border-bottom","p-2"],[1,"pt-1","pr-2","cursor-pointer","text-muted","small",3,"matTooltip","click"],[1,"fa","fa-lock"],[1,"pr-2"],[1,"console","ml-auto","mr-2","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,"cursor-pointer",3,"click"],[1,"fas","fa-cog"],[1,"data-model-body"],[4,"ngIf","ngIfElse"],["dataFields",""],[1,"data-properties-header","p-2"],[1,"d-flex","align-items-center"],["class","small text-muted",4,"ngIf"],[1,"small","cursor-pointer","ml-auto","text-muted",3,"click"],[1,"fa","fa-plus-circle","text-tiny","ml-1"],["class","",4,"ngIf"],["class","text-center p-4 text-muted small",4,"ngIf"],[1,"small","text-muted"],[1,"data-property","cursor-pointer"],["class","p-2",3,"click",4,"ngFor","ngForOf"],[1,"p-2",3,"click"],[1,"",3,"click"],[1,"far","fa-sm","fa-eye"],[1,"pl-2"],["class","text-tiny text-muted",3,"title",4,"ngIf"],[1,"text-muted","small","ml-auto"],[1,"small","pl-3"],[1,"fa","fa-cog"],[1,"text-tiny","text-muted",3,"title"],[1,"fa","fa-key","ml-1"],[1,"text-center","p-4","text-muted","small"],[3,"dataModelField","onDelete","onCancel","onChange"]],template:function(t,e){if(1&t&&(c.Sb(0,"div",0),c.Dc(1,M,2,1,"div",1),c.Dc(2,x,13,8,"ng-template",null,2,c.Ec),c.Rb()),2&t){const t=c.pc(3);c.Bb(1),c.kc("ngIf",e.edit||!e.dataModel.name)("ngIfElse",t)}},directives:[i.t,p,h.a,i.s,g.a],styles:[".data-model[_ngcontent-%COMP%]{width:300px;border-radius:3px;border:1px solid #f1f1f1}.data-model-header[_ngcontent-%COMP%]{background-color:#f1f1f1}.data-properties-header[_ngcontent-%COMP%]{border-bottom:1px solid #f1f1f1}.data-property[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.data-property-hidden[_ngcontent-%COMP%]{opacity:.2;color:#6c757d!important}.data-property-visible[_ngcontent-%COMP%]{opacity:.8;color:#6c757d!important}"]}),t})();function O(t,e){if(1&t){const t=c.Tb();c.Sb(0,"div",4),c.Sb(1,"div",5),c.Sb(2,"data-model-object",6),c.ac("onDelete",(function(e){return c.sc(t),c.ec().deleteModel(e)}))("onChange",(function(e){return c.sc(t),c.ec().updateDataModel(e)})),c.Rb(),c.Rb(),c.Rb()}if(2&t){const t=e.$implicit;c.Bb(2),c.kc("dataMember",t)}}const B=a.f.forChild([{path:"",component:(()=>{class t{constructor(t,e){this.dataModelService=t,this.dialog=e}ngOnInit(){this.dataModelService.getDataModels().subscribe(t=>this.dataMembers=t)}ngOnDestroy(){}newDataModel(){this.dataModelService.createDataModel().subscribe(t=>{t.success&&this.dataMembers.push(t.dataMember)})}deleteModel(t){this.dialog.open(o.a,{data:{title:"Delete Model?",text:"Deleting this model is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{if(!0===e){const e=this.dataMembers.findIndex(e=>e.id===t.dataMember.id);e>=0&&this.dataModelService.deleteDataModel(t.dataMember.id).subscribe(t=>{this.dataMembers.splice(e,1)})}})}updateDataModel(t){this.dataModelService.updateDataModel(t.dataMember.id,t.toJSON()).subscribe(t=>console.log("model updated:",t))}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(d.a),c.Mb(l.b))},t.\u0275cmp=c.Gb({type:t,selectors:[["data-model-list"]],decls:5,vars:1,consts:[["mat-button","",3,"click"],[1,"fa","fa-plus"],[1,"p-2"],["class","d-inline-block align-top m-2",4,"ngFor","ngForOf"],[1,"d-inline-block","align-top","m-2"],[1,"shadow","rounded","border"],[3,"dataMember","onDelete","onChange"]],template:function(t,e){1&t&&(c.Sb(0,"button",0),c.ac("click",(function(){return e.newDataModel()})),c.Nb(1,"i",1),c.Fc(2," New Data Model"),c.Rb(),c.Sb(3,"div",2),c.Dc(4,O,3,1,"div",3),c.Rb()),2&t&&(c.Bb(4),c.kc("ngForOf",e.dataMembers))},directives:[s.b,i.s,w],styles:[".model-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;align-items:stretch}"]}),t})()}]);var I=n("HSNX"),E=n("QibW"),N=n("d3UM");let G=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[i.c,m.b,u.l,s.c,E.c,u.A,N.b]]}),t})(),P=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[i.c,I.a,m.b,u.A,s.c,G,h.b]]}),t})();var T=n("lK0z");let q=(()=>{class t{}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[i.c,B,P,s.c,T.a]]}),t})()},Mzu6:function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var i=n("0IaG"),a=n("fXoL"),o=n("bTqV");let c=(()=>{class t{constructor(t,e){this.data=t,this.dialogRef=e}ngOnInit(){}ngOnDestroy(){}cancel(){this.dialogRef.close(!1)}confirm(){this.dialogRef.close(!0)}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(i.a),a.Mb(i.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["confirmation-dialog"]],decls:10,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"p-2","text-center"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(a.Sb(0,"h1",0),a.Fc(1),a.Rb(),a.Sb(2,"div",1),a.Sb(3,"div",2),a.Fc(4),a.Rb(),a.Rb(),a.Sb(5,"div",3),a.Sb(6,"button",4),a.ac("click",(function(){return e.cancel()})),a.Fc(7),a.Rb(),a.Sb(8,"button",4),a.ac("click",(function(){return e.confirm()})),a.Fc(9),a.Rb(),a.Rb()),2&t&&(a.Bb(1),a.Gc(e.data.title),a.Bb(3),a.Gc(e.data.text),a.Bb(1),a.kc("align","end"),a.Bb(2),a.Gc(null!=e.data.button&&e.data.button.no?null==e.data.button?null:e.data.button.no:"No"),a.Bb(2),a.Gc(null!=e.data.button&&e.data.button.yes?null==e.data.button?null:e.data.button.yes:"Yes"))},directives:[i.i,i.f,i.c,o.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})()}}]);