(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{x3qw:function(t,e,i){"use strict";i.r(e),i.d(e,"CreateAccountModule",(function(){return w}));var r=i("ofXK"),s=i("tyNb"),n=i("quSY"),o=i("aSHc"),a=i("fXoL"),c=i("IYfF"),b=i("xm+p"),u=i("IjCo"),d=i("Wp6s"),l=i("bTqV"),m=i("3Pt+"),p=i("kmnG"),g=i("qFsG");function h(t,e){if(1&t){const t=a.Tb();a.Sb(0,"mat-card"),a.Sb(1,"div",2),a.Fc(2,"You are logged in as: "),a.Sb(3,"b"),a.Fc(4),a.Rb(),a.Rb(),a.Sb(5,"div",3),a.Sb(6,"button",4),a.ac("click",(function(){return a.sc(t),a.ec().logout()})),a.Fc(7,"Log Out"),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.ec();a.Bb(4),a.Gc(t.user.email)}}function S(t,e){if(1&t&&(a.Sb(0,"div",16),a.Fc(1),a.Rb()),2&t){const t=a.ec(2);a.Bb(1),a.Gc(t.signupForm.error)}}function f(t,e){if(1&t&&(a.Sb(0,"div",17),a.Nb(1,"i",18),a.Fc(2),a.Rb()),2&t){const t=a.ec(2);a.Bb(2),a.Hc(" ",t.error," ")}}function v(t,e){if(1&t){const t=a.Tb();a.Sb(0,"mat-card"),a.Sb(1,"div",2),a.Sb(2,"div",5),a.Qb(3),a.Sb(4,"div",6),a.Fc(5,"Create Account:"),a.Rb(),a.Sb(6,"div",2),a.Sb(7,"form",7),a.ac("ngSubmit",(function(){return a.sc(t),a.ec().createAccount()})),a.Sb(8,"div",5),a.Sb(9,"mat-form-field"),a.Sb(10,"mat-label"),a.Fc(11,"Email"),a.Rb(),a.Sb(12,"input",8),a.ac("ngModelChange",(function(e){return a.sc(t),a.ec().signupForm.email=e})),a.Rb(),a.Rb(),a.Rb(),a.Sb(13,"div",5),a.Sb(14,"mat-form-field"),a.Sb(15,"mat-label"),a.Fc(16,"Password"),a.Rb(),a.Sb(17,"input",9),a.ac("ngModelChange",(function(e){return a.sc(t),a.ec().signupForm.password=e})),a.Rb(),a.Rb(),a.Rb(),a.Dc(18,S,2,1,"div",10),a.Sb(19,"div"),a.Sb(20,"button",11),a.Fc(21,"Create Account"),a.Rb(),a.Rb(),a.Nb(22,"br"),a.Rb(),a.Dc(23,f,3,1,"div",12),a.Rb(),a.Pb(),a.Rb(),a.Sb(24,"div",13),a.Sb(25,"div",14),a.ac("click",(function(){return a.sc(t),a.ec().forgotPassword()})),a.Fc(26,"Forgot Password"),a.Rb(),a.Sb(27,"div",15),a.ac("click",(function(){return a.sc(t),a.ec().login()})),a.Fc(28,"Login"),a.Rb(),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.ec();a.Bb(12),a.kc("ngModel",t.signupForm.email)("disabled",t.signupForm.disabled),a.Bb(5),a.kc("ngModel",t.signupForm.password)("disabled",t.signupForm.disabled),a.Bb(1),a.kc("ngIf",""!==t.signupForm.error),a.Bb(5),a.kc("ngIf",t.currentState===t.actionState.FAILED)}}const F=s.f.forChild([{path:"",component:(()=>{class t{constructor(t,e,i,r,s){this.authService=t,this.route=e,this.navigationService=i,this.systemService=r,this.ngZone=s,this.signupForm={email:"",password:"",error:"",disabled:!1,inviteCode:"",displayName:""},this.subs=new n.a,this.currentState=o.a.IDLE,this.actionState=o.a}ngOnInit(){var t;this.signupForm.email=null!==(t=this.route.snapshot.queryParams.email)&&void 0!==t?t:"",this.subs.add(this.authService.user$.subscribe(t=>this.user=t))}ngOnDestroy(){this.subs.unsubscribe()}login(){const t={};this.signupForm.email&&(t.email=this.signupForm.email),this.navigationService.navigateTo(["login"],{queryParams:t})}forgotPassword(){const t={};this.signupForm.email&&(t.email=this.signupForm.email),this.navigationService.navigateTo(["forgot-password"],{queryParams:t})}createAccount(){this.authService.createUser(this.signupForm.email,this.signupForm.password,this.signupForm.displayName).toPromise().then(()=>{this.currentState=o.a.SUCCESS,this.ngZone.run(()=>{})}).catch(t=>{this.currentState=o.a.FAILED,this.error=t})}acceptInvite(){this.systemService.acceptInvite(this.signupForm.inviteCode,this.signupForm.displayName,this.signupForm.password).toPromise().then(t=>{this.authService.login(t.data.email,this.signupForm.password)}).catch(t=>{console.error("Failed: ",t)})}logout(){this.authService.logout()}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(c.a),a.Mb(s.a),a.Mb(b.a),a.Mb(u.a),a.Mb(a.A))},t.\u0275cmp=a.Gb({type:t,selectors:[["create-account"]],decls:3,vars:2,consts:[[1,"d-flex","justify-content-center","pt-4"],[4,"ngIf"],[1,"p-2"],[1,"p-2","text-center"],["mat-raised-button","",3,"click"],[1,""],[1,"text-bold"],[1,"form",3,"ngSubmit"],["matInput","","placeholder","Email","type","email","name","email","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","placeholder","Password","type","password","name","password","required","",3,"ngModel","disabled","ngModelChange"],["class","error",4,"ngIf"],["mat-raised-button","","type","submit"],["class","pt-4 text-break","style","width: 250px;",4,"ngIf"],[1,"d-flex","p-2","pt-4"],[1,"cursor-pointer",3,"click"],[1,"cursor-pointer","ml-auto","pl-4",3,"click"],[1,"error"],[1,"pt-4","text-break",2,"width","250px"],[1,"fa","fa-exclamation-triangle","text-warning"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.Dc(1,h,8,1,"mat-card",1),a.Dc(2,v,29,6,"mat-card",1),a.Rb()),2&t&&(a.Bb(1),a.kc("ngIf",e.user),a.Bb(1),a.kc("ngIf",!e.user))},directives:[r.t,d.a,l.b,m.G,m.r,m.s,p.c,p.g,g.a,m.c,m.B,m.q,m.t],styles:[""]}),t})(),children:[]}]);let w=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,F,l.c,m.l,g.b,d.b]]}),t})()}}]);