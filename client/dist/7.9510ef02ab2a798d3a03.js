(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{A4A1:function(e,t,i){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HttpError=void 0,(n=t.HttpError||(t.HttpError={})).UNKNOWN="unknown",n.UNAUTHORIZED="unauthorized",n.PARAMS_MISSING="parameters-missing",n.INVALID_ENVIRONMENT="invalid-environment",n.INVALID_PARAMETERS="invalid-parameters",n.BAD_REQUEST="bad-request",n.INVALID_PATH="invalid-path",n.USER_NOT_FOUND="user-not-found",n.VIOLATES_MINIMUM_REQUIREMENTS="violates-minimum-requirements",n.FORBIDDEN="forbidden",n.ENVIRONMENT_NAME_IN_USE="stack/creation/name-in-use",n.ENVIRONMENT_INVALID_NAME="environment/invalid-name",n.ORG_CREATION_NAME_IN_USE="org/creation/name-in-use",n.ORG_CREATION_PREFIX_IN_USE="org/creation/prefix-in-use",n.ORG_DELETION_STILL_IN_USE="org/deletion/still-in-use"},O2It:function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var n=i("fXoL"),r=i("EICP"),s=i("quSY"),o=i("ofXK"),a=i("d3UM"),c=i("FKr1"),b=i("bv9b"),u=i("bTqV");function d(e,t){if(1&e&&(n.Rb(0,"mat-option",8),n.Ec(1),n.ec(2,"titlecase"),n.Qb()),2&e){const e=t.$implicit;n.jc("value",e.value),n.Ab(1),n.Gc(" ",n.fc(2,2,e.key)," ")}}function l(e,t){if(1&e){const e=n.Sb();n.Rb(0,"div"),n.Rb(1,"mat-select",6),n.Zb("valueChange",(function(t){n.rc(e);const i=n.dc(2).$implicit;return n.dc().dirtyEnvPermissions[i.uid].permission=t})),n.Cc(2,d,3,4,"mat-option",7),n.ec(3,"keyvalue"),n.Qb(),n.Qb()}if(2&e){const e=n.dc(2).$implicit,t=n.dc();n.Ab(1),n.jc("value",t.dirtyEnvPermissions[e.uid].permission),n.Ab(1),n.jc("ngForOf",n.gc(3,2,t.permissionMap,t.originalOrder))}}function m(e,t){if(1&e&&(n.Pb(0),n.Ec(1),n.ec(2,"titlecase"),n.Ob()),2&e){const e=n.dc(2).$implicit,t=n.dc();n.Ab(1),n.Gc(" ",n.fc(2,1,t.convertPermissionToString(t.dirtyEnvPermissions[e.uid].permission))," ")}}function g(e,t){1&e&&(n.Pb(0),n.Mb(1,"mat-progress-bar",9),n.Ob())}function f(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",12),n.Zb("click",(function(){n.rc(e);const t=n.dc(3).$implicit;return n.dc().save(t)})),n.Ec(1,"Save "),n.Qb()}if(2&e){const e=n.dc(3).$implicit,t=n.dc();n.jc("disabled",t.dirtyEnvPermissions[e.uid].permission===e.permission)}}function p(e,t){if(1&e){const e=n.Sb();n.Rb(0,"button",13),n.Zb("click",(function(){n.rc(e);const t=n.dc(3).$implicit;return n.dc().revoke(t)})),n.Ec(1),n.Qb()}if(2&e){const e=n.dc(3).$implicit,t=n.dc();n.Ab(1),n.Gc(" ",e.uid===t.userUID?"Leave":"Revoke"," ")}}function v(e,t){if(1&e&&(n.Pb(0),n.Cc(1,f,2,1,"button",10),n.Cc(2,p,2,1,"button",11),n.Ob()),2&e){const e=n.dc(2).$implicit,t=n.dc();n.Ab(1),n.jc("ngIf",t.userIsAdmin),n.Ab(1),n.jc("ngIf",t.userIsAdmin||e.uid===t.userUID)}}const h=function(e){return{user:e}};function E(e,t){if(1&e&&(n.Pb(0),n.Rb(1,"td",3),n.Nb(2,4),n.Qb(),n.Rb(3,"td",3),n.Cc(4,l,4,5,"div",2),n.Cc(5,m,3,3,"ng-container",2),n.Qb(),n.Rb(6,"td",5),n.Cc(7,g,2,0,"ng-container",2),n.Cc(8,v,3,2,"ng-container",2),n.Qb(),n.Ob()),2&e){const e=n.dc().$implicit,t=n.dc();n.Ab(2),n.jc("ngTemplateOutlet",t.userColumnTemplate)("ngTemplateOutletContext",n.lc(6,h,e)),n.Ab(2),n.jc("ngIf",t.userIsAdmin),n.Ab(1),n.jc("ngIf",!t.userIsAdmin),n.Ab(2),n.jc("ngIf",t.dirtyEnvPermissions[e.uid].saving),n.Ab(1),n.jc("ngIf",!t.dirtyEnvPermissions[e.uid].saving)}}function O(e,t){if(1&e&&(n.Rb(0,"tr"),n.Cc(1,E,9,8,"ng-container",2),n.Qb()),2&e){const e=t.$implicit,i=n.dc();n.Ab(1),n.jc("ngIf",i.dirtyEnvPermissions[e.uid])}}let R=(()=>{class e{constructor(){this.subs=new s.a,this.revokeUser=new n.o,this.updateUser=new n.o,this.dirtyEnvPermissions={},this.originalOrder=(e,t)=>0}ngOnChanges(e){for(const t of this.users)this.dirtyEnvPermissions[t.uid]={permission:t.permission,saving:!1}}ngOnInit(){this.subs.add(this.savingCompleted.subscribe(e=>{this.dirtyEnvPermissions[e]&&(this.dirtyEnvPermissions[e].saving=!1)}))}ngOnDestroy(){this.subs.unsubscribe()}convertPermissionToString(e){switch(e){case r.EnvironmentPermissions.read:return"Read";case r.EnvironmentPermissions.write:return"Write";case r.EnvironmentPermissions.admin:return"Admin";case r.EnvironmentPermissions.owner:return"Owner"}}revoke(e){this.dirtyEnvPermissions[e.uid].saving=!0,this.revokeUser.emit(e)}save(e){this.dirtyEnvPermissions[e.uid].saving=!0,this.updateUser.emit(Object.assign(Object.assign({},e),{permission:this.dirtyEnvPermissions[e.uid].permission}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Fb({type:e,selectors:[["permission-table"]],inputs:{userIsAdmin:"userIsAdmin",userUID:"userUID",users:"users",permissionMap:"permissionMap",userColumnTemplate:"userColumnTemplate",savingCompleted:"savingCompleted"},outputs:{revokeUser:"revokeUser",updateUser:"updateUser"},features:[n.yb],decls:9,vars:1,consts:[[1,"table","my-3",2,"min-width","500px"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"align-middle"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"align-middle","text-center"],[3,"value","valueChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["mode","indeterminate",2,"width","75px"],["mat-button","","mat-stroked-button","","color","primary","class","mr-2",3,"disabled","click",4,"ngIf"],["mat-button","","mat-raised-button","","color","warn",3,"click",4,"ngIf"],["mat-button","","mat-stroked-button","","color","primary",1,"mr-2",3,"disabled","click"],["mat-button","","mat-raised-button","","color","warn",3,"click"]],template:function(e,t){1&e&&(n.Rb(0,"table",0),n.Rb(1,"thead"),n.Rb(2,"tr"),n.Rb(3,"td"),n.Ec(4,"User"),n.Qb(),n.Rb(5,"td"),n.Ec(6,"Permission"),n.Qb(),n.Mb(7,"td"),n.Qb(),n.Qb(),n.Cc(8,O,2,1,"tr",1),n.Qb()),2&e&&(n.Ab(8),n.jc("ngForOf",t.users))},directives:[o.s,o.t,o.A,a.a,c.l,b.a,u.b],pipes:[o.l,o.F],styles:[""]}),e})()},OAzE:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i("EICP"),t),r(i("OEZC"),t),r(i("Qk56"),t),r(i("h/V3"),t)},OEZC:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Settings=t.Tags=void 0,t.Tags={languages:{JAVASCRIPT:"javascript",TYPESCRIPT:"typescript",JAVA:"java",PYTHON:"python",C:"C"},frameworks:{EXPRESSJS:"expressjs",ANGULARJS:"angularjs",NODEJS:"nodejs",REACTJS:"reactjs"}},t.Settings={GIT:{MAIN_BRANCH:"stackjoy"}}},Qk56:function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i("A4A1"),t),r(i("t0R8"),t)},Qrwm:function(e,t,i){"use strict";i.r(t),i.d(t,"AccountModule",(function(){return J}));var n=i("ofXK"),r=i("tyNb"),s=i("quSY"),o=i("fXoL"),a=i("biaL"),c=i("xm+p");let b=(()=>{class e{constructor(e){this.navigationService=e}ngOnInit(){}ngOnDestroy(){}goToLogin(){this.navigationService.navigateTo(["/login"])}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(c.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["not-logged-in"]],decls:7,vars:0,consts:[[1,"d-flex","align-items-center"],[1,"fa","fa-2x","fa-exclamation-circle","text","text-muted"],[1,"ml-2"],["href","javascript:",1,"",3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"div",0),o.Mb(1,"i",1),o.Rb(2,"div",2),o.Ec(3,"You are not logged in. Please "),o.Rb(4,"a",3),o.Zb("click",(function(){return t.goToLogin()})),o.Ec(5,"login"),o.Qb(),o.Ec(6," to proceed"),o.Qb(),o.Qb())},styles:[""]}),e})();var u=i("bTqV"),d=i("IzEk"),l=i("0IaG"),m=i("3Pt+"),g=i("QxDP"),f=i("OAzE"),p=i("1TnD"),v=i("nZ6g"),h=i("kmnG"),E=i("qFsG");let O=(()=>{class e{constructor(e,t,i,n){this.data=e,this.organizationApi=t,this.dialogService=i,this.dialogRef=n,this.formGroup=new m.j({displayName:new m.g("",[m.F.required,m.F.minLength(2)]),prefix:new m.g("",[m.F.required,m.F.pattern(g.a.NAMING_REGEX)])})}ngOnInit(){}ngOnDestroy(){}submit(e){e.stopPropagation(),e.preventDefault(),this.formGroup.valid&&this.organizationApi.createOrganization(this.formGroup.get("displayName").value,this.formGroup.get("prefix").value).pipe(Object(d.a)(1)).subscribe(()=>{this.dialogRef.close({status:!0})},e=>{e.error&&e.error.code===f.HttpError.ORG_CREATION_PREFIX_IN_USE?(this.dialogService.openAlertDialog({title:"Organization already exists!",text:`An organization with the prefix '${this.formGroup.get("prefix").value}' already exists. Please choose a different one.`}),this.formGroup.get("prefix").reset()):this.dialogRef.close({status:!1})})}close(){console.log("here"),this.dialogRef.close({status:!1,cancelled:!0})}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(l.a),o.Lb(p.a),o.Lb(v.a),o.Lb(l.h))},e.\u0275cmp=o.Fb({type:e,selectors:[["create-org-dialog"]],decls:22,vars:2,consts:[["mat-dialog-title",""],[3,"formGroup","keydown.enter","submit"],[1,"w-100"],["formControlName","displayName","matNativeControl","","type","text"],["matPrefix",""],["formControlName","prefix","matNativeControl","","type","text"],["align","start"],[1,"mt-3"],["mat-button","","mat-raised-button","",1,"mr-2",3,"click"],["mat-button","","mat-raised-button","","type","submit",3,"disabled"]],template:function(e,t){1&e&&(o.Rb(0,"h3",0),o.Ec(1,"Create New Organization"),o.Qb(),o.Rb(2,"form",1),o.Zb("keydown.enter",(function(e){return t.submit(e)}))("submit",(function(e){return t.submit(e)})),o.Rb(3,"div"),o.Rb(4,"mat-form-field",2),o.Rb(5,"mat-label"),o.Ec(6,"Organization Name"),o.Qb(),o.Mb(7,"input",3),o.Qb(),o.Qb(),o.Rb(8,"div"),o.Rb(9,"mat-form-field",2),o.Rb(10,"mat-label"),o.Ec(11,"Organization Prefix"),o.Qb(),o.Rb(12,"span",4),o.Ec(13,"@"),o.Qb(),o.Mb(14,"input",5),o.Rb(15,"mat-hint",6),o.Ec(16,"Can only contain alpha-numeric, dashes, underscores, or periods."),o.Qb(),o.Qb(),o.Qb(),o.Rb(17,"div",7),o.Rb(18,"button",8),o.Zb("click",(function(){return t.close()})),o.Ec(19,"Cancel"),o.Qb(),o.Rb(20,"button",9),o.Ec(21,"Create"),o.Qb(),o.Qb(),o.Qb()),2&e&&(o.Ab(2),o.jc("formGroup",t.formGroup),o.Ab(18),o.jc("disabled",!t.formGroup.valid))},directives:[l.i,m.H,m.s,m.k,h.c,h.g,m.c,E.a,m.r,m.i,h.i,h.f,u.b],styles:[".w-100[_ngcontent-%COMP%]{width:100%}"]}),e})();var R=i("w++c"),I=i("Mzu6"),A=i("EICP"),y=i("O2It"),Q=i("d3UM"),P=i("FKr1");function w(e,t){if(1&e&&(o.Rb(0,"div",1),o.Ec(1),o.Qb()),2&e){const e=o.dc().user;o.Ab(1),o.Fc(e.email)}}function M(e,t){if(1&e&&(o.Ec(0),o.Cc(1,w,2,1,"div",7)),2&e){const e=t.user;o.Gc(" ",e.username||e.email," "),o.Ab(1),o.jc("ngIf",e.username)}}function C(e,t){if(1&e&&(o.Rb(0,"mat-option",14),o.Ec(1),o.ec(2,"titlecase"),o.Qb()),2&e){const e=t.$implicit;o.jc("value",e.value),o.Ab(1),o.Gc(" ",o.fc(2,2,e.key)," ")}}function j(e,t){if(1&e){const e=o.Sb();o.Rb(0,"form",8),o.Rb(1,"mat-form-field"),o.Rb(2,"mat-label"),o.Ec(3,"Email"),o.Qb(),o.Mb(4,"input",9),o.Qb(),o.Rb(5,"mat-form-field",10),o.Rb(6,"mat-label"),o.Ec(7,"Permission"),o.Qb(),o.Rb(8,"mat-select",11),o.Cc(9,C,3,4,"mat-option",12),o.ec(10,"keyvalue"),o.Qb(),o.Qb(),o.Rb(11,"button",13),o.Zb("click",(function(){return o.rc(e),o.dc().addMember()})),o.Ec(12,"Add Member"),o.Qb(),o.Qb()}if(2&e){const e=o.dc();o.jc("formGroup",e.addMemberForm),o.Ab(9),o.jc("ngForOf",o.gc(10,3,e.envPermissions,e.originalOrder)),o.Ab(2),o.jc("disabled",!e.addMemberForm.valid)}}let _=(()=>{class e{constructor(e,t,i,n){this.data=e,this.organizationApi=t,this.dialogService=i,this.dialogRef=n,this.subs=new s.a,this.userIsAdmin=!1,this.members=[],this.addMemberForm=new m.j({email:new m.g("",[m.F.required,m.F.email]),permission:new m.g("",[m.F.required])}),this.envPermissions=new Map([["read",A.EnvironmentPermissions.read],["write",A.EnvironmentPermissions.write],["admin",A.EnvironmentPermissions.admin],["owner",A.EnvironmentPermissions.owner]]),this.originalOrder=()=>0,this.org=e.org,this.user=e.user}ngOnInit(){this.getMembers()}ngOnDestroy(){}close(){this.dialogRef.close(!0)}getMembers(){this.subs.add(this.organizationApi.getMembers(this.org.oid).pipe(Object(d.a)(1)).subscribe(e=>{this.members=e.sort((e,t)=>e.permission>t.permission?-1:1),this.userIsAdmin=!!e.find(e=>e.uid===this.user.uid&&e.permission>=A.EnvironmentPermissions.admin)}))}updateMemberPermission(e){this.organizationApi.updateMemberPermission(this.org.oid,e.uid,e.permission).pipe(Object(d.a)(1)).subscribe(e=>{this.getMembers()},e=>{this.dialogService.openAlertDialog(e.error&&e.error.code===f.HttpError.VIOLATES_MINIMUM_REQUIREMENTS?{title:"Operation not permitted",text:e.error.message||"Unknown error occurred. Please try again in a few minutes."}:{title:"Something went wrong",text:"Please try again in a few minutes"}),this.getMembers()})}addMember(){this.addMemberForm.valid&&this.organizationApi.addMember(this.org.oid,this.addMemberForm.get("email").value,this.addMemberForm.get("permission").value).pipe(Object(d.a)(1)).subscribe(e=>{this.addMemberForm.reset(),this.getMembers()},e=>{this.dialogService.openAlertDialog(e.error&&e.error.code===f.HttpError.USER_NOT_FOUND?{title:"Unable to find user",text:`Could not find user with the email ${this.addMemberForm.get("email").value}. They must have an account before being added to an organization.`}:{title:"Something went wrong",text:"Please try again in a few minutes"}),this.getMembers()})}revokeUser(e){e.uid===this.user.uid&&this.dialogService.openConfirmationDialog({title:"Are you sure?",text:`This will revoke your access from the ${this.org.name} organization`,button:{yes:"Yes",no:"Cancel"}}).afterClosed().subscribe(t=>{if(!t)return this.members=[...this.members];this.organizationApi.revokeMember(this.org.oid,e.uid).pipe(Object(d.a)(1)).subscribe(t=>{e.uid===this.user.uid?this.close():this.getMembers()},e=>{this.dialogService.openAlertDialog({text:"Please try again in a few minutes",title:"Something went wrong"}),this.getMembers()})})}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(l.a),o.Lb(p.a),o.Lb(v.a),o.Lb(l.h))},e.\u0275cmp=o.Fb({type:e,selectors:[["manage-org-dialog"]],decls:12,vars:9,consts:[[1,"text-large"],[1,"text-muted"],[3,"userIsAdmin","users","userUID","permissionMap","userColumnTemplate","revokeUser","updateUser"],["userColumn",""],[3,"formGroup",4,"ngIf"],[1,"my-2"],["mat-button","","mat-stroked-button","","mat-dialog-close",""],["class","text-muted",4,"ngIf"],[3,"formGroup"],["matInput","","formControlName","email"],[1,"ml-2","mr-2"],["formControlName","permission"],[3,"value",4,"ngFor","ngForOf"],["mat-button","","mat-raised-button","","color","primary",3,"disabled","click"],[3,"value"]],template:function(e,t){if(1&e&&(o.Rb(0,"div",0),o.Ec(1,"Organization Settings"),o.Qb(),o.Rb(2,"div",1),o.Ec(3),o.ec(4,"titlecase"),o.Qb(),o.Rb(5,"permission-table",2),o.Zb("revokeUser",(function(e){return t.revokeUser(e)}))("updateUser",(function(e){return t.updateMemberPermission(e)})),o.Qb(),o.Cc(6,M,2,2,"ng-template",null,3,o.Dc),o.Cc(8,j,13,6,"form",4),o.Rb(9,"div",5),o.Rb(10,"button",6),o.Ec(11,"Close"),o.Qb(),o.Qb()),2&e){const e=o.oc(7);o.Ab(3),o.Fc(o.fc(4,7,t.org.name)),o.Ab(2),o.jc("userIsAdmin",t.userIsAdmin)("users",t.members)("userUID",t.user.uid)("permissionMap",t.envPermissions)("userColumnTemplate",e),o.Ab(3),o.jc("ngIf",t.userIsAdmin)}},directives:[y.a,n.t,u.b,l.d,m.H,m.s,m.k,h.c,h.g,E.a,m.c,m.r,m.i,Q.a,n.s,P.l],pipes:[n.F,n.l],styles:[""]}),e})();var S=i("f0Cb");function k(e,t){1&e&&(o.Rb(0,"div",3),o.Rb(1,"div",4),o.Ec(2,"You are not currently part of any organizations"),o.Qb(),o.Mb(3,"mat-divider"),o.Qb())}function N(e,t){if(1&e){const e=o.Sb();o.Rb(0,"tr"),o.Rb(1,"td",7),o.Ec(2),o.ec(3,"titlecase"),o.Rb(4,"span",8),o.Ec(5),o.Qb(),o.Qb(),o.Rb(6,"td"),o.Rb(7,"button",9),o.Zb("click",(function(){o.rc(e);const i=t.$implicit;return o.dc(2).manageOrg(i)})),o.Ec(8,"Manage"),o.Qb(),o.Rb(9,"button",10),o.Zb("click",(function(){o.rc(e);const i=t.$implicit;return o.dc(2).deleteOrg(i)})),o.Ec(10,"Delete"),o.Qb(),o.Qb(),o.Qb()}if(2&e){const e=t.$implicit;o.Ab(2),o.Gc(" ",o.fc(3,2,e.name)," "),o.Ab(3),o.Gc("@",e.prefix,"")}}function F(e,t){if(1&e&&(o.Rb(0,"div",3),o.Rb(1,"table",5),o.Cc(2,N,11,4,"tr",6),o.Qb(),o.Qb()),2&e){const e=o.dc();o.Ab(2),o.jc("ngForOf",e.orgs)}}let x=(()=>{class e{constructor(e,t,i){this.userService=e,this.organizationsApi=t,this.dialog=i,this.subs=new s.a,this.orgs=[]}getOrgsForUser(){this.subs.add(this.organizationsApi.getOrganizationsForUser(this.user.uid).pipe(Object(d.a)(1)).subscribe(e=>this.orgs=e))}ngOnInit(){var e;(null===(e=this.user)||void 0===e?void 0:e.isLoggedIn)&&this.getOrgsForUser()}ngOnDestroy(){this.subs.unsubscribe()}createOrg(){this.dialog.open(O,{data:{},disableClose:!0,minWidth:"600px",minHeight:"210px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{e.status?this.getOrgsForUser():e.cancelled||this.dialog.open(R.a,{data:e.alert||{title:"Failed to create organization.",text:"Something went wrong, please try again in a few minutes"}})})}manageOrg(e){this.subs.add(this.dialog.open(_,{data:{org:e,user:this.user}}).afterClosed().subscribe(()=>{this.getOrgsForUser()}))}deleteOrg(e){this.subs.add(this.dialog.open(I.a,{data:{title:"Delete this organization?",text:"Are you sure?"}}).afterClosed().subscribe(t=>{t&&this.subs.add(this.organizationsApi.deleteOrganization(e.oid).pipe(Object(d.a)(1)).subscribe(()=>{this.getOrgsForUser()},t=>{t.error&&t.error.code===f.HttpError.ORG_DELETION_STILL_IN_USE&&this.dialog.open(R.a,{data:{title:"Cannot Delete Organization",text:`An organization must not have any stacks before deleting. There is at least 1 stack still under the '${e.name}' organization!`}}),this.getOrgsForUser()}))}))}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(a.a),o.Lb(p.a),o.Lb(l.b))},e.\u0275cmp=o.Fb({type:e,selectors:[["organizations"]],inputs:{user:"user"},decls:5,vars:2,consts:[[1,"p-lg-3"],["class","my-3",4,"ngIf"],["mat-button","","mat-raised-button","",3,"click"],[1,"my-3"],[1,"my-2"],[1,"table"],[4,"ngFor","ngForOf"],[1,"align-middle"],[1,"ml-3","text-muted"],["mat-button","","mat-raised-button","",1,"mr-2",3,"click"],["mat-button","","mat-raised-button","","color","warn",1,"my-2",3,"click"]],template:function(e,t){1&e&&(o.Rb(0,"div",0),o.Cc(1,k,4,0,"div",1),o.Rb(2,"button",2),o.Zb("click",(function(){return t.createOrg()})),o.Ec(3,"Create New Organization"),o.Qb(),o.Cc(4,F,3,1,"div",1),o.Qb()),2&e&&(o.Ab(1),o.jc("ngIf",0==t.orgs.length),o.Ab(3),o.jc("ngIf",t.orgs.length>0))},directives:[n.t,u.b,S.a,n.s],pipes:[n.F],styles:[""]}),e})();function T(e,t){if(1&e){const e=o.Sb();o.Rb(0,"div",8),o.Mb(1,"not-logged-in"),o.Rb(2,"div",9),o.Rb(3,"button",10),o.Zb("click",(function(){return o.rc(e),o.dc().createAccount()})),o.Ec(4," Create an account and receive an additional workspace. "),o.Mb(5,"i",11),o.Qb(),o.Qb(),o.Qb()}}function U(e,t){if(1&e&&(o.Rb(0,"tr"),o.Rb(1,"td"),o.Ec(2,"Email:"),o.Qb(),o.Rb(3,"td"),o.Ec(4),o.Qb(),o.Mb(5,"td"),o.Qb()),2&e){const e=o.dc();o.Ab(4),o.Fc(e.user.email)}}function D(e,t){if(1&e&&(o.Rb(0,"tr"),o.Rb(1,"td"),o.Ec(2,"Username:"),o.Qb(),o.Rb(3,"td"),o.Ec(4),o.Qb(),o.Mb(5,"td"),o.Qb()),2&e){const e=o.dc();o.Ab(4),o.Fc(e.user.username)}}function L(e,t){if(1&e){const e=o.Sb();o.Rb(0,"div",12),o.Rb(1,"button",13),o.Zb("click",(function(){return o.rc(e),o.dc().changePlan()})),o.Ec(2,"Change Plan"),o.Qb(),o.Qb()}}function z(e,t){if(1&e){const e=o.Sb();o.Rb(0,"div",12),o.Rb(1,"button",10),o.Zb("click",(function(){return o.rc(e),o.dc().signIn()})),o.Ec(2,"Sign In"),o.Qb(),o.Qb()}}function G(e,t){if(1&e&&(o.Pb(0),o.Rb(1,"div",1),o.Ec(2," Organizations "),o.Qb(),o.Mb(3,"organizations",14),o.Ob()),2&e){const e=o.dc();o.Ab(3),o.jc("user",e.user)}}const $=r.f.forChild([{path:"",component:(()=>{class e{constructor(e,t){this.userService=e,this.navigationService=t,this.subs=new s.a}ngOnInit(){this.subs.add(this.userService.user$.subscribe(e=>this.user=e))}ngOnDestroy(){this.subs.unsubscribe()}changePlan(){this.navigationService.navigateTo(["plans"])}signIn(){this.navigationService.navigateTo(["login"])}createAccount(){this.navigationService.navigateTo(["create-account"])}}return e.\u0275fac=function(t){return new(t||e)(o.Lb(a.a),o.Lb(c.a))},e.\u0275cmp=o.Fb({type:e,selectors:[["account"]],decls:23,vars:8,consts:[[1,"basic-page","flex-column"],[1,"basic-page-title"],[2,"width","600px","padding","40px"],["class","d-flex flex-column align-items-center justify-content-center",4,"ngIf"],[1,"table","w-100"],[4,"ngIf"],[1,"align-middle"],["class","",4,"ngIf"],[1,"d-flex","flex-column","align-items-center","justify-content-center"],[1,"py-4","cursor-pointer"],["mat-raised-button","",3,"click"],[1,"fa","fa-arrow-circle-right"],[1,""],["mat-button","",3,"click"],[3,"user"]],template:function(e,t){1&e&&(o.Rb(0,"div",0),o.Rb(1,"div",1),o.Ec(2," Account "),o.Qb(),o.Rb(3,"div",2),o.Cc(4,T,6,0,"div",3),o.Rb(5,"table",4),o.Cc(6,U,6,1,"tr",5),o.Cc(7,D,6,1,"tr",5),o.Rb(8,"tr"),o.Rb(9,"td",6),o.Ec(10,"Current Plan:"),o.Qb(),o.Rb(11,"td",6),o.Ec(12),o.Qb(),o.Rb(13,"td"),o.Cc(14,L,3,0,"div",7),o.Cc(15,z,3,0,"div",7),o.Qb(),o.Qb(),o.Rb(16,"tr"),o.Rb(17,"td"),o.Ec(18,"Total Workspaces:"),o.Qb(),o.Rb(19,"td"),o.Ec(20),o.Qb(),o.Mb(21,"td"),o.Qb(),o.Qb(),o.Qb(),o.Cc(22,G,4,1,"ng-container",5),o.Qb()),2&e&&(o.Ab(4),o.jc("ngIf",!t.user.isLoggedIn),o.Ab(2),o.jc("ngIf",t.user.isLoggedIn),o.Ab(1),o.jc("ngIf",t.user.isLoggedIn),o.Ab(5),o.Fc(t.user.isLoggedIn?t.user.accountTypeAsString():"Free Workspace"),o.Ab(2),o.jc("ngIf",t.user.isLoggedIn),o.Ab(1),o.jc("ngIf",!t.user.isLoggedIn),o.Ab(5),o.Fc(t.user.maxWorkspaces),o.Ab(2),o.jc("ngIf",t.user.isLoggedIn))},directives:[n.t,b,u.b,x],styles:["[_nghost-%COMP%]{display:flex;flex:1}"]}),e})(),children:[]}]);let Z=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[n.c]]}),e})();var V=i("Wp6s");let H=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,Z,u.c,V.d,S.b]]}),e})(),J=(()=>{class e{}return e.\u0275mod=o.Jb({type:e}),e.\u0275inj=o.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,$,u.c,Z,H]]}),e})()},"h/V3":function(e,t,i){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var r=Object.getOwnPropertyDescriptor(t,i);r&&!("get"in r?!t.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,r)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i("zXtJ"),t)},t0R8:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},zXtJ:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToDate=t.dateToString=void 0,t.dateToString=function(e){return e.toISOString()},t.stringToDate=function(e){return new Date(e)}}}]);