(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{DlQD:function(e,t,n){e.exports=function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,n){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=function(e,n){if(e){if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?t(e,n):void 0}}(e))||n&&e&&"number"==typeof e.length){i&&(e=i);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(i=e[Symbol.iterator]()).next.bind(i)}var i=function(e){var t={exports:{}};return function(e){function t(){return{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}e.exports={defaults:{baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1},getDefaults:t,changeDefaults:function(t){e.exports.defaults=t}}}(t),t.exports}(),r=/[&<>"']/,s=/[&<>"']/g,o=/[<>"']|&(?!#?\w+;)/,c=/[<>"']|&(?!#?\w+;)/g,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},l=function(e){return a[e]},u=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/gi;function d(e){return e.replace(u,(function(e,t){return"colon"===(t=t.toLowerCase())?":":"#"===t.charAt(0)?"x"===t.charAt(1)?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""}))}var p=/(^|[^\[])\^/g,h=/[^\w:]/g,f=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,b={},g=/^[^:]+:\/*[^/]*$/,m=/^([^:]+:)[\s\S]*$/,v=/^([^:]+:\/*[^/]*)[\s\S]*$/;function x(e,t,n){var i=e.length;if(0===i)return"";for(var r=0;r<i;){var s=e.charAt(i-r-1);if(s!==t||n){if(s===t||!n)break;r++}else r++}return e.substr(0,i-r)}var S=function(e,t){if(t){if(r.test(e))return e.replace(s,l)}else if(o.test(e))return e.replace(c,l);return e},k=d,C=function(e){for(var t,n,i=1;i<arguments.length;i++)for(n in t=arguments[i])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},y=i.defaults,I=x,R=function(e,t){var n=e.replace(/\|/g,(function(e,t,n){for(var i=!1,r=t;--r>=0&&"\\"===n[r];)i=!i;return i?"|":" |"})).split(/ \|/),i=0;if(n.length>t)n.splice(t);else for(;n.length<t;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n},w=S;function _(e,t,n){var i=t.href,r=t.title?w(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");return"!"!==e[0].charAt(0)?{type:"link",raw:n,href:i,title:r,text:s}:{type:"image",raw:n,href:i,title:r,text:w(s)}}var E=function(){function e(e){this.options=e||y}var t=e.prototype;return t.space=function(e){var t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:"\n"}},t.code=function(e,t){var n=this.rules.block.code.exec(e);if(n){var i=t[t.length-1];if(i&&"paragraph"===i.type)return{raw:n[0],text:n[0].trimRight()};var r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:I(r,"\n")}}},t.fences=function(e){var t=this.rules.block.fences.exec(e);if(t){var n=t[0],i=function(e,t){var n=e.match(/^(\s+)(?:```)/);if(null===n)return t;var i=n[1];return t.split("\n").map((function(e){var t=e.match(/^\s+/);return null===t?e:t[0].length>=i.length?e.slice(i.length):e})).join("\n")}(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:i}}},t.heading=function(e){var t=this.rules.block.heading.exec(e);if(t){var n=t[2].trim();if(/#$/.test(n)){var i=I(n,"#");this.options.pedantic?n=i.trim():i&&!/ $/.test(i)||(n=i.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n}}},t.nptable=function(e){var t=this.rules.block.nptable.exec(e);if(t){var n={type:"table",header:R(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[],raw:t[0]};if(n.header.length===n.align.length){var i,r=n.align.length;for(i=0;i<r;i++)n.align[i]=/^ *-+: *$/.test(n.align[i])?"right":/^ *:-+: *$/.test(n.align[i])?"center":/^ *:-+ *$/.test(n.align[i])?"left":null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=R(n.cells[i],n.header.length);return n}}},t.hr=function(e){var t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}},t.blockquote=function(e){var t=this.rules.block.blockquote.exec(e);if(t){var n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}},t.list=function(e){var t=this.rules.block.list.exec(e);if(t){var n,i,r,s,o,c,a,l,u=t[0],d=t[2],p=d.length>1,h={type:"list",raw:u,ordered:p,start:p?+d.slice(0,-1):"",loose:!1,items:[]},f=t[0].match(this.rules.block.item),b=!1,g=f.length;r=this.rules.block.listItemStart.exec(f[0]);for(var m=0;m<g;m++){if(u=n=f[m],m!==g-1){if(s=this.rules.block.listItemStart.exec(f[m+1]),this.options.pedantic?s[1].length>r[1].length:s[1].length>r[0].length||s[1].length>3){f.splice(m,2,f[m]+"\n"+f[m+1]),m--,g--;continue}(!this.options.pedantic||this.options.smartLists?s[2][s[2].length-1]!==d[d.length-1]:p===(1===s[2].length))&&(o=f.slice(m+1).join("\n"),h.raw=h.raw.substring(0,h.raw.length-o.length),m=g-1),r=s}i=n.length,~(n=n.replace(/^ *([*+-]|\d+[.)]) ?/,"")).indexOf("\n ")&&(i-=n.length,n=n.replace(this.options.pedantic?/^ {1,4}/gm:new RegExp("^ {1,"+i+"}","gm"),"")),c=b||/\n\n(?!\s*$)/.test(n),m!==g-1&&(b="\n"===n.charAt(n.length-1),c||(c=b)),c&&(h.loose=!0),this.options.gfm&&(l=void 0,(a=/^\[[ xX]\] /.test(n))&&(l=" "!==n[1],n=n.replace(/^\[[ xX]\] +/,""))),h.items.push({type:"list_item",raw:u,task:a,checked:l,loose:c,text:n})}return h}},t.html=function(e){var t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&("pre"===t[1]||"script"===t[1]||"style"===t[1]),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):w(t[0]):t[0]}},t.def=function(e){var t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}},t.table=function(e){var t=this.rules.block.table.exec(e);if(t){var n={type:"table",header:R(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split("\n"):[]};if(n.header.length===n.align.length){n.raw=t[0];var i,r=n.align.length;for(i=0;i<r;i++)n.align[i]=/^ *-+: *$/.test(n.align[i])?"right":/^ *:-+: *$/.test(n.align[i])?"center":/^ *:-+ *$/.test(n.align[i])?"left":null;for(r=n.cells.length,i=0;i<r;i++)n.cells[i]=R(n.cells[i].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}},t.lheading=function(e){var t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1]}},t.paragraph=function(e){var t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:"\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1]}},t.text=function(e,t){var n=this.rules.block.text.exec(e);if(n){var i=t[t.length-1];return i&&"text"===i.type?{raw:n[0],text:n[0]}:{type:"text",raw:n[0],text:n[0]}}},t.escape=function(e){var t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:w(t[1])}},t.tag=function(e,t,n){var i=this.rules.inline.tag.exec(e);if(i)return!t&&/^<a /i.test(i[0])?t=!0:t&&/^<\/a>/i.test(i[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(i[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(i[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:i[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(i[0]):w(i[0]):i[0]}},t.link=function(e){var t=this.rules.inline.link.exec(e);if(t){var n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;var i=I(n.slice(0,-1),"\\");if((n.length-i.length)%2==0)return}else{var r=function(e,t){if(-1===e.indexOf(t[1]))return-1;for(var n=e.length,i=0,r=0;r<n;r++)if("\\"===e[r])r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&--i<0)return r;return-1}(t[2],"()");if(r>-1){var s=(0===t[0].indexOf("!")?5:4)+t[1].length+r;t[2]=t[2].substring(0,r),t[0]=t[0].substring(0,s).trim(),t[3]=""}}var o=t[2],c="";if(this.options.pedantic){var a=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(o);a&&(o=a[1],c=a[3])}else c=t[3]?t[3].slice(1,-1):"";return o=o.trim(),/^</.test(o)&&(o=this.options.pedantic&&!/>$/.test(n)?o.slice(1):o.slice(1,-1)),_(t,{href:o?o.replace(this.rules.inline._escapes,"$1"):o,title:c?c.replace(this.rules.inline._escapes,"$1"):c},t[0])}},t.reflink=function(e,t){var n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){var i=(n[2]||n[1]).replace(/\s+/g," ");if(!(i=t[i.toLowerCase()])||!i.href){var r=n[0].charAt(0);return{type:"text",raw:r,text:r}}return _(n,i,n[0])}},t.strong=function(e,t,n){void 0===n&&(n="");var i=this.rules.inline.strong.start.exec(e);if(i&&(!i[1]||i[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var r,s="**"===i[0]?this.rules.inline.strong.endAst:this.rules.inline.strong.endUnd;for(s.lastIndex=0;null!=(i=s.exec(t));)if(r=this.rules.inline.strong.middle.exec(t.slice(0,i.index+3)))return{type:"strong",raw:e.slice(0,r[0].length),text:e.slice(2,r[0].length-2)}}},t.em=function(e,t,n){void 0===n&&(n="");var i=this.rules.inline.em.start.exec(e);if(i&&(!i[1]||i[1]&&(""===n||this.rules.inline.punctuation.exec(n)))){t=t.slice(-1*e.length);var r,s="*"===i[0]?this.rules.inline.em.endAst:this.rules.inline.em.endUnd;for(s.lastIndex=0;null!=(i=s.exec(t));)if(r=this.rules.inline.em.middle.exec(t.slice(0,i.index+2)))return{type:"em",raw:e.slice(0,r[0].length),text:e.slice(1,r[0].length-1)}}},t.codespan=function(e){var t=this.rules.inline.code.exec(e);if(t){var n=t[2].replace(/\n/g," "),i=/[^ ]/.test(n),r=/^ /.test(n)&&/ $/.test(n);return i&&r&&(n=n.substring(1,n.length-1)),n=w(n,!0),{type:"codespan",raw:t[0],text:n}}},t.br=function(e){var t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}},t.del=function(e){var t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}},t.autolink=function(e,t){var n,i,r=this.rules.inline.autolink.exec(e);if(r)return i="@"===r[2]?"mailto:"+(n=w(this.options.mangle?t(r[1]):r[1])):n=w(r[1]),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}},t.url=function(e,t){var n;if(n=this.rules.inline.url.exec(e)){var i,r;if("@"===n[2])r="mailto:"+(i=w(this.options.mangle?t(n[0]):n[0]));else{var s;do{s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0]}while(s!==n[0]);i=w(n[0]),r="www."===n[1]?"http://"+i:i}return{type:"link",raw:n[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}},t.inlineText=function(e,t,n){var i,r=this.rules.inline.text.exec(e);if(r)return i=t?this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):w(r[0]):r[0]:w(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:i}},e}(),O={exec:function(){}},T=function(e,t){e=e.source||e,t=t||"";var n={replace:function(t,i){return i=(i=i.source||i).replace(p,"$1"),e=e.replace(t,i),n},getRegex:function(){return new RegExp(e,t)}};return n},F=C,P={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:\\n{2,}|$)|<(?!script|pre|style)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$)|</(?!script|pre|style)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:\\n{2,}|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:O,table:O,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/,_label:/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/,_title:/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/};P.def=T(P.def).replace("label",P._label).replace("title",P._title).getRegex(),P.bullet=/(?:[*+-]|\d{1,9}[.)])/,P.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/,P.item=T(P.item,"gm").replace(/bull/g,P.bullet).getRegex(),P.listItemStart=T(/^( *)(bull)/).replace("bull",P.bullet).getRegex(),P.list=T(P.list).replace(/bull/g,P.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+P.def.source+")").getRegex(),P._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",P._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,P.html=T(P.html,"i").replace("comment",P._comment).replace("tag",P._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),P.paragraph=T(P._paragraph).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",P._tag).getRegex(),P.blockquote=T(P.blockquote).replace("paragraph",P.paragraph).getRegex(),P.normal=F({},P),P.gfm=F({},P.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),P.gfm.nptable=T(P.gfm.nptable).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",P._tag).getRegex(),P.gfm.table=T(P.gfm.table).replace("hr",P.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|!--)").replace("tag",P._tag).getRegex(),P.pedantic=F({},P.normal,{html:T("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",P._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:O,paragraph:T(P.normal._paragraph).replace("hr",P.hr).replace("heading"," *#{1,6} *[^\n]").replace("lheading",P.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});var M={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:O,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",strong:{start:/^(?:(\*\*(?=[*punctuation]))|\*\*)(?![\s])|__/,middle:/^\*\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*\*$|^__(?![\s])((?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?)__$/,endAst:/[^punctuation\s]\*\*(?!\*)|[punctuation]\*\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]__(?!_)(?:(?=[punctuation*\s])|$)/},em:{start:/^(?:(\*(?=[punctuation]))|\*)(?![*\s])|_/,middle:/^\*(?:(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)|\*(?:(?!overlapSkip)(?:[^*]|\\\*)|overlapSkip)*?\*)+?\*$|^_(?![_\s])(?:(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)|_(?:(?!overlapSkip)(?:[^_]|\\_)|overlapSkip)*?_)+?_$/,endAst:/[^punctuation\s]\*(?!\*)|[punctuation]\*(?!\*)(?:(?=[punctuation_\s]|$))/,endUnd:/[^\s]_(?!_)(?:(?=[punctuation*\s])|$)/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:O,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\s*punctuation])/,_punctuation:"!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~"};M.punctuation=T(M.punctuation).replace(/punctuation/g,M._punctuation).getRegex(),M._blockSkip="\\[[^\\]]*?\\]\\([^\\)]*?\\)|`[^`]*?`|<[^>]*?>",M._overlapSkip="__[^_]*?__|\\*\\*\\[^\\*\\]*?\\*\\*",M._comment=T(P._comment).replace("(?:--\x3e|$)","--\x3e").getRegex(),M.em.start=T(M.em.start).replace(/punctuation/g,M._punctuation).getRegex(),M.em.middle=T(M.em.middle).replace(/punctuation/g,M._punctuation).replace(/overlapSkip/g,M._overlapSkip).getRegex(),M.em.endAst=T(M.em.endAst,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.em.endUnd=T(M.em.endUnd,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.strong.start=T(M.strong.start).replace(/punctuation/g,M._punctuation).getRegex(),M.strong.middle=T(M.strong.middle).replace(/punctuation/g,M._punctuation).replace(/overlapSkip/g,M._overlapSkip).getRegex(),M.strong.endAst=T(M.strong.endAst,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.strong.endUnd=T(M.strong.endUnd,"g").replace(/punctuation/g,M._punctuation).getRegex(),M.blockSkip=T(M._blockSkip,"g").getRegex(),M.overlapSkip=T(M._overlapSkip,"g").getRegex(),M._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,M._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,M._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,M.autolink=T(M.autolink).replace("scheme",M._scheme).replace("email",M._email).getRegex(),M._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,M.tag=T(M.tag).replace("comment",M._comment).replace("attribute",M._attribute).getRegex(),M._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,M._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,M._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,M.link=T(M.link).replace("label",M._label).replace("href",M._href).replace("title",M._title).getRegex(),M.reflink=T(M.reflink).replace("label",M._label).getRegex(),M.reflinkSearch=T(M.reflinkSearch,"g").replace("reflink",M.reflink).replace("nolink",M.nolink).getRegex(),M.normal=F({},M),M.pedantic=F({},M.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:T(/^!?\[(label)\]\((.*?)\)/).replace("label",M._label).getRegex(),reflink:T(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",M._label).getRegex()}),M.gfm=F({},M.normal,{escape:T(M.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*~]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@))/}),M.gfm.url=T(M.gfm.url,"i").replace("email",M.gfm._extended_email).getRegex(),M.breaks=F({},M.gfm,{br:T(M.br).replace("{2,}","*").getRegex(),text:T(M.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var B={block:P,inline:M},$=i.defaults,N=B.block,z=B.inline,A=function(e,t){if(t<1)return"";for(var n="";t>1;)1&t&&(n+=e),t>>=1,e+=e;return n+e};function U(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201c").replace(/"/g,"\u201d").replace(/\.{3}/g,"\u2026")}function D(e){var t,n,i="",r=e.length;for(t=0;t<r;t++)n=e.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),i+="&#"+n+";";return i}var j=function(){function t(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||$,this.options.tokenizer=this.options.tokenizer||new E,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;var t={block:N.normal,inline:z.normal};this.options.pedantic?(t.block=N.pedantic,t.inline=z.pedantic):this.options.gfm&&(t.block=N.gfm,t.inline=this.options.breaks?z.breaks:z.gfm),this.tokenizer.rules=t}t.lex=function(e,n){return new t(n).lex(e)},t.lexInline=function(e,n){return new t(n).inlineTokens(e)};var n,i,r=t.prototype;return r.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens},r.blockTokens=function(e,t,n){var i,r,s,o;for(void 0===t&&(t=[]),void 0===n&&(n=!0),this.options.pedantic&&(e=e.replace(/^ +$/gm,""));e;)if(i=this.tokenizer.space(e))e=e.substring(i.raw.length),i.type&&t.push(i);else if(i=this.tokenizer.code(e,t))e=e.substring(i.raw.length),i.type?t.push(i):((o=t[t.length-1]).raw+="\n"+i.raw,o.text+="\n"+i.text);else if(i=this.tokenizer.fences(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.heading(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.nptable(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.hr(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.blockquote(e))e=e.substring(i.raw.length),i.tokens=this.blockTokens(i.text,[],n),t.push(i);else if(i=this.tokenizer.list(e)){for(e=e.substring(i.raw.length),s=i.items.length,r=0;r<s;r++)i.items[r].tokens=this.blockTokens(i.items[r].text,[],!1);t.push(i)}else if(i=this.tokenizer.html(e))e=e.substring(i.raw.length),t.push(i);else if(n&&(i=this.tokenizer.def(e)))e=e.substring(i.raw.length),this.tokens.links[i.tag]||(this.tokens.links[i.tag]={href:i.href,title:i.title});else if(i=this.tokenizer.table(e))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.lheading(e))e=e.substring(i.raw.length),t.push(i);else if(n&&(i=this.tokenizer.paragraph(e)))e=e.substring(i.raw.length),t.push(i);else if(i=this.tokenizer.text(e,t))e=e.substring(i.raw.length),i.type?t.push(i):((o=t[t.length-1]).raw+="\n"+i.raw,o.text+="\n"+i.text);else if(e){var c="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(c);break}throw new Error(c)}return t},r.inline=function(e){var t,n,i,r,s,o,c=e.length;for(t=0;t<c;t++)switch((o=e[t]).type){case"paragraph":case"text":case"heading":o.tokens=[],this.inlineTokens(o.text,o.tokens);break;case"table":for(o.tokens={header:[],cells:[]},r=o.header.length,n=0;n<r;n++)o.tokens.header[n]=[],this.inlineTokens(o.header[n],o.tokens.header[n]);for(r=o.cells.length,n=0;n<r;n++)for(s=o.cells[n],o.tokens.cells[n]=[],i=0;i<s.length;i++)o.tokens.cells[n][i]=[],this.inlineTokens(s[i],o.tokens.cells[n][i]);break;case"blockquote":this.inline(o.tokens);break;case"list":for(r=o.items.length,n=0;n<r;n++)this.inline(o.items[n].tokens)}return e},r.inlineTokens=function(e,t,n,i){var r;void 0===t&&(t=[]),void 0===n&&(n=!1),void 0===i&&(i=!1);var s,o,c,a=e;if(this.tokens.links){var l=Object.keys(this.tokens.links);if(l.length>0)for(;null!=(s=this.tokenizer.rules.inline.reflinkSearch.exec(a));)l.includes(s[0].slice(s[0].lastIndexOf("[")+1,-1))&&(a=a.slice(0,s.index)+"["+A("a",s[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;null!=(s=this.tokenizer.rules.inline.blockSkip.exec(a));)a=a.slice(0,s.index)+"["+A("a",s[0].length-2)+"]"+a.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;e;)if(o||(c=""),o=!1,r=this.tokenizer.escape(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.tag(e,n,i))e=e.substring(r.raw.length),n=r.inLink,i=r.inRawBlock,t.push(r);else if(r=this.tokenizer.link(e))e=e.substring(r.raw.length),"link"===r.type&&(r.tokens=this.inlineTokens(r.text,[],!0,i)),t.push(r);else if(r=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(r.raw.length),"link"===r.type&&(r.tokens=this.inlineTokens(r.text,[],!0,i)),t.push(r);else if(r=this.tokenizer.strong(e,a,c))e=e.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],n,i),t.push(r);else if(r=this.tokenizer.em(e,a,c))e=e.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],n,i),t.push(r);else if(r=this.tokenizer.codespan(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.br(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.del(e))e=e.substring(r.raw.length),r.tokens=this.inlineTokens(r.text,[],n,i),t.push(r);else if(r=this.tokenizer.autolink(e,D))e=e.substring(r.raw.length),t.push(r);else if(n||!(r=this.tokenizer.url(e,D))){if(r=this.tokenizer.inlineText(e,i,U))e=e.substring(r.raw.length),c=r.raw.slice(-1),o=!0,t.push(r);else if(e){var u="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(u);break}throw new Error(u)}}else e=e.substring(r.raw.length),t.push(r);return t},n=t,i=[{key:"rules",get:function(){return{block:N,inline:z}}}],null&&e(n.prototype,null),i&&e(n,i),t}(),L=i.defaults,G=function(e,t,n){if(e){var i;try{i=decodeURIComponent(d(n)).replace(h,"").toLowerCase()}catch(r){return null}if(0===i.indexOf("javascript:")||0===i.indexOf("vbscript:")||0===i.indexOf("data:"))return null}t&&!f.test(n)&&(n=function(e,t){b[" "+e]||(b[" "+e]=g.test(e)?e+"/":x(e,"/",!0));var n=-1===(e=b[" "+e]).indexOf(":");return"//"===t.substring(0,2)?n?t:e.replace(m,"$1")+t:"/"===t.charAt(0)?n?t:e.replace(v,"$1")+t:e+t}(t,n));try{n=encodeURI(n).replace(/%25/g,"%")}catch(r){return null}return n},H=S,q=function(){function e(e){this.options=e||L}var t=e.prototype;return t.code=function(e,t,n){var i=(t||"").match(/\S*/)[0];if(this.options.highlight){var r=this.options.highlight(e,i);null!=r&&r!==e&&(n=!0,e=r)}return e=e.replace(/\n$/,"")+"\n",i?'<pre><code class="'+this.options.langPrefix+H(i,!0)+'">'+(n?e:H(e,!0))+"</code></pre>\n":"<pre><code>"+(n?e:H(e,!0))+"</code></pre>\n"},t.blockquote=function(e){return"<blockquote>\n"+e+"</blockquote>\n"},t.html=function(e){return e},t.heading=function(e,t,n,i){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+i.slug(n)+'">'+e+"</h"+t+">\n":"<h"+t+">"+e+"</h"+t+">\n"},t.hr=function(){return this.options.xhtml?"<hr/>\n":"<hr>\n"},t.list=function(e,t,n){var i=t?"ol":"ul";return"<"+i+(t&&1!==n?' start="'+n+'"':"")+">\n"+e+"</"+i+">\n"},t.listitem=function(e){return"<li>"+e+"</li>\n"},t.checkbox=function(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "},t.paragraph=function(e){return"<p>"+e+"</p>\n"},t.table=function(e,t){return t&&(t="<tbody>"+t+"</tbody>"),"<table>\n<thead>\n"+e+"</thead>\n"+t+"</table>\n"},t.tablerow=function(e){return"<tr>\n"+e+"</tr>\n"},t.tablecell=function(e,t){var n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+">\n"},t.strong=function(e){return"<strong>"+e+"</strong>"},t.em=function(e){return"<em>"+e+"</em>"},t.codespan=function(e){return"<code>"+e+"</code>"},t.br=function(){return this.options.xhtml?"<br/>":"<br>"},t.del=function(e){return"<del>"+e+"</del>"},t.link=function(e,t,n){if(null===(e=G(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<a href="'+H(e)+'"';return t&&(i+=' title="'+t+'"'),i+">"+n+"</a>"},t.image=function(e,t,n){if(null===(e=G(this.options.sanitize,this.options.baseUrl,e)))return n;var i='<img src="'+e+'" alt="'+n+'"';return t&&(i+=' title="'+t+'"'),i+(this.options.xhtml?"/>":">")},t.text=function(e){return e},e}(),K=function(){function e(){}var t=e.prototype;return t.strong=function(e){return e},t.em=function(e){return e},t.codespan=function(e){return e},t.del=function(e){return e},t.html=function(e){return e},t.text=function(e){return e},t.link=function(e,t,n){return""+n},t.image=function(e,t,n){return""+n},t.br=function(){return""},e}(),J=function(){function e(){this.seen={}}var t=e.prototype;return t.serialize=function(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/gi,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")},t.getNextSafeSlug=function(e,t){var n=e,i=0;if(this.seen.hasOwnProperty(n)){i=this.seen[e];do{n=e+"-"+ ++i}while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=i,this.seen[n]=0),n},t.slug=function(e,t){void 0===t&&(t={});var n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)},e}(),Q=i.defaults,V=k,W=function(){function e(e){this.options=e||Q,this.options.renderer=this.options.renderer||new q,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new K,this.slugger=new J}e.parse=function(t,n){return new e(n).parse(t)},e.parseInline=function(t,n){return new e(n).parseInline(t)};var t=e.prototype;return t.parse=function(e,t){void 0===t&&(t=!0);var n,i,r,s,o,c,a,l,u,d,p,h,f,b,g,m,v,x,S="",k=e.length;for(n=0;n<k;n++)switch((d=e[n]).type){case"space":continue;case"hr":S+=this.renderer.hr();continue;case"heading":S+=this.renderer.heading(this.parseInline(d.tokens),d.depth,V(this.parseInline(d.tokens,this.textRenderer)),this.slugger);continue;case"code":S+=this.renderer.code(d.text,d.lang,d.escaped);continue;case"table":for(l="",a="",s=d.header.length,i=0;i<s;i++)a+=this.renderer.tablecell(this.parseInline(d.tokens.header[i]),{header:!0,align:d.align[i]});for(l+=this.renderer.tablerow(a),u="",s=d.cells.length,i=0;i<s;i++){for(a="",o=(c=d.tokens.cells[i]).length,r=0;r<o;r++)a+=this.renderer.tablecell(this.parseInline(c[r]),{header:!1,align:d.align[r]});u+=this.renderer.tablerow(a)}S+=this.renderer.table(l,u);continue;case"blockquote":u=this.parse(d.tokens),S+=this.renderer.blockquote(u);continue;case"list":for(p=d.ordered,h=d.start,f=d.loose,s=d.items.length,u="",i=0;i<s;i++)m=(g=d.items[i]).checked,v=g.task,b="",g.task&&(x=this.renderer.checkbox(m),f?g.tokens.length>0&&"text"===g.tokens[0].type?(g.tokens[0].text=x+" "+g.tokens[0].text,g.tokens[0].tokens&&g.tokens[0].tokens.length>0&&"text"===g.tokens[0].tokens[0].type&&(g.tokens[0].tokens[0].text=x+" "+g.tokens[0].tokens[0].text)):g.tokens.unshift({type:"text",text:x}):b+=x),b+=this.parse(g.tokens,f),u+=this.renderer.listitem(b,v,m);S+=this.renderer.list(u,p,h);continue;case"html":S+=this.renderer.html(d.text);continue;case"paragraph":S+=this.renderer.paragraph(this.parseInline(d.tokens));continue;case"text":for(u=d.tokens?this.parseInline(d.tokens):d.text;n+1<k&&"text"===e[n+1].type;)u+="\n"+((d=e[++n]).tokens?this.parseInline(d.tokens):d.text);S+=t?this.renderer.paragraph(u):u;continue;default:var C='Token with "'+d.type+'" type was not found.';if(this.options.silent)return void console.error(C);throw new Error(C)}return S},t.parseInline=function(e,t){t=t||this.renderer;var n,i,r="",s=e.length;for(n=0;n<s;n++)switch((i=e[n]).type){case"escape":r+=t.text(i.text);break;case"html":r+=t.html(i.text);break;case"link":r+=t.link(i.href,i.title,this.parseInline(i.tokens,t));break;case"image":r+=t.image(i.href,i.title,i.text);break;case"strong":r+=t.strong(this.parseInline(i.tokens,t));break;case"em":r+=t.em(this.parseInline(i.tokens,t));break;case"codespan":r+=t.codespan(i.text);break;case"br":r+=t.br();break;case"del":r+=t.del(this.parseInline(i.tokens,t));break;case"text":r+=t.text(i.text);break;default:var o='Token with "'+i.type+'" type was not found.';if(this.options.silent)return void console.error(o);throw new Error(o)}return r},e}(),Z=C,X=function(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")},Y=S,ee=i.getDefaults,te=i.changeDefaults,ne=i.defaults;function ie(e,t,n){if(null==e)throw new Error("marked(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if("function"==typeof t&&(n=t,t=null),t=Z({},ie.defaults,t||{}),X(t),n){var i,r=t.highlight;try{i=j.lex(e,t)}catch(a){return n(a)}var s=function(e){var s;if(!e)try{s=W.parse(i,t)}catch(a){e=a}return t.highlight=r,e?n(e):n(null,s)};if(!r||r.length<3)return s();if(delete t.highlight,!i.length)return s();var o=0;return ie.walkTokens(i,(function(e){"code"===e.type&&(o++,setTimeout((function(){r(e.text,e.lang,(function(t,n){if(t)return s(t);null!=n&&n!==e.text&&(e.text=n,e.escaped=!0),0==--o&&s()}))}),0))})),void(0===o&&s())}try{var c=j.lex(e,t);return t.walkTokens&&ie.walkTokens(c,t.walkTokens),W.parse(c,t)}catch(a){if(a.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Y(a.message+"",!0)+"</pre>";throw a}}return ie.options=ie.setOptions=function(e){return Z(ie.defaults,e),te(ie.defaults),ie},ie.getDefaults=ee,ie.defaults=ne,ie.use=function(e){var t=Z({},e);if(e.renderer&&function(){var n=ie.defaults.renderer||new q,i=function(t){var i=n[t];n[t]=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var c=e.renderer[t].apply(n,s);return!1===c&&(c=i.apply(n,s)),c}};for(var r in e.renderer)i(r);t.renderer=n}(),e.tokenizer&&function(){var n=ie.defaults.tokenizer||new E,i=function(t){var i=n[t];n[t]=function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];var c=e.tokenizer[t].apply(n,s);return!1===c&&(c=i.apply(n,s)),c}};for(var r in e.tokenizer)i(r);t.tokenizer=n}(),e.walkTokens){var n=ie.defaults.walkTokens;t.walkTokens=function(t){e.walkTokens(t),n&&n(t)}}ie.setOptions(t)},ie.walkTokens=function(e,t){for(var i,r=n(e);!(i=r()).done;){var s=i.value;switch(t(s),s.type){case"table":for(var o,c=n(s.tokens.header);!(o=c()).done;)ie.walkTokens(o.value,t);for(var a,l=n(s.tokens.cells);!(a=l()).done;)for(var u,d=n(a.value);!(u=d()).done;)ie.walkTokens(u.value,t);break;case"list":ie.walkTokens(s.items,t);break;default:s.tokens&&ie.walkTokens(s.tokens,t)}}},ie.parseInline=function(e,t){if(null==e)throw new Error("marked.parseInline(): input parameter is undefined or null");if("string"!=typeof e)throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");t=Z({},ie.defaults,t||{}),X(t);try{var n=j.lexInline(e,t);return t.walkTokens&&ie.walkTokens(n,t.walkTokens),W.parseInline(n,t)}catch(i){if(i.message+="\nPlease report this to https://github.com/markedjs/marked.",t.silent)return"<p>An error occurred:</p><pre>"+Y(i.message+"",!0)+"</pre>";throw i}},ie.Parser=W,ie.parser=W.parse,ie.Renderer=q,ie.TextRenderer=K,ie.Lexer=j,ie.lexer=j.lex,ie.Tokenizer=E,ie.Slugger=J,ie.parse=ie,ie}()},peQb:function(e,t,n){"use strict";n.r(t),n.d(t,"EditorModule",(function(){return Jn}));var i=n("ofXK"),r=n("tyNb"),s=n("fXoL"),o=n("jtHE"),c=n("GV7L");class a{static getName(e){var t;const n=e.split(".").pop(),i=a.list().find(e=>e.extension.includes(n));return null!==(t=null==i?void 0:i.name)&&void 0!==t?t:"text"}static list(){return[{extension:["css"],name:"css"},{extension:["html","htm","shtml","xhtml","mdoc","jsp","asp","aspx","jshtm"],name:"html"},{extension:["js","es6","jsx","mjs"],name:"javascript"},{extension:["json"],name:"json"},{extension:["less"],name:"less"},{extension:["md","markdown","mdown","mkdn","mkd","mdwn","mdtxt","mdtext"],name:"markdown"},{extension:["scss"],name:"scss"},{extension:["ts","tsx"],name:"typescript"}]}}var l=n("eIep"),u=n("/hV/");let d=(()=>{class e{constructor(e){this.bluService=e,this.state={command:null,navSection:"file",contentSection:"template",itemSection:"templates",executeResult:null,inputs:{},rootDestination:"./",selectedContext:null,itemState:{},generatedFileState:{selectedFile:null}},this.state$=new o.a(1),this.templateProperties$=new o.a(1),this.previewProperties$=new o.a(1)}preview(e,t,n){this.state.command={itemId:e,command:"preview"},this.state.inputs=t,this.state.rootDestination=n,this._preview().subscribe(e=>{this.updatePreviewState(e),this.selectItem(e.executeContext)})}updatePreviewState(e){this.state.executeResult=e,this.updatePreviewEditor(),this.broadcastState()}reRender(){this._preview().subscribe(e=>this.updatePreviewState(e))}_preview(){return this.bluService.preview(this.state.command.itemId,this.state.inputs,this.state.rootDestination)}selectInputs(){this.state.navSection="inputs",this.state.selectedContext=null,this.broadcastState()}selectErrors(){this.state.navSection="errors",this.state.selectedContext=null,this.broadcastState()}selectGeneratedFile(e,t,n){this.state.generatedFileState.selectedFile=t.destination,this.selectFile(e,t,n)}selectFile(e,t,n){this.state.navSection="file",this.state.contentSection="template",this.state.selectedContext={itemId:e,file:t,itemLabel:n},this.state.generatedFileState.selectedFile=t.destination,this.templateProperties$.next({renderContext:t.renderContext,text:t.text,initialText:t.text,errors:this.extractParseErrors(t.errors)}),this.updatePreviewProperties(t),this.broadcastState()}extractParseErrors(e){return(null!=e?e:[]).filter(e=>e.type===c.a.Execute.ErrorType.parseError).map(e=>e.data)}selectItem(e){this.state.navSection="file",this.state.contentSection="config";const t=e.item;this.state.selectedContext={itemId:t.id,itemLabel:`${t.parent.name}.${t.name}`,executeContext:e},this.broadcastState()}selectItemSection(e){this.state.itemSection=e,this.broadcastState()}updatePreviewEditor(){var e,t,n,i;const r=this.state.executeResult.findContextByItemId(null===(t=null===(e=this.state.selectedContext)||void 0===e?void 0:e.executeContext)||void 0===t?void 0:t.item.id);if(r&&(this.state.selectedContext.executeContext=r),null===(i=null===(n=this.state)||void 0===n?void 0:n.selectedContext)||void 0===i?void 0:i.file){const e=this.state.executeResult.findFileByAbsolutePath(this.state.selectedContext.file.absolutePath);if(e){this.updatePreviewProperties(e);const t=this.extractParseErrors(e.errors);this.templateProperties$.next({errors:t,renderContext:e.renderContext})}}}updatePreviewProperties(e){this.previewProperties$.next({language:a.getName(e.filename),text:e.renderedText})}saveFile(e){var t,n,i;const r=null===(i=null===(n=null===(t=this.state)||void 0===t?void 0:t.selectedContext)||void 0===n?void 0:n.file)||void 0===i?void 0:i.absolutePath;r&&this.bluService.saveFile(r,e).pipe(Object(l.a)(e=>this._preview())).subscribe(e=>this.updatePreviewState(e))}updateUserInputs(e){this.state.inputs=e,this._preview().subscribe(e=>this.updatePreviewState(e))}broadcastState(){this.state$.next(this.state)}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(u.a))},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac}),e})();var p=n("thzI"),h=n("i4al"),f=n("quSY"),b=n("Qu3c"),g=n("0IaG"),m=n("3Pt+"),v=n("aSHc"),x=n("kmnG"),S=n("qFsG"),k=n("bTqV");function C(e,t){1&e&&(s.Sb(0,"mat-error"),s.Ec(1,"File cannot be blank"),s.Rb())}function y(e,t){1&e&&(s.Sb(0,"mat-error"),s.Ec(1,'Characters not allowed: \\ / : * ? " < > |'),s.Rb())}function I(e,t){if(1&e&&(s.Sb(0,"div",9),s.Nb(1,"i",10),s.Ec(2),s.Rb()),2&e){const e=s.ec();s.Bb(2),s.Gc(" Error: ",e.errorMessage," ")}}function R(e,t){1&e&&(s.Sb(0,"div",11),s.Nb(1,"i",12),s.Ec(2," Updated "),s.Rb())}function w(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"button",13),s.ac("click",(function(){return s.sc(e),s.ec().close(!0)})),s.Ec(2,"Close"),s.Rb(),s.Pb()}}function _(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"button",13),s.ac("click",(function(){return s.sc(e),s.ec().close(!1)})),s.Ec(2,"Cancel"),s.Rb(),s.Sb(3,"button",14),s.ac("click",(function(){return s.sc(e),s.ec().rename()})),s.Ec(4,"Rename"),s.Rb(),s.Pb()}if(2&e){const e=s.ec();s.Bb(3),s.kc("disabled",e.form.invalid||e.currentState!==e.actionState.IDLE)}}let E=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.bluService=t,this.data=n,this.dialogRef=i,this.currentState=v.a.IDLE,this.actionState=v.a,this.form=this.fb.group({filename:[n.file.filename,[m.E.required]]})}ngOnInit(){this.currentState=v.a.IDLE,this.file=this.data.file,this.form.valueChanges.subscribe(e=>{this.currentState=v.a.IDLE})}ngOnDestroy(){this.currentState=v.a.IDLE,this.errorMessage=""}get f(){return this.form.controls}rename(){const e=this.form.value.filename;this.currentState=v.a.ACQUIRING,this.bluService.renameFile(this.file.absolutePath,e.trim()).subscribe(e=>{this.currentState=v.a.SUCCESS},e=>{var t,n;this.errorMessage=null!==(n=null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.message)&&void 0!==n?n:"Operation failed.",this.currentState=v.a.FAILED})}close(e){this.dialogRef.close({updated:e})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(m.f),s.Mb(u.a),s.Mb(g.a),s.Mb(g.h))},e.\u0275cmp=s.Gb({type:e,selectors:[["rename-file-dialog"]],decls:13,vars:8,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup","ngSubmit"],[1,"mat-form-field"],["placeholder","File Name","matInput","","formControlName","filename"],[4,"ngIf"],["class","pb-2 text-danger",4,"ngIf"],["class","pb-2 text-success",4,"ngIf"],["mat-dialog-actions","",3,"align"],[1,"pb-2","text-danger"],[1,"fa","fa-exclamation-triangle"],[1,"pb-2","text-success"],[1,"fa","fa-check"],["mat-button","",3,"click"],["mat-button","","type","submit",3,"disabled","click"]],template:function(e,t){1&e&&(s.Sb(0,"h1",0),s.Ec(1,"Rename File "),s.Rb(),s.Sb(2,"div",1),s.Sb(3,"form",2),s.ac("ngSubmit",(function(){return t.currentState===t.actionState.IDLE?t.rename():t.close(!0)})),s.Sb(4,"mat-form-field",3),s.Nb(5,"input",4),s.Cc(6,C,2,0,"mat-error",5),s.Cc(7,y,2,0,"mat-error",5),s.Rb(),s.Rb(),s.Cc(8,I,3,1,"div",6),s.Cc(9,R,3,0,"div",7),s.Rb(),s.Sb(10,"div",8),s.Cc(11,w,3,0,"ng-container",5),s.Cc(12,_,5,1,"ng-container",5),s.Rb()),2&e&&(s.Bb(3),s.kc("formGroup",t.form),s.Bb(3),s.kc("ngIf",null==t.f.filename||null==t.f.filename.errors?null:t.f.filename.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.filename||null==t.f.filename.errors?null:t.f.filename.errors.pattern),s.Bb(1),s.kc("ngIf",t.currentState===t.actionState.FAILED),s.Bb(1),s.kc("ngIf",t.currentState===t.actionState.SUCCESS),s.Bb(1),s.kc("align","end"),s.Bb(1),s.kc("ngIf",t.currentState===t.actionState.SUCCESS),s.Bb(1),s.kc("ngIf",t.currentState!==t.actionState.SUCCESS))},directives:[g.i,g.f,m.G,m.r,m.j,x.c,S.a,m.c,m.q,m.i,i.t,g.c,x.b,k.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var O=n("STbY"),T=n("FKr1"),F=n("8LU1"),P=n("LRne"),M=n("z6cu"),B=n("cp0P"),$=n("vkgz"),N=n("lJxs"),z=n("JIr8"),A=n("nYR2"),U=n("w1tV"),D=n("IzEk"),j=n("tk/3"),L=n("jhN1");const G=["*"];function H(e){return Error(`Unable to find icon with the name "${e}"`)}function q(e){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${e}".`)}function K(e){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${e}".`)}class J{constructor(e,t,n){this.url=e,this.svgText=t,this.options=n}}let Q=(()=>{class e{constructor(e,t,n,i){this._httpClient=e,this._sanitizer=t,this._errorHandler=i,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=n}addSvgIcon(e,t,n){return this.addSvgIconInNamespace("",e,t,n)}addSvgIconLiteral(e,t,n){return this.addSvgIconLiteralInNamespace("",e,t,n)}addSvgIconInNamespace(e,t,n,i){return this._addSvgIconConfig(e,t,new J(n,null,i))}addSvgIconLiteralInNamespace(e,t,n,i){const r=this._sanitizer.sanitize(s.J.HTML,n);if(!r)throw K(n);return this._addSvgIconConfig(e,t,new J("",r,i))}addSvgIconSet(e,t){return this.addSvgIconSetInNamespace("",e,t)}addSvgIconSetLiteral(e,t){return this.addSvgIconSetLiteralInNamespace("",e,t)}addSvgIconSetInNamespace(e,t,n){return this._addSvgIconSetConfig(e,new J(t,null,n))}addSvgIconSetLiteralInNamespace(e,t,n){const i=this._sanitizer.sanitize(s.J.HTML,t);if(!i)throw K(t);return this._addSvgIconSetConfig(e,new J("",i,n))}registerFontClassAlias(e,t=e){return this._fontCssClassesByAlias.set(e,t),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){const t=this._sanitizer.sanitize(s.J.RESOURCE_URL,e);if(!t)throw q(e);const n=this._cachedIconsByUrl.get(t);return n?Object(P.a)(V(n)):this._loadSvgIconFromConfig(new J(e,null)).pipe(Object($.a)(e=>this._cachedIconsByUrl.set(t,e)),Object(N.a)(e=>V(e)))}getNamedSvgIcon(e,t=""){const n=W(t,e),i=this._svgIconConfigs.get(n);if(i)return this._getSvgFromConfig(i);const r=this._iconSetConfigs.get(t);return r?this._getSvgFromIconSetConfigs(e,r):Object(M.a)(H(n))}ngOnDestroy(){this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?Object(P.a)(V(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Object(N.a)(e=>V(e)))}_getSvgFromIconSetConfigs(e,t){const n=this._extractIconWithNameFromAnySet(e,t);if(n)return Object(P.a)(n);const i=t.filter(e=>!e.svgText).map(e=>this._loadSvgIconSetFromConfig(e).pipe(Object(z.a)(t=>{const n=this._sanitizer.sanitize(s.J.RESOURCE_URL,e.url);return this._errorHandler.handleError(new Error(`Loading icon set URL: ${n} failed: ${t.message}`)),Object(P.a)(null)})));return Object(B.a)(i).pipe(Object(N.a)(()=>{const n=this._extractIconWithNameFromAnySet(e,t);if(!n)throw H(e);return n}))}_extractIconWithNameFromAnySet(e,t){for(let n=t.length-1;n>=0;n--){const i=t[n];if(i.svgText&&i.svgText.indexOf(e)>-1){const t=this._svgElementFromConfig(i),n=this._extractSvgIconFromSet(t,e,i.options);if(n)return n}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Object($.a)(t=>e.svgText=t),Object(N.a)(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?Object(P.a)(null):this._fetchIcon(e).pipe(Object($.a)(t=>e.svgText=t))}_extractSvgIconFromSet(e,t,n){const i=e.querySelector(`[id="${t}"]`);if(!i)return null;const r=i.cloneNode(!0);if(r.removeAttribute("id"),"svg"===r.nodeName.toLowerCase())return this._setSvgAttributes(r,n);if("symbol"===r.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(r),n);const s=this._svgElementFromString("<svg></svg>");return s.appendChild(r),this._setSvgAttributes(s,n)}_svgElementFromString(e){const t=this._document.createElement("DIV");t.innerHTML=e;const n=t.querySelector("svg");if(!n)throw Error("<svg> tag not found");return n}_toSvgElement(e){const t=this._svgElementFromString("<svg></svg>"),n=e.attributes;for(let i=0;i<n.length;i++){const{name:e,value:r}=n[i];"id"!==e&&t.setAttribute(e,r)}for(let i=0;i<e.childNodes.length;i++)e.childNodes[i].nodeType===this._document.ELEMENT_NODE&&t.appendChild(e.childNodes[i].cloneNode(!0));return t}_setSvgAttributes(e,t){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),t&&t.viewBox&&e.setAttribute("viewBox",t.viewBox),e}_fetchIcon(e){var t;const{url:n,options:i}=e,r=null!==(t=null==i?void 0:i.withCredentials)&&void 0!==t&&t;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");if(null==n)throw Error(`Cannot fetch icon from URL "${n}".`);const o=this._sanitizer.sanitize(s.J.RESOURCE_URL,n);if(!o)throw q(n);const c=this._inProgressUrlFetches.get(o);if(c)return c;const a=this._httpClient.get(o,{responseType:"text",withCredentials:r}).pipe(Object(A.a)(()=>this._inProgressUrlFetches.delete(o)),Object(U.a)());return this._inProgressUrlFetches.set(o,a),a}_addSvgIconConfig(e,t,n){return this._svgIconConfigs.set(W(e,t),n),this}_addSvgIconSetConfig(e,t){const n=this._iconSetConfigs.get(e);return n?n.push(t):this._iconSetConfigs.set(e,[t]),this}_svgElementFromConfig(e){if(!e.svgElement){const t=this._svgElementFromString(e.svgText);this._setSvgAttributes(t,e.options),e.svgElement=t}return e.svgElement}}return e.\u0275fac=function(t){return new(t||e)(s.Wb(j.a,8),s.Wb(L.b),s.Wb(i.e,8),s.Wb(s.n))},e.\u0275prov=Object(s.Ib)({factory:function(){return new e(Object(s.Wb)(j.a,8),Object(s.Wb)(L.b),Object(s.Wb)(i.e,8),Object(s.Wb)(s.n))},token:e,providedIn:"root"}),e})();function V(e){return e.cloneNode(!0)}function W(e,t){return e+":"+t}class Z{constructor(e){this._elementRef=e}}const X=Object(T.m)(Z),Y=new s.r("mat-icon-location",{providedIn:"root",factory:function(){const e=Object(s.W)(i.e),t=e?e.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}}),ee=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],te=ee.map(e=>`[${e}]`).join(", "),ne=/^url\(['"]?#(.*?)['"]?\)$/;let ie=(()=>{class e extends X{constructor(e,t,n,i,r){super(e),this._iconRegistry=t,this._location=i,this._errorHandler=r,this._inline=!1,this._currentIconFetch=f.a.EMPTY,n||e.nativeElement.setAttribute("aria-hidden","true")}get inline(){return this._inline}set inline(e){this._inline=Object(F.c)(e)}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){const t=this._cleanupFontValue(e);t!==this._fontSet&&(this._fontSet=t,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){const t=this._cleanupFontValue(e);t!==this._fontIcon&&(this._fontIcon=t,this._updateFontIconClasses())}_splitIconName(e){if(!e)return["",""];const t=e.split(":");switch(t.length){case 1:return["",t[0]];case 2:return t;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){const e=this._elementsWithExternalReferences;if(e&&e.size){const e=this._location.getPathname();e!==this._previousPath&&(this._previousPath=e,this._prependPathToReferences(e))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();const t=e.querySelectorAll("style");for(let i=0;i<t.length;i++)t[i].textContent+=" ";const n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){const e=this._elementRef.nativeElement;let t=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();t--;){const n=e.childNodes[t];1===n.nodeType&&"svg"!==n.nodeName.toLowerCase()||e.removeChild(n)}}_updateFontIconClasses(){if(!this._usingFontIcon())return;const e=this._elementRef.nativeElement,t=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();t!=this._previousFontSetClass&&(this._previousFontSetClass&&e.classList.remove(this._previousFontSetClass),t&&e.classList.add(t),this._previousFontSetClass=t),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return"string"==typeof e?e.trim().split(" ")[0]:e}_prependPathToReferences(e){const t=this._elementsWithExternalReferences;t&&t.forEach((t,n)=>{t.forEach(t=>{n.setAttribute(t.name,`url('${e}#${t.value}')`)})})}_cacheChildrenWithExternalReferences(e){const t=e.querySelectorAll(te),n=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let i=0;i<t.length;i++)ee.forEach(e=>{const r=t[i],s=r.getAttribute(e),o=s?s.match(ne):null;if(o){let t=n.get(r);t||(t=[],n.set(r,t)),t.push({name:e,value:o[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){const[t,n]=this._splitIconName(e);t&&(this._svgNamespace=t),n&&(this._svgName=n),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(n,t).pipe(Object(D.a)(1)).subscribe(e=>this._setSvgElement(e),e=>{this._errorHandler.handleError(new Error(`Error retrieving icon ${t}:${n}! ${e.message}`))})}}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(s.l),s.Mb(Q),s.Xb("aria-hidden"),s.Mb(Y),s.Mb(s.n))},e.\u0275cmp=s.Gb({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:7,hostBindings:function(e,t){2&e&&(s.Cb("data-mat-icon-type",t._usingFontIcon()?"font":"svg")("data-mat-icon-name",t._svgName||t.fontIcon)("data-mat-icon-namespace",t._svgNamespace||t.fontSet),s.Eb("mat-icon-inline",t.inline)("mat-icon-no-color","primary"!==t.color&&"accent"!==t.color&&"warn"!==t.color))},inputs:{color:"color",inline:"inline",svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],features:[s.yb],ngContentSelectors:G,decls:1,vars:0,template:function(e,t){1&e&&(s.jc(),s.ic(0))},styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}\n"],encapsulation:2,changeDetection:0}),e})(),re=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},imports:[[T.e],T.e]}),e})();function se(e,t){1&e&&s.Ob(0)}function oe(e,t){if(1&e&&(s.Sb(0,"div",8),s.Sb(1,"mat-icon",9),s.Ec(2,"more_vert"),s.Rb(),s.Sb(3,"div",10),s.Nb(4,"i",11),s.Sb(5,"span"),s.Ec(6),s.Rb(),s.Rb(),s.Rb()),2&e){const e=s.ec(),t=e.dirIndex,n=e.tree,i=s.ec(),r=s.pc(4);s.kc("ngStyle",i.getLeftPadding(t)),s.Bb(1),s.kc("inline",!0)("matMenuTriggerFor",r),s.Bb(5),s.Fc(n.folderName)}}function ce(e,t){1&e&&s.Ob(0)}const ae=function(e,t){return{tree:e,dirIndex:t}};function le(e,t){if(1&e&&(s.Sb(0,"div"),s.Cc(1,ce,1,0,"ng-container",0),s.Rb()),2&e){const e=t.$implicit,n=s.ec().dirIndex;s.ec();const i=s.pc(2);s.Bb(1),s.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",s.nc(2,ae,e,n+1))}}const ue=function(e){return{file:e}};function de(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",8),s.Sb(1,"mat-icon",12),s.Ec(2,"more_vert"),s.Rb(),s.Sb(3,"div",13),s.ac("click",(function(){s.sc(e);const n=t.$implicit;return s.ec(2).selectFile(n)})),s.Nb(4,"i",14),s.Sb(5,"span"),s.Ec(6),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit,n=s.ec().dirIndex,i=s.ec(),r=s.pc(4);s.kc("ngStyle",i.getLeftPadding(n+1)),s.Bb(1),s.kc("inline",!0)("matMenuTriggerFor",r)("matMenuTriggerData",s.mc(10,ue,e)),s.Bb(2),s.Eb("has-error",i.fileHasError(e))("text-primary",i.isSelectedFile(e)),s.kc("title",e.filename),s.Bb(3),s.Gc("",e.filename," ")}}function pe(e,t){if(1&e&&(s.Cc(0,oe,7,4,"div",5),s.Cc(1,le,2,5,"div",6),s.Cc(2,de,7,12,"div",7)),2&e){const e=t.tree;s.kc("ngIf",t.dirIndex>0),s.Bb(1),s.kc("ngForOf",e.subFolders),s.Bb(1),s.kc("ngForOf",e.files)}}function he(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",15),s.Nb(1,"i",14),s.Ec(2),s.Rb(),s.Sb(3,"button",16),s.ac("click",(function(){s.sc(e);const n=t.file;return s.ec().renameFile(n)})),s.Sb(4,"span"),s.Ec(5,"Rename"),s.Rb(),s.Rb(),s.Sb(6,"button",17),s.Sb(7,"span"),s.Ec(8,"Delete"),s.Rb(),s.Rb()}if(2&e){const e=t.file;s.Bb(2),s.Gc(" ",e.filename,"")}}let fe=(()=>{class e{constructor(e,t){this.dialog=e,this.editorService=t,this.hideParentFolder=!1,this.onFileSelect=new s.o}ngOnInit(){this.dirIndex=this.hideParentFolder?0:1}ngOnDestroy(){}getLeftPadding(e){return{"padding-left":8*e+"px"}}fileHasError(e){var t;return(null===(t=null==e?void 0:e.errors)||void 0===t?void 0:t.length)>0}selectFile(e){this.onFileSelect.emit(e)}isSelectedFile(e){var t;return e.absolutePath===(null===(t=this.selectedFile)||void 0===t?void 0:t.absolutePath)}renameFile(e){this.dialog.open(E,{data:{file:e},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{console.log("res",e),e.updated&&(console.log("re rendiering"),this.editorService.reRender())})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(g.b),s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["dir-tree"]],inputs:{tree:"tree",selectedFile:"selectedFile",hideParentFolder:"hideParentFolder"},outputs:{onFileSelect:"onFileSelect"},decls:6,vars:6,consts:[[4,"ngTemplateOutlet","ngTemplateOutletContext"],["treeFolder",""],[3,"overlapTrigger"],["menu","matMenu"],["matMenuContent",""],["class","folder-item",3,"ngStyle",4,"ngIf"],[4,"ngFor","ngForOf"],["class","folder-item",3,"ngStyle",4,"ngFor","ngForOf"],[1,"folder-item",3,"ngStyle"],[1,"item-menu",3,"inline","matMenuTriggerFor"],[1,"folder-item-contents","isFolder"],[1,"far","fa-folder-open"],[1,"item-menu",3,"inline","matMenuTriggerFor","matMenuTriggerData"],[1,"folder-item-contents",3,"title","click"],[1,"far","fa-file"],[1,"p-2","text-center","border-bottom","text-bold"],["mat-menu-item","",3,"click"],["mat-menu-item","","disabled",""]],template:function(e,t){if(1&e&&(s.Cc(0,se,1,0,"ng-container",0),s.Cc(1,pe,3,3,"ng-template",null,1,s.Dc),s.Sb(3,"mat-menu",2,3),s.Cc(5,he,9,1,"ng-template",4),s.Rb()),2&e){const e=s.pc(2);s.kc("ngTemplateOutlet",e)("ngTemplateOutletContext",s.nc(3,ae,t.tree,t.dirIndex)),s.Bb(3),s.kc("overlapTrigger",!0)}},directives:[i.A,O.e,O.a,i.t,i.s,i.w,ie,O.d,O.b],styles:[".folder-item[_ngcontent-%COMP%]{position:relative;cursor:pointer;overflow:hidden}.folder-item[_ngcontent-%COMP%]:hover{overflow:visible}.folder-item[_ngcontent-%COMP%]:hover   .item-menu[_ngcontent-%COMP%]{display:block!important}.folder-item[_ngcontent-%COMP%]   .item-menu[_ngcontent-%COMP%]{position:absolute;left:-2px;top:1px;cursor:pointer;font-size:16px;display:none;z-index:50}.folder-item-contents[_ngcontent-%COMP%]{position:relative;padding:0 0 0 20px;overflow:hidden;text-overflow:ellipsis;display:inline-block;background-color:#fff}.folder-item-contents.isFolder[_ngcontent-%COMP%]{padding-left:22px!important}.folder-item-contents[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;left:5px;align-self:baseline;font-size:.7rem}.folder-item-contents[_ngcontent-%COMP%]   i.fa-folder-open[_ngcontent-%COMP%]{margin-top:5px}.folder-item-contents[_ngcontent-%COMP%]   i.fa-file[_ngcontent-%COMP%]{margin-top:4px;margin-left:1px}.has-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:1px dashed red}.has-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}"]}),e})();function be(e,t){if(1&e&&(s.Sb(0,"div",6),s.Nb(1,"i",10),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("matTooltip",e.executeContext.errors[0].message)}}function ge(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"div",12),s.Sb(2,"dir-tree",13),s.ac("onFileSelect",(function(t){return s.sc(e),s.ec(2).selectFile(t)})),s.Rb(),s.Rb(),s.Pb()}if(2&e){const e=s.ec(2);s.Bb(2),s.kc("selectedFile",e.selectedFile)("tree",e.executeContext.tree)("hideParentFolder",!0)}}function me(e,t){if(1&e&&(s.Qb(0),s.Sb(1,"div",15),s.Nb(2,"item-folder-structure",16),s.Rb(),s.Pb()),2&e){const e=t.$implicit,n=t.index,i=s.ec(3);s.Bb(2),s.kc("executeContext",e)("id",i.id+"."+n)}}function ve(e,t){if(1&e&&(s.Qb(0),s.Cc(1,me,3,2,"ng-container",14),s.Pb()),2&e){const e=s.ec(2);s.Bb(1),s.kc("ngForOf",e.executeContext.children)}}function xe(e,t){if(1&e&&(s.Sb(0,"div",5),s.Cc(1,ge,3,3,"ng-container",11),s.Cc(2,ve,2,1,"ng-container",11),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngIf","template"===e.executeContext.item.type),s.Bb(1),s.kc("ngIf","chain"===e.executeContext.item.type)}}let Se=(()=>{class e{constructor(e){this.editorService=e,this.id="0",this.itemOpen=!1,this.subs=new f.a}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>{var t,n,i,r;this.state=e,this.selectedFile=null===(t=e.selectedContext)||void 0===t?void 0:t.file,this.isConfigSelected=(null===(i=null===(n=this.state)||void 0===n?void 0:n.selectedContext)||void 0===i?void 0:i.executeContext)===this.executeContext&&"config"===(null===(r=this.state)||void 0===r?void 0:r.contentSection),this.setItemState(e.itemState)}))}setItemState(e){const t=`${this.executeContext.item.id}.${this.id}`;e[t]||(e[t]={configOpen:!1,filesOpen:!1,itemOpen:this.itemOpen}),this.itemState=e[t]}ngOnDestroy(){this.subs.unsubscribe()}toggleItem(){this.itemState.itemOpen=!this.itemState.itemOpen}selectFile(e){const t=this.executeContext.item;this.editorService.selectFile(t.id,e,`${t.parent.name}.${t.name}`)}selectItem(){this.editorService.selectItem(this.executeContext)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["item-folder-structure"]],inputs:{executeContext:"executeContext",id:"id",itemOpen:"itemOpen"},decls:13,vars:14,consts:[[1,""],[1,"item-header","d-flex"],[1,"cursor-pointer",2,"width","10px",3,"click"],[1,"fa"],[1,"d-flex",3,"click"],[1,"pl-2"],[1,"pl-1"],["class","pl-1",4,"ngIf"],[1,"item-sub-header","cursor-pointer","pl-2"],["class","pl-2",4,"ngIf"],["matTooltipPosition","right",1,"fa","fa-exclamation-circle","text-danger",3,"matTooltip"],[4,"ngIf"],[1,"pt-1"],[3,"selectedFile","tree","hideParentFolder","onFileSelect"],[4,"ngFor","ngForOf"],[1,"pl-2","sub-items"],[3,"executeContext","id"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.ac("click",(function(){return t.toggleItem()})),s.Nb(3,"i",3),s.Rb(),s.Sb(4,"div",4),s.ac("click",(function(){return t.selectItem()})),s.Sb(5,"div",5),s.Nb(6,"i",3),s.Nb(7,"i",3),s.Rb(),s.Sb(8,"div",6),s.Ec(9),s.Rb(),s.Cc(10,be,2,1,"div",7),s.Rb(),s.Rb(),s.Sb(11,"div",8),s.Cc(12,xe,3,2,"div",9),s.Rb(),s.Rb()),2&e&&(s.Bb(3),s.Eb("fa-chevron-down",t.itemState.itemOpen)("fa-chevron-right",!t.itemState.itemOpen),s.Bb(1),s.Eb("text-primary",t.isConfigSelected),s.Bb(2),s.Eb("fa-link","chain"===t.executeContext.item.type),s.Bb(1),s.Eb("fa-cog","template"===t.executeContext.item.type),s.Bb(2),s.Hc(" ",null==t.executeContext.item.parent?null:t.executeContext.item.parent.name,".",t.executeContext.item.name," "),s.Bb(1),s.kc("ngIf",t.executeContext.errors.length>0),s.Bb(2),s.kc("ngIf",t.itemState.itemOpen))},directives:[i.t,b.a,fe,i.s,e],styles:[".item-header[_ngcontent-%COMP%]{cursor:pointer}.item-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.sub-items[_ngcontent-%COMP%]{padding-top:4px}.has-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:1px dashed red}.has-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}"]}),e})();function ke(e,t){if(1&e&&(s.Sb(0,"div",1),s.Nb(1,"item-folder-structure",2),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("executeContext",e.executeContext)("itemOpen",!0)}}let Ce=(()=>{class e{constructor(e){this.editorService=e,this.subs=new f.a}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>{this.executeContext=e.executeResult.executeContext}))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["editor-items"]],decls:1,vars:1,consts:[["class","",4,"ngIf"],[1,""],[3,"executeContext","itemOpen"]],template:function(e,t){1&e&&s.Cc(0,ke,2,2,"div",0),2&e&&s.kc("ngIf",t.executeContext)},directives:[i.t,Se],styles:[""]}),e})();function ye(e,t){if(1&e&&(s.Qb(0),s.Sb(1,"div",2),s.Nb(2,"generated-folder-structure",3),s.Rb(),s.Pb()),2&e){const e=t.$implicit;s.Bb(2),s.kc("generatedTree",e)}}function Ie(e,t){if(1&e&&(s.Qb(0),s.Cc(1,ye,3,1,"ng-container",1),s.Pb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngForOf",e.generatedTree.subFolders)}}function Re(e,t){if(1&e&&(s.Qb(0),s.Sb(1,"div",2),s.Nb(2,"generated-folder-structure",3),s.Rb(),s.Pb()),2&e){const e=t.$implicit;s.Bb(2),s.kc("generatedTree",e)}}function we(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"div",14),s.ac("click",(function(){s.sc(e);const n=t.$implicit;return s.ec(2).selectItem(n)})),s.Nb(2,"i",15),s.Ec(3),s.Rb(),s.Pb()}if(2&e){const e=t.$implicit,n=s.ec(2);s.Bb(1),s.Eb("text-primary",n.isSelected(e))("has-error",n.fileHasError(e)),s.kc("matTooltip",e.file.destination),s.Bb(2),s.Gc(" ",e.file.renderedFilename," ")}}function _e(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"div",4),s.Sb(2,"div",5),s.Sb(3,"div",6),s.ac("click",(function(){return s.sc(e),s.ec().toggleItem()})),s.Nb(4,"i",7),s.Rb(),s.Sb(5,"div",8),s.Sb(6,"div",9),s.Sb(7,"div",10),s.Sb(8,"span",11),s.Ec(9),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(10,"div",12),s.Sb(11,"div",13),s.Cc(12,Re,3,1,"ng-container",1),s.Cc(13,we,4,6,"ng-container",1),s.Rb(),s.Rb(),s.Rb(),s.Pb()}if(2&e){const e=s.ec();s.Bb(8),s.kc("matTooltip",e.generatedTree.folderPath),s.Bb(1),s.Fc(e.generatedTree.folderName),s.Bb(3),s.kc("ngForOf",e.generatedTree.subFolders),s.Bb(1),s.kc("ngForOf",e.generatedTree.files)}}let Ee=(()=>{class e{constructor(e){this.editorService=e,this.subs=new f.a}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>this.state=e))}ngOnDestroy(){this.subs.unsubscribe()}toggleItem(){}selectItem(e){const t=e.executeContext.item;this.editorService.selectGeneratedFile(t.id,e.file,`${t.parent.name}.${t.name}`)}isSelected(e){var t,n;return e.destination===(null===(n=null===(t=this.state)||void 0===t?void 0:t.generatedFileState)||void 0===n?void 0:n.selectedFile)}fileHasError(e){var t;return(null===(t=e.file.errors)||void 0===t?void 0:t.length)>0}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["generated-folder-structure"]],inputs:{generatedTree:"generatedTree"},decls:2,vars:2,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[1,"sub-items"],[3,"generatedTree"],[1,""],[1,"item-header","d-flex"],[1,"cursor-pointer",2,"width","10px",3,"click"],[1,"far","fa-folder-open"],[1,"d-flex"],[1,"pl-1"],[1,"dir-overflow"],["matTooltipPosition","right",3,"matTooltip"],[1,"item-sub-header","cursor-pointer","pl-2"],[1,"pl-2"],["matTooltipPosition","right",1,"sub-items","dir-overflow",3,"matTooltip","click"],[1,"far","fa-file"]],template:function(e,t){1&e&&(s.Cc(0,Ie,2,1,"ng-container",0),s.Cc(1,_e,14,4,"ng-container",0)),2&e&&(s.kc("ngIf",t.generatedTree.isRootNode),s.Bb(1),s.kc("ngIf",!t.generatedTree.isRootNode))},directives:[i.t,i.s,e,b.a],styles:[".item-header[_ngcontent-%COMP%]{cursor:pointer}.item-header[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .sub-items[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:.6rem}.has-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:1px dashed red}.has-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}.dir-overflow[_ngcontent-%COMP%]{display:inline-block;overflow:hidden;white-space:nowrap;width:170px;text-overflow:ellipsis}"]}),e})();function Oe(e,t){if(1&e&&s.Nb(0,"generated-folder-structure",2),2&e){const e=s.ec();s.kc("generatedTree",e.generatedTree)}}let Te=(()=>{class e{constructor(e){this.editorService=e,this.subs=new f.a}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>{this.generatedTree=e.executeResult.generatedFileTree}))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["generated-files"]],decls:2,vars:1,consts:[[1,"pt-2"],[3,"generatedTree",4,"ngIf"],[3,"generatedTree"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Cc(1,Oe,1,1,"generated-folder-structure",1),s.Rb()),2&e&&(s.Bb(1),s.kc("ngIf",t.generatedTree))},directives:[i.t,Ee],styles:[""]}),e})();function Fe(e,t){if(1&e&&(s.Sb(0,"div",9),s.Ec(1," Error: "),s.Sb(2,"span",10),s.Ec(3),s.Rb(),s.Rb()),2&e){const e=s.ec().$implicit;s.Bb(3),s.Fc(null==e.error.data?null:e.error.data.message)}}function Pe(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",6),s.ac("click",(function(){s.sc(e);const t=s.ec().$implicit;return s.ec().selectFile(t.file,t.executeContext)})),s.Ec(1," File: "),s.Sb(2,"span",7),s.Ec(3),s.Rb(),s.Rb()}if(2&e){const e=s.ec().$implicit;s.Bb(3),s.Fc(null==e.file?null:e.file.filename)}}function Me(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",1),s.Sb(1,"div",2),s.Nb(2,"i",3),s.Ec(3),s.Rb(),s.Sb(4,"div",4),s.Cc(5,Fe,4,1,"div",5),s.Sb(6,"div",6),s.ac("click",(function(){s.sc(e);const n=t.$implicit;return s.ec().selectItem(n.executeContext)})),s.Ec(7,"Item: "),s.Sb(8,"span",7),s.Ec(9),s.Rb(),s.Rb(),s.Cc(10,Pe,4,1,"div",8),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit;s.Bb(3),s.Gc(" ",e.error.message,""),s.Bb(2),s.kc("ngIf",null==e.error.data?null:e.error.data.message),s.Bb(4),s.Hc("",null==e.executeContext?null:e.executeContext.item.parent.name,".",null==e.executeContext?null:e.executeContext.item.name,""),s.Bb(1),s.kc("ngIf",e.file)}}let Be=(()=>{class e{constructor(e){this.editorService=e,this.errors=[],this.subs=new f.a}ngOnInit(){console.log("EEEEEEEEEEEE:",this.errors)}selectFile(e,t){const n=t.item;this.editorService.selectFile(n.id,e,`${n.parent.name}.${n.name}`)}selectItem(e){this.editorService.selectItem(e)}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["error-list"]],inputs:{errors:"errors"},decls:1,vars:1,consts:[["class","py-2",4,"ngFor","ngForOf"],[1,"py-2"],[1,""],[1,"fa","fa-exclamation-triangle","text-danger"],[1,"pl-4"],["class","text-muted small",4,"ngIf"],[1,"text-muted","small","cursor-pointer",3,"click"],[1,"text-primary","border-bottom"],["class","text-muted small cursor-pointer",3,"click",4,"ngIf"],[1,"text-muted","small"],[1,"text-bold"]],template:function(e,t){1&e&&s.Cc(0,Me,11,5,"div",0),2&e&&s.kc("ngForOf",t.errors)},directives:[i.s,i.t],styles:[""]}),e})();function $e(e,t){if(1&e&&s.Nb(0,"error-list",2),2&e){const e=s.ec();s.kc("errors",e.errors)}}let Ne=(()=>{class e{constructor(e){this.editorService=e,this.subs=new f.a}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>{this.executeResult=e.executeResult,this.errors=this.executeResult.createEditorErrors(this.executeResult.errors)}))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["all-errors"]],decls:2,vars:1,consts:[[1,"p-2"],[3,"errors",4,"ngIf"],[3,"errors"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Cc(1,$e,1,1,"error-list",1),s.Rb()),2&e&&(s.Bb(1),s.kc("ngIf",t.errors))},directives:[i.t,Be],styles:[""]}),e})();var ze=n("1jDz");let Ae=(()=>{class e{constructor(e){this.editorService=e,this.editorOptions={language:"json",renderLineHighlight:"none",matchBrackets:"never",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",folding:!1}}ngOnInit(){this.editorService.state$.pipe(Object(D.a)(1)).subscribe(e=>{this.text=JSON.stringify(e.inputs,null,2)})}ngOnDestroy(){}inputChanged(e){try{const t=JSON.parse(e);this.editorService.updateUserInputs(t)}catch(t){console.log("error:",t)}}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["inputs-editor"]],decls:1,vars:3,consts:[[3,"text","editorOptions","height","onContentChange"]],template:function(e,t){1&e&&(s.Sb(0,"file-editor",0),s.ac("onContentChange",(function(e){return t.inputChanged(e)})),s.Rb()),2&e&&s.kc("text",t.text)("editorOptions",t.editorOptions)("height","100%")},directives:[ze.a],styles:[""]}),e})();var Ue=n("XNiG"),De=n("Kj3r");let je=(()=>{class e{constructor(){}disposeCompletionProvider(){this.completionProvider&&this.completionProvider.dispose()}registerCompletionProvider(e,t,n="bluLanguage"){this.disposeCompletionProvider(),this.completionProvider=e.languages.registerCompletionItemProvider(n,{provideCompletionItems:(n,i,r,s)=>{let o;const c=n.getValueInRange({startLineNumber:i.lineNumber,startColumn:1,endLineNumber:i.lineNumber,endColumn:1/0}),a=(n.getValueInRange({startLineNumber:i.lineNumber,startColumn:1,endLineNumber:i.lineNumber,endColumn:i.column}),/\((.*?)\)/g),l=this.isInside(/\[blu (.*?)]/g,c,i),u=this.isInside(/\^\^(.*?)\^\^/g,c,i);return null!==l?o=null!==this.isInside(a,c,i)?this.contextSuggestions(e,t):this.bluBlockSuggestions(e):null!==u&&(o=this.isAfter(":",u,i)?this.contextFunctions(e,t,!0):this.contextSuggestions(e,t)),o=null!=o?o:this.getDefaultSuggestions(e),{suggestions:o}}})}isAfter(e,t,n){return t.indexOf(e)>=0}isInside(e,t,n){let i,r=!1,s=null;for(;(i=e.exec(t))&&!r;)i.index<n.column&&n.column<=e.lastIndex&&(s=i[1],r=!0);return s}contextSuggestions(e,t,n=!1){return[...this.contextInputs(e,t),...this.contextFunctions(e,t,n)]}contextInputs(e,t){return Object.keys(t.inputs).map(t=>({label:t,kind:e.languages.CompletionItemKind.Variable,insertText:t,sortText:"a"+t}))}contextFunctions(e,t,n=!1){let i=[];return i=t.functions.map(n?t=>({label:""+t.name,kind:e.languages.CompletionItemKind.Function,insertText:""+t.name,sortText:"b"+t.name}):t=>({label:t.name+"()",kind:e.languages.CompletionItemKind.Function,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:t.name+"(${1})",sortText:"b"+t.name})),i}bluBlockSuggestions(e){return[{label:"if",documentation:"Add an if statement",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"if(${1})",sortText:"b",command:{id:"editor.action.triggerSuggest"}},{label:"elseIf",documentation:"Add an elseIf statement",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"elseIf(${1})",sortText:"c",command:{id:"editor.action.triggerSuggest"}},{label:"forEach",documentation:"Add a forEach statement",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"forEach(${2} in ${1})",sortText:"a",command:{id:"editor.action.triggerSuggest"}},{label:"forEachIndex",documentation:"Add a forEach statement with a verbose index identifier",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"forEach(${2} in ${1});i=index",sortText:"h",command:{id:"editor.action.triggerSuggest"}},{label:"else",documentation:"Add an else statement",kind:e.languages.CompletionItemKind.Text,insertText:"else",sortText:"d"},{label:"switch",documentation:"Add a switch statement",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"switch(${1})",sortText:"e",command:{id:"editor.action.triggerSuggest"}},{label:"switchCase",documentation:"Add a switchCase statement",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"switchCase ${1}",sortText:"f",command:{id:"editor.action.triggerSuggest"}},{label:"switchDefault",documentation:"Add an switchDefault statement",kind:e.languages.CompletionItemKind.Text,insertText:"switchDefault",sortText:"g"}]}getDefaultSuggestions(e){return[{label:"blu",documentation:"Add a [blu] [/blu] block",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"[blu ${1}]$0[/blu]",sortText:"b",command:{id:"editor.action.triggerSuggest"}},{label:"expression",documentation:"Add a ^^  ^^ expression",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^${1}^^",sortText:"a",command:{id:"editor.action.triggerSuggest"}},{label:"transformation",documentation:"Add a transformation ^^value:function^^ expression",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^${1}:${2}^^",sortText:"c",command:{id:"editor.action.triggerSuggest"}},{label:"comment",documentation:"Add a ^^!  !^^ comment",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^! ${1} !^^",sortText:"d"},{label:"expression (escaped)",documentation:"Add a ^^!  !^^ comment",kind:e.languages.CompletionItemKind.Snippet,insertTextRules:e.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^~ ${1} ~^^",sortText:"e"}]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var Le=n("yvwu");const Ge=function(e){return{height:e}};let He=(()=>{class e{constructor(e,t){this.bluEditorService=e,this.editorService=t,this.height="500px",this.editorOptions={theme:"bluTheme",language:"bluLanguage",renderLineHighlight:"none",suggest:{snippetsPreventQuickSuggestions:!1}},this.content$=new Ue.a,this.properties={initialText:null,text:null,renderContext:null,errors:null},this.subs=new f.a}ngOnInit(){this.subs.add(this.content$.pipe(Object(De.a)(100)).subscribe(e=>{this.properties.initialText!==e&&this.editorService.saveFile(e)})),this.subs.add(this.editorService.templateProperties$.subscribe(e=>{var t,n,i,r;this.properties.initialText=null!==(t=e.initialText)&&void 0!==t?t:this.properties.initialText,this.properties.text=null!==(n=e.text)&&void 0!==n?n:this.properties.text,this.properties.renderContext=null!==(i=e.renderContext)&&void 0!==i?i:this.properties.renderContext,this.properties.errors=null!==(r=e.errors)&&void 0!==r?r:this.properties.errors,this.updateProperties()}))}updateProperties(){this.setText(),this.setErrors(),this.setContext()}setContext(){this.editorModel&&this.properties.renderContext&&(this.bluEditorService.registerCompletionProvider(monaco,this.properties.renderContext),this.properties.renderContext=null)}setText(){this.editorModel&&this.properties.text&&(this.editorModel.setValue(this.properties.text),this.properties.text=null)}setErrors(){if(this.editorModel&&this.properties.errors){const e=this.properties.errors.map(e=>{const t=this.editorModel.getPositionAt(e.index);return{startLineNumber:t.lineNumber,startColumn:t.column,endLineNumber:t.lineNumber,endColumn:t.column+e.badText.length,message:e.message,severity:monaco.MarkerSeverity.Error}});monaco.editor.setModelMarkers(this.editorModel,"test",e),this.properties.errors=null}}ngOnDestroy(){this.editorModel.dispose(),this.subs.unsubscribe()}onEditorInit(e){this.editorModel=e.getModel(),this.updateProperties(),this.editorModel.onDidChangeContent(e=>{this.content$.next(this.editorModel.getValue())})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(je),s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["blu-editor"]],inputs:{height:"height"},decls:2,vars:7,consts:[[3,"ngStyle"],[3,"ngStyle","options","onInit"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"ngx-monaco-editor",1),s.ac("onInit",(function(e){return t.onEditorInit(e)})),s.Rb(),s.Rb()),2&e&&(s.kc("ngStyle",s.mc(3,Ge,t.height)),s.Bb(1),s.kc("ngStyle",s.mc(5,Ge,t.height))("options",t.editorOptions))},directives:[i.w,Le.a],styles:[""]}),e})();const qe=function(e){return{height:e}};let Ke=(()=>{class e{constructor(e){this.editorService=e,this.editorOptions={},this.height="500px",this.defaultOptions={theme:"bluTheme",language:"html",readOnly:!0,renderLineHighlight:"none",matchBrackets:"never"},this.properties={text:null,language:null},this.subs=new f.a}ngOnInit(){this.editorOptions=Object.assign({},this.defaultOptions,this.editorOptions),this.subs.add(this.editorService.previewProperties$.subscribe(e=>{var t,n;this.properties.text=null!==(t=e.text)&&void 0!==t?t:this.properties.text,this.properties.language=null!==(n=e.language)&&void 0!==n?n:this.properties.language,this.updateProperties()}))}updateProperties(){this.setText(),this.setLanguage()}ngOnDestroy(){this.editorModel.dispose(),this.subs.unsubscribe()}setText(){this.editorModel&&this.properties.text&&(this.editorModel.setValue(this.properties.text),this.properties.text=null)}setLanguage(){this.editorModel&&this.properties.language&&(monaco.editor.setModelLanguage(this.editorModel,this.properties.language),this.properties.language=null)}onEditorInit(e){this.editorModel=e.getModel(),this.updateProperties()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["preview-editor"]],inputs:{editorOptions:"editorOptions",height:"height"},decls:2,vars:7,consts:[[3,"ngStyle"],[3,"ngStyle","options","onInit"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"ngx-monaco-editor",1),s.ac("onInit",(function(e){return t.onEditorInit(e)})),s.Rb(),s.Rb()),2&e&&(s.kc("ngStyle",s.mc(3,qe,t.height)),s.Bb(1),s.kc("ngStyle",s.mc(5,qe,t.height))("options",t.editorOptions))},directives:[i.w,Le.a],styles:[""]}),e})(),Je=(()=>{class e{constructor(e,t){this.editorService=e,this.el=t}ngOnInit(){this.editorService.state$.subscribe(e=>this.selectedContext=e.selectedContext)}ngAfterViewInit(){console.log("height:",this.el)}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d),s.Mb(s.l))},e.\u0275cmp=s.Gb({type:e,selectors:[["blu-file-editor"]],decls:14,vars:4,consts:[[1,"file-header","text-muted","d-flex","border-bottom"],[1,"",2,"width","49%"],[1,"filename"],[1,"border","border-bottom-0","d-inline","p-1"],[1,"file-contents"],[2,"width","49%","height","100%"],[3,"height"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Ec(4),s.Rb(),s.Rb(),s.Rb(),s.Sb(5,"div",1),s.Sb(6,"div",2),s.Sb(7,"div",3),s.Ec(8),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(9,"div",4),s.Sb(10,"div",5),s.Nb(11,"blu-editor",6),s.Rb(),s.Sb(12,"div",5),s.Nb(13,"preview-editor",6),s.Rb(),s.Rb()),2&e&&(s.Bb(4),s.Fc(null==t.selectedContext||null==t.selectedContext.file?null:t.selectedContext.file.filename),s.Bb(4),s.Fc(null==t.selectedContext||null==t.selectedContext.file?null:t.selectedContext.file.renderedFilename),s.Bb(3),s.kc("height","100%"),s.Bb(2),s.kc("height","100%"))},directives:[He,Ke],styles:[".file-header[_ngcontent-%COMP%]{height:28px}.file-header[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]{padding:5px 0 0 5px;height:100%}.file-header[_ngcontent-%COMP%]   .filename[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:100%;font-size:.8rem;border-bottom:1px solid #f1f1f1;background-color:#f1f1f1}.file-contents[_ngcontent-%COMP%]{display:flex;position:relative;height:calc(100% - 42px)}"]}),e})();var Qe=n("Ni13"),Ve=n("DlQD"),We=n("/uUt"),Ze=n("ZJV+");function Xe(e,t){if(1&e){const e=s.Tb();s.Sb(0,"span",8),s.ac("click",(function(){return s.sc(e),s.ec().showSection("edit")})),s.Ec(1,"edit"),s.Rb()}if(2&e){const e=s.ec();s.Eb("text-primary","edit"===e.section)}}function Ye(e,t){if(1&e){const e=s.Tb();s.Sb(0,"span",8),s.ac("click",(function(){return s.sc(e),s.ec().showSection("preview")})),s.Ec(1,"preview"),s.Rb()}if(2&e){const e=s.ec();s.Eb("text-primary","preview"===e.section)}}function et(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"div",11),s.ac("click",(function(){return s.sc(e),s.ec(2).showSection("edit")})),s.Sb(2,"span",12),s.Ec(3,"No Readme Available. Click to edit."),s.Rb(),s.Rb(),s.Pb()}}function tt(e,t){if(1&e&&s.Nb(0,"div",14),2&e){const e=s.ec(3);s.kc("innerHTML",e.markdownHTML,s.tc)}}function nt(e,t){if(1&e&&(s.Qb(0),s.Cc(1,tt,1,1,"div",13),s.Pb()),2&e){const e=s.ec(2);s.Bb(1),s.kc("ngIf",e.markdownHTML)}}function it(e,t){if(1&e&&(s.Sb(0,"div",9),s.Cc(1,et,4,0,"ng-container",10),s.Cc(2,nt,2,1,"ng-container",10),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngIf",!e.text),s.Bb(1),s.kc("ngIf",!!e.text)}}function rt(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",15),s.Sb(1,"file-editor",16),s.ac("onContentChange",(function(t){return s.sc(e),s.ec().updateReadme(t)})),s.Rb(),s.Rb()}if(2&e){const e=s.ec();s.Bb(1),s.kc("text",e.text)("editorOptions",e.editorOptions)("height","100%")}}let st=(()=>{class e{constructor(e,t){this.editorService=e,this.httpService=t,this.textToSave$=new Ue.a,this.onConfigUpdated=new s.o,this.editorOptions={language:"markdown",matchBrackets:"never",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1},this.section="preview",this.subs=new f.a}ngOnInit(){this.showSection("preview"),this.text=this.item.config.info,this.subs.add(this.textToSave$.pipe(Object(De.a)(250),Object(We.a)()).subscribe(e=>{this.item.config.info=e,this.saveForm()}))}showSection(e){this.text=this.item.config.info,"preview"===e&&(this.markdownHTML=Ve(this.item.config.info)),this.section=e}ngOnDestroy(){this.subs.unsubscribe()}saveForm(){this.httpService.put("/blueprints/config",{config:this.item.config,path:this.item.configPath}).subscribe(e=>{this.onConfigUpdated.emit(!0)})}updateReadme(e){this.textToSave$.next(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d),s.Mb(Ze.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["config-info"]],inputs:{item:"item"},outputs:{onConfigUpdated:"onConfigUpdated"},decls:10,vars:4,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-info-circle"],[1,"p-2"],[1,"cursor-pointer","text-right"],[3,"text-primary","click",4,"ngIf"],["class","",4,"ngIf"],["class","p-2 border","style","height:500px",4,"ngIf"],[3,"click"],[1,""],[4,"ngIf"],[1,"text-center",3,"click"],[1,"border-bottom","cursor-pointer"],[3,"innerHTML",4,"ngIf"],[3,"innerHTML"],[1,"p-2","border",2,"height","500px"],[3,"text","editorOptions","height","onContentChange"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Readme"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Sb(5,"div",4),s.Cc(6,Xe,2,2,"span",5),s.Cc(7,Ye,2,2,"span",5),s.Rb(),s.Cc(8,it,3,2,"div",6),s.Cc(9,rt,2,3,"div",7),s.Rb()),2&e&&(s.Bb(6),s.kc("ngIf","preview"===t.section),s.Bb(1),s.kc("ngIf","edit"===t.section),s.Bb(1),s.kc("ngIf","preview"===t.section),s.Bb(1),s.kc("ngIf","edit"===t.section))},directives:[i.t,ze.a],styles:[""]}),e})(),ot=(()=>{class e{constructor(e,t,n,i,r){this.data=e,this.httpService=t,this.bluEditorService=n,this.cdr=i,this.dialogRef=r,this.subs=new f.a,this.editorOptions={theme:"bluTheme",language:"bluLanguage",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1}}ngOnInit(){this.item=this.data.item,this.text=this.item.config.settings.filenames,this.renderContext=this.data.renderContext,this.renderContext.inputs.basename="",this.renderContext.inputs.extname="",this.renderContext.inputs.filename=""}ngOnDestroy(){this.subs.unsubscribe(),this.bluEditorService.disposeCompletionProvider()}close(e){this.dialogRef.close({updated:e})}onEditorInit(e){this.editorModel=e,this.setContext()}setContext(){this.editorModel&&this.bluEditorService.registerCompletionProvider(monaco,this.renderContext)}save(){var e;this.editorModel.getValue(),this.item.config.settings.filenames=(null!==(e=this.editorModel.getValue())&&void 0!==e?e:"").trim(),this.httpService.put("/blueprints/config",{config:this.item.config,path:this.item.configPath}).subscribe(e=>{this.close(!0)})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(g.a),s.Mb(Ze.a),s.Mb(je),s.Mb(s.h),s.Mb(g.h))},e.\u0275cmp=s.Gb({type:e,selectors:[["edit-filenames-dialog"]],decls:14,vars:6,consts:[["mat-dialog-title",""],[1,"text-capitalize"],["mat-dialog-content","",2,"height","300px"],[1,"border","border-radius","p-2"],[3,"text","editorOptions","height","onEditorInit"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"]],template:function(e,t){1&e&&(s.Sb(0,"h1",0),s.Sb(1,"span",1),s.Ec(2,"Edit Filenames for "),s.Rb(),s.Sb(3,"span",1),s.Ec(4),s.Rb(),s.Ec(5),s.Rb(),s.Sb(6,"div",2),s.Sb(7,"div",3),s.Sb(8,"file-editor",4),s.ac("onEditorInit",(function(e){return t.onEditorInit(e)})),s.Rb(),s.Rb(),s.Rb(),s.Sb(9,"div",5),s.Sb(10,"button",6),s.ac("click",(function(){return t.close(!1)})),s.Ec(11,"Close"),s.Rb(),s.Sb(12,"button",6),s.ac("click",(function(){return t.save()})),s.Ec(13,"Save"),s.Rb(),s.Rb()),2&e&&(s.Bb(4),s.Fc(t.item.type),s.Bb(1),s.Gc(": ",t.item.name,""),s.Bb(3),s.kc("text",t.text)("editorOptions",t.editorOptions)("height","40px"),s.Bb(1),s.kc("align","end"))},directives:[g.i,g.f,ze.a,g.c,k.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();function ct(e,t){if(1&e&&(s.Sb(0,"div",9),s.Nb(1,"i",10),s.Ec(2),s.Rb()),2&e){const e=t.$implicit;s.Bb(2),s.Gc(" ",e.error.data.message,"")}}function at(e,t){if(1&e&&(s.Sb(0,"div",7),s.Cc(1,ct,3,1,"div",8),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngForOf",e.sectionErrors)}}function lt(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",11),s.ac("click",(function(){s.sc(e);const n=t.$implicit;return s.ec().editProperty(n.item)})),s.Sb(1,"div",12),s.Nb(2,"i",13),s.Sb(3,"span",14),s.Ec(4),s.Rb(),s.Ec(5),s.Rb(),s.Sb(6,"div",15),s.Ec(7,"filenames: "),s.Sb(8,"span",16),s.Ec(9),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit,n=s.ec();s.Eb("text-primary",e.item===n.selectedItem),s.Bb(4),s.Fc(e.item.type),s.Bb(1),s.Gc(" ",e.item.name,""),s.Bb(4),s.Fc(e.property?e.property:"not set")}}let ut=(()=>{class e{constructor(e){this.dialog=e,this.errors=[],this.onConfigUpdated=new s.o,this.property="filenames",this.hierarchy=[],this.sectionErrors=[]}ngOnInit(){this.selectedItem=this.item,this.sectionErrors=this.getErrors(),this.determineHierarchy()}ngOnChanges(e){this.sectionErrors=this.getErrors(),this.determineHierarchy()}determineHierarchy(){this.hierarchy=[];let e=this.item;if(e)for(this.setHierarchy(e);e.parent;)this.setHierarchy(e.parent),e=e.parent}setHierarchy(e){this.hierarchy.unshift({item:e,property:e.config.settings[this.property]})}ngOnDestroy(){}editProperty(e){this.dialog.open(ot,{data:{item:e,renderContext:this.renderContext},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{console.log("dialog result: ",e),e.updated&&this.onConfigUpdated.emit(!0)})}getErrors(){const e=[];return this.hierarchy.forEach(t=>{const n=this.errors.filter(e=>e.executeContext.item.id===t.item.id&&e.error.origin.location===c.a.Execute.ErrorLocation.config&&e.error.origin.section===c.a.Execute.ErrorSection.settings&&"filenames"===e.error.origin.property);e.push(...n)}),e}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(g.b))},e.\u0275cmp=s.Gb({type:e,selectors:[["settings-filenames"]],inputs:{item:"item",errors:"errors",renderContext:"renderContext"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[s.zb],decls:8,vars:2,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"far","fa-file"],[1,"p-2"],["class","pl-4 pb-2",4,"ngIf"],[1,"position-relative"],["class","pb-1 cursor-pointer position-relative",3,"text-primary","click",4,"ngFor","ngForOf"],[1,"pl-4","pb-2"],["class","text-danger text-small",4,"ngFor","ngForOf"],[1,"text-danger","text-small"],[1,"fa","fa-exclamation-triangle"],[1,"pb-1","cursor-pointer","position-relative",3,"click"],[1,"pl-1"],[1,"fa","fa-chevron-right","text-tiny","mr-1"],[1,"text-capitalize"],[1,"pl-3","p-1"],[1,"text-bold"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Filenames"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Cc(5,at,2,1,"div",4),s.Sb(6,"div",5),s.Cc(7,lt,10,5,"div",6),s.Rb(),s.Rb()),2&e&&(s.Bb(5),s.kc("ngIf",t.sectionErrors.length>0),s.Bb(2),s.kc("ngForOf",t.hierarchy))},directives:[i.t,i.s],styles:[""]}),e})();function dt(e,t){if(1&e&&(s.Sb(0,"div",9),s.Nb(1,"i",10),s.Ec(2),s.Rb()),2&e){const e=t.$implicit;s.Bb(2),s.Gc(" ",e.error.data.message,"")}}function pt(e,t){if(1&e&&(s.Sb(0,"div",7),s.Cc(1,dt,3,1,"div",8),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngForOf",e.sectionErrors)}}function ht(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",18),s.Sb(1,"div",19),s.Sb(2,"file-editor",20),s.ac("onEditorInit",(function(t){return s.sc(e),s.ec(3).onEditorInit(t)})),s.Rb(),s.Rb(),s.Sb(3,"div",21),s.Ec(4,"Rendered onSuccess"),s.Rb(),s.Sb(5,"div",22),s.Sb(6,"pre"),s.Ec(7),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=s.ec(3);s.Bb(2),s.kc("text",e.onSuccessText)("editorOptions",e.editorOptions)("height","250px"),s.Bb(5),s.Fc(e.renderedOnSuccess)}}function ft(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"div",12),s.ac("click",(function(){s.sc(e);const t=s.ec().$implicit;return s.ec().editProperty(t.item)})),s.Sb(2,"div",13),s.Sb(3,"div",14),s.Sb(4,"div",15),s.Nb(5,"i",16),s.Ec(6),s.Rb(),s.Rb(),s.Rb(),s.Cc(7,ht,8,4,"div",17),s.Rb(),s.Pb()}if(2&e){const e=s.ec().$implicit,t=s.ec();s.Bb(6),s.Hc(" ",e.item.type,": ",e.item.name," "),s.Bb(1),s.kc("ngIf",t.selectedItem)}}function bt(e,t){if(1&e&&(s.Qb(0),s.Cc(1,ft,8,3,"ng-container",11),s.Pb()),2&e){const e=t.$implicit;s.Bb(1),s.kc("ngIf",void 0!==e.property)}}let gt=(()=>{class e{constructor(e,t){this.httpService=e,this.bluEditorService=t,this.errors=[],this.onConfigUpdated=new s.o,this.property="onSuccess",this.hierarchy=[],this.sectionErrors=[],this.onSuccessText=null,this.editorOptions={theme:"bluTheme",language:"bluLanguage",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1},this.textToSave$=new Ue.a,this.subs=new f.a}ngOnInit(){this.determineHierarchy(),this.sectionErrors=this.getErrors(),this.editProperty(this.item),this.subs.add(this.textToSave$.pipe(Object(De.a)(250),Object(We.a)()).subscribe(e=>{this.selectedItem.config.settings.onSuccess=e,this.saveForm()}))}ngOnChanges(e){this.sectionErrors=this.getErrors()}determineHierarchy(){this.hierarchy=[];let e=this.item;for(this.setHierarchy(e);e.parent;)this.setHierarchy(e.parent),e=e.parent}setHierarchy(e){this.hierarchy.unshift({item:e,property:e.config.settings[this.property]})}ngOnDestroy(){this.subs.unsubscribe()}editProperty(e){setTimeout(()=>{this.onSuccessText=e.config.settings.onSuccess,this.selectedItem=e},20)}saveForm(){this.httpService.put("/blueprints/config",{config:this.selectedItem.config,path:this.selectedItem.configPath}).subscribe(e=>{this.onConfigUpdated.emit(!0)})}getErrors(){const e=[];return this.hierarchy.forEach(t=>{const n=this.errors.filter(e=>e.executeContext.item.id===t.item.id&&e.error.origin.location===c.a.Execute.ErrorLocation.config&&e.error.origin.section===c.a.Execute.ErrorSection.settings&&"onSuccess"===e.error.origin.property);e.push(...n)}),e}onEditorInit(e){this.editorModel=e,this.setContext(),this.editorModel.onDidChangeContent(e=>{this.textToSave$.next(this.editorModel.getValue())})}setContext(){this.editorModel&&this.bluEditorService.registerCompletionProvider(monaco,this.renderContext)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(Ze.a),s.Mb(je))},e.\u0275cmp=s.Gb({type:e,selectors:[["settings-on-success"]],inputs:{item:"item",renderContext:"renderContext",renderedOnSuccess:"renderedOnSuccess",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[s.zb],decls:8,vars:2,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-check"],[1,"p-2"],["class","pl-1 pb-2",4,"ngIf"],[1,"position-relative"],[4,"ngFor","ngForOf"],[1,"pl-1","pb-2"],["class","text-danger text-small",4,"ngFor","ngForOf"],[1,"text-danger","text-small"],[1,"fa","fa-exclamation-triangle"],[4,"ngIf"],[1,"pb-2","cursor-pointer","position-relative",3,"click"],[1,"pl-1"],[1,"d-flex","align-items-center"],[1,"",2,"min-width","250px"],[1,"fa","fa-chevron-right","text-tiny"],["class","pl-2 pt-1",4,"ngIf"],[1,"pl-2","pt-1"],[1,"border","border-radius","p-1"],[3,"text","editorOptions","height","onEditorInit"],[1,"pt-3","pb-1","border-bottom"],[1,"pt-2"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," On Success"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Cc(5,pt,2,1,"div",4),s.Sb(6,"div",5),s.Cc(7,bt,2,1,"ng-container",6),s.Rb(),s.Rb()),2&e&&(s.Bb(5),s.kc("ngIf",t.sectionErrors.length>0),s.Bb(2),s.kc("ngForOf",t.hierarchy))},directives:[i.t,i.s,ze.a],styles:[""]}),e})(),mt=(()=>{class e{constructor(e){this.httpService=e,this.onConfigUpdated=new s.o,this.property="description",this.descriptionText=null,this.editorOptions={language:"txt",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1},this.textToSave$=new Ue.a,this.subs=new f.a}ngOnInit(){this.editProperty(this.item),this.subs.add(this.textToSave$.pipe(Object(De.a)(250),Object(We.a)()).subscribe(e=>{this.selectedItem.config.settings.description=e,this.saveForm()}))}ngOnDestroy(){this.subs.unsubscribe()}editProperty(e){setTimeout(()=>{this.descriptionText=e.config.settings.description,this.selectedItem=e},20)}saveForm(){this.httpService.put("/blueprints/config",{config:this.selectedItem.config,path:this.selectedItem.configPath}).subscribe(e=>{this.onConfigUpdated.emit(!0)})}saveDescription(e){this.textToSave$.next(e)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(Ze.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["settings-description"]],inputs:{item:"item"},outputs:{onConfigUpdated:"onConfigUpdated"},decls:7,vars:3,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-info-circle"],[1,"p-2"],[1,"p-2","border","border-radius"],[3,"text","editorOptions","height","onContentChange"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Description"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Sb(5,"div",4),s.Sb(6,"file-editor",5),s.ac("onContentChange",(function(e){return t.saveDescription(e)})),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Bb(6),s.kc("text",t.descriptionText)("editorOptions",t.editorOptions)("height","60px"))},directives:[ze.a],styles:[""]}),e})();function vt(e,t){1&e&&s.Nb(0,"i",14)}function xt(e,t){if(1&e){const e=s.Tb();s.Sb(0,"li",11),s.ac("click",(function(){s.sc(e);const n=t.$implicit;return s.ec().selectProperty(n.name)})),s.Nb(1,"i",12),s.Ec(2),s.Cc(3,vt,1,0,"i",13),s.Rb()}if(2&e){const e=t.$implicit,n=s.ec();s.Eb("text-primary",n.selectedProperty===e.name),s.Bb(1),s.kc("ngClass",e.icon),s.Bb(1),s.Gc(" ",e.name," "),s.Bb(1),s.kc("ngIf",n.hasError(e))}}function St(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"settings-filenames",15),s.ac("onConfigUpdated",(function(){return s.sc(e),s.ec().configUpdated()})),s.Rb(),s.Pb()}if(2&e){const e=s.ec();s.Bb(1),s.kc("item",e.item)("renderContext",e.renderContext)("errors",e.errors)}}function kt(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"settings-on-success",16),s.ac("onConfigUpdated",(function(){return s.sc(e),s.ec().configUpdated()})),s.Rb(),s.Pb()}if(2&e){const e=s.ec();s.Bb(1),s.kc("item",e.item)("renderContext",e.renderContext)("renderedOnSuccess",e.renderedOnSuccess)("errors",e.errors)}}function Ct(e,t){if(1&e&&(s.Qb(0),s.Nb(1,"settings-description",17),s.Pb()),2&e){const e=s.ec();s.Bb(1),s.kc("item",e.item)}}let yt=(()=>{class e{constructor(){this.errors=[],this.onConfigUpdated=new s.o,this.properties=[{name:"filenames",icon:"far fa-file",title:"Filenames"},{name:"description",icon:"fa fa-info-circle",title:"Description"},{name:"onSuccess",icon:"fa fa-check",title:"onSuccess"}]}ngOnInit(){this.selectedProperty=this.properties[0].name}ngOnDestroy(){}selectProperty(e){this.selectedProperty=e}configUpdated(){this.onConfigUpdated.emit(!0)}hasError(e){return!!this.errors.find(t=>t.executeContext.item.id===this.item.id&&t.error.origin.location===c.a.Execute.ErrorLocation.config&&t.error.origin.section===c.a.Execute.ErrorSection.settings&&t.error.origin.property===e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["config-settings"]],inputs:{item:"item",renderContext:"renderContext",renderedOnSuccess:"renderedOnSuccess",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},decls:14,vars:4,consts:[[1,"d-flex","align-items-start"],[1,"",2,"width","110px"],[1,"config-list","border-bottom","py-1"],[1,"config-title"],[1,"fa","fa-wrench","config-icon"],[1,"inline-block"],[1,"list-unstyled","config-list","pt-1"],["class","text-capitalize cursor-pointer",3,"text-primary","click",4,"ngFor","ngForOf"],[1,"flex-grow-1"],[1,""],[4,"ngIf"],[1,"text-capitalize","cursor-pointer",3,"click"],[1,"config-icon",3,"ngClass"],["class","fa fa-exclamation-circle text-danger text-tiny",4,"ngIf"],[1,"fa","fa-exclamation-circle","text-danger","text-tiny"],[3,"item","renderContext","errors","onConfigUpdated"],[3,"item","renderContext","renderedOnSuccess","errors","onConfigUpdated"],[3,"item"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Nb(4,"i",4),s.Sb(5,"div",5),s.Ec(6,"Settings"),s.Rb(),s.Rb(),s.Rb(),s.Sb(7,"ul",6),s.Cc(8,xt,4,5,"li",7),s.Rb(),s.Rb(),s.Sb(9,"div",8),s.Sb(10,"div",9),s.Cc(11,St,2,3,"ng-container",10),s.Cc(12,kt,2,4,"ng-container",10),s.Cc(13,Ct,2,1,"ng-container",10),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Bb(8),s.kc("ngForOf",t.properties),s.Bb(3),s.kc("ngIf","filenames"===t.selectedProperty),s.Bb(1),s.kc("ngIf","onSuccess"===t.selectedProperty),s.Bb(1),s.kc("ngIf","description"===t.selectedProperty))},directives:[i.s,i.t,i.q,ut,gt,mt],styles:[".config-list[_ngcontent-%COMP%]{position:relative;width:102px}.config-list[_ngcontent-%COMP%]   .config-title[_ngcontent-%COMP%], .config-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:26px}.config-list[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]{left:10px;top:6px;position:absolute;font-size:.6rem;opacity:.8}"]}),e})();function It(e,t){1&e&&(s.Sb(0,"mat-error"),s.Ec(1,"Input is required"),s.Rb())}function Rt(e,t){1&e&&(s.Sb(0,"mat-error"),s.Ec(1,"Only alpha-numeric and _ characters allowed"),s.Rb())}function wt(e,t){if(1&e&&(s.Sb(0,"mat-error"),s.Ec(1),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.Hc("A function with this name already exists in ",e.item.type,": ",e.item.name," ")}}function _t(e,t){1&e&&(s.Sb(0,"span",13),s.Nb(1,"i",14),s.Ec(2," Valid"),s.Rb())}let Et=(()=>{class e{constructor(e){this.fb=e,this.form=new s.o,this.editorOptions={language:"javascript"},this.validFunction=!1}ngOnInit(){var e,t;console.log("ITEM::::",this.item),this.model=this.functionToEdit.originalValue,this.item=this.functionToEdit.item,this.functionText=""+(null!==(t=null===(e=this.model)||void 0===e?void 0:e.execFunc)&&void 0!==t?t:""),this.initForm(),this.formGroup.valueChanges.subscribe(e=>{}),this.form.emit(this.formGroup)}initForm(){this.formGroup=this.fb.group({id:[this.model.id,[m.E.required]],name:[this.model.name,[m.E.required,m.E.pattern(/^[a-zA-Z0-9_]+$/),this.uniqueName(this.item.config.functions)]],description:[this.model.description,[]],execFunc:[this.model.execFunc,[m.E.required]]})}uniqueName(e){return t=>e.filter(e=>e.id!==this.functionToEdit.originalValue.id).map(e=>e.name).includes(t.value)?{functionNameExists:!0}:null}get f(){return this.formGroup.controls}ngOnDestroy(){}saveFunction(e){this.validFunction=!1;try{if("function"!=typeof eval.call(null,`({execFunc:${e}})`).execFunc)throw{message:"Must be a function"};this.validFunction=!0,this.f.execFunc.setValue(e)}catch(t){this.f.execFunc.setValue("")}}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(m.f))},e.\u0275cmp=s.Gb({type:e,selectors:[["functions-form"]],inputs:{functionToEdit:"functionToEdit"},outputs:{form:"form"},decls:18,vars:8,consts:[[1,"mat-form",3,"formGroup"],[1,""],[1,"w-100"],["placeholder","Function name","type","text","matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"pt-1"],["placeholder","Function Description","type","text","matInput","","formControlName","description"],[1,"row"],[1,"col"],[1,"pb-1","d-flex"],[1,"ml-auto"],["class","text-success",4,"ngIf"],[3,"text","editorOptions","height","onContentChange"],[1,"text-success"],[1,"fa","fa-check-circle"]],template:function(e,t){1&e&&(s.Sb(0,"form",0),s.Sb(1,"div",1),s.Sb(2,"mat-form-field",2),s.Nb(3,"input",3),s.Cc(4,It,2,0,"mat-error",4),s.Cc(5,Rt,2,0,"mat-error",4),s.Cc(6,wt,2,2,"mat-error",4),s.Rb(),s.Rb(),s.Sb(7,"div",5),s.Sb(8,"mat-form-field",2),s.Nb(9,"textarea",6),s.Rb(),s.Rb(),s.Rb(),s.Sb(10,"div",7),s.Sb(11,"div",8),s.Sb(12,"div",9),s.Sb(13,"div"),s.Ec(14,"Javascript Function:"),s.Rb(),s.Sb(15,"div",10),s.Cc(16,_t,3,0,"span",11),s.Rb(),s.Rb(),s.Sb(17,"file-editor",12),s.ac("onContentChange",(function(e){return t.saveFunction(e)})),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.kc("formGroup",t.formGroup),s.Bb(4),s.kc("ngIf",null==t.f.name||null==t.f.name.errors?null:t.f.name.errors.required),s.Bb(1),s.kc("ngIf",null==t.f.name||null==t.f.name.errors?null:t.f.name.errors.pattern),s.Bb(1),s.kc("ngIf",null==t.f.name||null==t.f.name.errors?null:t.f.name.errors.functionNameExists),s.Bb(10),s.kc("ngIf",t.validFunction),s.Bb(1),s.kc("text",t.functionText)("editorOptions",t.editorOptions)("height","400px"))},directives:[m.G,m.r,m.j,x.c,S.a,m.c,m.q,m.i,m.B,i.t,ze.a,x.b],styles:[""]}),e})(),Ot=(()=>{class e{constructor(e,t,n,i){this.fb=e,this.data=t,this.httpService=n,this.dialogRef=i}ngOnInit(){this.functionToEdit=this.data.functionToEdit}ngOnDestroy(){}formChanged(e){this.form=e}deleteFunction(e,t){const n=e.config.functions.findIndex(e=>e.id===t.id);n>=0&&e.config.functions.splice(n,1)}saveForm(){"update"===this.functionToEdit.action&&this.deleteFunction(this.functionToEdit.item,this.functionToEdit.originalValue),this.functionToEdit.item.config.functions.push(this.form.value),this.saveConfig(this.functionToEdit.item.config,this.functionToEdit.item.configPath),console.log("FORM:",this.form.value)}saveConfig(e,t){this.httpService.put("/blueprints/config",{config:e,path:t}).subscribe(e=>{this.close(!0)})}close(e){this.dialogRef.close({updated:e})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(m.f),s.Mb(g.a),s.Mb(Ze.a),s.Mb(g.h))},e.\u0275cmp=s.Gb({type:e,selectors:[["edit-function-dialog"]],decls:15,vars:6,consts:[["mat-dialog-title",""],[1,"text-capitalize"],["mat-dialog-content",""],[1,""],[3,"functionToEdit","form"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"]],template:function(e,t){1&e&&(s.Sb(0,"h1",0),s.Sb(1,"span",1),s.Ec(2),s.Rb(),s.Ec(3," Function for "),s.Sb(4,"span",1),s.Ec(5),s.Rb(),s.Ec(6),s.Rb(),s.Sb(7,"div",2),s.Sb(8,"div",3),s.Sb(9,"functions-form",4),s.ac("form",(function(e){return t.formChanged(e)})),s.Rb(),s.Rb(),s.Rb(),s.Sb(10,"div",5),s.Sb(11,"button",6),s.ac("click",(function(){return t.close(!1)})),s.Ec(12,"Cancel"),s.Rb(),s.Sb(13,"button",7),s.ac("click",(function(){return t.saveForm()})),s.Ec(14,"Save"),s.Rb(),s.Rb()),2&e&&(s.Bb(2),s.Fc(t.functionToEdit.action),s.Bb(3),s.Fc(t.functionToEdit.item.type),s.Bb(1),s.Gc(": ",t.functionToEdit.item.name,""),s.Bb(3),s.kc("functionToEdit",t.functionToEdit),s.Bb(1),s.kc("align","end"),s.Bb(3),s.kc("disabled",t.form.invalid))},directives:[g.i,g.f,Et,g.c,k.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();class Tt{static UUID(){return Tt.UUIDv4("xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx")}static UUIDShort(){return Tt.UUIDv4("xxxxxxxx")}static UUIDv4(e){return e.replace(/[xy]/g,e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)})}}function Ft(e,t){if(1&e&&(s.Sb(0,"div",9),s.Nb(1,"i",10),s.Ec(2),s.Rb()),2&e){const e=t.$implicit;s.Bb(2),s.Gc(" ",e.error.data.message,"")}}function Pt(e,t){if(1&e&&(s.Sb(0,"div",7),s.Cc(1,Ft,3,1,"div",8),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngForOf",e.sectionErrors)}}function Mt(e,t){1&e&&(s.Sb(0,"div",22),s.Ec(1,"No functions present"),s.Rb())}function Bt(e,t){if(1&e){const e=s.Tb();s.Sb(0,"tr"),s.Sb(1,"td",24),s.ac("click",(function(){s.sc(e);const n=t.$implicit,i=s.ec(2).$implicit;return s.ec().editFunction(i.item,n)})),s.Nb(2,"i",25),s.Ec(3),s.Rb(),s.Sb(4,"td",26),s.ac("click",(function(){s.sc(e);const n=t.$implicit,i=s.ec(2).$implicit;return s.ec().editFunction(i.item,n)})),s.Ec(5),s.Rb(),s.Sb(6,"td",27),s.ac("click",(function(){s.sc(e);const n=t.$implicit,i=s.ec(2).$implicit;return s.ec().deleteFunction(i.item,n)})),s.Sb(7,"div",28),s.Nb(8,"i",29),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit;s.Bb(3),s.Gc(" ",e.name,""),s.Bb(2),s.Fc(e.description)}}function $t(e,t){if(1&e&&(s.Sb(0,"table"),s.Cc(1,Bt,9,2,"tr",23),s.Rb()),2&e){const e=s.ec().$implicit;s.Bb(1),s.kc("ngForOf",e.functions)}}function Nt(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",11),s.Sb(1,"div",12),s.Sb(2,"div",13),s.Sb(3,"div",14),s.Nb(4,"i",15),s.Ec(5),s.Rb(),s.Sb(6,"div",16),s.Sb(7,"button",17),s.ac("click",(function(){s.sc(e);const n=t.$implicit;return s.ec().createNewFunction(n.item)})),s.Nb(8,"i",18),s.Ec(9," Add Function"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(10,"div",19),s.Cc(11,Mt,2,0,"div",20),s.Cc(12,$t,2,1,"table",21),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit;s.Bb(5),s.Hc(" ",e.item.type,": ",e.item.name," "),s.Bb(6),s.kc("ngIf",0===e.functions.length),s.Bb(1),s.kc("ngIf",e.functions.length>0)}}let zt=(()=>{class e{constructor(e,t){this.httpService=e,this.dialog=t,this.errors=[],this.onConfigUpdated=new s.o,this.hierarchy=[],this.sectionErrors=[]}ngOnInit(){this.sectionErrors=this.getErrors(),this.determineHierarchy()}ngOnChanges(e){this.sectionErrors=this.getErrors(),this.determineHierarchy()}determineHierarchy(){this.hierarchy=[];let e=this.item;if(e)for(this.setHierarchy(e);e.parent;)this.setHierarchy(e.parent),e=e.parent}setHierarchy(e){this.hierarchy.unshift({item:e,functions:e.config.functions})}ngOnDestroy(){}getPadding(e){return 20*e+"px"}formChanged(e){this.form=e,console.log("form:",e)}getErrors(){const e=[];return this.hierarchy.forEach(t=>{const n=this.errors.filter(e=>e.executeContext.item.id===t.item.id&&e.error.origin.location===c.a.Execute.ErrorLocation.config&&e.error.origin.section===c.a.Execute.ErrorSection.functions);e.push(...n)}),e}saveConfig(e,t){this.httpService.put("/blueprints/config",{config:e,path:t}).subscribe(e=>this.configUpdated())}deleteFunction(e,t){const n=e.config.functions.findIndex(e=>e.id===t.id);n>=0&&e.config.functions.splice(n,1),this.saveConfig(e.config,e.configPath)}createNewFunction(e){const t={id:Tt.UUIDShort(),name:"",description:"",execFunc:"(param) => {\n  return param;\n}"};this.editForm("create",e,t)}editFunction(e,t){this.editForm("update",e,t)}editForm(e,t,n){this.dialog.open(Ot,{data:{functionToEdit:{action:e,item:t,originalValue:n}},minWidth:"800px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{e.updated&&this.configUpdated()})}configUpdated(){this.onConfigUpdated.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(Ze.a),s.Mb(g.b))},e.\u0275cmp=s.Gb({type:e,selectors:[["config-functions"]],inputs:{item:"item",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[s.zb],decls:8,vars:2,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-magic"],[1,"p-2"],["class","pl-4 pb-2",4,"ngIf"],[1,"position-relative"],["class","pb-2 cursor-pointer position-relative",4,"ngFor","ngForOf"],[1,"pl-4","pb-2"],["class","text-danger text-small",4,"ngFor","ngForOf"],[1,"text-danger","text-small"],[1,"fa","fa-exclamation-triangle"],[1,"pb-2","cursor-pointer","position-relative"],[1,"pl-1"],[1,"d-flex","align-items-center"],[1,"",2,"min-width","250px"],[1,"fa","fa-chevron-right","text-tiny"],[1,""],["mat-button","",1,"",3,"click"],[1,"fa","fa-plus","text-tiny"],[1,"pl-4","pt-1"],["class","text-muted text-tiny",4,"ngIf"],[4,"ngIf"],[1,"text-muted","text-tiny"],[4,"ngFor","ngForOf"],[1,"cursor-pointer","p-1",3,"click"],[1,"fa","fa-magic","text-tiny","mr-1"],[1,"text-muted","p-1","pl-3",3,"click"],[3,"click"],[1,"pl-4"],[1,"fa","fa-trash-alt"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Functions"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Cc(5,Pt,2,1,"div",4),s.Sb(6,"div",5),s.Cc(7,Nt,13,4,"div",6),s.Rb(),s.Rb()),2&e&&(s.Bb(5),s.kc("ngIf",t.sectionErrors.length>0),s.Bb(2),s.kc("ngForOf",t.hierarchy))},directives:[i.t,i.s,k.b],styles:[""]}),e})();function At(e,t){1&e&&(s.Sb(0,"div",10),s.Nb(1,"i",11),s.Ec(2," Saved"),s.Rb())}function Ut(e,t){1&e&&(s.Sb(0,"div",12),s.Nb(1,"i",13),s.Ec(2," Error"),s.Rb())}function Dt(e,t){if(1&e&&(s.Sb(0,"div",14),s.Nb(1,"i",15),s.Sb(2,"span",16),s.Ec(3),s.Rb(),s.Rb()),2&e){const e=s.ec();s.Bb(3),s.Fc(e.errorMessage)}}let jt=(()=>{class e{constructor(e,t,n,i,r){this.data=e,this.httpService=t,this.bluEditorService=n,this.cdr=i,this.dialogRef=r,this.textToSave$=new Ue.a,this.subs=new f.a,this.languageType="json",this.editorOptions={language:this.languageType,lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1}}ngOnInit(){this.item=this.data.item,this.renderContext=this.data.renderContext,this.text=JSON.stringify(this.item.config.variables,null,2),this.subs.add(this.textToSave$.pipe(Object(De.a)(250),Object(We.a)()).subscribe(e=>{this.saveVariables(e)}))}ngOnDestroy(){this.subs.unsubscribe(),this.bluEditorService.disposeCompletionProvider()}saveVariables(e){try{this.item.config.variables=JSON.parse(e),this.saved=!0,this.saveConfig(this.item.config,this.item.configPath)}catch(t){this.errorMessage=t.toString(),this.saved=!1}this.cdr.detectChanges()}saveConfig(e,t){this.httpService.put("/blueprints/config",{config:e,path:t}).subscribe(e=>{})}close(e){this.dialogRef.close({updated:e})}onEditorInit(e){this.editorModel=e,this.setContext(),this.editorModel.onDidChangeContent(e=>{this.textToSave$.next(this.editorModel.getValue())})}setContext(){this.editorModel&&this.bluEditorService.registerCompletionProvider(monaco,this.renderContext,this.languageType)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(g.a),s.Mb(Ze.a),s.Mb(je),s.Mb(s.h),s.Mb(g.h))},e.\u0275cmp=s.Gb({type:e,selectors:[["edit-variables-dialog"]],decls:15,vars:9,consts:[["mat-dialog-title",""],[1,"text-capitalize"],["mat-dialog-content","",2,"height","300px"],[1,"text-right",2,"height","20px"],["class","text-success",4,"ngIf"],["class","text-danger",4,"ngIf"],[3,"text","editorOptions","height","onEditorInit"],["class","pt-1",4,"ngIf"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"],[1,"text-success"],[1,"fa","fa-check"],[1,"text-danger"],[1,"fa","fa-times-circle"],[1,"pt-1"],[1,"fa","fa-exclamation-triangle","text-warning","mr-1"],[1,"text-small","text-muted"]],template:function(e,t){1&e&&(s.Sb(0,"h1",0),s.Sb(1,"span",1),s.Ec(2,"Edit Variables for "),s.Rb(),s.Sb(3,"span",1),s.Ec(4),s.Rb(),s.Ec(5),s.Rb(),s.Sb(6,"div",2),s.Sb(7,"div",3),s.Cc(8,At,3,0,"div",4),s.Cc(9,Ut,3,0,"div",5),s.Rb(),s.Sb(10,"file-editor",6),s.ac("onEditorInit",(function(e){return t.onEditorInit(e)})),s.Rb(),s.Cc(11,Dt,4,1,"div",7),s.Rb(),s.Sb(12,"div",8),s.Sb(13,"button",9),s.ac("click",(function(){return t.close(!0)})),s.Ec(14,"Close"),s.Rb(),s.Rb()),2&e&&(s.Bb(4),s.Fc(t.item.type),s.Bb(1),s.Gc(": ",t.item.name,""),s.Bb(3),s.kc("ngIf",!0===t.saved),s.Bb(1),s.kc("ngIf",!1===t.saved),s.Bb(1),s.kc("text",t.text)("editorOptions",t.editorOptions)("height","250px"),s.Bb(1),s.kc("ngIf",!1===t.saved),s.Bb(1),s.kc("align","end"))},directives:[g.i,g.f,i.t,ze.a,g.c,k.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();function Lt(e,t){if(1&e&&(s.Sb(0,"div",9),s.Nb(1,"i",10),s.Ec(2),s.Rb()),2&e){const e=t.$implicit;s.Bb(2),s.Gc(" ",e.error.data.message,"")}}function Gt(e,t){if(1&e&&(s.Sb(0,"div",7),s.Cc(1,Lt,3,1,"div",8),s.Rb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngForOf",e.sectionErrors)}}function Ht(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",11),s.ac("click",(function(){s.sc(e);const n=t.$implicit;return s.ec().editVariables(n.item)})),s.Sb(1,"div",12),s.Sb(2,"div",13),s.Sb(3,"div",14),s.Nb(4,"i",15),s.Ec(5),s.Rb(),s.Rb(),s.Rb(),s.Sb(6,"div",16),s.Sb(7,"pre"),s.Ec(8),s.fc(9,"json"),s.Rb(),s.Rb(),s.Rb()}if(2&e){const e=t.$implicit;s.Bb(5),s.Hc(" ",e.item.type,": ",e.item.name," "),s.Bb(3),s.Fc(s.gc(9,3,e.variables))}}let qt=(()=>{class e{constructor(e){this.dialog=e,this.errors=[],this.onConfigUpdated=new s.o,this.hierarchy=[],this.sectionErrors=[]}ngOnInit(){this.sectionErrors=this.getErrors(),this.determineHierarchy()}ngOnChanges(e){this.sectionErrors=this.getErrors(),this.determineHierarchy()}determineHierarchy(){this.hierarchy=[];let e=this.item;if(e)for(this.setHierarchy(e);e.parent;)this.setHierarchy(e.parent),e=e.parent}setHierarchy(e){this.hierarchy.unshift({item:e,variables:e.config.variables})}ngOnDestroy(){}getErrors(){const e=[];return this.hierarchy.forEach(t=>{const n=this.errors.filter(e=>e.executeContext.item.id===t.item.id&&e.error.origin.location===c.a.Execute.ErrorLocation.config&&e.error.origin.section===c.a.Execute.ErrorSection.variables);e.push(...n)}),e}editVariables(e){this.dialog.open(jt,{data:{item:e,renderContext:this.renderContext},minWidth:"650px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{this.determineHierarchy(),this.configUpdated()})}configUpdated(){this.onConfigUpdated.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(g.b))},e.\u0275cmp=s.Gb({type:e,selectors:[["config-variables"]],inputs:{item:"item",renderContext:"renderContext",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[s.zb],decls:8,vars:2,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-equals"],[1,"p-2"],["class","pl-4 pb-2",4,"ngIf"],[1,"position-relative"],["class","cursor-pointer position-relative",3,"click",4,"ngFor","ngForOf"],[1,"pl-4","pb-2"],["class","text-danger text-small",4,"ngFor","ngForOf"],[1,"text-danger","text-small"],[1,"fa","fa-exclamation-triangle"],[1,"cursor-pointer","position-relative",3,"click"],[1,"pl-1"],[1,"d-flex","align-items-center"],[1,"",2,"min-width","250px"],[1,"fa","fa-chevron-right","text-tiny"],[1,"pl-4","pt-1"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Variables"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Cc(5,Gt,2,1,"div",4),s.Sb(6,"div",5),s.Cc(7,Ht,10,5,"div",6),s.Rb(),s.Rb()),2&e&&(s.Bb(5),s.kc("ngIf",t.sectionErrors.length>0),s.Bb(2),s.kc("ngForOf",t.hierarchy))},directives:[i.t,i.s],pipes:[i.k],styles:[""]}),e})(),Kt=(()=>{class e{constructor(){}ngOnInit(){}ngOnDestroy(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=s.Gb({type:e,selectors:[["config-links"]],decls:5,vars:0,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-link"],[1,"p-2"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Links"),s.Rb(),s.Rb(),s.Nb(4,"div",3))},styles:[""]}),e})(),Jt=(()=>{class e{constructor(e){this.editorService=e,this.editorOptions={language:"json",readOnly:!0,renderLineHighlight:"none",matchBrackets:"never",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",folding:!1},this.subs=new f.a}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>{var t,n,i;const r={},s=null!==(i=null===(n=null===(t=e.selectedContext)||void 0===t?void 0:t.executeContext)||void 0===n?void 0:n.itemContext.variables)&&void 0!==i?i:[];s.sort((e,t)=>e.name<t.name?-1:e.name>t.name?1:0),s.forEach(e=>r[e.name]=e.value),this.text=JSON.stringify(r,null,2)}))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["context-inputs"]],decls:6,vars:3,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-chevron-right"],[1,"p-2",2,"height","90%"],[3,"text","editorOptions","height"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Context Inputs"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Nb(5,"file-editor",4),s.Rb()),2&e&&(s.Bb(5),s.kc("text",t.text)("editorOptions",t.editorOptions)("height","100%"))},directives:[ze.a],styles:[""]}),e})();function Qt(e,t){if(1&e&&(s.Sb(0,"span",10),s.Ec(1),s.Rb()),2&e){const e=s.ec().$implicit;s.Bb(1),s.Gc("",e.origin.type,": ")}}function Vt(e,t){if(1&e&&(s.Sb(0,"tr"),s.Sb(1,"td"),s.Sb(2,"div",6),s.Ec(3),s.Rb(),s.Sb(4,"div",7),s.Ec(5),s.Rb(),s.Rb(),s.Sb(6,"td"),s.Sb(7,"div",8),s.Cc(8,Qt,2,1,"span",9),s.Sb(9,"span"),s.Ec(10),s.Rb(),s.Rb(),s.Rb(),s.Nb(11,"td"),s.Rb()),2&e){const e=t.$implicit;s.Bb(3),s.Fc(e.name),s.Bb(2),s.Fc(e.description),s.Bb(3),s.kc("ngIf","blu"!==e.origin.type),s.Bb(1),s.Eb("text-capitalize","blu"===e.origin.type),s.Bb(1),s.Fc(e.origin.name)}}let Wt=(()=>{class e{constructor(e){this.editorService=e,this.subs=new f.a}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>{var t,n;this.selectedContext=e.selectedContext,this.functions=null===(n=null===(t=e.selectedContext)||void 0===t?void 0:t.executeContext)||void 0===n?void 0:n.itemContext.functions,console.log("",this.selectedContext)}))}ngOnDestroy(){this.subs.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["context-functions"]],decls:13,vars:1,consts:[[1,"border-bottom"],[1,"p-1","pl-2"],[1,"fa","fa-magic"],[1,"p-2"],[1,"table","table-borderless","tight-table"],[4,"ngFor","ngForOf"],[1,"text-bold"],[1,"small","text-muted"],[1,"badge","rounded-pill","bg-light"],["class","text-capitalize",4,"ngIf"],[1,"text-capitalize"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Nb(2,"i",2),s.Ec(3," Context Functions"),s.Rb(),s.Rb(),s.Sb(4,"div",3),s.Sb(5,"table",4),s.Sb(6,"tr"),s.Sb(7,"th"),s.Ec(8,"Name/Description"),s.Rb(),s.Sb(9,"th"),s.Ec(10,"Located in"),s.Rb(),s.Nb(11,"th"),s.Rb(),s.Cc(12,Vt,12,6,"tr",5),s.Rb(),s.Rb()),2&e&&(s.Bb(12),s.kc("ngForOf",t.functions))},directives:[i.s,i.t],styles:[".tight-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .tight-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.2rem}"]}),e})();function Zt(e,t){if(1&e){const e=s.Tb();s.Sb(0,"li",7),s.ac("click",(function(){return s.sc(e),s.ec().selectSection("errors")})),s.Nb(1,"i",22),s.Ec(2," Errors "),s.Sb(3,"span",23),s.Ec(4),s.Rb(),s.Rb()}if(2&e){const e=s.ec();s.Eb("text-primary","errors"===e.selected)("text-danger","errors"!==e.selected),s.Bb(4),s.Gc("(",e.errors.length,")")}}function Xt(e,t){if(1&e){const e=s.Tb();s.Sb(0,"li",7),s.ac("click",(function(){return s.sc(e),s.ec().selectSection("commands")})),s.Nb(1,"i",24),s.Ec(2," Commands"),s.Rb()}if(2&e){const e=s.ec();s.Eb("text-primary","commands"===e.selected)}}function Yt(e,t){1&e&&s.Nb(0,"i",25)}function en(e,t){if(1&e&&(s.Qb(0),s.Nb(1,"error-list",26),s.Pb()),2&e){const e=s.ec();s.Bb(1),s.kc("errors",e.errors)}}function tn(e,t){if(1&e&&(s.Qb(0),s.Nb(1,"config-info",27),s.Pb()),2&e){const e=s.ec();s.Bb(1),s.kc("item",e.item)}}function nn(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"config-settings",28),s.ac("onConfigUpdated",(function(){return s.sc(e),s.ec().configUpdated()})),s.Rb(),s.Pb()}if(2&e){const e=s.ec();s.Bb(1),s.kc("item",e.item)("renderedOnSuccess",e.renderedOnSuccess)("renderContext",e.renderContext)("errors",e.errors)}}function rn(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"config-functions",29),s.ac("onConfigUpdated",(function(){return s.sc(e),s.ec().configUpdated()})),s.Rb(),s.Pb()}if(2&e){const e=s.ec();s.Bb(1),s.kc("item",e.item)("errors",e.errors)}}function sn(e,t){if(1&e){const e=s.Tb();s.Qb(0),s.Sb(1,"config-variables",30),s.ac("onConfigUpdated",(function(){return s.sc(e),s.ec().configUpdated()})),s.Rb(),s.Pb()}if(2&e){const e=s.ec();s.Bb(1),s.kc("item",e.item)("renderContext",e.renderContext)("errors",e.errors)}}function on(e,t){1&e&&(s.Qb(0),s.Nb(1,"config-links"),s.Pb())}function cn(e,t){1&e&&(s.Qb(0),s.Nb(1,"context-inputs"),s.Pb())}function an(e,t){1&e&&(s.Qb(0),s.Nb(1,"context-functions"),s.Pb())}let ln=(()=>{class e{constructor(e,t,n){this.localStorageService=e,this.cdr=t,this.editorService=n,this.selected="info",this.errors=[],this.subs=new f.a,this.storeKey="templateConfigSelections"}ngOnInit(){this.subs.add(this.editorService.state$.subscribe(e=>{var t,n,i,r,s,o,c,a,l,u,d,p;this.item=null===(n=null===(t=e.selectedContext)||void 0===t?void 0:t.executeContext)||void 0===n?void 0:n.item,this.renderContext=null===(r=null===(i=e.selectedContext)||void 0===i?void 0:i.executeContext)||void 0===r?void 0:r.renderContext,this.renderedOnSuccess=null===(o=null===(s=e.selectedContext)||void 0===s?void 0:s.executeContext)||void 0===o?void 0:o.onSuccess,this.itemId=null===(c=e.selectedContext)||void 0===c?void 0:c.itemId,this.itemType=null===(l=null===(a=e.selectedContext)||void 0===a?void 0:a.executeContext)||void 0===l?void 0:l.item.type,this.errors=e.executeResult.createEditorErrors(null===(d=null===(u=e.selectedContext)||void 0===u?void 0:u.executeContext)||void 0===d?void 0:d.errors),this.storedSelections=null!==(p=this.localStorageService.getItem(this.storeKey))&&void 0!==p?p:{},this.storedSelections[this.itemId]&&(this.selected=this.storedSelections[this.itemId]),this.cdr.detectChanges()}))}ngOnDestroy(){}selectSection(e){this.selected=e,this.storedSelections[this.itemId]=this.selected,this.localStorageService.setItem(this.storeKey,this.storedSelections)}configUpdated(){this.editorService.reRender()}hasError(e){return!!this.errors.find(t=>{var n;return(null===(n=t.executeContext)||void 0===n?void 0:n.item.id)===this.item.id&&t.error.origin.location===c.a.Execute.ErrorLocation.config&&t.error.origin.section===c.a.Execute.ErrorSection[e]})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(Qe.a),s.Mb(s.h),s.Mb(d))},e.\u0275cmp=s.Gb({type:e,selectors:[["template-config"]],decls:49,vars:26,consts:[[1,"d-flex","template-config"],[1,"config-list","border-bottom","py-1"],[1,"config-title"],[1,"fa","fa-cog","config-icon"],[1,"inline-block"],[1,"list-unstyled","pb-0","pt-1","config-list","cursor-pointer"],[3,"text-primary","text-danger","click",4,"ngIf"],[3,"click"],[1,"fa","fa-info-circle","config-icon"],[3,"text-primary","click",4,"ngIf"],[1,"fa","fa-wrench","config-icon"],["class","fa fa-exclamation-circle text-danger text-tiny ml-1",4,"ngIf"],[1,"fa","fa-magic","config-icon"],[1,"fa","fa-equals","config-icon"],[1,"fa","fa-link","config-icon"],[1,"pt-2","config-list","border-bottom","py-1"],[1,"fab","fa-connectdevelop","config-icon"],[1,"list-unstyled","pb-0","config-list","cursor-pointer"],[1,"fa","fa-chevron-right","config-icon"],[1,"pl-2","w-100","h-100","config-contents"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"fa","fa-exclamation-triangle","config-icon"],[1,"text-tiny"],[1,"fa","fa-list","config-icon"],[1,"fa","fa-exclamation-circle","text-danger","text-tiny","ml-1"],[3,"errors"],[3,"item"],[3,"item","renderedOnSuccess","renderContext","errors","onConfigUpdated"],[3,"item","errors","onConfigUpdated"],[3,"item","renderContext","errors","onConfigUpdated"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div"),s.Sb(2,"div",1),s.Sb(3,"div",2),s.Nb(4,"i",3),s.Sb(5,"div",4),s.Ec(6,"Config"),s.Rb(),s.Rb(),s.Rb(),s.Sb(7,"ul",5),s.Cc(8,Zt,5,5,"li",6),s.Sb(9,"li",7),s.ac("click",(function(){return t.selectSection("info")})),s.Nb(10,"i",8),s.Ec(11," Readme"),s.Rb(),s.Cc(12,Xt,3,2,"li",9),s.Sb(13,"li",7),s.ac("click",(function(){return t.selectSection("settings")})),s.Nb(14,"i",10),s.Sb(15,"span"),s.Ec(16,"Settings"),s.Rb(),s.Cc(17,Yt,1,0,"i",11),s.Rb(),s.Sb(18,"li",7),s.ac("click",(function(){return t.selectSection("functions")})),s.Nb(19,"i",12),s.Ec(20," Functions"),s.Rb(),s.Sb(21,"li",7),s.ac("click",(function(){return t.selectSection("variables")})),s.Nb(22,"i",13),s.Ec(23," Variables"),s.Rb(),s.Sb(24,"li",7),s.ac("click",(function(){return t.selectSection("links")})),s.Nb(25,"i",14),s.Ec(26," Links"),s.Rb(),s.Rb(),s.Sb(27,"div",15),s.Sb(28,"div",2),s.Nb(29,"i",16),s.Sb(30,"div",4),s.Ec(31,"Context"),s.Rb(),s.Rb(),s.Rb(),s.Sb(32,"ul",17),s.Sb(33,"li",7),s.ac("click",(function(){return t.selectSection("ctxInputs")})),s.Nb(34,"i",18),s.Ec(35," Inputs"),s.Rb(),s.Sb(36,"li",7),s.ac("click",(function(){return t.selectSection("ctxFunctions")})),s.Nb(37,"i",12),s.Ec(38," Functions"),s.Rb(),s.Rb(),s.Rb(),s.Sb(39,"div",19),s.Qb(40,20),s.Cc(41,en,2,1,"ng-container",21),s.Cc(42,tn,2,1,"ng-container",21),s.Cc(43,nn,2,4,"ng-container",21),s.Cc(44,rn,2,2,"ng-container",21),s.Cc(45,sn,2,3,"ng-container",21),s.Cc(46,on,2,0,"ng-container",21),s.Cc(47,cn,2,0,"ng-container",21),s.Cc(48,an,2,0,"ng-container",21),s.Pb(),s.Rb(),s.Rb()),2&e&&(s.Bb(8),s.kc("ngIf",t.errors.length>0),s.Bb(1),s.Eb("text-primary","info"===t.selected),s.Bb(3),s.kc("ngIf","chain"===t.itemType),s.Bb(1),s.Eb("text-primary","settings"===t.selected),s.Bb(4),s.kc("ngIf",t.hasError("settings")),s.Bb(1),s.Eb("text-primary","functions"===t.selected),s.Bb(3),s.Eb("text-primary","variables"===t.selected),s.Bb(3),s.Eb("text-primary","links"===t.selected),s.Bb(9),s.Eb("text-primary","ctxInputs"===t.selected),s.Bb(3),s.Eb("text-primary","ctxFunctions"===t.selected),s.Bb(4),s.kc("ngSwitch",t.selected),s.Bb(1),s.kc("ngSwitchCase","errors"),s.Bb(1),s.kc("ngSwitchCase","info"),s.Bb(1),s.kc("ngSwitchCase","settings"),s.Bb(1),s.kc("ngSwitchCase","functions"),s.Bb(1),s.kc("ngSwitchCase","variables"),s.Bb(1),s.kc("ngSwitchCase","links"),s.Bb(1),s.kc("ngSwitchCase","ctxInputs"),s.Bb(1),s.kc("ngSwitchCase","ctxFunctions"))},directives:[i.t,i.x,i.y,Be,st,yt,zt,qt,Kt,Jt,Wt],styles:[".template-config[_ngcontent-%COMP%]{height:calc(100vh - 110px)}.config-list[_ngcontent-%COMP%]{position:relative;width:102px}.config-list[_ngcontent-%COMP%]   .config-title[_ngcontent-%COMP%], .config-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:26px}.config-list[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]{left:10px;top:6px;position:absolute;font-size:.6rem;opacity:.8}.config-contents[_ngcontent-%COMP%]{flex:1}"]}),e})();function un(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div",11),s.ac("click",(function(){return s.sc(e),s.ec().selectErrors()})),s.Nb(1,"i",12),s.Ec(2),s.Rb()}if(2&e){const e=s.ec();s.Eb("text-primary","errors"===(null==e.state?null:e.state.navSection))("text-danger","errors"!==(null==e.state?null:e.state.navSection)),s.Bb(2),s.Gc(" Errors (",e.state.executeResult.errors.length,") ")}}function dn(e,t){1&e&&(s.Qb(0),s.Nb(1,"editor-items"),s.Pb())}function pn(e,t){1&e&&(s.Qb(0),s.Nb(1,"generated-files"),s.Pb())}function hn(e,t){if(1&e){const e=s.Tb();s.Sb(0,"div"),s.Sb(1,"div",15),s.Sb(2,"div",16),s.Sb(3,"div",17),s.ac("click",(function(){return s.sc(e),s.ec().selectItemSection("templates")})),s.Ec(4,"Templates"),s.Rb(),s.Sb(5,"div",17),s.ac("click",(function(){return s.sc(e),s.ec().selectItemSection("generated-files")})),s.Ec(6,"Generated Files"),s.Rb(),s.Rb(),s.Rb(),s.Cc(7,dn,2,0,"ng-container",13),s.Cc(8,pn,2,0,"ng-container",13),s.Rb()}if(2&e){const e=s.ec();s.Bb(3),s.Eb("selected","templates"===e.state.itemSection),s.Bb(2),s.Eb("selected","generated-files"===e.state.itemSection),s.Bb(2),s.kc("ngIf","templates"===e.state.itemSection),s.Bb(1),s.kc("ngIf","generated-files"===e.state.itemSection)}}function fn(e,t){1&e&&(s.Qb(0),s.Nb(1,"all-errors"),s.Pb())}function bn(e,t){1&e&&(s.Qb(0),s.Nb(1,"inputs-editor"),s.Pb())}function gn(e,t){1&e&&(s.Qb(0),s.Nb(1,"blu-file-editor"),s.Pb())}function mn(e,t){1&e&&(s.Qb(0),s.Nb(1,"template-config"),s.Pb())}function vn(e,t){if(1&e&&(s.Qb(0),s.Cc(1,gn,2,0,"ng-container",13),s.Cc(2,mn,2,0,"ng-container",13),s.Pb()),2&e){const e=s.ec();s.Bb(1),s.kc("ngIf","template"===(null==e.state?null:e.state.contentSection)),s.Bb(1),s.kc("ngIf","config"===(null==e.state?null:e.state.contentSection))}}const xn=r.f.forChild([{path:"",component:(()=>{class e{constructor(e,t,n,i,r,s){this.editorService=e,this.activatedRoute=t,this.appStateService=n,this.router=i,this.bluService=r,this.workspaceService=s,this.inputs={},this.router.routeReuseStrategy.shouldReuseRoute=()=>!1}ngOnInit(){const e=this.activatedRoute.snapshot.queryParams;this.command=e.mode,this.itemId=e.itemId,this.rootDestination=e.rootDestination,this.setInputs(e.inputs),this.editorService.state$.subscribe(e=>this.state=e),this.command&&this.itemId?this.preview():this.appStateService.openBluConsole()}setInputs(e){try{const t=JSON.parse(e);this.inputs=Object.assign({},this.inputs,t)}catch(t){this.inputs={}}}ngOnDestroy(){}selectInputs(){this.editorService.selectInputs()}preview(){this.editorService.preview(this.itemId,this.inputs,this.rootDestination)}selectItemSection(e){this.editorService.selectItemSection(e)}selectErrors(){this.editorService.selectErrors()}test(){this.bluService.parse("cmdOptionsGrammar","a=^^aaa^^ b=^^ggg^^").subscribe(e=>{console.log("PARSE:::",e)})}generate(){this.appStateService.openBluConsole({command:"generate",itemId:this.itemId,inputs:this.state.inputs,rootDestination:this.rootDestination,suggestedNames:[this.state.inputs.name]})}}return e.\u0275fac=function(t){return new(t||e)(s.Mb(d),s.Mb(r.a),s.Mb(p.a),s.Mb(r.b),s.Mb(u.a),s.Mb(h.a))},e.\u0275cmp=s.Gb({type:e,selectors:[["editor"]],decls:21,vars:11,consts:[[1,"editor"],[1,"editor-header"],[1,"d-flex","align-items-baseline"],[1,"command","pl-2","pt-2"],[1,"pl-2"],[1,"console","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,"text-muted","small","pl-2"],[1,"editor-body"],[1,"editor-nav","p-1","pl-2"],["class","cursor-pointer",3,"text-primary","text-danger","click",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"fa","fa-chevron-right",2,"font-size","0.6rem"],[4,"ngIf"],[1,"editor-contents"],[1,"pt-2","pb-1"],[1,"d-flex","item-selector","align-items-stretch"],[1,"text-center","selector-section",3,"click"]],template:function(e,t){1&e&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Sb(3,"div",3),s.Ec(4),s.Rb(),s.Sb(5,"div",4),s.Sb(6,"div",5),s.ac("click",(function(){return t.generate()})),s.Nb(7,"i",6),s.Rb(),s.Rb(),s.Rb(),s.Sb(8,"div",7),s.Ec(9),s.Rb(),s.Rb(),s.Sb(10,"div",8),s.Sb(11,"div",9),s.Cc(12,un,3,5,"div",10),s.Sb(13,"div",11),s.ac("click",(function(){return t.selectInputs()})),s.Nb(14,"i",12),s.Ec(15," Inputs "),s.Rb(),s.Cc(16,hn,9,6,"div",13),s.Rb(),s.Sb(17,"div",14),s.Cc(18,fn,2,0,"ng-container",13),s.Cc(19,bn,2,0,"ng-container",13),s.Cc(20,vn,3,2,"ng-container",13),s.Rb(),s.Rb(),s.Rb()),2&e&&(s.Bb(4),s.Ic("",t.command," ",t.itemId," ",null!=t.inputs&&t.inputs.name?t.inputs.name:"",""),s.Bb(5),s.Gc("Destination: ",t.rootDestination?t.rootDestination:"none selected (click to edit)",""),s.Bb(3),s.kc("ngIf",(null==t.state||null==t.state.executeResult?null:t.state.executeResult.errors.length)>0),s.Bb(1),s.Eb("text-primary","inputs"===(null==t.state?null:t.state.navSection)),s.Bb(3),s.kc("ngIf",null==t.state?null:t.state.executeResult),s.Bb(2),s.kc("ngIf","errors"===(null==t.state?null:t.state.navSection)),s.Bb(1),s.kc("ngIf","inputs"===(null==t.state?null:t.state.navSection)),s.Bb(1),s.kc("ngIf","file"===(null==t.state?null:t.state.navSection)))},directives:[i.t,Ce,Te,Ne,Ae,Je,ln],styles:[".editor[_ngcontent-%COMP%]{background-color:#fff}.editor-header[_ngcontent-%COMP%]{height:60px;width:100%;border-bottom:1px solid #f1f1f1}.editor-body[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 110px)}.editor-body[_ngcontent-%COMP%]   .editor-nav[_ngcontent-%COMP%]{flex:0 0 200px;order:-1;border-right:1px solid #f1f1f1;overflow:hidden}.editor-body[_ngcontent-%COMP%]   .editor-contents[_ngcontent-%COMP%]{flex:1}.command[_ngcontent-%COMP%]{font-size:1.1rem}.text-bold[_ngcontent-%COMP%]{font-weight:700}.has-error[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{border-bottom:1px dashed red}.has-error[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:red}.item-selector[_ngcontent-%COMP%]{font-size:.8rem;border-bottom:1px solid #f1f1f1}.item-selector[_ngcontent-%COMP%]   .selected[_ngcontent-%COMP%]{border-top:1px solid #f1f1f1!important;border-left:1px solid #f1f1f1!important;border-right:1px solid #f1f1f1!important;background-color:#f1f1f1}.item-selector[_ngcontent-%COMP%]   .selector-section[_ngcontent-%COMP%]{border-top:1px solid #fff;border-left:1px solid #fff;border-right:1px solid #fff;padding:3px 5px;cursor:pointer}"]}),e})()}]);var Sn=n("Pnzg");let kn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,O.c,re,k.c]]}),e})(),Cn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,kn,b.b]]}),e})();var yn=n("xyCH");let In=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,yn.a]]}),e})(),Rn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,Cn]]}),e})(),wn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,Le.b,m.l]]}),e})(),_n=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,Le.b]]}),e})(),En=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,wn,_n]]}),e})(),On=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,yn.a]]}),e})();var Tn=n("d3UM"),Fn=n("QibW");let Pn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,x.e,m.A,Tn.b,Fn.c,S.b]]}),e})(),Mn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,Pn,k.c]]}),e})(),Bn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,Mn,b.b,yn.a]]}),e})();var $n=n("fmAS");let Nn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,k.c,$n.a]]}),e})(),zn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c]]}),e})(),An=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c]]}),e})(),Un=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,yn.a]]}),e})(),Dn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c]]}),e})(),jn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c]]}),e})(),Ln=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c]]}),e})(),Gn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,On,Bn,Nn,zn,An,Un,Dn,jn,Ln]]}),e})(),Hn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,b.b]]}),e})(),qn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,Hn]]}),e})(),Kn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[i.c,Ln]]}),e})(),Jn=(()=>{class e{}return e.\u0275mod=s.Kb({type:e}),e.\u0275inj=s.Jb({factory:function(t){return new(t||e)},providers:[d],imports:[[i.c,xn,Le.b,m.l,k.c,Sn.a,Cn,In,Rn,En,Gn,qn,Kn]]}),e})()}}]);