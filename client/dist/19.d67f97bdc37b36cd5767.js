(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"4uq3":function(e,t,i){"use strict";i.r(t),i.d(t,"DataModelListModule",(function(){return Z}));var n=i("ofXK"),o=i("tyNb"),a=i("Mzu6"),d=i("fXoL"),c=i("0btQ"),l=i("0IaG"),r=i("bTqV"),s=i("dTU6"),b=i("a8/g"),u=i("3Pt+"),f=i("kmnG"),m=i("qFsG");let p=(()=>{class e{constructor(e){this.fb=e,this.onChange=new d.o,this.onDelete=new d.o,this.onCancel=new d.o}ngOnInit(){this.form=this.fb.group({name:[this.dataModel.name]}),this.form.valueChanges.subscribe(e=>{})}ngOnDestroy(){}saveForm(){this.onChange.emit(this.form.value)}deleteModel(){this.onDelete.emit(this.dataModel)}cancel(){this.onCancel.emit(this.dataModel)}}return e.\u0275fac=function(t){return new(t||e)(d.Lb(u.f))},e.\u0275cmp=d.Fb({type:e,selectors:[["model-structure-form"]],inputs:{dataModel:"dataModel"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:15,vars:1,consts:[[1,"p-2","d-flex","align-items-center","border-bottom"],[1,""],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer",3,"click"],[1,"p-2"],[3,"formGroup"],[1,"mat-form-field"],["placeholder","Model Name","matInput","","formControlName","name"],[1,"row"],[1,"col","text-right"],["mat-button","","mat-raised-button","",1,"mr-1",3,"click"],["mat-button","","mat-raised-button","",3,"click"]],template:function(e,t){1&e&&(d.Rb(0,"div",0),d.Rb(1,"div",1),d.Fc(2,"Model Settings"),d.Qb(),d.Rb(3,"div",2),d.Rb(4,"i",3),d.Zb("click",(function(){return t.deleteModel()})),d.Qb(),d.Qb(),d.Qb(),d.Rb(5,"div",4),d.Rb(6,"form",5),d.Rb(7,"mat-form-field",6),d.Mb(8,"input",7),d.Qb(),d.Qb(),d.Rb(9,"div",8),d.Rb(10,"div",9),d.Rb(11,"button",10),d.Zb("click",(function(){return t.cancel()})),d.Fc(12,"Cancel"),d.Qb(),d.Rb(13,"button",11),d.Zb("click",(function(){return t.saveForm()})),d.Fc(14,"Save"),d.Qb(),d.Qb(),d.Qb(),d.Qb()),2&e&&(d.Ab(6),d.jc("formGroup",t.form))},directives:[u.G,u.r,u.j,f.c,m.a,u.c,u.q,u.i,r.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var h=i("Qu3c"),M=i("dEoz");function g(e,t){if(1&e){const e=d.Sb();d.Rb(0,"div",3),d.Rb(1,"model-structure-form",4),d.Zb("onDelete",(function(t){return d.rc(e),d.dc().deleteModel(t)}))("onCancel",(function(t){return d.rc(e),d.dc().cancelEditModel(t)}))("onChange",(function(t){return d.rc(e),d.dc().updateDataModel(t)})),d.Qb(),d.Qb()}if(2&e){const e=d.dc();d.Ab(1),d.jc("dataModel",e.dataModel)}}function v(e,t){1&e&&(d.Rb(0,"div",23),d.Fc(1,"Fields"),d.Qb())}function F(e,t){1&e&&(d.Rb(0,"span",23),d.Fc(1,"[required]"),d.Qb())}function D(e,t){1&e&&(d.Rb(0,"span",34),d.Mb(1,"i",35),d.Qb()),2&e&&d.jc("title","Primary Key")}function R(e,t){if(1&e){const e=d.Sb();d.Rb(0,"div",26),d.Zb("click",(function(){d.rc(e);const i=t.$implicit;return d.dc(4).editDataField(i)})),d.Rb(1,"div",17),d.Rb(2,"div",27),d.Zb("click",(function(i){d.rc(e);const n=t.$implicit;return d.dc(4).toggleVisibility(n,i)})),d.Mb(3,"i",28),d.Qb(),d.Rb(4,"div",29),d.Fc(5),d.Dc(6,F,2,0,"span",18),d.Dc(7,D,2,1,"span",30),d.Qb(),d.Rb(8,"div",31),d.Fc(9),d.Qb(),d.Rb(10,"div",32),d.Mb(11,"i",33),d.Qb(),d.Qb(),d.Qb()}if(2&e){const e=t.$implicit;d.Ab(3),d.Db("data-property-visible",e.visible)("data-property-hidden",!e.visible),d.Ab(2),d.Hc("",e.name," "),d.Ab(1),d.jc("ngIf",e.required),d.Ab(1),d.jc("ngIf",e.primary),d.Ab(2),d.Gc(e.type)}}function Q(e,t){if(1&e&&(d.Rb(0,"div",3),d.Rb(1,"div",24),d.Dc(2,R,12,8,"div",25),d.Qb(),d.Qb()),2&e){const e=d.dc(3);d.Ab(2),d.jc("ngForOf",e.dataModel.fields)}}function C(e,t){1&e&&(d.Rb(0,"div",36),d.Fc(1," Model has no fields "),d.Qb())}function y(e,t){if(1&e){const e=d.Sb();d.Rb(0,"div"),d.Rb(1,"div",16),d.Rb(2,"div",17),d.Dc(3,v,2,0,"div",18),d.Rb(4,"div",19),d.Zb("click",(function(){return d.rc(e),d.dc(2).addNewField()})),d.Fc(5,"Add Field "),d.Mb(6,"i",20),d.Qb(),d.Qb(),d.Qb(),d.Dc(7,Q,3,1,"div",21),d.Dc(8,C,2,0,"div",22),d.Qb()}if(2&e){const e=d.dc(2);d.Ab(3),d.jc("ngIf",e.dataModel.hasFields),d.Ab(4),d.jc("ngIf",e.dataModel.hasFields),d.Ab(1),d.jc("ngIf",!e.dataModel.hasFields)}}function x(e,t){if(1&e){const e=d.Sb();d.Rb(0,"div"),d.Rb(1,"model-property-form",37),d.Zb("onDelete",(function(t){return d.rc(e),d.dc(2).deleteField(t)}))("onCancel",(function(){return d.rc(e),d.dc(2).cancelEditField()}))("onChange",(function(t){return d.rc(e),d.dc(2).updateDataField(t)})),d.Qb(),d.Qb()}if(2&e){const e=d.dc(2);d.Ab(1),d.jc("dataModelField",e.fieldToEdit)}}function k(e,t){if(1&e){const e=d.Sb();d.Rb(0,"div",5),d.Rb(1,"div",6),d.Zb("click",(function(){d.rc(e);const t=d.dc();return t.toggleModelAuth(t.dataModel)})),d.Mb(2,"i",7),d.Qb(),d.Rb(3,"div",8),d.Fc(4),d.Qb(),d.Rb(5,"div",9),d.Zb("click",(function(){return d.rc(e),d.dc().launchConsole()})),d.Mb(6,"i",10),d.Qb(),d.Rb(7,"div",11),d.Zb("click",(function(){return d.rc(e),d.dc().editModel()})),d.Mb(8,"i",12),d.Qb(),d.Qb(),d.Rb(9,"div",13),d.Dc(10,y,9,3,"div",14),d.Dc(11,x,2,1,"ng-template",null,15,d.Ec),d.Qb()}if(2&e){const e=d.oc(12),t=d.dc();d.Ab(1),d.jc("matTooltip",(t.dataModel.authorizationRequired?"Requires":"Does not require")+" user authentication"),d.Ab(1),d.Db("fa-lock",t.dataModel.authorizationRequired)("fa-lock-open",!t.dataModel.authorizationRequired),d.Ab(2),d.Gc(t.dataModel.name),d.Ab(6),d.jc("ngIf",!t.editField)("ngIfElse",e)}}let w=(()=>{class e{constructor(e){this.appConsoleService=e,this.onChange=new d.o,this.onDelete=new d.o,this.edit=!1,this.editField=!1,this.fieldToEdit=null}ngOnInit(){this.dataModel=new s.a(this.dataMember),this.edit=!this.dataModel.name}ngOnDestroy(){}updateDataField(e){this.dataModel.updateField(this.fieldToEdit,e),this.saveModel(),this.cancelEditField()}cancelEditField(){this.fieldToEdit=null,this.editField=!1}editDataField(e){this.fieldToEdit=e,this.editField=!0}addNewField(){const e=s.a.newField();this.dataModel.addField(e),this.editDataField(e)}deleteField(e){this.dataModel.deleteField(e),this.saveModel(),this.cancelEditField()}updateDataModel(e){this.dataModel.name=e.name,this.edit=!1,this.saveModel()}saveModel(){this.onChange.emit(this.dataModel)}editModel(){this.editField=!1,this.edit=!0}deleteModel(e){this.onDelete.emit(e)}cancelEditModel(e){this.edit=!1}launchConsole(){const e=this.dataModel.toJSON();this.appConsoleService.openBluConsole({inputs:{dataModel:e},command:"generate",suggestedNames:[e.name]})}toggleVisibility(e,t){e.visible=!e.visible,t.stopPropagation(),this.saveModel()}toggleModelAuth(e){e.authorizationRequired=!e.authorizationRequired,this.saveModel()}}return e.\u0275fac=function(t){return new(t||e)(d.Lb(b.a))},e.\u0275cmp=d.Fb({type:e,selectors:[["data-model-object"]],inputs:{dataMember:"dataMember"},outputs:{onChange:"onChange",onDelete:"onDelete"},decls:4,vars:2,consts:[[1,"data-model"],["class","",4,"ngIf","ngIfElse"],["displayModel",""],[1,""],[3,"dataModel","onDelete","onCancel","onChange"],[1,"data-model-header","d-flex","align-items-center","border-bottom","p-2"],[1,"pt-1","pr-2","cursor-pointer","text-muted","small",3,"matTooltip","click"],[1,"fa","fa-lock"],[1,"pr-2"],[1,"console","ml-auto","mr-2","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,"cursor-pointer",3,"click"],[1,"fas","fa-cog"],[1,"data-model-body"],[4,"ngIf","ngIfElse"],["dataFields",""],[1,"data-properties-header","p-2"],[1,"d-flex","align-items-center"],["class","small text-muted",4,"ngIf"],[1,"small","cursor-pointer","ml-auto","text-muted",3,"click"],[1,"fa","fa-plus-circle","text-tiny","ml-1"],["class","",4,"ngIf"],["class","text-center p-4 text-muted small",4,"ngIf"],[1,"small","text-muted"],[1,"data-property","cursor-pointer"],["class","p-2",3,"click",4,"ngFor","ngForOf"],[1,"p-2",3,"click"],[1,"",3,"click"],[1,"far","fa-sm","fa-eye"],[1,"pl-2"],["class","text-tiny text-muted",3,"title",4,"ngIf"],[1,"text-muted","small","ml-auto"],[1,"small","pl-3"],[1,"fa","fa-cog"],[1,"text-tiny","text-muted",3,"title"],[1,"fa","fa-key","ml-1"],[1,"text-center","p-4","text-muted","small"],[3,"dataModelField","onDelete","onCancel","onChange"]],template:function(e,t){if(1&e&&(d.Rb(0,"div",0),d.Dc(1,g,2,1,"div",1),d.Dc(2,k,13,8,"ng-template",null,2,d.Ec),d.Qb()),2&e){const e=d.oc(3);d.Ab(1),d.jc("ngIf",t.edit||!t.dataModel.name)("ngIfElse",e)}},directives:[n.t,p,h.a,n.s,M.a],styles:[".data-model[_ngcontent-%COMP%]{width:300px;border-radius:3px;border:1px solid #f1f1f1}.data-model-header[_ngcontent-%COMP%]{background-color:#f1f1f1}.data-properties-header[_ngcontent-%COMP%]{border-bottom:1px solid #f1f1f1}.data-property[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.data-property-hidden[_ngcontent-%COMP%]{opacity:.2;color:#6c757d!important}.data-property-visible[_ngcontent-%COMP%]{opacity:.8;color:#6c757d!important}"]}),e})();function I(e,t){if(1&e){const e=d.Sb();d.Rb(0,"div",4),d.Rb(1,"div",5),d.Rb(2,"data-model-object",6),d.Zb("onDelete",(function(t){return d.rc(e),d.dc().deleteModel(t)}))("onChange",(function(t){return d.rc(e),d.dc().updateDataModel(t)})),d.Qb(),d.Qb(),d.Qb()}if(2&e){const e=t.$implicit;d.Ab(2),d.jc("dataMember",e)}}const A=o.f.forChild([{path:"",component:(()=>{class e{constructor(e,t){this.dataModelService=e,this.dialog=t}ngOnInit(){this.dataModelService.getDataModels().subscribe(e=>this.dataMembers=e)}ngOnDestroy(){}newDataModel(){this.dataModelService.createDataModel().subscribe(e=>{e.success&&this.dataMembers.push(e.dataMember)})}deleteModel(e){this.dialog.open(a.a,{data:{title:"Delete Model?",text:"Deleting this model is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{if(!0===t){const t=this.dataMembers.findIndex(t=>t.id===e.dataMember.id);t>=0&&this.dataModelService.deleteDataModel(e.dataMember.id).subscribe(e=>{this.dataMembers.splice(t,1)})}})}updateDataModel(e){this.dataModelService.updateDataModel(e.dataMember.id,e.toJSON()).subscribe(e=>console.log("model updated:",e))}}return e.\u0275fac=function(t){return new(t||e)(d.Lb(c.a),d.Lb(l.b))},e.\u0275cmp=d.Fb({type:e,selectors:[["data-model-list"]],decls:5,vars:1,consts:[["mat-button","",3,"click"],[1,"fa","fa-plus"],[1,"p-2"],["class","d-inline-block align-top m-2",4,"ngFor","ngForOf"],[1,"d-inline-block","align-top","m-2"],[1,"shadow","rounded","border"],[3,"dataMember","onDelete","onChange"]],template:function(e,t){1&e&&(d.Rb(0,"button",0),d.Zb("click",(function(){return t.newDataModel()})),d.Mb(1,"i",1),d.Fc(2," New Data Model"),d.Qb(),d.Rb(3,"div",2),d.Dc(4,I,3,1,"div",3),d.Qb()),2&e&&(d.Ab(4),d.jc("ngForOf",t.dataMembers))},directives:[r.b,n.s,w],styles:[".model-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;align-items:stretch}"]}),e})()}]);var O=i("HSNX"),j=i("QibW"),E=i("d3UM");let S=(()=>{class e{}return e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,m.b,u.l,r.c,j.c,u.A,E.b]]}),e})(),P=(()=>{class e{}return e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,O.a,m.b,u.A,r.c,S,h.b]]}),e})();var q=i("lK0z");let Z=(()=>{class e{}return e.\u0275mod=d.Jb({type:e}),e.\u0275inj=d.Ib({factory:function(t){return new(t||e)},providers:[],imports:[[n.c,A,P,r.c,q.a]]}),e})()}}]);