function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var c=0;c<t.length;c++){var n=t[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,c){return t&&_defineProperties(e.prototype,t),c&&_defineProperties(e,c),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{aSHc:function(e,t,c){"use strict";c.d(t,"a",(function(){return n}));var n=function(e){return e[e.FAILED=0]="FAILED",e[e.SUCCESS=1]="SUCCESS",e[e.PENDING=2]="PENDING",e[e.DONE=3]="DONE",e[e.INCOMPLETE=4]="INCOMPLETE",e[e.DELETING=5]="DELETING",e[e.EDITING=6]="EDITING",e[e.ACQUIRING=7]="ACQUIRING",e[e.IDLE=8]="IDLE",e}({})},fV2E:function(e,t,c){"use strict";c.r(t),c.d(t,"SearchModule",(function(){return z}));var n=c("ofXK"),o=c("tyNb"),i=c("fXoL"),a=c("ZJV+"),r=c("3Pt+"),s=c("bTqV"),l=c("0IaG"),d=c("QibW"),u=c("kmnG"),f=c("qFsG");function h(e,t){if(1&e&&(i.ic(0,"div",5),i.ic(1,"mat-radio-button",6),i.bd(2),i.hc(),i.hc()),2&e){var c=t.$implicit;i.Ob(1),i.Ec("value",c),i.Ob(1),i.cd(c)}}function p(e,t){if(1&e){var c=i.jc();i.ic(0,"div",14),i.ic(1,"mat-form-field"),i.ic(2,"div",15),i.bd(3,"Custom project name:"),i.hc(),i.ic(4,"input",16),i.uc("ngModelChange",(function(e){return i.Rc(c),i.yc().newProjectName=e})),i.hc(),i.hc(),i.hc()}if(2&e){var n=i.yc();i.Ob(4),i.Ec("ngModel",n.newProjectName)}}var m,v,b=function(e,t){return{name:e,overwrite:t}},g=((m=function(){function e(t,c,n){_classCallCheck(this,e),this.dialogRef=t,this.fb=c,this.data=n,this.myForm=this.fb.group({selection:[]})}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.myForm.valueChanges.subscribe((function(t){switch(t.selection){case"set_custom_name":e.newProjectName="",e.showCustomName=!0;break;case"overwrite_project":e.newProjectName=e.data.name,e.overwriteProject=!0;break;default:e.overwriteProject=!1,e.showCustomName=!1,e.newProjectName=t.selection}}))}},{key:"ngOnDestroy",value:function(){}},{key:"choiceMade",value:function(){return!!this.newProjectName}}]),e}()).\u0275fac=function(e){return new(e||m)(i.cc(l.g),i.cc(r.f),i.cc(l.a))},m.\u0275cmp=i.Wb({type:m,selectors:[["project-exists-dialog"]],decls:22,vars:11,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"p-3"],[3,"formGroup"],["aria-label","Select an option","formControlName","selection"],["id","radio-group-overwrite"],[1,""],[3,"value"],[1,"pt-3"],["id","radio-group-names"],["class","",4,"ngFor","ngForOf"],["class","pl-3",4,"ngIf"],["mat-dialog-actions","",1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],[1,"pl-3"],[1,"pb-1"],["matInput","",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.ic(0,"h1",0),i.bd(1),i.hc(),i.ic(2,"div",1),i.ic(3,"form",2),i.ic(4,"mat-radio-group",3),i.ic(5,"label",4),i.bd(6,"Overwrite existing project: "),i.hc(),i.ic(7,"div",5),i.ic(8,"mat-radio-button",6),i.bd(9,"Overwrite Project"),i.hc(),i.hc(),i.ic(10,"div",7),i.ic(11,"label",8),i.bd(12,"Choose a new project name: "),i.hc(),i.Zc(13,h,3,2,"div",9),i.ic(14,"mat-radio-button",6),i.bd(15,"Set Custom Name"),i.hc(),i.hc(),i.hc(),i.hc(),i.Zc(16,p,5,1,"div",10),i.hc(),i.ic(17,"div",11),i.ic(18,"button",12),i.bd(19,"Cancel"),i.hc(),i.ic(20,"button",13),i.bd(21,"Install"),i.hc(),i.hc()),2&e&&(i.Ob(1),i.dd("Project '",t.data.name,"' exists on your system."),i.Ob(2),i.Ec("formGroup",t.myForm),i.Ob(5),i.Ec("value","overwrite_project"),i.Ob(5),i.Ec("ngForOf",t.data.suggestions),i.Ob(1),i.Ec("value","set_custom_name"),i.Ob(2),i.Ec("ngIf",t.showCustomName),i.Ob(4),i.Ec("mat-dialog-close",i.Jc(8,b,t.newProjectName,t.overwriteProject))("disabled",!t.choiceMade()))},directives:[l.h,l.e,r.z,r.q,r.k,d.b,r.p,r.i,d.a,n.t,n.u,l.c,s.a,l.d,u.c,f.b,r.c,r.s],styles:[""]}),m),j=c("aSHc"),w=((v=function(){function e(t){_classCallCheck(this,e),this.httpService=t}return _createClass(e,[{key:"downloadProject",value:function(e,t,c){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0;return this.httpService.get("/stackjoy/project/".concat(e,"/download"),{name:t,version:c,overwrite:n,isSeed:o})}}]),e}()).\u0275fac=function(e){return new(e||v)(i.qc(a.a))},v.\u0275prov=i.Yb({token:v,factory:v.\u0275fac,providedIn:"root"}),v),y=c("xm+p"),k=c("CPZX"),C=c("1kSV"),E=c("bv9b");function S(e,t){1&e&&i.dc(0,"i",12)}function I(e,t){1&e&&i.dc(0,"i",13)}function O(e,t){if(1&e){var c=i.jc();i.ic(0,"button",9),i.uc("click",(function(){return i.Rc(c),i.yc().install()})),i.dc(1,"i",14),i.bd(2," Install"),i.hc()}}function P(e,t){1&e&&(i.ic(0,"div"),i.dc(1,"i",17),i.bd(2," Seed downloaded, beginning installation... "),i.hc())}function N(e,t){if(1&e){var c=i.jc();i.ic(0,"div"),i.dc(1,"i",17),i.ic(2,"span",18),i.uc("click",(function(){return i.Rc(c),i.yc(2).goToBluCollection()})),i.bd(3,"Collection Download. Click here to start using it."),i.hc(),i.hc()}}function D(e,t){if(1&e&&(i.ic(0,"div",15),i.Zc(1,P,3,0,"div",16),i.Zc(2,N,4,0,"div",16),i.hc()),2&e){var c=i.yc();i.Ob(1),i.Ec("ngIf",c.project.isSeed),i.Ob(1),i.Ec("ngIf",!c.project.isSeed)}}function T(e,t){1&e&&(i.ic(0,"div",15),i.ic(1,"div"),i.bd(2,"Downloading..."),i.hc(),i.dc(3,"mat-progress-bar",19),i.hc())}var _,x=((_=function(){function e(t,c,n,o){_classCallCheck(this,e),this.stackjoyService=t,this.navigationService=c,this.codebaseService=n,this.dialog=o,this.downloadState=j.a.IDLE,this.actionStates=j.a,this.installAfterDownload=!1}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ngOnDestroy",value:function(){}},{key:"openDialog",value:function(){var e=this;this.dialog.open(g,{data:{name:this.project.name,suggestions:["@stackjoy-".concat(this.project.name),"".concat(this.project.name,"-1"),"".concat(this.project.name,"_1")]}}).afterClosed().subscribe((function(t){t&&e.downloadProject(e.project.id,t.name,e.project.version,t.overwrite,e.project.isSeed)}))}},{key:"install",value:function(){this.installAfterDownload=!0,this.downloadProject(this.project.id,this.project.name,this.project.version,!1,this.project.isSeed)}},{key:"downloadProject",value:function(e,t,c){var n=this,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.downloadState=j.a.PENDING,this.stackjoyService.downloadProject(e,t,c,o,i).subscribe((function(e){n.downloadState=j.a.SUCCESS,n.downloadedProject=e,setTimeout((function(){n.codebaseService.getRootDir().subscribe((function(e){n.navigationService.navigateTo(["blu","install","seeds.".concat(t)],{queryParams:{name:t,destination:e.path}})}))}),2e3)}),(function(e){"download-project-exists"===e.error.code&&(n.downloadState=j.a.FAILED,n.openDialog())}))}},{key:"download",value:function(){this.downloadProject(this.project.id,this.project.name,this.project.version,!1,this.project.isSeed)}},{key:"goToBluCollection",value:function(){this.navigationService.navigateTo(["blu","collection","view",this.downloadedProject.projectName])}}]),e}()).\u0275fac=function(e){return new(e||_)(i.cc(w),i.cc(y.a),i.cc(k.a),i.cc(l.b))},_.\u0275cmp=i.Wb({type:_,selectors:[["stackjoy-project"]],inputs:{project:"project",searchTerm:"searchTerm"},decls:17,vars:9,consts:[[1,"box","rounded","p-2","bg-white"],[1,"border-0","w-100"],[1,"cursor-pointer","project-name"],["class","fa fa-seedling fa-sm",4,"ngIf"],["class","fa fa-folder fa-sm",4,"ngIf"],[1,"pl-1",3,"result","term"],[1,"cursor-pointer","description"],[1,"text-right"],["mat-button","","mat-raised-button","","class","ml-2",3,"click",4,"ngIf"],["mat-button","","mat-raised-button","",1,"ml-2",3,"click"],[1,"fa","fa-download"],["class","p-2",4,"ngIf"],[1,"fa","fa-seedling","fa-sm"],[1,"fa","fa-folder","fa-sm"],[1,"fa","fa-cog"],[1,"p-2"],[4,"ngIf"],[1,"fa","fa-check","mr-1","text-success"],[1,"as-link",3,"click"],["mode","buffer"]],template:function(e,t){1&e&&(i.ic(0,"div",0),i.ic(1,"table",1),i.ic(2,"tr"),i.ic(3,"td"),i.ic(4,"div",2),i.Zc(5,S,1,0,"i",3),i.Zc(6,I,1,0,"i",4),i.dc(7,"ngb-highlight",5),i.hc(),i.ic(8,"div",6),i.dc(9,"ngb-highlight",5),i.hc(),i.hc(),i.ic(10,"td",7),i.Zc(11,O,3,0,"button",8),i.ic(12,"button",9),i.uc("click",(function(){return t.download()})),i.dc(13,"i",10),i.bd(14," Download"),i.hc(),i.hc(),i.hc(),i.hc(),i.Zc(15,D,3,2,"div",11),i.Zc(16,T,4,0,"div",11),i.hc()),2&e&&(i.Ob(5),i.Ec("ngIf",t.project.isSeed),i.Ob(1),i.Ec("ngIf",!t.project.isSeed),i.Ob(1),i.Ec("result",t.project.name)("term",t.searchTerm),i.Ob(2),i.Ec("result",t.project.description)("term",t.searchTerm),i.Ob(2),i.Ec("ngIf",t.project.isSeed),i.Ob(4),i.Ec("ngIf",t.downloadState===t.actionStates.SUCCESS),i.Ob(1),i.Ec("ngIf",t.downloadState===t.actionStates.PENDING))},directives:[n.u,C.a,s.a,E.a],styles:[".project-name[_ngcontent-%COMP%]{text-transform:capitalize;font-size:1.2rem}.description[_ngcontent-%COMP%]{text-transform:capitalize;font-size:.8rem;padding-left:3px}.box[_ngcontent-%COMP%]{box-shadow:0 2px 3px rgba(10,10,10,.1),0 0 0 1px rgba(10,10,10,.1)}"]}),_),M=["searchElement"];function G(e,t){if(1&e){var c=i.jc();i.ic(0,"div",9),i.uc("click",(function(){return i.Rc(c),i.yc().searchTerm=null})),i.ic(1,"span",10),i.dc(2,"span",11),i.hc(),i.hc()}}function Z(e,t){if(1&e&&i.dc(0,"stackjoy-project",12),2&e){var c=t.$implicit,n=i.yc();i.Ec("project",c)("searchTerm",n.searchTerm)}}var F,L,A,R=o.e.forChild([{path:"",component:(F=function(){function e(t){_classCallCheck(this,e),this.httpService=t}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;this.httpService.get("/stackjoy/project",{term:"aa"}).subscribe((function(t){return e.projects=t}))}},{key:"ngAfterViewInit",value:function(){var e=this;setTimeout((function(){e.searchElement.nativeElement.focus()}),0)}},{key:"ngOnDestroy",value:function(){}},{key:"search",value:function(){var e=this;this.httpService.get("/stackjoy/project",{name:"test"}).subscribe((function(t){return e.projects=t}))}}]),e}(),F.\u0275fac=function(e){return new(e||F)(i.cc(a.a))},F.\u0275cmp=i.Wb({type:F,selectors:[["search"]],viewQuery:function(e,t){var c;1&e&&i.gd(M,!0),2&e&&i.Mc(c=i.vc())&&(t.searchElement=c.first)},decls:13,vars:3,consts:[[1,"row"],[1,"col"],[1,"p-3"],[1,"input-group","pb-3","pt-3"],["type","text","autofocus","",1,"form-control","search-input","text-muted",3,"ngModel","ngModelChange"],["searchElement",""],["class","input-group-append cursor-pointer",3,"click",4,"ngIf"],["mat-raised-button","",3,"click"],[3,"project","searchTerm",4,"ngFor","ngForOf"],[1,"input-group-append","cursor-pointer",3,"click"],[1,"input-group-text","bg-white"],[1,"fa","fa-times"],[3,"project","searchTerm"]],template:function(e,t){1&e&&(i.ic(0,"div",0),i.ic(1,"div",1),i.ic(2,"div",2),i.ic(3,"h5"),i.bd(4,"Search Stackjoy"),i.hc(),i.ic(5,"div",3),i.ic(6,"input",4,5),i.uc("ngModelChange",(function(e){return t.searchTerm=e})),i.hc(),i.Zc(8,G,3,0,"div",6),i.ic(9,"button",7),i.uc("click",(function(){return t.search()})),i.bd(10,"Search"),i.hc(),i.hc(),i.hc(),i.ic(11,"div",2),i.Zc(12,Z,1,2,"stackjoy-project",8),i.hc(),i.hc(),i.hc()),2&e&&(i.Ob(6),i.Ec("ngModel",t.searchTerm),i.Ob(2),i.Ec("ngIf",t.searchTerm),i.Ob(4),i.Ec("ngForOf",t.projects))},directives:[r.c,r.p,r.s,n.u,s.a,n.t,x],styles:[""]}),F)}]),q=c("9Xeq"),U=((A=function e(){_classCallCheck(this,e)}).\u0275mod=i.ac({type:A}),A.\u0275inj=i.Zb({factory:function(e){return new(e||A)},providers:[],imports:[[n.c,C.b,s.b,E.b]]}),A),z=((L=function e(){_classCallCheck(this,e)}).\u0275mod=i.ac({type:L}),L.\u0275inj=i.Zb({factory:function(e){return new(e||L)},providers:[],imports:[[n.c,R,r.l,q.a,U,s.b]]}),L)}}]);