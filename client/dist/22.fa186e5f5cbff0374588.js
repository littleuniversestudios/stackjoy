(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{EAxD:function(t,n,i){"use strict";i.r(n),i.d(n,"FuncViewModule",(function(){return J}));var c=i("ofXK"),e=i("tyNb"),s=i("fXoL"),o=i("quSY"),r=function(t){return t[t.List=0]="List",t[t.View=1]="View",t[t.Create=2]="Create",t[t.Edit=3]="Edit",t[t.Delete=4]="Delete",t}({}),b=i("0KCH"),u=i("bv9b");function a(t,n){if(1&t){const t=s.Sb();s.Rb(0,"tr",12),s.Zb("click",(function(){s.rc(t);const i=n.$implicit;return s.dc(3).view(i)})),s.Rb(1,"td",13),s.Ec(2),s.Qb(),s.Rb(3,"td",13),s.Ec(4),s.Qb(),s.Rb(5,"td",13),s.Ec(6),s.Qb(),s.Rb(7,"td",14),s.Rb(8,"button",15),s.Zb("click",(function(i){s.rc(t);const c=n.$implicit;return s.dc(3).delete(c),i.stopPropagation()})),s.Ec(9,"Delete"),s.Qb(),s.Rb(10,"button",16),s.Zb("click",(function(i){s.rc(t);const c=n.$implicit;return s.dc(3).edit(c),i.stopPropagation()})),s.Ec(11,"Edit"),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=n.$implicit;s.Ab(2),s.Fc(t.name),s.Ab(2),s.Fc(t.description),s.Ab(2),s.Fc(t.execFunc)}}function f(t,n){if(1&t&&(s.Pb(0,8),s.Rb(1,"table",9),s.Rb(2,"tr"),s.Rb(3,"th",10),s.Ec(4,"Name"),s.Qb(),s.Rb(5,"th",10),s.Ec(6,"Description"),s.Qb(),s.Rb(7,"th",10),s.Ec(8,"Function"),s.Qb(),s.Mb(9,"th",10),s.Qb(),s.Cc(10,a,12,3,"tr",11),s.Qb(),s.Ob()),2&t){const t=s.dc(2);s.Ab(10),s.jc("ngForOf",t.functionsList)}}function d(t,n){if(1&t&&(s.Rb(0,"div",8),s.Cc(1,f,11,1,"ng-container",5),s.Qb()),2&t){const t=s.dc(),n=s.oc(13);s.Ab(1),s.jc("ngIf",!t.error)("ngIfElse",n)}}function l(t,n){1&t&&(s.Rb(0,"div",17),s.Mb(1,"mat-progress-bar",18),s.Qb())}function m(t,n){1&t&&(s.Rb(0,"span"),s.Ec(1," Permission denied."),s.Qb())}function p(t,n){if(1&t&&(s.Rb(0,"span"),s.Ec(1),s.Qb()),2&t){const t=s.dc(2);s.Ab(1),s.Fc(t.error)}}function h(t,n){if(1&t&&(s.Rb(0,"div",19),s.Mb(1,"i",20),s.Rb(2,"span",21),s.Cc(3,m,2,0,"span",22),s.Cc(4,p,2,1,"span",23),s.Qb(),s.Qb()),2&t){const t=s.dc();s.Ab(2),s.jc("ngSwitch",t.error),s.Ab(1),s.jc("ngSwitchCase","permission-denied")}}let v=(()=>{class t{constructor(t,n,i){this.functionsService=t,this.router=n,this.activatedRoute=i,this.subs=new o.a}ngOnInit(){this.getList()}ngOnDestroy(){this.subs.unsubscribe()}getList(){this.acquiring=!0,this.error=null,this.functionsService.getAll().subscribe(t=>{this.acquiring=!1,this.functionsList=t},t=>{this.error=t.code,this.acquiring=!1})}view(t){this.functionsService.goToSection(r.Edit,t)}create(){this.functionsService.goToSection(r.Create,null)}edit(t){this.functionsService.goToSection(r.Edit,t)}delete(t){this.functionsService.delete(t).subscribe(t=>{this.getList()})}}return t.\u0275fac=function(n){return new(n||t)(s.Lb(b.a),s.Lb(e.b),s.Lb(e.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["functions-list"]],decls:14,vars:2,consts:[[1,"breadcrumb"],[1,"breadcrumb-item","cursor-pointer"],[1,"breadcrumb-item","cursor-pointer","text-bold","text-primary"],[1,"ml-auto"],[1,"btn","btn-primary",3,"click"],["class","",4,"ngIf","ngIfElse"],["loading",""],["showError",""],[1,""],[1,"table","border-top-0"],[1,"border-top-0"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[1,"cursor-pointer"],[1,"text-right"],[1,"btn","btn-outline-primary",3,"click"],[1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"p-2"],["mode","indeterminate"],[1,"p-2","text-center","text-warning"],[1,"fa","fa-exclamation-triangle","text-warning"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,n){if(1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Ec(2,"Function"),s.Qb(),s.Rb(3,"div",2),s.Ec(4,"List"),s.Qb(),s.Rb(5,"div",3),s.Rb(6,"button",4),s.Zb("click",(function(){return n.create()})),s.Ec(7,"+ Add Function"),s.Qb(),s.Qb(),s.Qb(),s.Rb(8,"div"),s.Cc(9,d,2,2,"div",5),s.Qb(),s.Cc(10,l,2,0,"ng-template",null,6,s.Dc),s.Cc(12,h,5,2,"ng-template",null,7,s.Dc)),2&t){const t=s.oc(11);s.Ab(9),s.jc("ngIf",!n.acquiring)("ngIfElse",t)}},directives:[c.t,c.s,u.a,c.x,c.y,c.z],styles:[""]}),t})();var g=i("3Pt+"),R=i("kmnG"),Q=i("qFsG"),E=i("1jDz");function S(t,n){1&t&&(s.Rb(0,"mat-error"),s.Ec(1,"Input is required"),s.Qb())}function w(t,n){1&t&&(s.Rb(0,"span",12),s.Mb(1,"i",13),s.Ec(2," Valid"),s.Qb())}let I=(()=>{class t{constructor(t){this.fb=t,this.model={},this.form=new s.o,this.editorOptions={language:"javascript"},this.validFunction=!1}ngOnInit(){var t,n;this.functionText=""+(null!==(n=null===(t=this.model)||void 0===t?void 0:t.execFunc)&&void 0!==n?n:""),this.initForm(),this.formGroup.valueChanges.subscribe(t=>{}),this.form.emit(this.formGroup)}initForm(){this.formGroup=this.fb.group({name:[this.model.name,[g.E.required]],description:[this.model.description,[]],execFunc:[this.model.execFunc,[g.E.required]]})}get f(){return this.formGroup.controls}addItem(t){this.f[t].push(this.fb.control(""))}deleteItem(t,n){this.f[t].removeAt(n)}ngOnDestroy(){}saveFunction(t){this.validFunction=!1;try{if("function"!=typeof eval.call(null,`({execFunc:${t}})`).execFunc)throw{message:"Must be a function"};this.validFunction=!0,this.f.execFunc.setValue(t)}catch(n){this.f.execFunc.setValue("")}}}return t.\u0275fac=function(n){return new(n||t)(s.Lb(g.f))},t.\u0275cmp=s.Fb({type:t,selectors:[["functions-form"]],inputs:{model:"model"},outputs:{form:"form"},decls:16,vars:6,consts:[[1,"mat-form",3,"formGroup"],[1,""],[1,"w-100"],["placeholder","Function name","type","text","matInput","","formControlName","name","required",""],[4,"ngIf"],["placeholder","Function Description","type","text","matInput","","formControlName","description"],[1,"row"],[1,"col"],[1,"pb-1","d-flex"],[1,"ml-auto"],["class","text-success",4,"ngIf"],[3,"text","editorOptions","height","onContentChange"],[1,"text-success"],[1,"fa","fa-check-circle"]],template:function(t,n){1&t&&(s.Rb(0,"form",0),s.Rb(1,"div",1),s.Rb(2,"mat-form-field",2),s.Mb(3,"input",3),s.Cc(4,S,2,0,"mat-error",4),s.Qb(),s.Qb(),s.Rb(5,"div",1),s.Rb(6,"mat-form-field",2),s.Mb(7,"textarea",5),s.Qb(),s.Qb(),s.Qb(),s.Rb(8,"div",6),s.Rb(9,"div",7),s.Rb(10,"div",8),s.Rb(11,"div"),s.Ec(12,"Javascript Function:"),s.Qb(),s.Rb(13,"div",9),s.Cc(14,w,3,0,"span",10),s.Qb(),s.Qb(),s.Rb(15,"file-editor",11),s.Zb("onContentChange",(function(t){return n.saveFunction(t)})),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.jc("formGroup",n.formGroup),s.Ab(4),s.jc("ngIf",null==n.f.name||null==n.f.name.errors?null:n.f.name.errors.required),s.Ab(10),s.jc("ngIf",n.validFunction),s.Ab(1),s.jc("text",n.functionText)("editorOptions",n.editorOptions)("height","400px"))},directives:[g.G,g.r,g.j,R.c,Q.a,g.c,g.q,g.i,g.B,c.t,E.a,R.b],styles:[""]}),t})();function F(t,n){1&t&&(s.Rb(0,"span"),s.Ec(1," Permission denied."),s.Qb())}function C(t,n){if(1&t&&(s.Rb(0,"span"),s.Ec(1),s.Qb()),2&t){const t=s.dc(2);s.Ab(1),s.Fc(t.error)}}function y(t,n){if(1&t&&(s.Rb(0,"div"),s.Rb(1,"div",9),s.Mb(2,"i",10),s.Rb(3,"span",11),s.Cc(4,F,2,0,"span",12),s.Cc(5,C,2,1,"span",13),s.Qb(),s.Qb(),s.Qb()),2&t){const t=s.dc();s.Ab(3),s.jc("ngSwitch",t.error),s.Ab(1),s.jc("ngSwitchCase","permission-denied")}}let k=(()=>{class t{constructor(t){this.functionsService=t,this.isInvalid=!0,this.subs=new o.a}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}cancel(){this.goBack()}save(){this.functionsService.create(this.form.value).subscribe(t=>{this.goBack()},t=>{this.error=t.code})}setForm(t){this.form=t,this.form.valueChanges.subscribe(t=>this.isInvalid=this.form.invalid),setTimeout(()=>{var t;return this.isInvalid=null===(t=this.form)||void 0===t?void 0:t.invalid},0)}goBack(){this.functionsService.goToSection(r.List,null)}}return t.\u0275fac=function(n){return new(n||t)(s.Lb(b.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["functions-create"]],decls:13,vars:2,consts:[[1,"breadcrumb"],[1,"breadcrumb-item","cursor-pointer",3,"click"],[1,"breadcrumb-item","cursor-pointer","text-bold","text-primary"],[1,"p-2"],[3,"form"],[4,"ngIf"],[1,"pt-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],[1,"py-2","text-warning"],[1,"fa","fa-exclamation-triangle","text-warning"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"]],template:function(t,n){1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Zb("click",(function(){return n.goBack()})),s.Ec(2,"Function"),s.Qb(),s.Rb(3,"div",2),s.Ec(4,"Create"),s.Qb(),s.Qb(),s.Rb(5,"div",3),s.Rb(6,"functions-form",4),s.Zb("form",(function(t){return n.setForm(t)})),s.Qb(),s.Cc(7,y,6,2,"div",5),s.Rb(8,"div",6),s.Rb(9,"button",7),s.Zb("click",(function(){return n.cancel()})),s.Ec(10,"Cancel"),s.Qb(),s.Rb(11,"button",8),s.Zb("click",(function(){return n.save()})),s.Ec(12,"Save"),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.Ab(7),s.jc("ngIf",n.error),s.Ab(4),s.jc("disabled",n.isInvalid))},directives:[I,c.t,c.x,c.y,c.z],styles:[""]}),t})();function x(t,n){if(1&t){const t=s.Sb();s.Rb(0,"functions-form",11),s.Zb("form",(function(n){return s.rc(t),s.dc(2).setForm(n)})),s.Qb()}if(2&t){const t=s.dc(2);s.jc("model",t.functions)}}function A(t,n){1&t&&(s.Rb(0,"span"),s.Ec(1," Permission denied."),s.Qb())}function j(t,n){if(1&t&&(s.Rb(0,"span"),s.Ec(1),s.Qb()),2&t){const t=s.dc(3);s.Ab(1),s.Fc(t.error)}}function L(t,n){if(1&t&&(s.Rb(0,"div"),s.Rb(1,"div",12),s.Mb(2,"i",13),s.Rb(3,"span",14),s.Cc(4,A,2,0,"span",15),s.Cc(5,j,2,1,"span",16),s.Qb(),s.Qb(),s.Qb()),2&t){const t=s.dc(2);s.Ab(3),s.jc("ngSwitch",t.error),s.Ab(1),s.jc("ngSwitchCase","permission-denied")}}function D(t,n){if(1&t){const t=s.Sb();s.Rb(0,"div"),s.Cc(1,x,1,1,"functions-form",6),s.Cc(2,L,6,2,"div",7),s.Rb(3,"div",8),s.Rb(4,"button",9),s.Zb("click",(function(){return s.rc(t),s.dc().cancel()})),s.Ec(5,"Cancel"),s.Qb(),s.Rb(6,"button",10),s.Zb("click",(function(){return s.rc(t),s.dc().save()})),s.Ec(7,"Save"),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=s.dc();s.Ab(1),s.jc("ngIf",t.functions),s.Ab(1),s.jc("ngIf",t.error),s.Ab(4),s.jc("disabled",t.isInvalid)}}function O(t,n){1&t&&(s.Rb(0,"div",3),s.Mb(1,"mat-progress-bar",17),s.Qb())}let M=(()=>{class t{constructor(t){this.functionsService=t,this.isInvalid=!0,this.subs=new o.a}ngOnInit(){}ngOnDestroy(){this.subs.unsubscribe()}getItem(){}cancel(){this.goBack()}save(){this.error=null,this.functions.update(this.form.value),this.functionsService.update(this.functions).subscribe(t=>{this.goBack()},t=>{this.error=t.code})}setForm(t){this.form=t,this.form.valueChanges.subscribe(t=>this.isInvalid=this.form.invalid),setTimeout(()=>{var t;return this.isInvalid=null===(t=this.form)||void 0===t?void 0:t.invalid},0)}goBack(){this.functionsService.goToSection(r.List,null)}}return t.\u0275fac=function(n){return new(n||t)(s.Lb(b.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["functions-edit"]],inputs:{functions:"functions"},decls:9,vars:2,consts:[[1,"breadcrumb"],[1,"breadcrumb-item","cursor-pointer",3,"click"],[1,"breadcrumb-item","cursor-pointer","text-bold","text-primary"],[1,"p-2"],[4,"ngIf","ngIfElse"],["loading",""],[3,"model","form",4,"ngIf"],[4,"ngIf"],[1,"pt-2"],[1,"btn","btn-outline-secondary",3,"click"],[1,"btn","btn-outline-primary",3,"disabled","click"],[3,"model","form"],[1,"py-2","text-warning"],[1,"fa","fa-exclamation-triangle","text-warning"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],["mode","indeterminate"]],template:function(t,n){if(1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Zb("click",(function(){return n.goBack()})),s.Ec(2,"Function"),s.Qb(),s.Rb(3,"div",2),s.Ec(4,"Edit"),s.Qb(),s.Qb(),s.Rb(5,"div",3),s.Cc(6,D,8,3,"div",4),s.Qb(),s.Cc(7,O,2,0,"ng-template",null,5,s.Dc)),2&t){const t=s.oc(8);s.Ab(6),s.jc("ngIf",!n.acquiring)("ngIfElse",t)}},directives:[c.t,I,c.x,c.y,c.z,u.a],styles:[""]}),t})();function Z(t,n){if(1&t){const t=s.Sb();s.Rb(0,"div"),s.Rb(1,"table",5),s.Rb(2,"tr"),s.Rb(3,"th"),s.Ec(4,"Property"),s.Qb(),s.Rb(5,"th"),s.Ec(6,"Value"),s.Qb(),s.Qb(),s.Rb(7,"tr"),s.Rb(8,"td"),s.Ec(9,"name"),s.Qb(),s.Rb(10,"td"),s.Ec(11),s.Qb(),s.Qb(),s.Rb(12,"tr"),s.Rb(13,"td"),s.Ec(14,"description"),s.Qb(),s.Rb(15,"td"),s.Ec(16),s.Qb(),s.Qb(),s.Rb(17,"tr"),s.Rb(18,"td"),s.Ec(19,"Function"),s.Qb(),s.Rb(20,"td"),s.Ec(21),s.Qb(),s.Qb(),s.Qb(),s.Rb(22,"div",6),s.Rb(23,"button",7),s.Zb("click",(function(){return s.rc(t),s.dc().cancel()})),s.Ec(24,"Back"),s.Qb(),s.Rb(25,"button",7),s.Zb("click",(function(){return s.rc(t),s.dc().delete()})),s.Ec(26,"Delete"),s.Qb(),s.Rb(27,"button",8),s.Zb("click",(function(){return s.rc(t),s.dc().edit()})),s.Ec(28,"Edit"),s.Qb(),s.Qb(),s.Qb()}if(2&t){const t=s.dc();s.Ab(11),s.Fc(t.functions.name),s.Ab(5),s.Fc(t.functions.description),s.Ab(5),s.Fc(t.functions.execFunc)}}function q(t,n){1&t&&(s.Rb(0,"div",9),s.Mb(1,"mat-progress-bar",10),s.Qb())}let B=(()=>{class t{constructor(t,n,i,c){this.functionsService=t,this.router=n,this.activatedRoute=i,this.location=c}ngOnInit(){}ngOnDestroy(){}edit(){this.functionsService.goToSection(r.Edit,this.functions)}delete(){this.functionsService.delete(this.functions),this.functionsService.goToSection(r.List,null)}cancel(){this.goBack()}goBack(){this.location.back()}}return t.\u0275fac=function(n){return new(n||t)(s.Lb(b.a),s.Lb(e.b),s.Lb(e.a),s.Lb(c.n))},t.\u0275cmp=s.Fb({type:t,selectors:[["functions-view"]],inputs:{functions:"functions"},decls:8,vars:2,consts:[[1,"breadcrumb"],[1,"breadcrumb-item","cursor-pointer",3,"click"],[1,"breadcrumb-item","cursor-pointer","text-bold","text-primary"],[4,"ngIf","ngIfElse"],["loading",""],[1,"table","w-100"],[1,""],[1,"btn","btn-outline-primary","mr-1",3,"click"],[1,"btn","btn-outline-primary","mr-2",3,"click"],[1,"p-2"],["mode","indeterminate"]],template:function(t,n){if(1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Zb("click",(function(){return n.goBack()})),s.Ec(2,"Function"),s.Qb(),s.Rb(3,"div",2),s.Ec(4,"View"),s.Qb(),s.Qb(),s.Cc(5,Z,29,3,"div",3),s.Cc(6,q,2,0,"ng-template",null,4,s.Dc)),2&t){const t=s.oc(7);s.Ab(5),s.jc("ngIf",!n.acquiring)("ngIfElse",t)}},directives:[c.t,u.a],styles:[""]}),t})();function T(t,n){1&t&&(s.Rb(0,"div",2),s.Mb(1,"functions-list"),s.Qb())}function G(t,n){1&t&&(s.Rb(0,"div",2),s.Mb(1,"functions-create"),s.Qb())}function P(t,n){if(1&t&&(s.Rb(0,"div",2),s.Mb(1,"functions-edit",3),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.jc("functions",t.selectedItem)}}function V(t,n){if(1&t&&(s.Rb(0,"div",2),s.Mb(1,"functions-view",3),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.jc("functions",t.selectedItem)}}let $=(()=>{class t{constructor(t){this.functionsService=t,this.onUpdate=new s.o,this.subs=new o.a,this.currentSection=r.List,this.sections=r}ngOnInit(){this.functionsService.setCollection(this.functions),this.functionsService.goToSection(r.List,null),this.subs.add(this.functionsService.currentSection$.subscribe(t=>{this.selectedItem=t.item,this.currentSection=t.section})),this.subs.add(this.functionsService.onUpdate$.subscribe(t=>this.onUpdate.emit(t)))}ngOnDestroy(){this.subs.unsubscribe()}}return t.\u0275fac=function(n){return new(n||t)(s.Lb(b.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["functions"]],inputs:{functions:"functions"},outputs:{onUpdate:"onUpdate"},decls:5,vars:4,consts:[[1,"p-2",2,"background-color","#ffffff"],["class","",4,"ngIf"],[1,""],[3,"functions"]],template:function(t,n){1&t&&(s.Rb(0,"div",0),s.Cc(1,T,2,0,"div",1),s.Cc(2,G,2,0,"div",1),s.Cc(3,P,2,1,"div",1),s.Cc(4,V,2,1,"div",1),s.Qb()),2&t&&(s.Ab(1),s.jc("ngIf",n.currentSection===n.sections.List),s.Ab(1),s.jc("ngIf",n.currentSection===n.sections.Create),s.Ab(1),s.jc("ngIf",n.currentSection===n.sections.Edit),s.Ab(1),s.jc("ngIf",n.currentSection===n.sections.View))},directives:[c.t,v,k,M,B],styles:[""]}),t})();const z=e.f.forChild([{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}ngOnDestroy(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=s.Fb({type:t,selectors:[["func-view"]],decls:1,vars:0,template:function(t,n){1&t&&s.Mb(0,"functions")},directives:[$],styles:[""]}),t})()}]);var U=i("Pnzg");let J=(()=>{class t{}return t.\u0275mod=s.Jb({type:t}),t.\u0275inj=s.Ib({factory:function(n){return new(n||t)},providers:[],imports:[[c.c,z,U.a]]}),t})()}}]);