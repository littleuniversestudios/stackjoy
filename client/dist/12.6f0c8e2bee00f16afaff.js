(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{hTrQ:function(t,e,i){"use strict";i.r(e),i.d(e,"BlueprintsModule",(function(){return ge}));var n=i("ofXK"),c=i("tyNb"),o=i("Ut2+"),s=i("quSY"),a=i("fXoL"),l=i("Kxoc"),r=i("GV7L"),b=i("6B2u"),m=i("XNiG"),u=i("0IaG"),p=i("3sFK");let d=(()=>{class t{constructor(t,e){this.dialog=t,this.appEnvironmentService=e,this.onBlueprintsUpdated=new m.a,this.loadState()}get selectedItem(){return this.state.selectedItem.item}get selectedItemId(){return this.state.selectedItem.id}saveState(){this.appEnvironmentService.setEnvironmentState("blueprints-tree-state",this.state)}loadState(){var t;this.state=null!==(t=this.appEnvironmentService.currentEnvironmentState["blueprints-tree-state"])&&void 0!==t?t:this.defaultState}getLastSelectedItem(t){return this.findItem(this.selectedItemId,t)}createChain(t){this.dialog.open(b.a,{data:{blueprints:this.blueprints,type:"create",collection:t,itemType:r.a.Item.Type.Chain},width:"50%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.updateBlueprints())}createTemplate(t){this.dialog.open(b.a,{data:{blueprints:this.blueprints,type:"create",collection:t,itemType:r.a.Item.Type.Template},width:"50%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.updateBlueprints())}createCollection(){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"create"},width:"50%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.updateBlueprints()})}updateBlueprints(){this.onBlueprintsUpdated.next(!0)}findItem(t,e){let i;return e.item.id===t?i=e.item:(e.collections.forEach(e=>{e.item.id===t?i=e.item:(e.templates.forEach(e=>{e.id===t&&(i=e)}),i||e.chains.forEach(e=>{e.id===t&&(i=e)}))}),i||e.stacks.forEach(e=>{i||(i=this.findItem(t,e))})),i}get defaultState(){return{tree:{},selectedItem:{id:null,item:null}}}}return t.\u0275fac=function(e){return new(e||t)(a.Wb(u.b),a.Wb(p.a))},t.\u0275prov=a.Ib({token:t,factory:t.\u0275fac}),t})();function f(t,e){1&t&&a.Ob(0)}const g=function(t){return{$implicit:t,isRoot:!0}};function h(t,e){if(1&t&&(a.Sb(0,"div"),a.Cc(1,f,1,0,"ng-container",2),a.Rb()),2&t){const t=a.ec(),e=a.pc(2);a.Bb(1),a.kc("ngTemplateOutlet",e)("ngTemplateOutletContext",a.mc(2,g,t.root))}}function S(t,e){if(1&t&&(a.Qb(0),a.Sb(1,"span",9),a.Ec(2),a.Rb(),a.Sb(3,"span",10),a.Ec(4),a.Rb(),a.Pb()),2&t){const t=a.ec().$implicit;a.Bb(2),a.Fc(t.item.type),a.Bb(2),a.Gc("[",t.item.name,"]")}}function v(t,e){if(1&t&&(a.Qb(0),a.Sb(1,"span"),a.Ec(2),a.Rb(),a.Pb()),2&t){const t=a.ec().$implicit;a.Bb(2),a.Fc(t.item.name)}}function C(t,e){1&t&&(a.Sb(0,"div",3),a.Sb(1,"div",20),a.Ec(2,"(empty)"),a.Rb(),a.Rb())}function k(t,e){1&t&&(a.Sb(0,"div",3),a.Sb(1,"div",20),a.Ec(2,"(empty)"),a.Rb(),a.Rb())}function R(t,e){if(1&t){const t=a.Tb();a.Qb(0),a.Sb(1,"div",23),a.ac("click",(function(){a.sc(t);const i=e.$implicit;return a.ec(7).selectItem(i)})),a.Nb(2,"div",13),a.Sb(3,"div",6),a.Nb(4,"i",24),a.Rb(),a.Sb(5,"div",25),a.Sb(6,"span"),a.Ec(7),a.Rb(),a.Rb(),a.Rb(),a.Pb()}if(2&t){const t=e.$implicit,i=a.ec(7);a.Bb(1),a.Eb("item-selected",i.isSelected(t.id)),a.Bb(6),a.Fc(t.name)}}function B(t,e){if(1&t&&(a.Sb(0,"div",11),a.Cc(1,k,3,0,"div",18),a.Cc(2,R,8,3,"ng-container",19),a.Rb()),2&t){const t=a.ec(2).$implicit;a.Bb(1),a.kc("ngIf",0===(null==t.templates?null:t.templates.length)),a.Bb(1),a.kc("ngForOf",t.templates)}}function I(t,e){1&t&&(a.Sb(0,"div",3),a.Sb(1,"div",20),a.Ec(2,"(empty)"),a.Rb(),a.Rb())}function E(t,e){if(1&t){const t=a.Tb();a.Qb(0),a.Sb(1,"div",23),a.ac("click",(function(){a.sc(t);const i=e.$implicit;return a.ec(7).selectItem(i)})),a.Nb(2,"div",13),a.Sb(3,"div",6),a.Nb(4,"i",26),a.Rb(),a.Sb(5,"div",25),a.Sb(6,"span"),a.Ec(7),a.Rb(),a.Rb(),a.Rb(),a.Pb()}if(2&t){const t=e.$implicit,i=a.ec(7);a.Bb(1),a.Eb("item-selected",i.isSelected(t.id)),a.Bb(6),a.Fc(t.name)}}function P(t,e){if(1&t&&(a.Sb(0,"div",11),a.Cc(1,I,3,0,"div",18),a.Cc(2,E,8,3,"ng-container",19),a.Rb()),2&t){const t=a.ec(2).$implicit;a.Bb(1),a.kc("ngIf",0===(null==t.chains?null:t.chains.length)),a.Bb(1),a.kc("ngForOf",t.chains)}}function y(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",11),a.Sb(1,"div",12),a.ac("click",(function(){a.sc(t);const e=a.ec().$implicit;return a.ec(4).toggleItem(e.item.id+".templates")})),a.Sb(2,"div",13),a.Nb(3,"i",5),a.Rb(),a.Sb(4,"div",6),a.Nb(5,"i",14),a.Rb(),a.Sb(6,"div",15),a.Sb(7,"span"),a.Ec(8,"Templates "),a.Nb(9,"span",22),a.Rb(),a.Rb(),a.Sb(10,"div",16),a.ac("click",(function(e){a.sc(t);const i=a.ec().$implicit;return a.ec(4).createTemplate(i.item),e.stopPropagation()})),a.Nb(11,"i",17),a.Rb(),a.Rb(),a.Cc(12,B,3,2,"div",8),a.Sb(13,"div",12),a.ac("click",(function(){a.sc(t);const e=a.ec().$implicit;return a.ec(4).toggleItem(e.item.id+".chains")})),a.Sb(14,"div",13),a.Nb(15,"i",5),a.Rb(),a.Sb(16,"div",6),a.Nb(17,"i",14),a.Rb(),a.Sb(18,"div",15),a.Sb(19,"span"),a.Ec(20,"Chains "),a.Nb(21,"span",22),a.Rb(),a.Rb(),a.Sb(22,"div",16),a.ac("click",(function(e){a.sc(t);const i=a.ec().$implicit;return a.ec(4).createChain(i.item),e.stopPropagation()})),a.Nb(23,"i",17),a.Rb(),a.Rb(),a.Cc(24,P,3,2,"div",8),a.Rb()}if(2&t){const t=a.ec().$implicit,e=a.ec(4);a.Bb(3),a.Eb("fa-caret-down",e.isOpen(t.item.id+".templates"))("fa-caret-right",!e.isOpen(t.item.id+".templates")),a.Bb(9),a.kc("ngIf",e.isOpen(t.item.id+".templates")),a.Bb(3),a.Eb("fa-caret-down",e.isOpen(t.item.id+".chains"))("fa-caret-right",!e.isOpen(t.item.id+".chains")),a.Bb(9),a.kc("ngIf",e.isOpen(t.item.id+".chains"))}}function x(t,e){if(1&t){const t=a.Tb();a.Qb(0),a.Sb(1,"div",3),a.Sb(2,"div",4),a.ac("click",(function(){a.sc(t);const i=e.$implicit;return a.ec(4).toggleItem(i.item.id)})),a.Nb(3,"i",5),a.Rb(),a.Sb(4,"div",6),a.Nb(5,"i",21),a.Rb(),a.Sb(6,"div",7),a.ac("click",(function(){a.sc(t);const i=e.$implicit,n=a.ec(4);return n.openItem(i.item.id),n.selectItem(i.item)})),a.Sb(7,"span"),a.Ec(8),a.Rb(),a.Rb(),a.Rb(),a.Cc(9,y,25,10,"div",8),a.Pb()}if(2&t){const t=e.$implicit,i=a.ec(4);a.Bb(1),a.Eb("item-selected",i.isSelected(t.item.id)),a.Bb(2),a.Eb("fa-caret-down",i.isOpen(t.item.id))("fa-caret-right",!i.isOpen(t.item.id)),a.Bb(5),a.Fc(t.item.name),a.Bb(1),a.kc("ngIf",i.isOpen(t.item.id))}}function T(t,e){if(1&t&&(a.Sb(0,"div",11),a.Cc(1,C,3,0,"div",18),a.Cc(2,x,10,8,"ng-container",19),a.Rb()),2&t){const t=a.ec(2).$implicit;a.Bb(1),a.kc("ngIf",0===(null==t.collections?null:t.collections.length)),a.Bb(1),a.kc("ngForOf",t.collections)}}function w(t,e){1&t&&(a.Sb(0,"div",3),a.Sb(1,"div",20),a.Ec(2,"(empty)"),a.Rb(),a.Rb())}function O(t,e){1&t&&a.Ob(0)}const M=function(t){return{$implicit:t,isRoot:!1}};function F(t,e){if(1&t&&(a.Qb(0),a.Cc(1,O,1,0,"ng-container",2),a.Pb()),2&t){const t=e.$implicit;a.ec(4);const i=a.pc(2);a.Bb(1),a.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",a.mc(2,M,t))}}function N(t,e){if(1&t&&(a.Sb(0,"div",11),a.Cc(1,w,3,0,"div",18),a.Cc(2,F,2,4,"ng-container",19),a.Rb()),2&t){const t=a.ec(2).$implicit;a.Bb(1),a.kc("ngIf",0===(null==t.stacks?null:t.stacks.length)),a.Bb(1),a.kc("ngForOf",t.stacks)}}function _(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",11),a.Sb(1,"div",12),a.ac("click",(function(){a.sc(t);const e=a.ec().$implicit;return a.ec().toggleItem(e.item.id+".collections")})),a.Sb(2,"div",13),a.Nb(3,"i",5),a.Rb(),a.Sb(4,"div",6),a.Nb(5,"i",14),a.Rb(),a.Sb(6,"div",15),a.Sb(7,"span"),a.Ec(8,"Collections"),a.Rb(),a.Rb(),a.Sb(9,"div",16),a.ac("click",(function(e){a.sc(t);const i=a.ec().$implicit;return a.ec().createCollection(i.item),e.stopPropagation()})),a.Nb(10,"i",17),a.Rb(),a.Rb(),a.Cc(11,T,3,2,"div",8),a.Sb(12,"div",12),a.ac("click",(function(){a.sc(t);const e=a.ec().$implicit;return a.ec().toggleItem(e.item.id+".stacks")})),a.Sb(13,"div",13),a.Nb(14,"i",5),a.Rb(),a.Sb(15,"div",6),a.Nb(16,"i",14),a.Rb(),a.Sb(17,"div",15),a.Sb(18,"span"),a.Ec(19,"Stacks"),a.Rb(),a.Rb(),a.Rb(),a.Cc(20,N,3,2,"div",8),a.Rb()}if(2&t){const t=a.ec().$implicit,e=a.ec();a.Bb(3),a.Eb("fa-caret-down",e.isOpen(t.item.id+".collections"))("fa-caret-right",!e.isOpen(t.item.id+".collections")),a.Bb(8),a.kc("ngIf",e.isOpen(t.item.id+".collections")),a.Bb(3),a.Eb("fa-caret-down",e.isOpen(t.item.id+".stacks"))("fa-caret-right",!e.isOpen(t.item.id+".stacks")),a.Bb(6),a.kc("ngIf",e.isOpen(t.item.id+".stacks"))}}function $(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",3),a.Sb(1,"div",4),a.ac("click",(function(){a.sc(t);const i=e.$implicit;return a.ec().toggleItem(i.item.id)})),a.Nb(2,"i",5),a.Rb(),a.Sb(3,"div",6),a.Nb(4,"i",5),a.Rb(),a.Sb(5,"div",7),a.ac("click",(function(){a.sc(t);const i=e.$implicit,n=a.ec();return n.openItem(i.item.id),n.selectItem(i.item)})),a.Cc(6,S,5,2,"ng-container",0),a.Cc(7,v,3,1,"ng-container",0),a.Rb(),a.Rb(),a.Cc(8,_,21,10,"div",8)}if(2&t){const t=e.$implicit,i=e.isRoot,n=a.ec();a.Eb("item-selected",n.isSelected(t.item.id)),a.Bb(2),a.Eb("fa-caret-down",n.isOpen(t.item.id))("fa-caret-right",!n.isOpen(t.item.id)),a.Bb(2),a.Eb("fa-dice-d6","workspace"===t.item.type)("fa-layer-group","stack"===t.item.type),a.Bb(2),a.kc("ngIf",i),a.Bb(1),a.kc("ngIf",!i),a.Bb(1),a.kc("ngIf",n.isOpen(t.item.id))}}let D=(()=>{class t{constructor(t){this.blueprintsTreeService=t,this.onItemSelect=new a.o,this.state=this.blueprintsTreeService.state}ngOnInit(){var t;this.selectedItem=null!==(t=this.selectedItem)&&void 0!==t?t:this.root.item,this.selectItem(this.selectedItem),this.state.tree[this.root.item.id]={open:!0}}ngOnChanges(t){var e,i;(null===(e=t.selectedItem)||void 0===e?void 0:e.currentValue)&&this.selectItem(null===(i=t.selectedItem)||void 0===i?void 0:i.currentValue)}selectItem(t){this.state.selectedItem.item=t,this.state.selectedItem.id=t.id,this.onItemSelect.emit(t),this.saveState()}openItem(t){this.state.tree[t]={open:!0},this.saveState()}toggleItem(t){this.state.tree[t]?this.state.tree[t].open=!this.state.tree[t].open:this.state.tree[t]={open:!0},this.saveState()}isOpen(t){var e;return null===(e=this.state.tree[t])||void 0===e?void 0:e.open}saveState(){this.blueprintsTreeService.saveState()}ngOnDestroy(){}isSelected(t){return this.state.selectedItem.id===t}createCollection(t){this.blueprintsTreeService.createCollection()}createTemplate(t){this.blueprintsTreeService.createTemplate(t)}createChain(t){this.blueprintsTreeService.createChain(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(d))},t.\u0275cmp=a.Gb({type:t,selectors:[["blueprints-tree"]],inputs:{root:"root",selectedItem:"selectedItem"},outputs:{onItemSelect:"onItemSelect"},features:[a.Ab([]),a.zb],decls:3,vars:1,consts:[[4,"ngIf"],["workspace",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tree-item"],[1,"item-pointer",3,"click"],[1,"fa"],[1,"item-icon"],[1,"item-name","ellipsis",3,"click"],["class","sub-dir",4,"ngIf"],[1,"text-capitalize"],[1,"text-small","text-muted","ml-1"],[1,"sub-dir"],[1,"tree-item",3,"click"],[1,"item-pointer"],[1,"fa","fa-folder"],[1,"item-name"],[1,"item-command-icon",3,"click"],[1,"far","fa-plus-square"],["class","tree-item",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-muted","text-tiny","empty-dir"],[1,"fa","fa-cog"],[1,"text-small","text-muted"],[1,"tree-item","pt-1",3,"click"],[1,"far","fa-file"],[1,"item-name","ellipsis"],[1,"far","fa-file-alt"]],template:function(t,e){1&t&&(a.Cc(0,h,2,4,"div",0),a.Cc(1,$,9,13,"ng-template",null,1,a.Dc)),2&t&&a.kc("ngIf",e.root)},directives:[n.t,n.A,n.s],styles:[".tree-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding-top:.25rem}.tree-item[_ngcontent-%COMP%]:hover{background-color:#f9fafe}.tree-item[_ngcontent-%COMP%]   .empty-dir[_ngcontent-%COMP%]{padding-left:25px}.tree-item[_ngcontent-%COMP%]   .item-pointer[_ngcontent-%COMP%]{width:20px;text-align:center;cursor:pointer}.tree-item.item-selected[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .tree-item.item-selected[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#6469ff!important}.tree-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{width:20px;text-align:center}.tree-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#b3b4b3}.tree-item[_ngcontent-%COMP%]   .item-command-icon[_ngcontent-%COMP%]{width:20px;text-align:center;align-self:center;cursor:pointer}.tree-item[_ngcontent-%COMP%]   .item-command-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#b3b4b3!important}.tree-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{padding:0 .25rem;cursor:pointer}.tree-item[_ngcontent-%COMP%]   .item-name.active[_ngcontent-%COMP%]{background:#555;box-shadow:inset 0 0 1px #999;border-radius:2px}.tree-item[_ngcontent-%COMP%]   .relative-path[_ngcontent-%COMP%]{padding-left:.25rem;color:#b3b4b3}.sub-dir[_ngcontent-%COMP%]{padding-left:20px}"]}),t})();var G=i("3Pt+"),Q=i("aSHc"),A=i("oCqB"),z=i("kmnG"),K=i("d3UM"),q=i("FKr1"),J=i("qFsG"),j=i("bTqV");function U(t,e){if(1&t&&(a.Sb(0,"mat-option",7),a.Ec(1),a.Rb()),2&t){const t=e.$implicit;a.kc("value",t.id),a.Bb(1),a.Fc(t.name)}}function L(t,e){1&t&&(a.Sb(0,"mat-form-field",5),a.Nb(1,"input",14),a.Rb())}function V(t,e){if(1&t&&(a.Sb(0,"div",15),a.Nb(1,"i",16),a.Sb(2,"span"),a.Ec(3," Collection: "),a.Sb(4,"span",3),a.Ec(5),a.Rb(),a.Ec(6," added to stack!"),a.Rb(),a.Rb()),2&t){const t=a.ec();a.Bb(5),a.Gc(" ",t.data.collection.name," ")}}function W(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",17),a.Sb(1,"button",18),a.Ec(2,"Cancel"),a.Rb(),a.Sb(3,"button",19),a.ac("click",(function(){return a.sc(t),a.ec().add()})),a.Ec(4,"Add"),a.Rb(),a.Rb()}if(2&t){const t=a.ec();a.Bb(3),a.kc("disabled",!t.form.valid)}}function H(t,e){1&t&&(a.Sb(0,"div",17),a.Sb(1,"button",18),a.Ec(2,"Close"),a.Rb(),a.Rb())}let X=(()=>{class t{constructor(t,e,i,n){this.fb=t,this.stackService=e,this.data=i,this.dialogRef=n,this.actionState=Q.a,this.currentState=Q.a.IDLE,this.subs=new s.a,this.form=this.fb.group({stack:["",[G.E.required]],newStackName:[""]})}ngOnInit(){this.subs.add(this.stackService.getLocalStacks().subscribe(t=>this.stacks=t)),this.form.valueChanges.subscribe(t=>{this.createNewStack="create-new-stack"===t.stack,this.form.get("newStackName").setValidators(this.createNewStack?[G.E.required]:[])})}ngOnDestroy(){}close(){this.dialogRef.close(this.form.value)}add(){const t=this.stacks.find(t=>t.id=this.form.value.stack);this.addToStack(t.id,this.data.collection.name,this.data.collection.id).subscribe(t=>{this.currentState=this.actionState.SUCCESS},t=>this.currentState=this.actionState.FAILED)}addToStack(t,e,i){return this.stackService.addCollectionToStack(t,e,i)}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(G.f),a.Mb(A.a),a.Mb(u.a),a.Mb(u.h))},t.\u0275cmp=a.Gb({type:t,selectors:[["add-to-stack"]],decls:23,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"p-2"],[1,"text-bold"],[3,"formGroup"],[1,"mat-form-field"],["formControlName","stack"],[3,"value"],[1,"fa","fa-plus-circle"],[3,"value",4,"ngFor","ngForOf"],["class","mat-form-field",4,"ngIf"],["class","p-2 text-center",4,"ngIf"],["mat-dialog-actions","",3,"align"],["class","text-right",4,"ngIf"],["matInput","","placeholder","New Stack Name","formControlName","newStackName"],[1,"p-2","text-center"],[1,"fa","fa-check","text-success"],[1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(a.Sb(0,"h1",0),a.Ec(1,"Add Collection To Stack"),a.Rb(),a.Sb(2,"div",1),a.Sb(3,"div",2),a.Sb(4,"p"),a.Ec(5,"Add collection: "),a.Sb(6,"span",3),a.Ec(7),a.Rb(),a.Ec(8," to stack:"),a.Rb(),a.Rb(),a.Sb(9,"form",4),a.Sb(10,"mat-form-field",5),a.Sb(11,"mat-label"),a.Ec(12,"Select stack:"),a.Rb(),a.Sb(13,"mat-select",6),a.Sb(14,"mat-option",7),a.Nb(15,"i",8),a.Ec(16," Create New Stack"),a.Rb(),a.Cc(17,U,2,2,"mat-option",9),a.Rb(),a.Rb(),a.Cc(18,L,2,0,"mat-form-field",10),a.Rb(),a.Cc(19,V,7,1,"div",11),a.Rb(),a.Sb(20,"div",12),a.Cc(21,W,5,1,"div",13),a.Cc(22,H,3,0,"div",13),a.Rb()),2&t&&(a.Bb(7),a.Gc(" ",e.data.collection.name," "),a.Bb(2),a.kc("formGroup",e.form),a.Bb(5),a.kc("value","create-new-stack"),a.Bb(3),a.kc("ngForOf",e.stacks),a.Bb(1),a.kc("ngIf",e.createNewStack),a.Bb(1),a.kc("ngIf",e.currentState===e.actionState.SUCCESS),a.Bb(1),a.kc("align","end"),a.Bb(1),a.kc("ngIf",e.currentState!==e.actionState.SUCCESS),a.Bb(1),a.kc("ngIf",e.currentState===e.actionState.SUCCESS))},directives:[u.i,u.f,G.G,G.r,G.j,z.c,z.g,K.a,G.q,G.i,q.i,n.s,n.t,u.c,J.a,G.c,j.b,u.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var Y=i("Mzu6"),Z=i("eH1D"),tt=i("STbY"),et=i("NFeN"),it=i("Qu3c"),nt=i("pr2P"),ct=i("gpd5"),ot=i("+Ahk"),st=i("lsM1"),at=i("kjm3");const lt=function(t){return{collection:t}};function rt(t,e){if(1&t&&(a.Sb(0,"div",21),a.Ec(1," More Actions "),a.Sb(2,"mat-icon",22),a.Ec(3,"more_vert"),a.Rb(),a.Rb()),2&t){const t=a.ec(2),e=a.pc(2);a.kc("matMenuTriggerFor",e)("matMenuTriggerData",a.mc(3,lt,t.collection)),a.Bb(2),a.kc("inline",!0)}}const bt=function(t){return{env:t}};function mt(t,e){if(1&t&&(a.Sb(0,"div",21),a.Ec(1," More Actions "),a.Sb(2,"mat-icon",22),a.Ec(3,"more_vert"),a.Rb(),a.Rb()),2&t){const t=a.ec(2),e=a.pc(5);a.kc("matMenuTriggerFor",e)("matMenuTriggerData",a.mc(3,bt,t.collection)),a.Bb(2),a.kc("inline",!0)}}function ut(t,e){1&t&&(a.Sb(0,"div",29),a.Nb(1,"i",30),a.Rb())}function pt(t,e){if(1&t){const t=a.Tb();a.Qb(0,26),a.Sb(1,"div",27),a.ac("click",(function(){a.sc(t);const i=e.$implicit;return a.ec(3).selectPathItem(i.item)})),a.Ec(2),a.Rb(),a.Cc(3,ut,2,0,"div",28),a.Pb()}if(2&t){const t=e.$implicit,i=e.index,n=a.ec(3);a.Bb(1),a.Eb("ml-auto",0===i),a.kc("matTooltip",t.item.type),a.Bb(1),a.Fc(t.item.name),a.Bb(1),a.kc("ngIf",i<(null==n.itemPath?null:n.itemPath.length)-1)}}function dt(t,e){if(1&t&&(a.Sb(0,"div",23),a.Sb(1,"div",24),a.Cc(2,pt,4,5,"ng-container",25),a.Rb(),a.Rb()),2&t){const t=a.ec(2);a.Bb(2),a.kc("ngForOf",t.itemPath)}}function ft(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-info",31),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.collection)}}function gt(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-filenames",31),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.collection)}}function ht(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-functions",31),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.collection)}}function St(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-variables",31),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.collection)}}function vt(t,e){1&t&&(a.Qb(0),a.Nb(1,"config-links"),a.Pb())}function Ct(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div"),a.Sb(1,"div",5),a.Sb(2,"div"),a.Sb(3,"span",6),a.Ec(4),a.Rb(),a.Sb(5,"span",7),a.Ec(6),a.Rb(),a.Rb(),a.Cc(7,rt,4,5,"div",8),a.Cc(8,mt,4,5,"div",8),a.Rb(),a.Cc(9,dt,3,1,"div",9),a.Sb(10,"div",10),a.Sb(11,"div",11),a.Sb(12,"div",12),a.Sb(13,"div",13),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("readme")})),a.Nb(14,"i",14),a.Ec(15,"Readme"),a.Rb(),a.Sb(16,"div",13),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("filenames")})),a.Nb(17,"i",15),a.Ec(18,"Filenames"),a.Rb(),a.Sb(19,"div",13),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("functions")})),a.Nb(20,"i",16),a.Ec(21,"Functions"),a.Rb(),a.Sb(22,"div",13),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("variables")})),a.Nb(23,"i",17),a.Ec(24,"Variables"),a.Rb(),a.Rb(),a.Rb(),a.Sb(25,"div",18),a.Qb(26,19),a.Cc(27,ft,2,1,"ng-container",20),a.Cc(28,gt,2,1,"ng-container",20),a.Cc(29,ht,2,1,"ng-container",20),a.Cc(30,St,2,1,"ng-container",20),a.Cc(31,vt,2,0,"ng-container",20),a.Pb(),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.ec();a.Bb(4),a.Fc(t.collection.name),a.Bb(2),a.Gc("[",t.collection.type,"]"),a.Bb(1),a.kc("ngIf",t.collection.type===t.itemTypes.Collection),a.Bb(1),a.kc("ngIf",t.collection.type!==t.itemTypes.Collection),a.Bb(1),a.kc("ngIf",(null==t.itemPath?null:t.itemPath.length)>1),a.Bb(4),a.Eb("text-primary","readme"===t.selectedSection),a.Bb(3),a.Eb("text-primary","filenames"===t.selectedSection),a.Bb(3),a.Eb("text-primary","functions"===t.selectedSection),a.Bb(3),a.Eb("text-primary","variables"===t.selectedSection),a.Bb(4),a.kc("ngSwitch",t.selectedSection),a.Bb(1),a.kc("ngSwitchCase","readme"),a.Bb(1),a.kc("ngSwitchCase","filenames"),a.Bb(1),a.kc("ngSwitchCase","functions"),a.Bb(1),a.kc("ngSwitchCase","variables"),a.Bb(1),a.kc("ngSwitchCase","links")}}function kt(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",32),a.Ec(1,"Collection: "),a.Sb(2,"span",33),a.Ec(3),a.Rb(),a.Rb(),a.Sb(4,"button",34),a.ac("click",(function(){a.sc(t);const i=e.collection;return a.ec().createTemplate(i)})),a.Sb(5,"span"),a.Ec(6,"Create New Template"),a.Rb(),a.Rb(),a.Sb(7,"button",34),a.ac("click",(function(){a.sc(t);const i=e.collection;return a.ec().createChain(i)})),a.Sb(8,"span"),a.Ec(9,"Create New Chain"),a.Rb(),a.Rb(),a.Sb(10,"button",34),a.ac("click",(function(){a.sc(t);const i=e.collection;return a.ec().renameCollection(i)})),a.Sb(11,"span"),a.Ec(12,"Rename Collection"),a.Rb(),a.Rb(),a.Sb(13,"button",34),a.ac("click",(function(){a.sc(t);const i=e.collection;return a.ec().addToStack(i)})),a.Sb(14,"span"),a.Ec(15,"Add Collection To Stack"),a.Rb(),a.Rb(),a.Sb(16,"button",34),a.ac("click",(function(){a.sc(t);const i=e.collection;return a.ec().deleteCollection(i)})),a.Sb(17,"span"),a.Ec(18,"Delete Collection"),a.Rb(),a.Rb()}if(2&t){const t=e.collection;a.Bb(3),a.Fc(t.name)}}function Rt(t,e){if(1&t){const t=a.Tb();a.Sb(0,"button",34),a.ac("click",(function(){a.sc(t);const e=a.ec().env;return a.ec().deleteStack(e)})),a.Sb(1,"span"),a.Ec(2,"Delete "),a.Sb(3,"span",35),a.Ec(4),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.ec().env;a.Bb(4),a.Fc(t.type)}}function Bt(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",32),a.Sb(1,"span",35),a.Ec(2),a.Rb(),a.Ec(3," : "),a.Sb(4,"span",33),a.Ec(5),a.Rb(),a.Rb(),a.Sb(6,"button",34),a.ac("click",(function(){return a.sc(t),a.ec().createCollection()})),a.Sb(7,"span"),a.Ec(8,"Create New Collection"),a.Rb(),a.Rb(),a.Cc(9,Rt,5,1,"button",36)}if(2&t){const t=e.env,i=a.ec();a.Bb(2),a.Fc(t.type),a.Bb(3),a.Fc(t.name),a.Bb(4),a.kc("ngIf",t.type!==i.itemTypes.Workspace)}}let It=(()=>{class t{constructor(t,e,i){this.bluService=t,this.collectionService=e,this.dialog=i,this.onGetBlueprints=new a.o,this.onPathItemSelected=new a.o,this.selectedSection="readme",this.itemTypes=r.a.Item.Type}ngOnInit(){}ngOnChanges(t){this.refreshItem()}ngOnDestroy(){}refreshItem(){const t=this.collection;this.collection=null,setTimeout(()=>{this.collection=t,this.updateItemPath()})}updateItemPath(){this.itemPath=this.getItemPath(this.collection)}selectConfig(t){this.selectedSection=t}addToStack(t){this.dialog.open(X,{data:{collection:t},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>console.log("dialog result: ",t))}deleteCollection(t){this.dialog.open(Y.a,{data:{title:`Delete collection ${t.name}?`,text:"Deleting this collection is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{!0===e&&this.collectionService.deleteCollection(t.id).subscribe(t=>this.getBlueprints())})}createCollection(){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"create"},width:"30%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.getBlueprints()})}renameCollection(t){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"rename",collection:t},width:"30%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.getBlueprints()})}createChain(t){this.dialog.open(b.a,{data:{blueprints:this.blueprints,type:"create",collection:t,itemType:r.a.Item.Type.Chain},width:"300px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.getBlueprints())}createTemplate(t){this.dialog.open(b.a,{data:{blueprints:this.blueprints,type:"create",collection:t,itemType:r.a.Item.Type.Template},width:"300px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.getBlueprints())}getBlueprints(){this.onGetBlueprints.emit(!0)}getItemPath(t,e=[]){return e.unshift({item:t}),t.parent?this.getItemPath(t.parent,e):e}selectPathItem(t){this.onPathItemSelected.emit(t)}deleteStack(t){this.dialog.open(Y.a,{data:{title:`Delete stack ${t.name}?`,text:"Deleting this stack is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{!0===e&&this.bluService.deleteStack(t.id).subscribe(t=>this.getBlueprints())})}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(l.a),a.Mb(Z.a),a.Mb(u.b))},t.\u0275cmp=a.Gb({type:t,selectors:[["blueprints-collection"]],inputs:{collection:"collection",blueprints:"blueprints"},outputs:{onGetBlueprints:"onGetBlueprints",onPathItemSelected:"onPathItemSelected"},features:[a.zb],decls:7,vars:3,consts:[[4,"ngIf"],[3,"overlapTrigger"],["collectionMenu","matMenu"],["matMenuContent",""],["environmentMenu","matMenu"],[1,"border-bottom","d-flex","align-items-center","p-2","item-header",2,"background-color","#F9FAFE"],[2,"font-size","1rem"],[1,"text-muted","text-small","ml-1"],["class","ml-auto cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData",4,"ngIf"],["class","pt-1",4,"ngIf"],[1,"pl-2","pt-1","d-flex"],[1,"",2,"width","120px"],[1,"pl-1"],[1,"cursor-pointer","config-icon",3,"click"],[1,"fab","fa-readme","mr-2","fa-sm"],[1,"fa","fa-file-alt","mr-2","fa-sm"],[1,"fa","fa-magic","mr-2","fa-sm"],[1,"fa","fa-equals","mr-2","fa-sm"],[1,"flex-grow-1","px-2",2,"borderz","1px solid red"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"ml-auto","cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"item-menu",3,"inline"],[1,"pt-1"],[1,"d-flex","align-items-center","text-small","text-muted","pr-3"],["class","",4,"ngFor","ngForOf"],[1,""],[1,"as-link","cursor-pointer",3,"matTooltip","click"],["class","px-2",4,"ngIf"],[1,"px-2"],[1,"fa","fa-chevron-right"],[3,"item"],[1,"p-2","text-center","border-bottom"],[1,"text-bold"],["mat-menu-item","",3,"click"],[1,"text-capitalize"],["mat-menu-item","",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(a.Cc(0,Ct,32,19,"div",0),a.Sb(1,"mat-menu",1,2),a.Cc(3,kt,19,1,"ng-template",3),a.Rb(),a.Sb(4,"mat-menu",1,4),a.Cc(6,Bt,10,3,"ng-template",3),a.Rb()),2&t&&(a.kc("ngIf",e.collection),a.Bb(1),a.kc("overlapTrigger",!0),a.Bb(3),a.kc("overlapTrigger",!0))},directives:[n.t,tt.e,tt.a,n.x,n.y,tt.d,et.a,n.s,it.a,nt.a,ct.a,ot.a,st.a,at.a,tt.b],styles:[".config-list[_ngcontent-%COMP%]{position:relative;width:100%}.config-list[_ngcontent-%COMP%]   .config-title[_ngcontent-%COMP%], .config-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:26px}.config-list[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]{left:10px;top:6px;position:absolute;font-size:.6rem;opacity:.8}"]}),t})();var Et=i("a8/g"),Pt=i("xm+p"),yt=i("3guR"),xt=i("PAqJ"),Tt=i("6I3L"),wt=i("iFtu"),Ot=i("fCHT");function Mt(t,e){1&t&&(a.Sb(0,"div"),a.Sb(1,"div",4),a.Sb(2,"div"),a.Nb(3,"i",5),a.Rb(),a.Rb(),a.Rb())}function Ft(t,e){1&t&&(a.Sb(0,"div",7),a.Nb(1,"i",36),a.Rb())}function Nt(t,e){if(1&t){const t=a.Tb();a.Qb(0,13),a.Sb(1,"div",34),a.ac("click",(function(){a.sc(t);const i=e.$implicit;return a.ec(2).selectPathItem(i.item)})),a.Ec(2),a.Rb(),a.Cc(3,Ft,2,0,"div",35),a.Pb()}if(2&t){const t=e.$implicit,i=e.index,n=a.ec(2);a.Bb(1),a.Eb("ml-auto",0===i),a.kc("matTooltip",t.item.type),a.Bb(1),a.Fc(t.item.name),a.Bb(1),a.kc("ngIf",i<(null==n.itemPath?null:n.itemPath.length)-1)}}function _t(t,e){if(1&t){const t=a.Tb();a.Qb(0),a.Sb(1,"div",37),a.Sb(2,"div",38),a.Nb(3,"i",39),a.Sb(4,"div",40),a.Ec(5,"Items"),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"div",41),a.Sb(7,"div",42),a.ac("click",(function(){return a.sc(t),a.ec(2).selectConfig("commands")})),a.Nb(8,"i",43),a.Ec(9,"List"),a.Rb(),a.Rb(),a.Pb()}if(2&t){const t=a.ec(2);a.Bb(7),a.Eb("text-primary","commands"===t.selectedSection)}}function $t(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-info",44),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.item)}}function Dt(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-description",44),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.item)}}function Gt(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-filenames",44),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.item)}}function Qt(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-on-success",44),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.item)}}function At(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-commands",44),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.item)}}function zt(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-functions",44),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.item)}}function Kt(t,e){if(1&t&&(a.Qb(0),a.Nb(1,"config-variables",44),a.Pb()),2&t){const t=a.ec(2);a.Bb(1),a.kc("item",t.item)}}function qt(t,e){1&t&&(a.Qb(0),a.Nb(1,"config-links"),a.Pb())}const Jt=function(t){return{item:t}};function jt(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div"),a.Sb(1,"div",6),a.Sb(2,"div",7),a.Sb(3,"span",8),a.Ec(4),a.Rb(),a.Sb(5,"span",9),a.Ec(6),a.Rb(),a.Rb(),a.Sb(7,"div",10),a.Sb(8,"div",11),a.ac("click",(function(){a.sc(t);const e=a.ec();return e.launchConsole(e.item)})),a.Nb(9,"i",12),a.Rb(),a.Rb(),a.Sb(10,"div",13),a.Sb(11,"button",14),a.ac("click",(function(){a.sc(t);const e=a.ec();return e.editTemplate(e.item)})),a.Ec(12,"Edit"),a.Rb(),a.Rb(),a.Sb(13,"div",15),a.Sb(14,"button",16),a.Sb(15,"mat-icon",17),a.Ec(16,"more_vert"),a.Rb(),a.Rb(),a.Rb(),a.Rb(),a.Sb(17,"div",18),a.Sb(18,"div",19),a.Cc(19,Nt,4,5,"ng-container",20),a.Rb(),a.Rb(),a.Sb(20,"div",21),a.Sb(21,"div",22),a.Sb(22,"div",23),a.Sb(23,"div",24),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("readme")})),a.Nb(24,"i",25),a.Ec(25,"Readme"),a.Rb(),a.Sb(26,"div",24),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("description")})),a.Nb(27,"i",26),a.Ec(28,"Description"),a.Rb(),a.Sb(29,"div",24),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("onSuccess")})),a.Nb(30,"i",27),a.Ec(31,"On Success"),a.Rb(),a.Sb(32,"div",24),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("filenames")})),a.Nb(33,"i",28),a.Ec(34,"Filenames"),a.Rb(),a.Sb(35,"div",24),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("functions")})),a.Nb(36,"i",29),a.Ec(37,"Functions"),a.Rb(),a.Sb(38,"div",24),a.ac("click",(function(){return a.sc(t),a.ec().selectConfig("variables")})),a.Nb(39,"i",30),a.Ec(40,"Variables"),a.Rb(),a.Rb(),a.Cc(41,_t,10,2,"ng-container",0),a.Rb(),a.Sb(42,"div",31),a.Qb(43,32),a.Cc(44,$t,2,1,"ng-container",33),a.Cc(45,Dt,2,1,"ng-container",33),a.Cc(46,Gt,2,1,"ng-container",33),a.Cc(47,Qt,2,1,"ng-container",33),a.Cc(48,At,2,1,"ng-container",33),a.Cc(49,zt,2,1,"ng-container",33),a.Cc(50,Kt,2,1,"ng-container",33),a.Cc(51,qt,2,0,"ng-container",33),a.Pb(),a.Rb(),a.Rb(),a.Rb()}if(2&t){const t=a.ec(),e=a.pc(3);a.Bb(4),a.Fc(t.item.name),a.Bb(2),a.Gc("[",t.item.type,"]"),a.Bb(7),a.kc("matMenuTriggerFor",e)("matMenuTriggerData",a.mc(28,Jt,t.item)),a.Bb(2),a.kc("inline",!0),a.Bb(4),a.kc("ngForOf",t.itemPath),a.Bb(4),a.Eb("text-primary","readme"===t.selectedSection),a.Bb(3),a.Eb("text-primary","description"===t.selectedSection),a.Bb(3),a.Eb("text-primary","onSuccess"===t.selectedSection),a.Bb(3),a.Eb("text-primary","filenames"===t.selectedSection),a.Bb(3),a.Eb("text-primary","functions"===t.selectedSection),a.Bb(3),a.Eb("text-primary","variables"===t.selectedSection),a.Bb(3),a.kc("ngIf","chain"===t.item.type),a.Bb(2),a.kc("ngSwitch",t.selectedSection),a.Bb(1),a.kc("ngSwitchCase","readme"),a.Bb(1),a.kc("ngSwitchCase","description"),a.Bb(1),a.kc("ngSwitchCase","filenames"),a.Bb(1),a.kc("ngSwitchCase","onSuccess"),a.Bb(1),a.kc("ngSwitchCase","commands"),a.Bb(1),a.kc("ngSwitchCase","functions"),a.Bb(1),a.kc("ngSwitchCase","variables"),a.Bb(1),a.kc("ngSwitchCase","links")}}function Ut(t,e){if(1&t){const t=a.Tb();a.Sb(0,"div",45),a.Sb(1,"span",46),a.Ec(2),a.Rb(),a.Sb(3,"span",47),a.Ec(4),a.Rb(),a.Rb(),a.Sb(5,"button",48),a.ac("click",(function(){a.sc(t);const i=e.item;return a.ec().editTemplate(i)})),a.Ec(6,"Edit "),a.Sb(7,"span",46),a.Ec(8),a.Rb(),a.Rb(),a.Sb(9,"button",48),a.ac("click",(function(){a.sc(t);const i=e.item;return a.ec().rename(i)})),a.Ec(10,"Rename "),a.Sb(11,"span",46),a.Ec(12),a.Rb(),a.Rb(),a.Sb(13,"button",48),a.ac("click",(function(){a.sc(t);const i=e.item;return a.ec().duplicate(i)})),a.Ec(14,"Duplicate "),a.Sb(15,"span",46),a.Ec(16),a.Rb(),a.Rb(),a.Sb(17,"button",48),a.ac("click",(function(){a.sc(t);const i=e.item;return a.ec().delete(i)})),a.Ec(18,"Delete "),a.Sb(19,"span",46),a.Ec(20),a.Rb(),a.Rb()}if(2&t){const t=e.item;a.Bb(2),a.Gc("",t.type,": "),a.Bb(2),a.Hc("",t.parent.name,".",t.name,""),a.Bb(4),a.Fc(t.type),a.Bb(4),a.Fc(t.type),a.Bb(4),a.Fc(t.type),a.Bb(4),a.Fc(t.type)}}let Lt=(()=>{class t{constructor(t,e,i,n,c,o){this.bluService=t,this.appStateService=e,this.navigationService=i,this.templateService=n,this.chainService=c,this.dialog=o,this.onGetBlueprints=new a.o,this.onPathItemSelected=new a.o,this.selectedSection="readme"}ngOnInit(){}ngOnChanges(t){this.refreshItem()}ngOnDestroy(){}refreshItem(){const t=this.item;this.item=null,setTimeout(()=>{this.item=t,this.updateItemPath()},0)}updateItemPath(){this.itemPath=this.getItemPath(this.item)}selectConfig(t){this.selectedSection=t}renameChain(t,e){this.dialog.open(b.a,{data:{blueprints:this.blueprints,type:"rename",collection:t,item:e,itemType:r.a.Item.Type.Chain},width:"300px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.getBlueprints())}renameTemplate(t,e){this.dialog.open(b.a,{data:{blueprints:this.blueprints,type:"rename",collection:t,item:e,itemType:r.a.Item.Type.Template},width:"300px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.getBlueprints())}rename(t){"chain"===t.type?this.renameChain(t.parent,t):this.renameTemplate(t.parent,t)}delete(t){"chain"===t.type?this.deleteChain(t):this.deleteTemplate(t)}deleteChain(t){this.dialog.open(Y.a,{data:{title:`Delete chain ${t.name}?`,text:"Deleting this chain is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{!0===e&&this.chainService.deleteChain(t.id).subscribe(t=>this.getBlueprints())})}deleteTemplate(t){this.dialog.open(Y.a,{data:{title:`Delete template ${t.name}?`,text:"Deleting this template is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{!0===e&&this.templateService.deleteTemplate(t.id).subscribe(t=>this.getBlueprints())})}duplicate(t){"chain"===t.type?this.duplicateChain(t):this.duplicateTemplate(t)}duplicateTemplate(t){this.templateService.duplicateTemplate(t.id).subscribe(t=>this.getBlueprints())}duplicateChain(t){this.chainService.duplicateChain(t.id).subscribe(t=>this.getBlueprints())}editTemplate(t){this.navigationService.navigateTo(["editor"],{queryParams:{mode:"preview",itemId:t.id,rootDestination:"./",inputs:JSON.stringify({name:"stackjoy"})}})}getBlueprints(){this.onGetBlueprints.emit(!0)}launchConsole(t){this.appStateService.openBluConsole({inputs:{},command:`generate "${t.namespace}"`,extraInfo:{itemId:t.id}})}getItemPath(t,e=[]){return e.unshift({item:t}),t.parent?this.getItemPath(t.parent,e):e}selectPathItem(t){this.onPathItemSelected.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(l.a),a.Mb(Et.a),a.Mb(Pt.a),a.Mb(yt.a),a.Mb(xt.a),a.Mb(u.b))},t.\u0275cmp=a.Gb({type:t,selectors:[["blueprints-item"]],inputs:{item:"item",blueprints:"blueprints"},outputs:{onGetBlueprints:"onGetBlueprints",onPathItemSelected:"onPathItemSelected"},features:[a.zb],decls:5,vars:2,consts:[[4,"ngIf"],["yPosition","below"],["itemMenu","matMenu"],["matMenuContent",""],[1,"border-bottom","d-flex","align-items-center","p-2","item-header",2,"background-color","#F9FAFE"],[1,"fa","fa-spinner","fa-spin"],[1,"border-bottom","d-flex","align-items-center","item-header",2,"background-color","#F9FAFE"],[1,"px-2"],[2,"font-size","1rem"],[1,"text-muted","text-small","ml-1"],[1,"ml-auto"],[1,"console","mr-2","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,""],["mat-button","",3,"click"],[1,"cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-button","","mat-icon-button",""],[1,"item-menu",3,"inline"],[1,"py-1"],[1,"d-flex","align-items-center","text-small","text-muted","pr-3"],["class","",4,"ngFor","ngForOf"],[1,"d-flex","pl-2","pt-2"],[1,"",2,"width","120px"],[1,"pl-1"],[1,"cursor-pointer","config-icon",3,"click"],[1,"fab","fa-readme","mr-2","fa-sm"],[1,"fa","fa-info","mr-2","fa-sm"],[1,"fa","fa-check","mr-2","fa-sm"],[1,"fa","fa-file-alt","mr-2","fa-sm"],[1,"fa","fa-magic","mr-2","fa-sm"],[1,"fa","fa-equals","mr-2","fa-sm"],[1,"flex-grow-1","px-2",2,"borderz","1px solid red"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"as-link","cursor-pointer",3,"matTooltip","click"],["class","px-2",4,"ngIf"],[1,"fa","fa-chevron-right"],[1,"config-list","border-bottom","py-1","pt-3"],[1,"config-title"],[1,"fa","fa-link","config-icon"],[1,"inline-block"],[1,"pl-3","pt-1"],[1,"cursor-pointer",3,"click"],[1,"fa","fa-list","mr-2","fa-sm"],[3,"item"],[1,"p-2","text-center","border-bottom"],[1,"text-capitalize"],[1,"text-bold"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(a.Cc(0,Mt,4,0,"div",0),a.Cc(1,jt,52,30,"div",0),a.Sb(2,"mat-menu",1,2),a.Cc(4,Ut,21,7,"ng-template",3),a.Rb()),2&t&&(a.kc("ngIf",!e.item),a.Bb(1),a.kc("ngIf",e.item))},directives:[n.t,tt.e,tt.a,j.b,tt.d,et.a,n.s,n.x,n.y,it.a,nt.a,Tt.a,ct.a,wt.a,Ot.a,ot.a,st.a,at.a,tt.b],styles:[".config-list[_ngcontent-%COMP%]{position:relative;width:100%}.config-list[_ngcontent-%COMP%]   .config-title[_ngcontent-%COMP%], .config-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:26px}.config-list[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]{left:10px;top:6px;position:absolute;font-size:.6rem;opacity:.8}"]}),t})();function Vt(t,e){if(1&t){const t=a.Tb();a.Sb(0,"blueprints-tree",11),a.ac("onItemSelect",(function(e){return a.sc(t),a.ec().selectItem(e)})),a.Rb()}if(2&t){const t=a.ec();a.kc("root",t.tree)("selectedItem",t.lastSelectedItem)}}function Wt(t,e){if(1&t){const t=a.Tb();a.Qb(0),a.Sb(1,"blueprints-collection",12),a.ac("onGetBlueprints",(function(){return a.sc(t),a.ec().getBlueprints()}))("onPathItemSelected",(function(e){return a.sc(t),a.ec().selectItem(e)})),a.Rb(),a.Pb()}if(2&t){const t=a.ec();a.Bb(1),a.kc("blueprints",t.blueprints)("collection",t.selectedItem)}}function Ht(t,e){if(1&t){const t=a.Tb();a.Qb(0),a.Sb(1,"blueprints-item",13),a.ac("onGetBlueprints",(function(){return a.sc(t),a.ec().getBlueprints()}))("onPathItemSelected",(function(e){return a.sc(t),a.ec().selectItem(e)})),a.Rb(),a.Pb()}if(2&t){const t=a.ec();a.Bb(1),a.kc("blueprints",t.blueprints)("item",t.selectedItem)}}const Xt=function(){return["collection","workspace","stack"]},Yt=function(){return["template","chain"]},Zt=c.f.forChild([{path:"",component:(()=>{class t{constructor(t,e,i){this.bluService=t,this.blueprintsTreeService=e,this.dialog=i,this.state={},this.subs=new s.a}ngOnInit(){this.getBlueprints(),this.subs.add(this.blueprintsTreeService.onBlueprintsUpdated.subscribe(t=>this.getBlueprints()))}getBlueprints(){this.bluService.getBlueprintsTree().subscribe(t=>{var e;this.lastSelectedItem=null!==(e=this.blueprintsTreeService.getLastSelectedItem(t))&&void 0!==e?e:t.item,this.tree=t})}ngOnDestroy(){this.subs.unsubscribe()}toggleSectionState(t,e){this.state[t][e]=!this.state[t][e]}createCollection(){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"create"},width:"30%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.getBlueprints()})}selectItem(t){this.selectedItem=t,this.lastSelectedItem=t,this.selectedItemPath=this.getItemPath(this.selectedItem)}getItemPath(t,e=[]){return e.unshift({item:t}),t.parent?this.getItemPath(t.parent,e):e}}return t.\u0275fac=function(e){return new(e||t)(a.Mb(l.a),a.Mb(d),a.Mb(u.b))},t.\u0275cmp=a.Gb({type:t,selectors:[["blueprints"]],decls:13,vars:6,consts:[[1,"bg-white","container-fluid"],[1,"row"],[1,"col"],[1,"text-capitalize","text-large","text-small","p-2"],[1,"fa","fa-terminal","mt-1","mr-1"],[1,"row","border-top"],[1,"col-3","border-right"],[3,"root","selectedItem","onItemSelect",4,"ngIf"],[1,"col-9","p-0"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"root","selectedItem","onItemSelect"],[3,"blueprints","collection","onGetBlueprints","onPathItemSelected"],[3,"blueprints","item","onGetBlueprints","onPathItemSelected"]],template:function(t,e){1&t&&(a.Sb(0,"div",0),a.Sb(1,"div",1),a.Sb(2,"div",2),a.Sb(3,"div",3),a.Nb(4,"i",4),a.Ec(5," Blueprints "),a.Rb(),a.Rb(),a.Rb(),a.Sb(6,"div",5),a.Sb(7,"div",6),a.Cc(8,Vt,1,2,"blueprints-tree",7),a.Rb(),a.Sb(9,"div",8),a.Qb(10,9),a.Cc(11,Wt,2,2,"ng-container",10),a.Cc(12,Ht,2,2,"ng-container",10),a.Pb(),a.Rb(),a.Rb(),a.Rb()),2&t&&(a.Bb(8),a.kc("ngIf",e.tree),a.Bb(2),a.kc("ngSwitch",null==e.selectedItem?null:e.selectedItem.type),a.Bb(1),a.kc("ngSwitchCase",a.lc(4,Xt).includes(null==e.selectedItem?null:e.selectedItem.type)?e.selectedItem.type:""),a.Bb(1),a.kc("ngSwitchCase",a.lc(5,Yt).includes(null==e.selectedItem?null:e.selectedItem.type)?e.selectedItem.type:""))},directives:[n.t,n.x,n.y,D,It,Lt],styles:[""]}),t})()}]);var te=i("QibW");let ee=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,z.e,G.A,K.b,te.c,J.b]]}),t})(),ie=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,u.g,J.b,G.l,j.c,te.c,G.A,K.b,ee]]}),t})();var ne=i("JrrR"),ce=i("lK0z"),oe=i("AvgW"),se=i("yjV7"),ae=i("Eow3"),le=i("2VJ6"),re=i("Bp5M"),be=i("vabg");let me=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,et.b,tt.c,oe.a,ae.a,le.a,re.a,be.a,it.b]]}),t})();var ue=i("KjPU"),pe=i("nC7K");let de=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,et.b,tt.c,oe.a,ae.a,le.a,re.a,be.a,se.a,ue.a,pe.a,it.b,j.c]]}),t})(),fe=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c]]}),t})(),ge=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},providers:[d],imports:[[n.c,Zt,tt.c,et.b,j.c,ie,ne.a,ce.a,oe.a,se.a,ae.a,le.a,re.a,be.a,me,de,it.b,fe]]}),t})()}}]);