(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{hTrQ:function(t,e,i){"use strict";i.r(e),i.d(e,"BlueprintsModule",(function(){return $}));var c=i("ofXK"),n=i("tyNb"),a=i("0IaG"),o=i("3Pt+"),b=i("quSY"),s=i("aSHc"),r=i("fXoL"),l=i("bB17"),m=i("kmnG"),d=i("d3UM"),u=i("FKr1"),f=i("qFsG"),S=i("bTqV");function p(t,e){if(1&t&&(r.Sb(0,"mat-option",7),r.Ec(1),r.Rb()),2&t){const t=e.$implicit;r.kc("value",t.id),r.Bb(1),r.Fc(t.name)}}function g(t,e){1&t&&(r.Sb(0,"mat-form-field",5),r.Nb(1,"input",13),r.Rb())}function R(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",14),r.Sb(1,"button",15),r.Ec(2,"Cancel"),r.Rb(),r.Sb(3,"button",16),r.ac("click",(function(){return r.sc(t),r.ec().add()})),r.Ec(4,"Add"),r.Rb(),r.Rb()}if(2&t){const t=r.ec();r.Bb(3),r.kc("disabled",!t.form.valid)}}let v=(()=>{class t{constructor(t,e,i,c){this.fb=t,this.stackService=e,this.data=i,this.dialogRef=c,this.actionState=s.a,this.currentState=s.a.IDLE,this.subs=new b.a,this.form=this.fb.group({stack:["",[o.E.required]],newStackName:[""]})}ngOnInit(){console.log("dddd:",this.data),this.subs.add(this.stackService.getLocalStacks().subscribe(t=>this.stacks=t)),this.form.valueChanges.subscribe(t=>{console.log("form data",t),this.createNewStack="create-new-stack"===t.stack,this.form.get("newStackName").setValidators(this.createNewStack?[o.E.required]:[])})}ngOnDestroy(){}close(){this.dialogRef.close(this.form.value)}add(){console.log("",this.form.value);const t=this.stacks.find(t=>t.id=this.form.value.stack);console.log("stack:",t),this.addToStack(t.id,this.data.collection.name,this.data.collection.path).subscribe(t=>{console.log("res:",t)})}addToStack(t,e,i){return this.stackService.addCollectionToStack(t,e,i)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(o.f),r.Mb(l.a),r.Mb(a.a),r.Mb(a.h))},t.\u0275cmp=r.Gb({type:t,selectors:[["add-to-stack"]],decls:21,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"p-2"],[1,"text-bold"],[3,"formGroup"],[1,"mat-form-field"],["formControlName","stack"],[3,"value"],[1,"fa","fa-plus-circle"],[3,"value",4,"ngFor","ngForOf"],["class","mat-form-field",4,"ngIf"],["mat-dialog-actions","",3,"align"],["class","text-right",4,"ngIf"],["matInput","","placeholder","New Stack Name","formControlName","newStackName"],[1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(r.Sb(0,"h1",0),r.Ec(1,"Add Collection To Stack"),r.Rb(),r.Sb(2,"div",1),r.Sb(3,"div",2),r.Sb(4,"p"),r.Ec(5,"Add collection: "),r.Sb(6,"span",3),r.Ec(7),r.Rb(),r.Ec(8," to stack:"),r.Rb(),r.Rb(),r.Sb(9,"form",4),r.Sb(10,"mat-form-field",5),r.Sb(11,"mat-label"),r.Ec(12,"Select stack:"),r.Rb(),r.Sb(13,"mat-select",6),r.Sb(14,"mat-option",7),r.Nb(15,"i",8),r.Ec(16," Create New Stack"),r.Rb(),r.Cc(17,p,2,2,"mat-option",9),r.Rb(),r.Rb(),r.Cc(18,g,2,0,"mat-form-field",10),r.Rb(),r.Rb(),r.Sb(19,"div",11),r.Cc(20,R,5,1,"div",12),r.Rb()),2&t&&(r.Bb(7),r.Gc(" ",e.data.collection.name," "),r.Bb(2),r.kc("formGroup",e.form),r.Bb(5),r.kc("value","create-new-stack"),r.Bb(3),r.kc("ngForOf",e.stacks),r.Bb(1),r.kc("ngIf",e.createNewStack),r.Bb(1),r.kc("align","end"),r.Bb(1),r.kc("ngIf",e.currentState!==e.actionState.SUCCESS))},directives:[a.i,a.f,o.G,o.r,o.j,m.c,m.g,d.a,o.q,o.i,u.g,c.s,c.t,a.c,f.a,o.c,S.b,a.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var h=i("/hV/"),k=i("xm+p"),E=i("STbY"),B=i("NFeN");function C(t,e){1&t&&(r.Sb(0,"div",28),r.Sb(1,"div",29),r.Nb(2,"i",30),r.Ec(3,"Readme"),r.Rb(),r.Sb(4,"div",29),r.Nb(5,"i",31),r.Ec(6,"Settings"),r.Rb(),r.Sb(7,"div",29),r.Nb(8,"i",32),r.Ec(9,"Functions"),r.Rb(),r.Sb(10,"div",29),r.Nb(11,"i",33),r.Ec(12,"Variables"),r.Rb(),r.Sb(13,"div",29),r.Nb(14,"i",34),r.Ec(15,"Links"),r.Rb(),r.Rb())}const F=function(t){return{item:t}};function T(t,e){if(1&t&&(r.Sb(0,"div",36),r.Nb(1,"i",37),r.Sb(2,"span"),r.Ec(3),r.Rb(),r.Rb()),2&t){const t=e.$implicit;r.ec(4);const i=r.pc(13);r.kc("matMenuTriggerFor",i)("matMenuTriggerData",r.mc(3,F,t)),r.Bb(3),r.Fc(t.name)}}function M(t,e){if(1&t&&(r.Sb(0,"div",28),r.Cc(1,T,4,5,"div",35),r.Rb()),2&t){const t=r.ec().$implicit;r.Bb(1),r.kc("ngForOf",t.templates)}}function w(t,e){if(1&t&&(r.Sb(0,"div",15),r.Ec(1),r.Rb()),2&t){const t=e.$implicit;r.Bb(1),r.Fc(t.name)}}function N(t,e){if(1&t&&(r.Sb(0,"div",28),r.Cc(1,w,2,1,"div",38),r.Rb()),2&t){const t=r.ec().$implicit;r.Bb(1),r.kc("ngForOf",t.chains)}}const y=function(t){return{collection:t}};function x(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",19),r.Sb(1,"div",20),r.Sb(2,"div",13),r.Ec(3),r.Rb(),r.Sb(4,"div",21),r.Sb(5,"div",15),r.Sb(6,"mat-icon",16),r.Ec(7,"add"),r.Rb(),r.Rb(),r.Sb(8,"div",15),r.Ec(9,"Add..."),r.Rb(),r.Rb(),r.Sb(10,"div",22),r.Sb(11,"mat-icon",23),r.Ec(12,"more_vert"),r.Rb(),r.Rb(),r.Rb(),r.Sb(13,"div",17),r.Sb(14,"div",15),r.Sb(15,"div",24),r.ac("click",(function(){r.sc(t);const i=e.$implicit;return r.ec(2).toggleSectionState(i.item.id,"config")})),r.Nb(16,"i",25),r.Ec(17," Config "),r.Rb(),r.Cc(18,C,16,0,"div",26),r.Rb(),r.Sb(19,"div",15),r.Sb(20,"div",24),r.ac("click",(function(){r.sc(t);const i=e.$implicit;return r.ec(2).toggleSectionState(i.item.id,"templates")})),r.Nb(21,"i",25),r.Ec(22," Templates "),r.Sb(23,"span",27),r.Ec(24),r.Rb(),r.Rb(),r.Cc(25,M,2,1,"div",26),r.Rb(),r.Sb(26,"div",15),r.Sb(27,"div",24),r.ac("click",(function(){r.sc(t);const i=e.$implicit;return r.ec(2).toggleSectionState(i.item.id,"chains")})),r.Nb(28,"i",25),r.Ec(29," Chains "),r.Sb(30,"span",27),r.Ec(31),r.Rb(),r.Rb(),r.Cc(32,N,2,1,"div",26),r.Rb(),r.Rb(),r.Rb()}if(2&t){const t=e.$implicit,i=r.ec(2),c=r.pc(10),n=r.pc(7);r.Bb(3),r.Fc(t.item.name),r.Bb(1),r.kc("matMenuTriggerFor",c)("matMenuTriggerData",r.mc(24,y,t.item)),r.Bb(2),r.kc("inline",!0),r.Bb(5),r.kc("inline",!0)("matMenuTriggerFor",n)("matMenuTriggerData",r.mc(26,y,t.item)),r.Bb(5),r.Eb("fa-chevron-right",!i.state[t.item.id].config)("fa-chevron-down",i.state[t.item.id].config),r.Bb(2),r.kc("ngIf",i.state[t.item.id].config),r.Bb(3),r.Eb("fa-chevron-right",!i.state[t.item.id].templates)("fa-chevron-down",i.state[t.item.id].templates),r.Bb(3),r.Gc("(",t.templates.length,")"),r.Bb(1),r.kc("ngIf",i.state[t.item.id].templates),r.Bb(3),r.Eb("fa-chevron-right",!i.state[t.item.id].chains)("fa-chevron-down",i.state[t.item.id].chains),r.Bb(3),r.Gc("(",t.chains.length,")"),r.Bb(1),r.kc("ngIf",i.state[t.item.id].chain)}}function I(t,e){if(1&t&&(r.Sb(0,"div",11),r.Sb(1,"div",12),r.Sb(2,"div",13),r.Ec(3,"Collections"),r.Rb(),r.Sb(4,"div",14),r.Sb(5,"div",15),r.Sb(6,"mat-icon",16),r.Ec(7,"add"),r.Rb(),r.Rb(),r.Sb(8,"div",15),r.Ec(9,"Add Collection"),r.Rb(),r.Rb(),r.Rb(),r.Sb(10,"div",17),r.Cc(11,x,33,28,"div",18),r.Rb(),r.Rb()),2&t){const t=r.ec();r.Bb(6),r.kc("inline",!0),r.Bb(5),r.kc("ngForOf",t.blueprints.list)}}function O(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",39),r.Ec(1,"Collection: "),r.Sb(2,"span",40),r.Ec(3),r.Rb(),r.Rb(),r.Sb(4,"button",41),r.Sb(5,"span"),r.Ec(6,"Rename Collection"),r.Rb(),r.Rb(),r.Sb(7,"button",42),r.ac("click",(function(){r.sc(t);const i=e.collection;return r.ec().deleteCollection(i)})),r.Sb(8,"span"),r.Ec(9,"Delete Collection"),r.Rb(),r.Rb(),r.Sb(10,"button",42),r.ac("click",(function(){r.sc(t);const i=e.collection;return r.ec().addToStack(i)})),r.Sb(11,"span"),r.Ec(12,"Add Collection To Stack"),r.Rb(),r.Rb()}if(2&t){const t=e.collection;r.Bb(3),r.Fc(t.name)}}function D(t,e){if(1&t&&(r.Sb(0,"div",39),r.Ec(1,"Collection: "),r.Sb(2,"span",40),r.Ec(3),r.Rb(),r.Rb(),r.Sb(4,"button",41),r.Sb(5,"span"),r.Ec(6,"Add New Template"),r.Rb(),r.Rb(),r.Sb(7,"button",41),r.Sb(8,"span"),r.Ec(9,"Add New Chain"),r.Rb(),r.Rb()),2&t){const t=e.collection;r.Bb(3),r.Fc(t.name)}}function G(t,e){if(1&t){const t=r.Tb();r.Sb(0,"div",39),r.Sb(1,"span",2),r.Ec(2),r.Rb(),r.Sb(3,"span",40),r.Ec(4),r.Rb(),r.Rb(),r.Sb(5,"button",42),r.ac("click",(function(){r.sc(t);const i=e.item;return r.ec().editTemplate(i)})),r.Ec(6,"Edit "),r.Sb(7,"span",2),r.Ec(8),r.Rb(),r.Rb(),r.Sb(9,"button",41),r.Ec(10,"Generate "),r.Sb(11,"span",2),r.Ec(12),r.Rb(),r.Rb(),r.Sb(13,"button",41),r.Ec(14,"Rename "),r.Sb(15,"span",2),r.Ec(16),r.Rb(),r.Rb(),r.Sb(17,"button",41),r.Ec(18,"Delete "),r.Sb(19,"span",2),r.Ec(20),r.Rb(),r.Rb(),r.Sb(21,"button",41),r.Ec(22,"Duplicate "),r.Sb(23,"span",2),r.Ec(24),r.Rb(),r.Rb(),r.Sb(25,"button",41),r.Ec(26,"Move "),r.Sb(27,"span",2),r.Ec(28),r.Rb(),r.Ec(29," To ..."),r.Rb()}if(2&t){const t=e.item;r.Bb(2),r.Gc("",t.type,": "),r.Bb(2),r.Hc("",t.parent.name,".",t.name,""),r.Bb(4),r.Fc(t.type),r.Bb(4),r.Fc(t.type),r.Bb(4),r.Fc(t.type),r.Bb(4),r.Fc(t.type),r.Bb(4),r.Fc(t.type),r.Bb(4),r.Fc(t.type)}}const A=n.f.forChild([{path:"",component:(()=>{class t{constructor(t,e,i,c){this.bluService=t,this.dialog=e,this.stackService=i,this.navigationService=c,this.state={}}ngOnInit(){this.getBlueprints()}getBlueprints(){this.bluService.getBlueprints().subscribe(t=>{this.blueprints=t;const e={};this.blueprints.list.forEach(t=>{var i;e[t.item.id]=null!==(i=e[t.item.id])&&void 0!==i?i:{config:!1,templates:!1,chains:!1}}),this.state=e})}ngOnDestroy(){}toggleSectionState(t,e){this.state[t][e]=!this.state[t][e]}editTemplate(t){this.navigationService.navigateTo(["editor"],{queryParams:{mode:"preview",itemId:t.id,rootDestination:"./",inputs:JSON.stringify({name:"stackjoy"})}})}addToStack(t){this.dialog.open(v,{data:{collection:t},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>console.log("dialog result: ",t))}deleteCollection(t){this.bluService.deleteCollection(t.id).subscribe(t=>{console.log("res:",t),this.getBlueprints()})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(h.a),r.Mb(a.b),r.Mb(l.a),r.Mb(k.a))},t.\u0275cmp=r.Gb({type:t,selectors:[["blueprints"]],decls:15,vars:3,consts:[[1,"bg-white"],[1,"p-2"],[1,"text-capitalize"],[1,"fa","fa-terminal","mt-1","mr-1"],["class","p-2 pl-4",4,"ngIf"],[3,"overlapTrigger"],["collectionMenu","matMenu"],["matMenuContent",""],["collectionNewItemMenu","matMenu"],["yPosition","below"],["itemMenu","matMenu"],[1,"p-2","pl-4"],[1,"d-flex","align-items-center","border-bottom","p-1",2,"background-color","#F9FAFE"],[1,"",2,"font-size","1rem"],[1,"ml-auto","d-flex","align-items-center","cursor-pointer","pr-3"],[1,""],[1,"item-menu",3,"inline"],[1,"pl-2"],["class","pt-3",4,"ngFor","ngForOf"],[1,"pt-3"],[1,"border-bottom","d-flex","align-items-center"],[1,"ml-auto","d-flex","align-items-center","cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"ml-2","cursor-pointer"],[1,"item-menu",3,"inline","matMenuTriggerFor","matMenuTriggerData"],[1,"pt-2","cursor-pointer",3,"click"],[1,"fa","fa-sm","text-small","mr-1"],["class","pl-3 pt-1",4,"ngIf"],[1,"text-small","text-muted"],[1,"pl-3","pt-1"],[1,"cursor-pointer"],[1,"fa","fa-info-circle","mr-2","fa-sm"],[1,"fa","fa-wrench","mr-2","fa-sm"],[1,"fa","fa-magic","mr-2","fa-sm"],[1,"fa","fa-equals","mr-2","fa-sm"],[1,"fa","fa-link","mr-2","fa-sm"],["class","cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData",4,"ngFor","ngForOf"],[1,"cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"fa","fa-folder","mr-2"],["class","",4,"ngFor","ngForOf"],[1,"p-2","text-center","border-bottom"],[1,"text-bold"],["mat-menu-item",""],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(r.Sb(0,"div",0),r.Sb(1,"div",1),r.Sb(2,"h2",2),r.Nb(3,"i",3),r.Ec(4," Blueprints "),r.Rb(),r.Rb(),r.Cc(5,I,12,2,"div",4),r.Rb(),r.Sb(6,"mat-menu",5,6),r.Cc(8,O,13,1,"ng-template",7),r.Rb(),r.Sb(9,"mat-menu",5,8),r.Cc(11,D,10,1,"ng-template",7),r.Rb(),r.Sb(12,"mat-menu",9,10),r.Cc(14,G,30,9,"ng-template",7),r.Rb()),2&t&&(r.Bb(5),r.kc("ngIf",e.blueprints),r.Bb(1),r.kc("overlapTrigger",!0),r.Bb(3),r.kc("overlapTrigger",!0))},directives:[c.t,E.e,E.a,B.a,c.s,E.d,E.b],styles:[""]}),t})()}]);let $=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[c.c,A,E.c,B.b,S.c]]}),t})()}}]);