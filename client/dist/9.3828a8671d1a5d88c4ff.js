(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{x3qw:function(t,e,i){"use strict";i.r(e),i.d(e,"CreateAccountModule",(function(){return A}));var r=i("ofXK"),n=i("tyNb"),o=i("quSY"),s=i("aSHc"),a=i("eIep"),c=i("fXoL"),b=i("IYfF"),u=i("xm+p"),d=i("IjCo"),l=i("3sFK"),p=i("Wp6s"),m=i("3Pt+"),g=i("kmnG"),v=i("qFsG"),h=i("bTqV"),f=i("bv9b");function S(t,e){if(1&t&&(c.Rb(0,"div",12),c.Ec(1),c.Qb()),2&t){const t=c.dc();c.Ab(1),c.Fc(t.signupForm.error)}}function w(t,e){1&t&&(c.Rb(0,"div"),c.Rb(1,"div",1),c.Mb(2,"mat-progress-bar",13),c.Qb(),c.Qb())}function C(t,e){1&t&&(c.Rb(0,"div",14),c.Rb(1,"div",15),c.Ec(2," Thanks for signing up!"),c.Qb(),c.Rb(3,"div",1),c.Mb(4,"i",16),c.Ec(5," You received one free workspace."),c.Qb(),c.Qb())}function E(t,e){1&t&&(c.Rb(0,"div",2),c.Mb(1,"i",20),c.Ec(2,"Password too weak. Please provide a stronger password."),c.Qb())}function Q(t,e){if(1&t){const t=c.Sb();c.Rb(0,"div",2),c.Rb(1,"div",2),c.Mb(2,"i",20),c.Ec(3," Email Already in use."),c.Qb(),c.Rb(4,"div",21),c.Zb("click",(function(){return c.rc(t),c.dc(2).forgotPassword()})),c.Ec(5,"(Click here to reset password)"),c.Qb(),c.Qb()}}function R(t,e){1&t&&(c.Rb(0,"div",2),c.Mb(1,"i",20),c.Ec(2," Error Occurred."),c.Qb())}function F(t,e){if(1&t&&(c.Rb(0,"div",14),c.Pb(1,17),c.Cc(2,E,3,0,"div",18),c.Cc(3,Q,6,0,"div",18),c.Cc(4,R,3,0,"div",19),c.Ob(),c.Qb()),2&t){const t=c.dc();c.Ab(1),c.jc("ngSwitch",t.errorCode),c.Ab(1),c.jc("ngSwitchCase","auth/weak-password"),c.Ab(1),c.jc("ngSwitchCase","auth/email-already-in-use")}}function y(t,e){if(1&t){const t=c.Sb();c.Pb(0),c.Rb(1,"div",22),c.Zb("click",(function(){return c.rc(t),c.dc().forgotPassword()})),c.Ec(2,"Forgot Password"),c.Qb(),c.Rb(3,"div",23),c.Zb("click",(function(){return c.rc(t),c.dc().login()})),c.Ec(4,"Login"),c.Qb(),c.Ob()}}function I(t,e){if(1&t){const t=c.Sb();c.Pb(0),c.Rb(1,"div",24),c.Zb("click",(function(){return c.rc(t),c.dc().continue()})),c.Ec(2,"Continue "),c.Mb(3,"i",25),c.Qb(),c.Ob()}}const k=n.f.forChild([{path:"",component:(()=>{class t{constructor(t,e,i,r,n,a){this.authService=t,this.route=e,this.navigationService=i,this.systemService=r,this.appEnvironmentService=n,this.ngZone=a,this.signupForm={email:"",password:"",error:"",disabled:!1,inviteCode:"",displayName:""},this.subs=new o.a,this.currentState=s.a.IDLE,this.actionState=s.a}ngOnInit(){var t;this.signupForm.email=null!==(t=this.route.snapshot.queryParams.email)&&void 0!==t?t:"",this.subs.add(this.authService.user$.subscribe(t=>this.user=t)),this.subs.add(this.appEnvironmentService.currentEnvironment$.subscribe(t=>this.currentEnvironment=t))}ngOnDestroy(){this.subs.unsubscribe()}login(){const t={};this.signupForm.email&&(t.email=this.signupForm.email),this.navigationService.navigateTo(["login"],{queryParams:t})}forgotPassword(){const t={};this.signupForm.email&&(t.email=this.signupForm.email),this.navigationService.navigateTo(["forgot-password"],{queryParams:t})}createAccount(){this.currentState=s.a.PENDING,this.authService.createUser(this.signupForm.email,this.signupForm.password,this.signupForm.displayName).subscribe(t=>this.currentState=s.a.SUCCESS,t=>{var e,i,r;this.currentState=s.a.FAILED,this.error=t,this.errorCode=null!==(r=null===(i=null===(e=null==t?void 0:t.error)||void 0===e?void 0:e.data)||void 0===i?void 0:i.code)&&void 0!==r?r:"unknown_error",console.log("Login error Code: ",this.errorCode)})}acceptInvite(){this.systemService.acceptInvite(this.signupForm.inviteCode,this.signupForm.displayName,this.signupForm.password).toPromise().then(t=>{this.authService.login(t.data.email,this.signupForm.password)}).catch(t=>{console.error("Failed: ",t)})}logout(){this.authService.logout().pipe(Object(a.a)(t=>this.appEnvironmentService.switchToSystemWorkspace())).subscribe(t=>this.navigationService.navigateTo(["app-environment"]))}continue(){this.navigationService.navigateTo([this.currentEnvironment?"app-environment":"my-items"])}}return t.\u0275fac=function(e){return new(e||t)(c.Lb(b.a),c.Lb(n.a),c.Lb(u.a),c.Lb(d.a),c.Lb(l.a),c.Lb(c.A))},t.\u0275cmp=c.Fb({type:t,selectors:[["create-account"]],decls:29,vars:11,consts:[[1,"d-flex","justify-content-center","pt-4"],[1,"p-2"],[1,""],[1,"text-bold"],[1,"form",3,"ngSubmit"],["matInput","","placeholder","Email","type","email","name","email","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","placeholder","Password","type","password","name","password","required","",3,"ngModel","disabled","ngModelChange"],["class","error",4,"ngIf"],["mat-raised-button","","type","submit",3,"disabled"],[4,"ngIf"],["class","pt-4 text-break","style","width: 250px;",4,"ngIf"],[1,"d-flex","p-2","pt-4"],[1,"error"],["mode","indeterminate"],[1,"pt-4","text-break",2,"width","250px"],[1,"text-center"],[1,"fa","fa-check-circle","text-success"],[3,"ngSwitch"],["class","",4,"ngSwitchCase"],["class","",4,"ngSwitchDefault"],[1,"fa","fa-exclamation-triangle","text-warning"],[1,"text-small","as-link","pt-1","cursor-pointer",3,"click"],[1,"cursor-pointer",3,"click"],[1,"cursor-pointer","ml-auto","pl-4",3,"click"],[1,"cursor-pointer","ml-auto",3,"click"],[1,"fa","fa-arrow-alt-circle-right"]],template:function(t,e){1&t&&(c.Rb(0,"div",0),c.Rb(1,"mat-card"),c.Rb(2,"div",1),c.Rb(3,"div",2),c.Pb(4),c.Rb(5,"div",3),c.Ec(6,"Create Account:"),c.Qb(),c.Rb(7,"div",1),c.Rb(8,"form",4),c.Zb("ngSubmit",(function(){return e.createAccount()})),c.Rb(9,"div",2),c.Rb(10,"mat-form-field"),c.Rb(11,"mat-label"),c.Ec(12,"Email"),c.Qb(),c.Rb(13,"input",5),c.Zb("ngModelChange",(function(t){return e.signupForm.email=t})),c.Qb(),c.Qb(),c.Qb(),c.Rb(14,"div",2),c.Rb(15,"mat-form-field"),c.Rb(16,"mat-label"),c.Ec(17,"Password"),c.Qb(),c.Rb(18,"input",6),c.Zb("ngModelChange",(function(t){return e.signupForm.password=t})),c.Qb(),c.Qb(),c.Qb(),c.Cc(19,S,2,1,"div",7),c.Rb(20,"button",8),c.Ec(21,"Create Account"),c.Qb(),c.Mb(22,"br"),c.Cc(23,w,3,0,"div",9),c.Qb(),c.Cc(24,C,6,0,"div",10),c.Cc(25,F,5,3,"div",10),c.Qb(),c.Ob(),c.Qb(),c.Rb(26,"div",11),c.Cc(27,y,5,0,"ng-container",9),c.Cc(28,I,4,0,"ng-container",9),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&t&&(c.Ab(13),c.jc("ngModel",e.signupForm.email)("disabled",e.signupForm.disabled),c.Ab(5),c.jc("ngModel",e.signupForm.password)("disabled",e.signupForm.disabled),c.Ab(1),c.jc("ngIf",""!==e.signupForm.error),c.Ab(1),c.jc("disabled",e.currentState===e.actionState.PENDING),c.Ab(3),c.jc("ngIf",e.currentState===e.actionState.PENDING),c.Ab(1),c.jc("ngIf",e.currentState===e.actionState.SUCCESS),c.Ab(1),c.jc("ngIf",e.currentState===e.actionState.FAILED),c.Ab(2),c.jc("ngIf",!e.user),c.Ab(1),c.jc("ngIf",e.user))},directives:[p.a,m.G,m.r,m.s,g.c,g.g,v.a,m.c,m.B,m.q,m.t,r.t,h.b,f.a,r.x,r.y,r.z],styles:[""]}),t})(),children:[]}]);let A=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[r.c,k,h.c,m.l,v.b,p.b,f.b]]}),t})()}}]);