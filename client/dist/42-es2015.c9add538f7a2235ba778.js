(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"4uq3":function(e,t,i){"use strict";i.r(t),i.d(t,"DataModelListModule",(function(){return T}));var o=i("ofXK"),r=i("tyNb");class c{constructor(e,t=[]){this.name=e,this.properties=t,this.bluMapping={repeater:{name:"modelProperties",keys:[{name:"name",mappedName:"propertyName"},{name:"type",mappedName:"propertyType"},{name:"required",mappedName:"propertyRequired"},{name:"values",mappedName:"propertyValue"},{name:"label",mappedName:"propertyLabel"},{name:"description",mappedName:"propertyDescription"},{name:"validationRegex",mappedName:"propertyValidationRegex"}]}}}static newProperty(){return{name:"",type:"string",required:!1,description:"",label:"",validationRegex:"",visible:!0,values:[]}}static load(e){return e?e.map(e=>new c(e.name,e.properties)):[]}get hasProperties(){return this.properties.length>0}updateProperty(e,t){const i=this.properties.findIndex(t=>t===e);i>=0&&(this.properties[i]=t)}addProperty(e){this.properties.push(e)}deleteProperty(e){this.properties.includes(e)&&this.properties.splice(this.properties.indexOf(e),1)}get bluString(){return`--modelName="${this.name}" --properties=${this.propertiesString}`}get propertiesString(){return this.properties.map(e=>`${e.name},${e.type},${e.required},${e.validationRegex}`).join("|")}getRepeater(){const e={name:this.bluMapping.repeater.name,description:"",args:[],values:[]};return this.properties.filter(e=>e.visible).forEach(t=>{e.values.push(this.bluMapping.repeater.keys.map(e=>({name:e.mappedName,value:Array.isArray(t[e.name])?t[e.name].join(":"):t[e.name]})))}),e}getBluParameters(){return{variables:[{name:"modelName",value:this.name}],options:"",repeaters:[this.getRepeater()]}}}var a=i("fXoL"),n=i("Ni13");let d=(()=>{class e{constructor(e){this.localStorageService=e,this.storageKey="dataModels"}getDataModels(){return c.load(this.localStorageService.getItem(this.storageKey))}saveDataModels(e){this.localStorageService.setItem(this.storageKey,e)}}return e.\u0275fac=function(t){return new(t||e)(a.qc(n.a))},e.\u0275prov=a.Yb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var l=i("bTqV"),s=i("thzI"),p=i("3Pt+"),u=i("kmnG"),m=i("qFsG");let h=(()=>{class e{constructor(e){this.fb=e,this.onChange=new a.r,this.onDelete=new a.r,this.onCancel=new a.r}ngOnInit(){this.form=this.fb.group({name:[this.dataModel.name]}),this.form.valueChanges.subscribe(e=>{})}ngOnDestroy(){}saveForm(){this.onChange.emit(this.form.value)}deleteModel(){this.onDelete.emit(this.dataModel)}cancel(){this.onCancel.emit(this.dataModel)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(p.f))},e.\u0275cmp=a.Wb({type:e,selectors:[["model-structure-form"]],inputs:{dataModel:"dataModel"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:15,vars:1,consts:[[1,"p-2","d-flex","align-items-center","border-bottom"],[1,""],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer",3,"click"],[1,"p-2"],[3,"formGroup"],[1,"mat-form-field"],["placeholder","Model Name","matInput","","formControlName","name"],[1,"row"],[1,"col","text-right"],["mat-button","","mat-raised-button","",1,"mr-1",3,"click"],["mat-button","","mat-raised-button","",3,"click"]],template:function(e,t){1&e&&(a.ic(0,"div",0),a.ic(1,"div",1),a.bd(2,"Model Settings"),a.hc(),a.ic(3,"div",2),a.ic(4,"i",3),a.uc("click",(function(){return t.deleteModel()})),a.hc(),a.hc(),a.hc(),a.ic(5,"div",4),a.ic(6,"form",5),a.ic(7,"mat-form-field",6),a.dc(8,"input",7),a.hc(),a.hc(),a.ic(9,"div",8),a.ic(10,"div",9),a.ic(11,"button",10),a.uc("click",(function(){return t.cancel()})),a.bd(12,"Cancel"),a.hc(),a.ic(13,"button",11),a.uc("click",(function(){return t.saveForm()})),a.bd(14,"Save"),a.hc(),a.hc(),a.hc(),a.hc()),2&e&&(a.Ob(6),a.Ec("formGroup",t.form))},directives:[p.z,p.q,p.k,u.c,m.b,p.c,p.p,p.i,l.a],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var f=i("d3UM"),b=i("FKr1"),v=i("QibW");function y(e,t){1&e&&(a.ic(0,"mat-error"),a.bd(1,"Input is required"),a.hc())}function g(e,t){1&e&&(a.ic(0,"mat-error"),a.bd(1,"Input is required"),a.hc())}function M(e,t){if(1&e){const e=a.jc();a.ic(0,"div",0),a.ic(1,"div",26),a.ic(2,"mat-form-field"),a.dc(3,"input",27),a.hc(),a.hc(),a.ic(4,"div",19),a.uc("click",(function(){a.Rc(e);const i=t.index;return a.yc().deleteItem("values",i)})),a.dc(5,"i",28),a.hc(),a.hc()}if(2&e){const e=t.index;a.Ob(3),a.Ec("formControlName",e)}}let P=(()=>{class e{constructor(e){this.fb=e,this.onChange=new a.r,this.onDelete=new a.r,this.onCancel=new a.r}ngOnInit(){this.form=this.fb.group({name:[this.dataModelProperty.name,[p.x.required]],type:[this.dataModelProperty.type,[p.x.required]],required:[this.dataModelProperty.required],description:[this.dataModelProperty.description],label:[this.dataModelProperty.label],validationRegex:[this.dataModelProperty.validationRegex],visible:[this.dataModelProperty.visible],values:this.fb.array(this.dataModelProperty.values||[])}),this.form.valueChanges.subscribe(e=>{console.log("form data",e)})}get f(){return this.form.controls}addItem(e){this.f[e].push(this.fb.control(""))}deleteItem(e,t){this.f[e].removeAt(t)}ngOnDestroy(){}cancel(){this.onCancel.emit(this.dataModelProperty)}saveForm(){this.onChange.emit(this.form.value)}deleteProperty(){this.onDelete.emit(this.dataModelProperty)}}return e.\u0275fac=function(t){return new(t||e)(a.cc(p.f))},e.\u0275cmp=a.Wb({type:e,selectors:[["model-property-form"]],inputs:{dataModelProperty:"dataModelProperty"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:67,vars:13,consts:[[1,"d-flex","align-items-center"],[1,"small","text-muted"],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer","small",3,"click"],[1,""],[1,"mat-form",3,"formGroup"],[1,"mat-form-field"],["placeholder","Property Name","matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type","required",""],[3,"value"],["placeholder","Label","matInput","","formControlName","label"],["placeholder","Description","matInput","","formControlName","description"],["placeholder","Validation Regex","matInput","","formControlName","validationRegex"],["aria-label","Select an option","formControlName","required",1,"mat-radio-group"],["id","radio-group"],[1,"mat-radio-button",3,"value"],["formArrayName","values",1,"form-array-group"],[1,"d-flex","align-items-center","group-header"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"fa","fa-plus-circle"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"row"],[1,"col","text-right"],["mat-button","","mat-raised-button","",1,"mr-2",3,"click"],["mat-button","","mat-raised-button","",3,"click"],[1,"w-100","pr-3"],["placeholder","Value","matInput","",3,"formControlName"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(a.ic(0,"div",0),a.ic(1,"div",1),a.bd(2,"Property Settings"),a.hc(),a.ic(3,"div",2),a.ic(4,"i",3),a.uc("click",(function(){return t.deleteProperty()})),a.hc(),a.hc(),a.hc(),a.ic(5,"div",4),a.ic(6,"form",5),a.ic(7,"mat-form-field",6),a.dc(8,"input",7),a.ic(9,"mat-hint"),a.bd(10,"Name of the property"),a.hc(),a.Zc(11,y,2,0,"mat-error",8),a.hc(),a.ic(12,"mat-form-field",6),a.ic(13,"mat-label"),a.bd(14,"Type"),a.hc(),a.ic(15,"mat-select",9),a.ic(16,"mat-option",10),a.bd(17,"String"),a.hc(),a.ic(18,"mat-option",10),a.bd(19,"Email"),a.hc(),a.ic(20,"mat-option",10),a.bd(21,"Password"),a.hc(),a.ic(22,"mat-option",10),a.bd(23,"Number"),a.hc(),a.ic(24,"mat-option",10),a.bd(25,"Boolean"),a.hc(),a.ic(26,"mat-option",10),a.bd(27,"List"),a.hc(),a.ic(28,"mat-option",10),a.bd(29,"Array"),a.hc(),a.hc(),a.ic(30,"mat-hint"),a.bd(31,"Property Data type"),a.hc(),a.Zc(32,g,2,0,"mat-error",8),a.hc(),a.ic(33,"mat-form-field",6),a.dc(34,"input",11),a.ic(35,"mat-hint"),a.bd(36,"Readable name that appears on forms"),a.hc(),a.hc(),a.ic(37,"mat-form-field",6),a.dc(38,"input",12),a.ic(39,"mat-hint"),a.bd(40,"Property description that appears on forms"),a.hc(),a.hc(),a.ic(41,"mat-form-field",6),a.dc(42,"input",13),a.ic(43,"mat-hint"),a.bd(44,"Regex to validate the property"),a.hc(),a.hc(),a.ic(45,"div",4),a.ic(46,"mat-radio-group",14),a.ic(47,"label",15),a.bd(48,"Required: "),a.hc(),a.ic(49,"mat-radio-button",16),a.bd(50,"True"),a.hc(),a.ic(51,"mat-radio-button",16),a.bd(52,"False"),a.hc(),a.hc(),a.hc(),a.ic(53,"div",17),a.ic(54,"div",18),a.ic(55,"div"),a.ic(56,"h6"),a.bd(57,"Default Value(s)"),a.hc(),a.hc(),a.ic(58,"div",19),a.uc("click",(function(){return t.addItem("values")})),a.dc(59,"i",20),a.hc(),a.hc(),a.Zc(60,M,6,1,"div",21),a.hc(),a.hc(),a.ic(61,"div",22),a.ic(62,"div",23),a.ic(63,"button",24),a.uc("click",(function(){return t.cancel()})),a.bd(64,"Cancel"),a.hc(),a.ic(65,"button",25),a.uc("click",(function(){return t.saveForm()})),a.bd(66,"Save"),a.hc(),a.hc(),a.hc(),a.hc()),2&e&&(a.Ob(6),a.Ec("formGroup",t.form),a.Ob(5),a.Ec("ngIf",null==t.f.name||null==t.f.name.errors?null:t.f.name.errors.required),a.Ob(5),a.Ec("value","string"),a.Ob(2),a.Ec("value","email"),a.Ob(2),a.Ec("value","password"),a.Ob(2),a.Ec("value","number"),a.Ob(2),a.Ec("value","boolean"),a.Ob(2),a.Ec("value","list"),a.Ob(2),a.Ec("value","array"),a.Ob(4),a.Ec("ngIf",null==t.f.type||null==t.f.type.errors?null:t.f.type.errors.required),a.Ob(17),a.Ec("value",!0),a.Ob(2),a.Ec("value",!1),a.Ob(9),a.Ec("ngForOf",null==t.f.values?null:t.f.values.controls))},directives:[p.z,p.q,p.k,u.c,m.b,p.c,p.p,p.i,p.w,u.f,o.u,u.g,f.a,b.i,v.b,v.a,p.e,o.t,l.a,u.b],styles:[""]}),e})();function C(e,t){if(1&e){const e=a.jc();a.ic(0,"div",3),a.ic(1,"model-structure-form",4),a.uc("onDelete",(function(t){return a.Rc(e),a.yc().deleteModel(t)}))("onCancel",(function(t){return a.Rc(e),a.yc().cancelEditModel(t)}))("onChange",(function(t){return a.Rc(e),a.yc().updateDataModel(t)})),a.hc(),a.hc()}if(2&e){const e=a.yc();a.Ob(1),a.Ec("dataModel",e.dataModel)}}function O(e,t){1&e&&(a.ic(0,"div",21),a.bd(1,"Properties"),a.hc())}function x(e,t){1&e&&(a.ic(0,"span",21),a.bd(1,"[required]"),a.hc())}function D(e,t){if(1&e){const e=a.jc();a.ic(0,"div",23),a.ic(1,"div",24),a.uc("click",(function(){a.Rc(e);const i=t.$implicit;return a.yc(4).editDataProperty(i)})),a.ic(2,"div",25),a.uc("click",(function(i){a.Rc(e);const o=t.$implicit;return a.yc(4).toggleVisibility(o,i)})),a.dc(3,"i",26),a.hc(),a.ic(4,"div",27),a.bd(5),a.Zc(6,x,2,0,"span",15),a.hc(),a.ic(7,"div",28),a.bd(8),a.hc(),a.ic(9,"div",29),a.dc(10,"i",30),a.hc(),a.hc(),a.hc()}if(2&e){const e=t.$implicit;a.Ob(3),a.Tb("data-property-visible",e.visible)("data-property-hidden",!e.visible),a.Ob(2),a.dd("",e.name," "),a.Ob(1),a.Ec("ngIf",e.required),a.Ob(2),a.cd(e.type)}}function E(e,t){if(1&e&&(a.ic(0,"div",3),a.Zc(1,D,11,7,"div",22),a.hc()),2&e){const e=a.yc(3);a.Ob(1),a.Ec("ngForOf",e.dataModel.properties)}}function w(e,t){1&e&&(a.ic(0,"div",31),a.bd(1," Model has no properties "),a.hc())}function I(e,t){if(1&e){const e=a.jc();a.ic(0,"div"),a.ic(1,"div",3),a.ic(2,"div",14),a.Zc(3,O,2,0,"div",15),a.ic(4,"div",16),a.uc("click",(function(){return a.Rc(e),a.yc(2).addNewProperty()})),a.bd(5,"Add Property"),a.hc(),a.ic(6,"div",17),a.uc("click",(function(){return a.Rc(e),a.yc(2).addNewProperty()})),a.dc(7,"i",18),a.hc(),a.hc(),a.hc(),a.Zc(8,E,2,1,"div",19),a.Zc(9,w,2,0,"div",20),a.hc()}if(2&e){const e=a.yc(2);a.Ob(3),a.Ec("ngIf",e.dataModel.hasProperties),a.Ob(5),a.Ec("ngIf",e.dataModel.hasProperties),a.Ob(1),a.Ec("ngIf",!e.dataModel.hasProperties)}}function k(e,t){if(1&e){const e=a.jc();a.ic(0,"div",32),a.ic(1,"model-property-form",33),a.uc("onDelete",(function(t){return a.Rc(e),a.yc(2).deleteProperty(t)}))("onCancel",(function(){return a.Rc(e),a.yc(2).cancelEditProperty()}))("onChange",(function(t){return a.Rc(e),a.yc(2).updateDataProperty(t)})),a.hc(),a.hc()}if(2&e){const e=a.yc(2);a.Ob(1),a.Ec("dataModelProperty",e.propertyToEdit)}}function N(e,t){if(1&e){const e=a.jc();a.ic(0,"div",5),a.ic(1,"div",6),a.bd(2),a.hc(),a.ic(3,"div",7),a.uc("click",(function(){return a.Rc(e),a.yc().launchConsole()})),a.dc(4,"i",8),a.hc(),a.ic(5,"div",9),a.uc("click",(function(){return a.Rc(e),a.yc().editModel()})),a.dc(6,"i",10),a.hc(),a.hc(),a.ic(7,"div",11),a.Zc(8,I,10,3,"div",12),a.Zc(9,k,2,1,"ng-template",null,13,a.ad),a.hc()}if(2&e){const e=a.Nc(10),t=a.yc();a.Ob(2),a.cd(t.dataModel.name),a.Ob(6),a.Ec("ngIf",!t.editProperty)("ngIfElse",e)}}let R=(()=>{class e{constructor(e){this.appStateService=e,this.onChange=new a.r,this.onDelete=new a.r,this.edit=!1,this.editProperty=!1,this.propertyToEdit=null}ngOnInit(){this.edit=!this.dataModel.name}ngOnDestroy(){}updateDataProperty(e){this.dataModel.updateProperty(this.propertyToEdit,e),this.saveModel(),this.cancelEditProperty()}cancelEditProperty(){this.propertyToEdit=null,this.editProperty=!1}editDataProperty(e){this.propertyToEdit=e,this.editProperty=!0}addNewProperty(){const e=c.newProperty();this.dataModel.addProperty(e),this.editDataProperty(e)}deleteProperty(e){this.dataModel.deleteProperty(e),this.saveModel(),this.cancelEditProperty()}updateDataModel(e){console.log("form values1:",e),this.dataModel.name=e.name,this.edit=!1,this.saveModel()}saveModel(){this.onChange.emit(this.dataModel)}editModel(){this.editProperty=!1,this.edit=!0}deleteModel(e){this.onDelete.emit(e)}cancelEditModel(e){this.edit=!1}launchConsole(){this.appStateService.openBluConsole({dataModel:this.dataModel})}toggleVisibility(e,t){e.visible=!e.visible,t.stopPropagation(),this.saveModel()}}return e.\u0275fac=function(t){return new(t||e)(a.cc(s.a))},e.\u0275cmp=a.Wb({type:e,selectors:[["data-model-object"]],inputs:{dataModel:"dataModel"},outputs:{onChange:"onChange",onDelete:"onDelete"},decls:4,vars:2,consts:[[1,"data-model"],["class","",4,"ngIf","ngIfElse"],["displayModel",""],[1,""],[3,"dataModel","onDelete","onCancel","onChange"],[1,"data-model-header","d-flex","align-items-center","border-bottom","p-2"],[1,"pr-2"],[1,"console","ml-auto","mr-2","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,"cursor-pointer",3,"click"],[1,"fas","fa-cog"],[1,"data-model-body"],[4,"ngIf","ngIfElse"],["dataProperties",""],[1,"d-flex","align-items-center","p-1"],["class","small text-muted",4,"ngIf"],[1,"pr-1","small","cursor-pointer","ml-auto","text-muted",3,"click"],[1,"pl-1","cursor-pointer",3,"click"],[1,"fa","fa","fa-plus-circle","small"],["class","",4,"ngIf"],["class","text-center p-4 text-muted small",4,"ngIf"],[1,"small","text-muted"],["class","p-1",4,"ngFor","ngForOf"],[1,"p-1"],[1,"d-flex","align-items-center","cursor-pointer",3,"click"],[1,"",3,"click"],[1,"far","fa-sm","fa-eye"],[1,"pl-2"],[1,"text-muted","small","ml-auto"],[1,"small","pl-3"],[1,"fa","fa-cog"],[1,"text-center","p-4","text-muted","small"],[1,"p-2"],[3,"dataModelProperty","onDelete","onCancel","onChange"]],template:function(e,t){if(1&e&&(a.ic(0,"div",0),a.Zc(1,C,2,1,"div",1),a.Zc(2,N,11,3,"ng-template",null,2,a.ad),a.hc()),2&e){const e=a.Nc(3);a.Ob(1),a.Ec("ngIf",t.edit||!t.dataModel.name)("ngIfElse",e)}},directives:[o.u,h,o.t,P],styles:[".data-model[_ngcontent-%COMP%]{width:300px;border-radius:3px;border:1px solid #f1f1f1}.data-model-body[_ngcontent-%COMP%]{padding:4px}.data-property-hidden[_ngcontent-%COMP%]{opacity:.2;color:#6c757d!important}.data-property-visible[_ngcontent-%COMP%]{opacity:.8;color:#6c757d!important}.console[_ngcontent-%COMP%]{background:#333;border-radius:3px;width:24px;height:16px;position:relative}.console[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#fbd38d!important;font-size:9px!important;position:absolute;top:2px;left:3px}"]}),e})();function q(e,t){if(1&e){const e=a.jc();a.ic(0,"div",4),a.ic(1,"div",5),a.ic(2,"data-model-object",6),a.uc("onDelete",(function(t){return a.Rc(e),a.yc().deleteModel(t)}))("onChange",(function(){return a.Rc(e),a.yc().saveDataModels()})),a.hc(),a.hc(),a.hc()}if(2&e){const e=t.$implicit;a.Ob(2),a.Ec("dataModel",e)}}const S=r.e.forChild([{path:"",component:(()=>{class e{constructor(e){this.dataModelService=e}ngOnInit(){this.dataModels=this.dataModelService.getDataModels()}ngOnDestroy(){}newDataModel(){this.dataModels.unshift(new c(null))}saveDataModels(){this.dataModelService.saveDataModels(this.dataModels)}deleteModel(e){this.dataModels.includes(e)&&(this.dataModels.splice(this.dataModels.indexOf(e),1),this.saveDataModels())}}return e.\u0275fac=function(t){return new(t||e)(a.cc(d))},e.\u0275cmp=a.Wb({type:e,selectors:[["data-model-list"]],decls:5,vars:1,consts:[["mat-button","",3,"click"],[1,"fa","fa-plus"],[1,"p-2"],["class","float-left p-2",4,"ngFor","ngForOf"],[1,"float-left","p-2"],[1,"shadow"],[3,"dataModel","onDelete","onChange"]],template:function(e,t){1&e&&(a.ic(0,"button",0),a.uc("click",(function(){return t.newDataModel()})),a.dc(1,"i",1),a.bd(2," New Data Model"),a.hc(),a.ic(3,"div",2),a.Zc(4,q,3,1,"div",3),a.hc()),2&e&&(a.Ob(4),a.Ec("ngForOf",t.dataModels))},directives:[l.a,o.t,R],styles:[""]}),e})()}]);let Z=(()=>{class e{}return e.\u0275mod=a.ac({type:e}),e.\u0275inj=a.Zb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,m.c,p.l,l.b,v.c,p.v,f.b]]}),e})(),F=(()=>{class e{}return e.\u0275mod=a.ac({type:e}),e.\u0275inj=a.Zb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,m.c,p.l,l.b,v.c,p.v,f.b]]}),e})(),j=(()=>{class e{}return e.\u0275mod=a.ac({type:e}),e.\u0275inj=a.Zb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,Z,m.c,p.v,l.b,F]]}),e})(),T=(()=>{class e{}return e.\u0275mod=a.ac({type:e}),e.\u0275inj=a.Zb({factory:function(t){return new(t||e)},providers:[],imports:[[o.c,S,j,l.b]]}),e})()}}]);