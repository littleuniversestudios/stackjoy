(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{HopJ:function(t,e,c){"use strict";c.d(e,"a",(function(){return B}));var i=c("fXoL"),o=c("0IaG"),n=c("3Pt+"),a=c("aSHc"),r=c("CPZX"),s=c("kmnG"),l=c("qFsG"),d=c("ofXK"),h=c("bTqV");function u(t,e){1&t&&(i.ic(0,"div",10),i.dc(1,"i",11),i.bd(2," Folder Created"),i.hc())}function m(t,e){if(1&t){const t=i.jc();i.ic(0,"div",12),i.ic(1,"button",13),i.bd(2,"Cancel"),i.hc(),i.ic(3,"button",14),i.uc("click",(function(){return i.Rc(t),i.yc().create()})),i.bd(4,"Create"),i.hc(),i.hc()}if(2&t){const t=i.yc();i.Ob(3),i.Ec("disabled",!t.form.valid)}}function f(t,e){if(1&t){const t=i.jc();i.ic(0,"div",12),i.ic(1,"button",15),i.uc("click",(function(){return i.Rc(t),i.yc().close()})),i.bd(2,"Close"),i.hc(),i.hc()}}let g=(()=>{class t{constructor(t,e,c,i){this.fb=t,this.codebaseService=e,this.data=c,this.dialogRef=i,this.actionState=a.a,this.currentState=a.a.IDLE,this.form=this.fb.group({newFolderName:["",[n.x.required]]})}ngOnInit(){this.form.valueChanges.subscribe(t=>{console.log("conflictForm data",t)})}ngOnDestroy(){}create(){this.currentState=a.a.PENDING,this.codebaseService.createFolder(this.data.destination,this.form.get("newFolderName").value).subscribe(t=>{this.currentState=a.a.SUCCESS},t=>{console.log("",t),this.currentState=a.a.FAILED,this.form.controls.newFolderName.setErrors({incorrect:!0}),this.errorMessage=t.error.code})}close(){this.dialogRef.close({created:!0})}}return t.\u0275fac=function(e){return new(e||t)(i.cc(n.f),i.cc(r.a),i.cc(o.a),i.cc(o.g))},t.\u0275cmp=i.Wb({type:t,selectors:[["new-folder-dialog"]],decls:16,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"p-1"],[1,"p-1","pt-2","pb-2"],[3,"formGroup"],[1,"mat-form-field"],["matInput","","placeholder","New Folder Name:","formControlName","newFolderName"],["class","p-2 text-center",4,"ngIf"],["mat-dialog-actions",""],["class","text-right",4,"ngIf"],[1,"p-2","text-center"],[1,"fa","fa-check","text-success"],[1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(i.ic(0,"h1",0),i.bd(1,"Create Folder"),i.hc(),i.ic(2,"div",1),i.ic(3,"div",2),i.bd(4,"Destination:"),i.hc(),i.ic(5,"div",3),i.bd(6),i.hc(),i.ic(7,"form",4),i.ic(8,"mat-form-field",5),i.dc(9,"input",6),i.ic(10,"mat-error"),i.bd(11),i.hc(),i.hc(),i.hc(),i.Zc(12,u,3,0,"div",7),i.hc(),i.ic(13,"div",8),i.Zc(14,m,5,1,"div",9),i.Zc(15,f,3,0,"div",9),i.hc()),2&t&&(i.Ob(6),i.cd(e.data.destination),i.Ob(1),i.Ec("formGroup",e.form),i.Ob(4),i.cd(e.errorMessage),i.Ob(1),i.Ec("ngIf",e.currentState===e.actionState.SUCCESS),i.Ob(2),i.Ec("ngIf",e.currentState!==e.actionState.SUCCESS),i.Ob(1),i.Ec("ngIf",e.currentState===e.actionState.SUCCESS))},directives:[o.h,o.e,n.z,n.q,n.k,s.c,l.b,n.c,n.p,n.i,s.b,d.u,o.c,h.a,o.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();function p(t,e){if(1&t&&(i.ic(0,"li",10),i.bd(1),i.hc()),2&t){const t=e.$implicit;i.Ob(1),i.cd(t)}}let b=(()=>{class t{constructor(t,e,c){this.codebaseService=t,this.data=e,this.dialogRef=c,this.ignoreList=[]}ngOnInit(){this.ignoreList=this.data.list}ngOnDestroy(){}addToList(){this.codebaseService.addToIgnoreList(this.ignoreList),this.dialogRef.close({added:!0})}}return t.\u0275fac=function(e){return new(e||t)(i.cc(r.a),i.cc(o.a),i.cc(o.g))},t.\u0275cmp=i.Wb({type:t,selectors:[["ignore-list-dialog"]],decls:14,vars:1,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,""],[1,"p-1"],[1,"p-2"],[1,"list-unstyled"],["class","text-muted text-small",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"click"],[1,"text-muted","text-small"]],template:function(t,e){1&t&&(i.ic(0,"h1",0),i.bd(1,"Ignore List"),i.hc(),i.ic(2,"div",1),i.ic(3,"div",2),i.ic(4,"div",3),i.bd(5,"Add following files/folders to the ignore list:"),i.hc(),i.ic(6,"div",4),i.ic(7,"ul",5),i.Zc(8,p,2,1,"li",6),i.hc(),i.hc(),i.hc(),i.hc(),i.ic(9,"div",7),i.ic(10,"button",8),i.bd(11,"Cancel"),i.hc(),i.ic(12,"button",9),i.uc("click",(function(){return e.addToList()})),i.bd(13,"Add"),i.hc(),i.hc()),2&t&&(i.Ob(8),i.Ec("ngForOf",e.ignoreList))},directives:[o.h,o.e,d.t,o.c,h.a,o.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var v=c("/hV/"),S=c("xm+p");function C(t,e){if(1&t&&(i.ic(0,"li",14),i.bd(1),i.hc()),2&t){const t=e.$implicit;i.Ob(1),i.cd(t)}}function O(t,e){if(1&t&&(i.ic(0,"div"),i.ic(1,"div",10),i.bd(2,"Seed contents:"),i.hc(),i.ic(3,"div",11),i.ic(4,"ul",12),i.Zc(5,C,2,1,"li",13),i.hc(),i.hc(),i.hc()),2&t){const t=i.yc();i.Ob(5),i.Ec("ngForOf",t.fileList)}}function N(t,e){1&t&&(i.ic(0,"div",15),i.dc(1,"i",16),i.bd(2," Seed Created"),i.hc())}function F(t,e){if(1&t){const t=i.jc();i.ic(0,"div",17),i.ic(1,"button",18),i.bd(2,"Cancel"),i.hc(),i.ic(3,"button",19),i.uc("click",(function(){return i.Rc(t),i.yc().create()})),i.bd(4,"Create"),i.hc(),i.hc()}if(2&t){const t=i.yc();i.Ob(3),i.Ec("disabled",!t.templateForm.valid)}}function y(t,e){if(1&t){const t=i.jc();i.ic(0,"div",17),i.ic(1,"button",18),i.bd(2,"Done"),i.hc(),i.ic(3,"button",20),i.uc("click",(function(){return i.Rc(t),i.yc().goToTemplate()})),i.bd(4,"Go to seed"),i.hc(),i.hc()}}let E=(()=>{class t{constructor(t,e,c,i,o){this.fb=t,this.data=e,this.bluService=c,this.navigationService=i,this.dialogRef=o,this.fileList=[],this.actionState=a.a,this.currentState=a.a.IDLE,this.templateForm=this.fb.group({seedName:["",[n.x.required]]})}ngOnInit(){this.fileList=this.data.list}ngOnDestroy(){}create(){const t={collectionName:"seeds",templateName:this.templateForm.get("seedName").value,files:this.fileList,isSeed:!0};this.currentState=a.a.PENDING,this.bluService.createTemplate(t).subscribe(t=>{this.currentState=a.a.SUCCESS,this.newTemplate=t},t=>{console.log("",t),this.currentState=a.a.FAILED,this.templateForm.controls.seedName.setErrors({incorrect:!0}),this.errorMessage=t.error.message})}goToTemplate(){this.dialogRef.close({created:!0}),this.navigationService.navigateTo(["blu","template","view",`${this.newTemplate.collectionName}.${this.newTemplate.templateName}`])}}return t.\u0275fac=function(e){return new(e||t)(i.cc(n.f),i.cc(o.a),i.cc(v.a),i.cc(S.a),i.cc(o.g))},t.\u0275cmp=i.Wb({type:t,selectors:[["create-seed-dialog"]],decls:14,vars:6,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,""],[3,"formGroup"],[1,"mat-form-field"],["matInput","","placeholder","Seed Name","formControlName","seedName"],[4,"ngIf"],["class","p-2 text-center",4,"ngIf"],["mat-dialog-actions","",1,"text-right"],["class","text-right",4,"ngIf"],[1,"p-1"],[1,"p-2"],[1,"list-unstyled"],["class","text-muted text-small",4,"ngFor","ngForOf"],[1,"text-muted","text-small"],[1,"p-2","text-center"],[1,"fa","fa-check","text-success"],[1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(i.ic(0,"h1",0),i.bd(1,"Create Seed"),i.hc(),i.ic(2,"div",1),i.ic(3,"div",2),i.ic(4,"form",3),i.ic(5,"mat-form-field",4),i.dc(6,"input",5),i.ic(7,"mat-error"),i.bd(8),i.hc(),i.hc(),i.hc(),i.Zc(9,O,6,1,"div",6),i.Zc(10,N,3,0,"div",7),i.hc(),i.hc(),i.ic(11,"div",8),i.Zc(12,F,5,1,"div",9),i.Zc(13,y,5,0,"div",9),i.hc()),2&t&&(i.Ob(4),i.Ec("formGroup",e.templateForm),i.Ob(4),i.cd(e.errorMessage),i.Ob(1),i.Ec("ngIf",e.fileList.length>0),i.Ob(1),i.Ec("ngIf",e.currentState===e.actionState.SUCCESS),i.Ob(2),i.Ec("ngIf",e.currentState!==e.actionState.SUCCESS),i.Ob(1),i.Ec("ngIf",e.currentState===e.actionState.SUCCESS))},directives:[o.h,o.e,n.z,n.q,n.k,s.c,l.b,n.c,n.p,n.i,s.b,d.u,o.c,d.t,h.a,o.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var I=c("QibW");function x(t,e){if(1&t&&(i.ic(0,"li",10),i.bd(1),i.hc()),2&t){const t=e.$implicit;i.Ob(1),i.cd(t)}}function T(t,e){if(1&t&&(i.ic(0,"li",10),i.bd(1),i.hc()),2&t){const t=e.$implicit;i.Ob(1),i.cd(t)}}let w=(()=>{class t{constructor(t,e,c,i){this.fb=t,this.codebaseService=e,this.data=c,this.dialogRef=i,this.activeList=[],this.selectedList=[],this.form=this.fb.group({radioGroup:["",[n.x.required]]})}ngOnInit(){this.activeList=[this.data.activeNode.data.path],this.selectedList=this.data.selectedNodes.map(t=>t.data.path),this.form.valueChanges.subscribe(t=>this.selectList("active"===t.radioGroup?this.activeList:this.selectedList))}ngOnDestroy(){}selectList(t){this.dialogRef.close({list:t})}}return t.\u0275fac=function(e){return new(e||t)(i.cc(n.f),i.cc(r.a),i.cc(o.a),i.cc(o.g))},t.\u0275cmp=i.Wb({type:t,selectors:[["file-selection-conflict-dialog"]],decls:18,vars:5,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"formGroup"],["aria-label","Select an option","formControlName","radioGroup",1,"mat-radio-group"],[1,"mat-radio-button",3,"value"],[1,"p-2"],[1,"list-unstyled"],["class","text-muted text-small",4,"ngFor","ngForOf"],["mat-dialog-actions","",1,"text-right"],["mat-button","","mat-dialog-close",""],[1,"text-muted","text-small"]],template:function(t,e){1&t&&(i.ic(0,"h1",0),i.bd(1,"Files Selection Conflict"),i.hc(),i.ic(2,"div",1),i.ic(3,"form",2),i.ic(4,"mat-radio-group",3),i.ic(5,"mat-radio-button",4),i.bd(6,"Use active File/Folder"),i.hc(),i.ic(7,"div",5),i.ic(8,"ul",6),i.Zc(9,x,2,1,"li",7),i.hc(),i.hc(),i.ic(10,"mat-radio-button",4),i.bd(11,"Use selected File/Folder(s)"),i.hc(),i.ic(12,"div",5),i.ic(13,"ul",6),i.Zc(14,T,2,1,"li",7),i.hc(),i.hc(),i.hc(),i.hc(),i.hc(),i.ic(15,"div",8),i.ic(16,"button",9),i.bd(17,"Cancel"),i.hc(),i.hc()),2&t&&(i.Ob(3),i.Ec("formGroup",e.form),i.Ob(2),i.Ec("value","active"),i.Ob(4),i.Ec("ngForOf",e.activeList),i.Ob(1),i.Ec("value","selected"),i.Ob(4),i.Ec("ngForOf",e.selectedList))},directives:[o.h,o.e,n.z,n.q,n.k,I.b,n.p,n.i,I.a,d.t,o.c,h.a,o.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var L=c("LRne"),P=c("EY2u"),k=c("eIep"),D=c("quSY");let M=(()=>{class t{constructor(){}commonPrefix(t){const e=t.concat().sort(),c=e[0],i=e[e.length-1],o=c.length;let n=0;for(;n<o&&c.charAt(n)===i.charAt(n);)n++;return c.substring(0,n)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var R=c("d3UM"),G=c("FKr1");function _(t,e){if(1&t&&(i.ic(0,"mat-option",7),i.bd(1),i.hc()),2&t){const t=e.$implicit;i.Ec("value",t.name),i.Ob(1),i.cd(t.name)}}function Z(t,e){1&t&&(i.ic(0,"mat-form-field",4),i.dc(1,"input",15),i.hc())}function U(t,e){if(1&t&&(i.ic(0,"li",20),i.bd(1),i.hc()),2&t){const t=e.$implicit;i.Ob(1),i.cd(t)}}function j(t,e){if(1&t&&(i.ic(0,"div",2),i.ic(1,"div",16),i.bd(2,"Template contents:"),i.hc(),i.ic(3,"div",17),i.ic(4,"ul",18),i.Zc(5,U,2,1,"li",19),i.hc(),i.hc(),i.hc()),2&t){const t=i.yc();i.Ob(5),i.Ec("ngForOf",t.fileList)}}function q(t,e){1&t&&(i.ic(0,"div",21),i.dc(1,"i",22),i.bd(2," Template Created"),i.hc())}function A(t,e){if(1&t){const t=i.jc();i.ic(0,"div",23),i.ic(1,"button",24),i.bd(2,"Cancel"),i.hc(),i.ic(3,"button",25),i.uc("click",(function(){return i.Rc(t),i.yc().create()})),i.bd(4,"Create"),i.hc(),i.hc()}if(2&t){const t=i.yc();i.Ob(3),i.Ec("disabled",!t.templateForm.valid)}}function $(t,e){if(1&t){const t=i.jc();i.ic(0,"div",23),i.ic(1,"button",24),i.bd(2,"Done"),i.hc(),i.ic(3,"button",26),i.uc("click",(function(){return i.Rc(t),i.yc().goToTemplate()})),i.bd(4,"Go to template"),i.hc(),i.hc()}}let z=(()=>{class t{constructor(t,e,c,i,o,r){this.fb=t,this.utilService=e,this.bluService=c,this.navigationService=i,this.data=o,this.dialogRef=r,this.fileList=[],this.collections=[],this.actionState=a.a,this.currentState=a.a.IDLE,this.subs=new D.a,this.templateForm=this.fb.group({templateName:["",[n.x.required]],collection:["",[n.x.required]],newCollectionName:[""]})}ngOnInit(){this.bluService.getCollections().subscribe(t=>this.collections=t),this.fileList=this.data.list,this.subs.add(this.templateForm.valueChanges.subscribe(t=>{this.createNewCollection="create-new-collection"===t.collection,this.templateForm.get("newCollectionName").setValidators(this.createNewCollection?[n.x.required]:[])}))}ngOnDestroy(){this.subs.unsubscribe()}create(){const t={collectionName:this.createNewCollection?this.templateForm.get("newCollectionName").value:this.templateForm.get("collection").value,templateName:this.templateForm.get("templateName").value,files:this.fileList};this.currentState=a.a.PENDING,this.bluService.createTemplate(t).subscribe(t=>{this.currentState=a.a.SUCCESS,this.newTemplate=t},t=>{console.log("",t),this.currentState=a.a.FAILED,this.templateForm.controls.templateName.setErrors({incorrect:!0}),this.errorMessage=t.error.message})}goToTemplate(){this.dialogRef.close({created:!0}),this.navigationService.navigateTo(["blu","template","view",`${this.newTemplate.collectionName}.${this.newTemplate.templateName}`])}}return t.\u0275fac=function(e){return new(e||t)(i.cc(n.f),i.cc(M),i.cc(v.a),i.cc(S.a),i.cc(o.a),i.cc(o.g))},t.\u0275cmp=i.Wb({type:t,selectors:[["create-template-dialog"]],decls:23,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,""],[3,"formGroup"],[1,"mat-form-field"],["matInput","","placeholder","New Template Name","formControlName","templateName"],["formControlName","collection"],[3,"value"],[1,"fa","fa-plus-circle"],[3,"value",4,"ngFor","ngForOf"],["class","mat-form-field",4,"ngIf"],["class","",4,"ngIf"],["class","p-2 text-center",4,"ngIf"],["mat-dialog-actions","",1,"text-right"],["class","text-right",4,"ngIf"],["matInput","","placeholder","New Collection Name","formControlName","newCollectionName"],[1,"p-1"],[1,"p-2"],[1,"list-unstyled"],["class","text-muted text-small",4,"ngFor","ngForOf"],[1,"text-muted","text-small"],[1,"p-2","text-center"],[1,"fa","fa-check","text-success"],[1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"]],template:function(t,e){1&t&&(i.ic(0,"h1",0),i.bd(1,"Create Template"),i.hc(),i.ic(2,"div",1),i.ic(3,"div",2),i.ic(4,"form",3),i.ic(5,"mat-form-field",4),i.dc(6,"input",5),i.ic(7,"mat-error"),i.bd(8),i.hc(),i.hc(),i.ic(9,"mat-form-field",4),i.ic(10,"mat-label"),i.bd(11,"Add to Collection:"),i.hc(),i.ic(12,"mat-select",6),i.ic(13,"mat-option",7),i.dc(14,"i",8),i.bd(15," Create New Collection"),i.hc(),i.Zc(16,_,2,2,"mat-option",9),i.hc(),i.hc(),i.Zc(17,Z,2,0,"mat-form-field",10),i.hc(),i.Zc(18,j,6,1,"div",11),i.hc(),i.Zc(19,q,3,0,"div",12),i.hc(),i.ic(20,"div",13),i.Zc(21,A,5,1,"div",14),i.Zc(22,$,5,0,"div",14),i.hc()),2&t&&(i.Ob(4),i.Ec("formGroup",e.templateForm),i.Ob(4),i.cd(e.errorMessage),i.Ob(5),i.Ec("value","create-new-collection"),i.Ob(3),i.Ec("ngForOf",e.collections),i.Ob(1),i.Ec("ngIf",e.createNewCollection),i.Ob(1),i.Ec("ngIf",e.fileList.length>0),i.Ob(1),i.Ec("ngIf",e.currentState===e.actionState.SUCCESS),i.Ob(2),i.Ec("ngIf",e.currentState!==e.actionState.SUCCESS),i.Ob(1),i.Ec("ngIf",e.currentState===e.actionState.SUCCESS))},directives:[o.h,o.e,n.z,n.q,n.k,s.c,l.b,n.c,n.p,n.i,s.b,s.g,R.a,G.i,d.t,d.u,o.c,h.a,o.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var W=c("yzkU"),Y=c("STbY"),X=c("NFeN"),H=c("rDsv");function J(t,e){if(1&t){const t=i.jc();i.gc(0),i.ic(1,"li",27),i.uc("click",(function(){i.Rc(t);const c=e.index;return i.yc(2).getRootPath(c+1)})),i.ic(2,"span",28),i.bd(3),i.hc(),i.hc(),i.ic(4,"li"),i.bd(5,"/"),i.hc(),i.fc()}if(2&t){const t=e.$implicit;i.Ob(3),i.cd(t)}}function Q(t,e){if(1&t){const t=i.jc();i.ic(0,"div",29),i.uc("click",(function(){i.Rc(t),i.yc();const e=i.Nc(13),c=i.Nc(48);return i.yc().clearSearch(e,c.treeModel)})),i.ic(1,"span",30),i.dc(2,"span",31),i.hc(),i.hc()}}function V(t,e){if(1&t){const t=i.jc();i.gc(0),i.ic(1,"div",2),i.ic(2,"div",3),i.ic(3,"div",4),i.ic(4,"ul"),i.ic(5,"li"),i.ic(6,"button",5),i.ic(7,"i",6),i.uc("click",(function(){return i.Rc(t),i.yc().goToCodebaseConfig()})),i.hc(),i.hc(),i.hc(),i.Zc(8,J,6,1,"ng-container",7),i.hc(),i.hc(),i.hc(),i.hc(),i.ic(9,"div",2),i.ic(10,"div",3),i.ic(11,"div",8),i.ic(12,"input",9,10),i.uc("keyup",(function(){i.Rc(t);const e=i.Nc(13),c=i.Nc(48);return i.yc().filterFn(e.value,c.treeModel)})),i.hc(),i.Zc(14,Q,3,0,"div",11),i.hc(),i.ic(15,"button",12),i.ic(16,"mat-icon"),i.bd(17,"more_vert"),i.hc(),i.hc(),i.ic(18,"mat-menu",13,14),i.ic(20,"button",15),i.uc("click",(function(){return i.Rc(t),i.yc().convertToTemplate()})),i.dc(21,"i",16),i.bd(22," Convert to Template"),i.hc(),i.ic(23,"button",15),i.uc("click",(function(){return i.Rc(t),i.yc().createSeed()})),i.dc(24,"i",17),i.bd(25," Create a Seed"),i.hc(),i.hc(),i.hc(),i.hc(),i.ic(26,"div",2),i.ic(27,"div",3),i.ic(28,"div",18),i.ic(29,"button",19),i.uc("click",(function(){return i.Rc(t),i.yc().generateTemplate()})),i.dc(30,"i",20),i.bd(31," Generate Template"),i.hc(),i.ic(32,"button",19),i.uc("click",(function(){return i.Rc(t),i.yc().createNewFolder()})),i.dc(33,"i",21),i.bd(34," New Folder"),i.hc(),i.ic(35,"button",22),i.uc("click",(function(){return i.Rc(t),i.yc().addToIgnoreList()})),i.dc(36,"i",23),i.bd(37," Add To Ignore List"),i.hc(),i.ic(38,"button",22),i.uc("click",(function(){return i.Rc(t),i.yc().convertToTemplate()})),i.dc(39,"i",16),i.bd(40," Convert to Template"),i.hc(),i.ic(41,"button",22),i.uc("click",(function(){return i.Rc(t),i.yc().createSeed()})),i.dc(42,"i",17),i.bd(43," Create a Seed"),i.hc(),i.hc(),i.hc(),i.hc(),i.ic(44,"div",2),i.ic(45,"div",3),i.ic(46,"div",24),i.ic(47,"tree-root",25,26),i.uc("focus",(function(e){return i.Rc(t),i.yc().selectFolder(e)}))("stateChange",(function(e){return i.Rc(t),i.yc().state=e}))("stateChange",(function(e){i.Rc(t);const c=i.Nc(48);return i.yc().checkState(e,c)})),i.hc(),i.hc(),i.hc(),i.hc(),i.fc()}if(2&t){const t=i.Nc(13),e=i.Nc(19),c=i.yc();i.Ob(8),i.Ec("ngForOf",c.splitPath),i.Ob(6),i.Ec("ngIf",t.value),i.Ob(1),i.Ec("matMenuTriggerFor",e),i.Ob(20),i.Ec("disabled",!c.anyFilesSelected()),i.Ob(3),i.Ec("disabled",!c.anyFilesSelected()),i.Ob(3),i.Ec("disabled",!c.anyFilesSelected()),i.Ob(6),i.Ec("nodes",c.root.children)("options",c.options)("state",c.state)}}let B=(()=>{class t{constructor(t,e,c,o){this.codebaseService=t,this.directoryTreeService=e,this.navigationService=c,this.dialog=o,this.state={},this.foldersOnly=!1,this.onFocus=new i.r,this.splitPath=[],this.selectedNodes=[]}ngOnInit(){this.options=Object.assign({},{actionMapping:{mouse:{dblClick:(t,e,c)=>{this.directoryTreeService.isDirectory(e)&&this.getPath(e.data.path)}}}},this.options),this.root?this.init():this.codebaseService.getRootTree(this.codebaseService.getIgnoreList(),this.foldersOnly).subscribe(t=>{this.root=t,this.init()})}init(){this.rootPath=this.root.path,this.splitPath=this.rootPath.split("/")}ngOnDestroy(){}selectFolder(t){this.onFocus.emit(t)}getRootPath(t){const e=this.splitPath.slice(0,t).join("/");this.getPath(e)}getPath(t){this.codebaseService.getTree(t,this.codebaseService.getIgnoreList()).subscribe(t=>{this.root=t,this.init()})}filterFn(t,e){e.filterNodes(e=>this.directoryTreeService.fuzzysearch(t,e.data.name))}clearSearch(t,e){t.value="",this.filterFn("",e),e.collapseAll()}goToCodebaseConfig(){this.navigationService.navigateTo(["codebase","config"])}checkState(t,e){this.selectedNodes=Object.entries(this.state.selectedLeafNodeIds).filter(([t,e])=>!0===e).map(t=>e.treeModel.getNodeById(t[0])),this.activeNode=Object.entries(this.state.activeNodeIds).filter(([t,e])=>!0===e).map(t=>e.treeModel.getNodeById(t[0]))[0]}anyFilesSelected(){return!!this.activeNode||this.selectedNodes.length>0}getSelectedFileList(){return this.directoryTreeService.hasFileSelectionConflict(this.activeNode,this.selectedNodes)?this.openFileSelectionConflictDialog().afterClosed().pipe(Object(k.a)(t=>t.list?Object(L.a)(t.list):P.a)):Object(L.a)(this.activeNode?[this.activeNode.data.path]:this.selectedNodes.map(t=>t.data.path))}generateTemplate(){const t=this.directoryTreeService.isDirectory(this.activeNode)?this.directoryTreeService.getNodePath(this.activeNode):this.rootPath;this.navigationService.navigateTo(["blu","generate"],{queryParams:{destination:t}})}convertToTemplate(){this.getSelectedFileList().pipe(Object(k.a)(t=>this.openConvertToTemplateDialog(t).afterClosed())).subscribe(t=>console.log(">>>>>>>",t))}createSeed(){this.getSelectedFileList().pipe(Object(k.a)(t=>this.openCreateSeedDialog(t).afterClosed())).subscribe(t=>console.log(">>>>>>>",t))}addToIgnoreList(){this.getSelectedFileList().pipe(Object(k.a)(t=>this.openIgnoreListDialog(t).afterClosed())).subscribe(t=>t.added?this.getPath(this.rootPath):null)}createNewFolder(){this.openNewFolderDialog().afterClosed().subscribe(t=>t.created?this.getPath(this.rootPath):null)}openNewFolderDialog(){return this.dialog.open(g,{data:{destination:this.activeNode?this.activeNode.data.path:this.rootPath},position:{top:"100px"},autoFocus:!0})}openIgnoreListDialog(t){return this.dialog.open(b,{data:{list:t},position:{top:"100px"},autoFocus:!0})}openCreateSeedDialog(t){return this.dialog.open(E,{data:{list:t},position:{top:"100px"},autoFocus:!0})}openConvertToTemplateDialog(t){return this.dialog.open(z,{data:{list:t},position:{top:"100px"},autoFocus:!0})}openFileSelectionConflictDialog(){return this.dialog.open(w,{data:{activeNode:this.activeNode,selectedNodes:this.selectedNodes},position:{top:"100px"},autoFocus:!0})}}return t.\u0275fac=function(e){return new(e||t)(i.cc(r.a),i.cc(W.a),i.cc(S.a),i.cc(o.b))},t.\u0275cmp=i.Wb({type:t,selectors:[["directory-tree"]],inputs:{root:"root",state:"state",options:"options",foldersOnly:"foldersOnly"},outputs:{onFocus:"onFocus"},decls:2,vars:1,consts:[[1,"p-2"],[4,"ngIf"],[1,"row"],[1,"col"],[1,"pl-2","cwd","text-small"],["mat-button","","mat-icon-button",""],[1,"fa","fa-cog",3,"click"],[4,"ngFor","ngForOf"],[1,"input-group","pt-1"],["id","filter3","placeholder","Search...",1,"form-control",3,"keyup"],["filter3",""],["class","input-group-append cursor-pointer",3,"click",4,"ngIf"],["mat-icon-button","",3,"matMenuTriggerFor"],["xPosition","before",1,"mt-1"],["appMenu","matMenu"],["mat-menu-item","",3,"click"],[1,"fa","fa-code"],[1,"fa","fa-seedling"],[1,"pt-1"],["mat-button","",3,"click"],[1,"fa","fa-terminal"],[1,"fa","fa-folder-plus"],["mat-button","",3,"disabled","click"],[1,"fa","fa-plus-circle"],[1,"pt-1","pl-2"],[3,"nodes","options","state","focus","stateChange"],["tree",""],[3,"click"],[1,"text-muted","cursor-pointer"],[1,"input-group-append","cursor-pointer",3,"click"],[1,"input-group-text","bg-white"],[1,"fa","fa-times"]],template:function(t,e){1&t&&(i.ic(0,"div",0),i.Zc(1,V,49,9,"ng-container",1),i.hc()),2&t&&(i.Ob(1),i.Ec("ngIf",e.root))},directives:[d.u,h.a,d.t,Y.c,X.a,Y.d,Y.a,H.a],styles:[".cwd[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{margin:0!important;-webkit-padding-start:0!important;padding-inline-start:0!important}.cwd[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:first-child{margin:0}.cwd[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] > li[_ngcontent-%COMP%]:last-child{display:none}.cwd[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{display:inline-block;zoom:1;*display:inline;margin:0 2px}"]}),t})()},Or6o:function(t,e,c){"use strict";c.d(e,"a",(function(){return o}));var i=c("fXoL");let o=(()=>{class t{constructor(){}getFolderName(t){return t.data.name}getPath(t,e=""){const c=t.data.name?`${t.data.name}/${e}`:e;return t.parent?this.getPath(t.parent,c):c}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=i.Yb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},aSHc:function(t,e,c){"use strict";c.d(e,"a",(function(){return i}));var i=function(t){return t[t.FAILED=0]="FAILED",t[t.SUCCESS=1]="SUCCESS",t[t.PENDING=2]="PENDING",t[t.DONE=3]="DONE",t[t.INCOMPLETE=4]="INCOMPLETE",t[t.DELETING=5]="DELETING",t[t.EDITING=6]="EDITING",t[t.ACQUIRING=7]="ACQUIRING",t[t.IDLE=8]="IDLE",t}({})}}]);