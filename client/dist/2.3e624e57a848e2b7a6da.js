(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"+C0i":function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("fXoL");let r=(()=>{class t{constructor(){this.variableNameSuggestions=["destination","f","links"].sort()}disposeCompletionProvider(){this.completionProvider&&this.completionProvider.dispose()}registerCompletionProvider(t,e,i="bluLanguage"){this.disposeCompletionProvider(),this.completionProvider=t.languages.registerCompletionItemProvider(i,{provideCompletionItems:(i,n,r,o)=>{let s;const c=i.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:1/0}),a=(i.getValueInRange({startLineNumber:n.lineNumber,startColumn:1,endLineNumber:n.lineNumber,endColumn:n.column}),/\((.*?)\)/g),d=this.isInside(/\[blu (.*?)]/g,c,n),l=this.isInside(/\^\^(.*?)\^\^/g,c,n);return null!==d?s=null!==this.isInside(a,c,n)?this.contextSuggestions(t,e):this.bluBlockSuggestions(t):null!==l&&(s=this.isAfter(":",l,n)?this.contextFunctions(t,e,!0):this.contextSuggestions(t,e)),s=null!=s?s:this.getDefaultSuggestions(t),{suggestions:s}}})}isAfter(t,e,i){return e.indexOf(t)>=0}isInside(t,e,i){let n,r=!1,o=null;for(;(n=t.exec(e))&&!r;)n.index<i.column&&i.column<=t.lastIndex&&(o=n[1],r=!0);return o}contextSuggestions(t,e,i=!1){return[...this.contextInputs(t,e),...this.contextFunctions(t,e,i)]}contextInputs(t,e){return Object.keys(e.inputs).map(e=>({label:e,kind:t.languages.CompletionItemKind.Variable,insertText:e,sortText:"a"+e}))}contextFunctions(t,e,i=!1){let n=[];return n=e.functions.map(i?e=>({label:""+e.name,kind:t.languages.CompletionItemKind.Function,insertText:""+e.name,sortText:"b"+e.name}):e=>({label:e.name+"()",kind:t.languages.CompletionItemKind.Function,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:e.name+"(${1})",sortText:"b"+e.name})),n}bluBlockSuggestions(t){return[{label:"if",documentation:"Add an if statement",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"if(${1})",sortText:"b",command:{id:"editor.action.triggerSuggest"}},{label:"elseIf",documentation:"Add an elseIf statement",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"elseIf(${1})",sortText:"c",command:{id:"editor.action.triggerSuggest"}},{label:"forEach",documentation:"Add a forEach statement",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"forEach(${2} in ${1})",sortText:"a",command:{id:"editor.action.triggerSuggest"}},{label:"forEachIndex",documentation:"Add a forEach statement with a verbose index identifier",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"forEach(${2} in ${1});i=index",sortText:"h",command:{id:"editor.action.triggerSuggest"}},{label:"else",documentation:"Add an else statement",kind:t.languages.CompletionItemKind.Text,insertText:"else",sortText:"d"},{label:"switch",documentation:"Add a switch statement",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"switch(${1})",sortText:"e",command:{id:"editor.action.triggerSuggest"}},{label:"switchCase",documentation:"Add a switchCase statement",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"switchCase ${1}",sortText:"f",command:{id:"editor.action.triggerSuggest"}},{label:"switchDefault",documentation:"Add an switchDefault statement",kind:t.languages.CompletionItemKind.Text,insertText:"switchDefault",sortText:"g"}]}getDefaultSuggestions(t){return[{label:"[blu][/blu]",documentation:"Add a [blu] [/blu] block",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"[blu ${1}]$0[/blu]",sortText:"b",command:{id:"editor.action.triggerSuggest"}},{label:"^^expression^^",documentation:"Add a ^^  ^^ expression",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^${1}^^",sortText:"a",command:{id:"editor.action.triggerSuggest"}},{label:"transformation",documentation:"Add a transformation ^^value:function^^ expression",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^${1}:${2}^^",sortText:"c",command:{id:"editor.action.triggerSuggest"}},{label:"^^!comment!^^",documentation:"Add a ^^!  !^^ comment",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^! ${1} !^^",sortText:"d"},{label:"expression (escaped)",documentation:"Add a ^^!  !^^ comment",kind:t.languages.CompletionItemKind.Snippet,insertTextRules:t.languages.CompletionItemInsertTextRule.InsertAsSnippet,insertText:"^^~ ${1} ~^^",sortText:"e"}]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"3EJP":function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("fXoL"),r=i("GV7L"),o=i("0IaG"),s=i("quSY"),c=i("+C0i"),a=i("tlDy"),d=i("ofXK"),l=i("1jDz"),u=i("bTqV");function b(t,e){if(1&t&&(n.Rb(0,"div",10),n.Mb(1,"i",11),n.Ec(2),n.Qb()),2&t){const t=e.$implicit;n.Ab(2),n.Gc(" ",null!=t.error.data&&null!=t.error.data.syntaxError&&t.error.data.syntaxError.error?null==t.error.data||null==t.error.data.syntaxError?null:t.error.data.syntaxError.error:null==t.error.data?null:t.error.data.message," ")}}function m(t,e){if(1&t&&(n.Rb(0,"div",8),n.Cc(1,b,3,1,"div",9),n.Qb()),2&t){const t=n.dc();n.Ab(1),n.jc("ngForOf",t.errors)}}let f=(()=>{class t{constructor(t,e,i,n,r){this.data=t,this.bluEditorService=e,this.cdr=i,this.itemService=n,this.dialogRef=r,this.subs=new s.a,this.editorOptions={theme:"bluTheme",language:"bluLanguage",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1}}ngOnInit(){var t;this.errors=null!==(t=this.data.errors)&&void 0!==t?t:[],this.item=this.data.item,this.text=this.item.config.filenames,this.renderContext=this.data.renderContext,this.renderContext.inputs.basename="",this.renderContext.inputs.extname="",this.renderContext.inputs.filename=""}ngOnDestroy(){this.subs.unsubscribe(),this.bluEditorService.disposeCompletionProvider()}close(t){this.dialogRef.close({updated:t})}onEditorInit(t){this.editorModel=t,this.setContext()}setContext(){this.editorModel&&this.bluEditorService.registerCompletionProvider(monaco,this.renderContext)}save(){var t;this.editorModel.getValue(),this.item.config.filenames=(null!==(t=this.editorModel.getValue())&&void 0!==t?t:"").trim(),this.itemService.updateConfig(this.item.id,this.item.config).subscribe(t=>this.close(!0))}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(o.a),n.Lb(c.a),n.Lb(n.h),n.Lb(a.a),n.Lb(o.h))},t.\u0275cmp=n.Fb({type:t,selectors:[["edit-filenames-dialog"]],decls:15,vars:7,consts:[["mat-dialog-title",""],[1,"text-capitalize"],["mat-dialog-content","",2,"height","300px"],["class","py-2",4,"ngIf"],[1,"border","border-radius","p-2"],[3,"text","editorOptions","height","onEditorInit"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"],[1,"py-2"],["class","text-danger small",4,"ngFor","ngForOf"],[1,"text-danger","small"],[1,"fa","fa-exclamation-triangle","text-danger","text-small"]],template:function(t,e){1&t&&(n.Rb(0,"h1",0),n.Rb(1,"span",1),n.Ec(2,"Edit filenames for "),n.Qb(),n.Rb(3,"span",1),n.Ec(4),n.Qb(),n.Ec(5),n.Qb(),n.Rb(6,"div",2),n.Cc(7,m,2,1,"div",3),n.Rb(8,"div",4),n.Rb(9,"file-editor",5),n.Zb("onEditorInit",(function(t){return e.onEditorInit(t)})),n.Qb(),n.Qb(),n.Qb(),n.Rb(10,"div",6),n.Rb(11,"button",7),n.Zb("click",(function(){return e.close(!1)})),n.Ec(12,"Close"),n.Qb(),n.Rb(13,"button",7),n.Zb("click",(function(){return e.save()})),n.Ec(14,"Save"),n.Qb(),n.Qb()),2&t&&(n.Ab(4),n.Fc("template"===e.item.type?"generator":e.item.type),n.Ab(1),n.Gc(": ",e.item.name,""),n.Ab(2),n.jc("ngIf",e.errors.length>0),n.Ab(2),n.jc("text",e.text)("editorOptions",e.editorOptions)("height","40px"),n.Ab(1),n.jc("align","end"))},directives:[o.i,o.f,d.t,l.a,o.c,u.b,d.s],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var p=i("kiD8"),h=i("Qu3c"),g=i("tyNb");function v(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",8),n.Rb(1,"div",9),n.Mb(2,"i",10),n.Qb(),n.Rb(3,"div",11),n.Ec(4,"Why are there multiple places to set "),n.Rb(5,"span",12),n.Ec(6,"filenames"),n.Qb(),n.Ec(7,"? Where should I add a filenames rule? "),n.Rb(8,"span",12),n.Ec(9,"Find out how Stackjoy looks for filename rules"),n.Qb(),n.Ec(10,". "),n.Qb(),n.Rb(11,"div",13),n.Rb(12,"button",14),n.Zb("click",(function(){return n.rc(t),n.dc().tooltipService.dismissTooltip("config-filenames-hierarchy-tooltip")})),n.Ec(13,"Dismiss"),n.Qb(),n.Qb(),n.Qb()}2&t&&(n.Ab(5),n.jc("routerLink","/documentation/generator-config/filenames"),n.Ab(3),n.jc("routerLink","/documentation/structure/hierarchy"))}function x(t,e){1&t&&n.Mb(0,"i",28)}function C(t,e){if(1&t&&(n.Rb(0,"div",26),n.Ec(1),n.Cc(2,x,1,0,"i",27),n.Qb()),2&t){const t=n.dc().$implicit,e=n.dc();n.Db("text-danger",e.filenameErrors[t.item.id]),n.Ab(1),n.Gc("",t.property," "),n.Ab(1),n.jc("ngIf",e.filenameErrors[t.item.id])}}function y(t,e){if(1&t&&(n.Rb(0,"div",29),n.Rb(1,"button",30),n.Ec(2),n.Qb(),n.Qb()),2&t){const t=n.dc().$implicit;n.Ab(2),n.Gc(" Set the filenames rule for ","template"===t.item.type?"generator":t.item.type," ")}}const R=function(t){return{"padding-left":t}};function Q(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",15),n.Rb(1,"div",16),n.Zb("click",(function(){n.rc(t);const i=e.$implicit;return n.dc().editProperty(i.item)})),n.Rb(2,"div",17),n.Rb(3,"div",18),n.Rb(4,"div",19),n.Mb(5,"i",20),n.Rb(6,"span",21),n.Ec(7),n.Qb(),n.Rb(8,"span",22),n.Ec(9),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(10,"div",23),n.Cc(11,C,3,4,"div",24),n.Cc(12,y,3,1,"div",25),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=e.$implicit,i=e.index;n.Ab(1),n.yc(n.lc(6,R,10*i+"px")),n.Ab(6),n.Fc(t.item.name),n.Ab(2),n.Gc("[","template"===t.item.type?"generator":t.item.type,"]"),n.Ab(2),n.jc("ngIf",t.property),n.Ab(1),n.jc("ngIf",!t.property)}}let I=(()=>{class t{constructor(t,e){this.dialog=t,this.tooltipService=e,this.errors=[],this.onConfigUpdated=new n.o,this.property="filenames",this.hierarchy=[],this.filenameErrors={},this.subs=new s.a}ngOnInit(){this.selectedItem=this.item,this.setErrors(),this.determineHierarchy()}ngOnChanges(t){this.setErrors(),this.determineHierarchy()}determineHierarchy(){this.hierarchy=[];let t=this.item;if(t)for(this.setHierarchy(t);t.parent;)this.setHierarchy(t.parent),t=t.parent}setHierarchy(t){this.hierarchy.unshift({item:t,property:t.config[this.property]})}ngOnDestroy(){this.subs.unsubscribe()}editProperty(t){const e=this.dialog.open(f,{data:{item:t,renderContext:this.renderContext,errors:this.filenameErrors[""+t.id]},minWidth:"650px",position:{top:"100px"},autoFocus:!0});this.subs.add(e.afterClosed().subscribe(t=>{t.updated&&this.onConfigUpdated.emit(!0)}))}setErrors(){const t={};this.errors.forEach(e=>{var i,n;if((null===(i=e.error.origin)||void 0===i?void 0:i.location)===r.a.Execute.ErrorLocation.config&&(null===(n=e.error.origin)||void 0===n?void 0:n.section)===r.a.Execute.ErrorSection.filenames){const i=""+e.executeContext.item.id;t[i]||(t[i]=[]),t[i].push(e)}}),this.filenameErrors=t}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(o.b),n.Lb(p.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["config-filenames"]],inputs:{item:"item",errors:"errors",renderContext:"renderContext"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[n.yb],decls:9,vars:4,consts:[[1,"p-2","pt-3"],[1,"far","fa-file","text-muted","text-small"],[1,"text-small","as-link","ml-2",3,"matTooltip","routerLink"],[1,"fa","fa-info-circle"],[1,"px-2"],["class","more-info-tip mb-3",4,"ngIf"],[1,"position-relative",2,"max-width","600px"],["class","cursor-pointer position-relative",4,"ngFor","ngForOf"],[1,"more-info-tip","mb-3"],[1,"tip-icon"],[1,"fa","fa-exclamation-circle","fa-2x"],[1,"tip-message"],[1,"as-link",3,"routerLink"],[1,"tip-button"],["mat-button","",3,"click"],[1,"cursor-pointer","position-relative"],[1,"",3,"click"],[1,"py-2"],[1,"d-flex","align-items-center"],[1,"cursor-pointer"],[1,"fa","fa-chevron-right","text-tiny"],[1,"text-bold","mx-1"],[1,"text-tiny","text-muted"],[1,"pl-2","dashed-border"],["class","config-item",3,"text-danger",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"config-item"],["class","fa fa-exclamation-circle text-danger text-tiny",4,"ngIf"],[1,"fa","fa-exclamation-circle","text-danger","text-tiny"],[1,"text-muted"],["mat-button",""]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Mb(1,"i",1),n.Ec(2," Filenames "),n.Rb(3,"span",2),n.Mb(4,"i",3),n.Qb(),n.Qb(),n.Rb(5,"div",4),n.Cc(6,v,14,2,"div",5),n.Rb(7,"div",6),n.Cc(8,Q,13,8,"div",7),n.Qb(),n.Qb()),2&t&&(n.Ab(3),n.jc("matTooltip","More Info")("routerLink","/documentation/generator-config/filenames"),n.Ab(3),n.jc("ngIf",e.tooltipService.showTooltip("config-filenames-hierarchy-tooltip")),n.Ab(2),n.jc("ngForOf",e.hierarchy))},directives:[h.a,g.d,d.t,d.s,u.b],styles:[".dashed-border[_ngcontent-%COMP%]{border-left:1px dashed #d3d3d3;margin-left:2px}.config-item[_ngcontent-%COMP%]{padding:10px 20px;border-radius:5px}.config-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}"]}),t})()},"3V0h":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("ofXK"),r=i("xyCH"),o=i("lR5k"),s=i("tyNb"),c=i("bTqV"),a=i("Qu3c"),d=i("fXoL");let l=(()=>{class t{}return t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.a,o.b.forChild(),s.f,c.c,a.b]]}),t})()},"6uKQ":function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("fXoL"),r=i("GV7L"),o=i("DdQb"),s=i("quSY"),c=i("Mzu6"),a=i("0IaG"),d=i("tlDy"),l=i("kiD8"),u=i("Qu3c"),b=i("tyNb"),m=i("ofXK"),f=i("STbY"),p=i("bTqV"),h=i("NFeN");function g(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",11),n.Rb(1,"div",12),n.Mb(2,"i",13),n.Qb(),n.Rb(3,"div",14),n.Ec(4,"Why are there multiple places to add "),n.Rb(5,"span",15),n.Ec(6,"variables"),n.Qb(),n.Ec(7,"? Where should I add a variable? "),n.Rb(8,"span",15),n.Ec(9,"Find out how Stackjoy looks for variables"),n.Qb(),n.Ec(10,". "),n.Qb(),n.Rb(11,"div",16),n.Rb(12,"button",17),n.Zb("click",(function(){return n.rc(t),n.dc().tooltipService.dismissTooltip("config-variables-hierarchy-tooltip")})),n.Ec(13,"Dismiss"),n.Qb(),n.Qb(),n.Qb()}2&t&&(n.Ab(5),n.jc("routerLink","/documentation/generator-config/variables"),n.Ab(3),n.jc("routerLink","/documentation/structure/hierarchy"))}function v(t,e){1&t&&n.Mb(0,"i",36)}const x=function(t,e){return{item:t,variable:e}};function C(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",30),n.Rb(1,"div",31),n.Zb("click",(function(){n.rc(t);const i=e.$implicit,r=n.dc().$implicit;return n.dc().editVariable(r.item,i)})),n.Ec(2),n.Cc(3,v,1,0,"i",32),n.Qb(),n.Rb(4,"div",33),n.Zb("click",(function(){n.rc(t);const i=e.$implicit,r=n.dc().$implicit;return n.dc().editVariable(r.item,i)})),n.Ec(5),n.Qb(),n.Rb(6,"div",34),n.Rb(7,"mat-icon",35),n.Ec(8,"more_vert"),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=e.$implicit,i=n.dc().$implicit,r=n.dc(),o=n.oc(10);n.Ab(1),n.Db("text-danger",r.variableErrors[i.item.id+"."+t.key]),n.Ab(1),n.Gc(" ",t.key," "),n.Ab(1),n.jc("ngIf",r.variableErrors[i.item.id+"."+t.key]),n.Ab(2),n.Fc(t.value),n.Ab(2),n.jc("inline",!0)("matMenuTriggerFor",o)("matMenuTriggerData",n.mc(8,x,i.item,t))}}const y=function(t){return{"padding-left":t}};function R(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",18),n.Rb(1,"div",19),n.Rb(2,"div",20),n.Rb(3,"div",21),n.Rb(4,"div",19),n.Mb(5,"i",22),n.Rb(6,"span",23),n.Ec(7),n.Qb(),n.Rb(8,"span",24),n.Ec(9),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(10,"div",25),n.Rb(11,"div",19),n.Cc(12,C,9,11,"div",26),n.Rb(13,"div",27),n.Zb("click",(function(){n.rc(t);const i=e.$implicit;return n.dc().createNewVariable(i.item)})),n.Rb(14,"button",28),n.Mb(15,"i",29),n.Ec(16),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=e.$implicit,i=e.index;n.Ab(1),n.yc(n.lc(6,y,10*i+"px")),n.Ab(6),n.Fc(t.item.name),n.Ab(2),n.Gc("[","template"===t.item.type?"generator":t.item.type,"]"),n.Ab(3),n.jc("ngForOf",t.list),n.Ab(4),n.Gc(" Add a variable to ","template"===t.item.type?"generator":t.item.type," ")}}function Q(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",37),n.Rb(1,"span",38),n.Ec(2,"Variable: "),n.Qb(),n.Rb(3,"span",39),n.Ec(4),n.Qb(),n.Qb(),n.Rb(5,"button",40),n.Zb("click",(function(){n.rc(t);const i=e.item,r=e.variable;return n.dc().duplicateVariable(i,r)})),n.Mb(6,"i",41),n.Ec(7," Duplicate"),n.Qb(),n.Rb(8,"button",40),n.Zb("click",(function(){n.rc(t);const i=e.item,r=e.variable;return n.dc().deleteVariable(i,r)})),n.Mb(9,"i",42),n.Ec(10," Delete"),n.Qb()}if(2&t){const t=e.variable;n.Ab(4),n.Fc(t.key)}}let I=(()=>{class t{constructor(t,e,i){this.dialog=t,this.itemService=e,this.tooltipService=i,this.errors=[],this.onConfigUpdated=new n.o,this.variableErrors={},this.hierarchy=[],this.subs=new s.a}ngOnInit(){this.setErrors(),this.determineHierarchy()}ngOnChanges(t){this.setErrors(),this.determineHierarchy()}determineHierarchy(){this.hierarchy=[];let t=this.item;if(t)for(this.setHierarchy(t);t.parent;)this.setHierarchy(t.parent),t=t.parent}setHierarchy(t){this.hierarchy.unshift({item:t,variables:t.variables,list:this.getListOfVariables(t.variables)})}getListOfVariables(t){return Object.keys(null!=t?t:{}).map(e=>({key:e,value:t[e]})).sort((t,e)=>t.key>e.key?1:-1)}ngOnDestroy(){this.subs.unsubscribe()}setErrors(){const t={};this.errors.forEach(e=>{var i,n;if((null===(i=e.error.origin)||void 0===i?void 0:i.location)===r.a.Execute.ErrorLocation.config&&(null===(n=e.error.origin)||void 0===n?void 0:n.section)===r.a.Execute.ErrorSection.variables){const i=`${e.executeContext.item.id}.${e.error.origin.property}`;t[i]||(t[i]=[]),t[i].push(e)}}),this.variableErrors=t}configUpdated(){this.onConfigUpdated.emit(!0)}createNewVariable(t){this.editVariable(t,{key:"",value:""})}editVariable(t,e){const i=this.dialog.open(o.a,{data:{item:t,renderContext:this.renderContext,variable:e,errors:this.variableErrors[`${t.id}.${e.key}`]},minWidth:"650px",position:{top:"100px"},autoFocus:!0});this.subs.add(i.afterClosed().subscribe(t=>{this.determineHierarchy(),this.configUpdated()}))}duplicateVariable(t,e){let i=e.key+"_copy";this.item.variables[i]&&(i+="_"+(Math.floor(1e3*Math.random())+1)),this.item.variables[i]=e.value,this.itemService.updateVariables(this.item.id,this.item.variables).subscribe(t=>{this.determineHierarchy(),this.configUpdated()})}deleteVariable(t,e){this.dialog.open(c.a,{data:{title:`Delete variable ${e.key}?`,text:"Deleting this variable is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{!0===t&&(delete this.item.variables[e.key],this.itemService.updateVariables(this.item.id,this.item.variables).subscribe(t=>{this.determineHierarchy(),this.configUpdated()}))})}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(a.b),n.Lb(d.a),n.Lb(l.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["config-variables"]],inputs:{item:"item",renderContext:"renderContext",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[n.yb],decls:12,vars:4,consts:[[1,"p-2","pt-3"],[1,"fa","fa-equals","text-muted","text-small"],[1,"text-small","as-link","ml-2",3,"matTooltip","routerLink"],[1,"fa","fa-info-circle"],[1,"p-2"],["class","more-info-tip mb-3",4,"ngIf"],[1,"position-relative",2,"max-width","800px"],["class","cursor-pointer position-relative",4,"ngFor","ngForOf"],["yPosition","below"],["functionMenu","matMenu"],["matMenuContent",""],[1,"more-info-tip","mb-3"],[1,"tip-icon"],[1,"fa","fa-exclamation-circle","fa-2x"],[1,"tip-message"],[1,"as-link",3,"routerLink"],[1,"tip-button"],["mat-button","",3,"click"],[1,"cursor-pointer","position-relative"],[1,""],[1,"py-2"],[1,"d-flex","align-items-center"],[1,"fa","fa-chevron-right","text-tiny"],[1,"text-bold","mx-1"],[1,"text-tiny","text-muted"],[1,"pl-2","dashed-border"],["class","d-flex align-items-center config-item",4,"ngFor","ngForOf"],[1,"p-1","text-small","text-muted","ml-auto",3,"click"],["mat-button",""],[1,"fa","fa-plus-circle","text-tiny"],[1,"d-flex","align-items-center","config-item"],[1,"cursor-pointer","item-name",3,"click"],["class","fa fa-exclamation-circle text-danger text-tiny",4,"ngIf"],[1,"text-muted",3,"click"],[1,"item-menu","ml-auto","pr-3"],[1,"item-menu-icon",3,"inline","matMenuTriggerFor","matMenuTriggerData"],[1,"fa","fa-exclamation-circle","text-danger","text-tiny"],[1,"p-2","text-center","border-bottom"],[1,"text-capitalize"],[1,"text-bold"],["mat-menu-item","",3,"click"],[1,"far","fa-copy"],[1,"far","fa-trash-alt"]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Mb(1,"i",1),n.Ec(2," Variables "),n.Rb(3,"span",2),n.Mb(4,"i",3),n.Qb(),n.Qb(),n.Rb(5,"div",4),n.Cc(6,g,14,2,"div",5),n.Rb(7,"div",6),n.Cc(8,R,17,8,"div",7),n.Qb(),n.Qb(),n.Rb(9,"mat-menu",8,9),n.Cc(11,Q,11,1,"ng-template",10),n.Qb()),2&t&&(n.Ab(3),n.jc("matTooltip","More Info")("routerLink","/documentation/generator-config/variables"),n.Ab(3),n.jc("ngIf",e.tooltipService.showTooltip("config-variables-hierarchy-tooltip")),n.Ab(2),n.jc("ngForOf",e.hierarchy))},directives:[u.a,b.d,m.t,m.s,f.e,f.a,p.b,h.a,f.d,f.b],styles:[".dashed-border[_ngcontent-%COMP%]{border-left:1px dashed #d3d3d3;margin-left:2px}.config-item[_ngcontent-%COMP%]{padding:6px;border-radius:5px}.config-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.config-item[_ngcontent-%COMP%]:hover   .item-menu-icon[_ngcontent-%COMP%]{display:block!important}.item-menu[_ngcontent-%COMP%]{font-size:18px;text-align:center}.item-menu[_ngcontent-%COMP%]   .item-menu-icon[_ngcontent-%COMP%]{display:none}.item-name[_ngcontent-%COMP%]{width:250px}.item-description[_ngcontent-%COMP%], .item-name[_ngcontent-%COMP%]{text-overflow:ellipsis}"]}),t})()},"95yg":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("ofXK"),r=i("tyNb"),o=i("bTqV"),s=i("Qu3c"),c=i("fXoL");let a=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.f,o.c,s.b]]}),t})()},"9R0s":function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("ofXK"),r=i("bTqV"),o=i("NFeN"),s=i("STbY"),c=i("tyNb"),a=i("Qu3c"),d=i("fXoL");let l=(()=>{class t{}return t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.c,o.b,s.c,c.f,a.b]]}),t})()},CQMr:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("fXoL"),r=i("ZJV+"),o=i("0IaG");let s=(()=>{class t{constructor(t,e){this.httpService=t,this.dialog=e}getFunction(t){return this.httpService.get("/blueprints/function/"+t)}getFunctions(){return this.httpService.get("/blueprints/function")}deleteFunction(t){return this.httpService.delete("/blueprints/function/"+t)}duplicateFunction(t){return this.httpService.post("/blueprints/function/duplicate/"+t)}createFunction(t,e,i,n){return this.httpService.post("/blueprints/function",{parentId:t,name:e,contents:i,description:n})}updateFunction(t,e,i,n){return this.httpService.put("/blueprints/function/"+t,{name:e,contents:i,description:n})}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(r.a),n.Vb(o.b))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},CaBZ:function(t,e,i){"use strict";i.d(e,"a",(function(){return l}));var n=i("ofXK"),r=i("NFeN"),o=i("STbY"),s=i("tyNb"),c=i("bTqV"),a=i("Qu3c"),d=i("fXoL");let l=(()=>{class t{}return t.\u0275mod=d.Jb({type:t}),t.\u0275inj=d.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.b,o.c,s.f,c.c,a.b]]}),t})()},DdQb:function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("0IaG"),r=i("quSY"),o=i("aSHc"),s=i("fXoL"),c=i("ZJV+"),a=i("tlDy"),d=i("ofXK"),l=i("3Pt+"),u=i("+C0i"),b=i("kmnG"),m=i("qFsG"),f=i("1jDz");function p(t,e){1&t&&(s.Rb(0,"mat-error"),s.Ec(1,"Input is required"),s.Qb())}function h(t,e){1&t&&(s.Rb(0,"mat-error"),s.Ec(1,"Only alpha-numeric and _ characters allowed. Must begin with a letter."),s.Qb())}function g(t,e){if(1&t&&(s.Rb(0,"div",11),s.Mb(1,"i",12),s.Ec(2),s.Qb()),2&t){const t=e.$implicit;s.Ab(2),s.Gc(" ",null!=t.error.data&&null!=t.error.data.syntaxError&&t.error.data.syntaxError.error?null==t.error.data||null==t.error.data.syntaxError?null:t.error.data.syntaxError.error:null==t.error.data?null:t.error.data.message," ")}}function v(t,e){if(1&t&&(s.Rb(0,"div",9),s.Cc(1,g,3,1,"div",10),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.jc("ngForOf",t.errors)}}let x=(()=>{class t{constructor(t,e){this.fb=t,this.bluEditorService=e,this.variable={key:"",value:""},this.onChange=new s.o,this.errors=[],this.subs=new r.a,this.editorOptions={theme:"bluTheme",language:"bluLanguage",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1}}ngOnInit(){var t;this.initForm(),this.text=null!==(t=this.variable.value)&&void 0!==t?t:"",this.subs.add(this.formGroup.valueChanges.subscribe(t=>{this.onChange.emit(this.formGroup)}))}initForm(){this.formGroup=this.fb.group({key:[this.variable.key,[l.F.required,l.F.pattern(/^[$A-Z_][0-9A-Z_$]*$/i)]],value:[this.variable.value,[]]}),this.variable.key&&this.formGroup.markAllAsTouched(),this.onChange.emit(this.formGroup)}get f(){return this.formGroup.controls}onEditorInit(t){this.editorModel=t,this.setContext(),this.editorModel.onDidChangeContent(t=>this.saveValue(this.editorModel.getValue()))}setContext(){this.editorModel&&this.bluEditorService.registerCompletionProvider(monaco,this.renderContext)}saveValue(t){this.f.value.setValue(t),this.f.value.markAsTouched(),this.f.value.markAsDirty()}ngOnDestroy(){this.subs.unsubscribe(),this.bluEditorService.disposeCompletionProvider()}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(l.f),s.Lb(u.a))},t.\u0275cmp=s.Fb({type:t,selectors:[["variable-form"]],inputs:{variable:"variable",renderContext:"renderContext",errors:"errors"},outputs:{onChange:"onChange"},decls:12,vars:7,consts:[[1,"mat-form",3,"formGroup"],[1,""],["placeholder","Name","type","text","spellcheck","false","matInput","","formControlName","key"],[4,"ngIf"],[1,"",2,"height","200px"],[1,"py-1"],["class","py-2",4,"ngIf"],[1,"border","rounded","p-1"],[3,"text","editorOptions","height","onEditorInit"],[1,"py-2"],["class","text-danger small",4,"ngFor","ngForOf"],[1,"text-danger","small"],[1,"fa","fa-exclamation-triangle","text-danger","text-small"]],template:function(t,e){1&t&&(s.Rb(0,"form",0),s.Rb(1,"div",1),s.Rb(2,"mat-form-field"),s.Mb(3,"input",2),s.Cc(4,p,2,0,"mat-error",3),s.Cc(5,h,2,0,"mat-error",3),s.Qb(),s.Qb(),s.Rb(6,"div",4),s.Rb(7,"div",5),s.Ec(8,"Variable Value:"),s.Qb(),s.Cc(9,v,2,1,"div",6),s.Rb(10,"div",7),s.Rb(11,"file-editor",8),s.Zb("onEditorInit",(function(t){return e.onEditorInit(t)})),s.Qb(),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.jc("formGroup",e.formGroup),s.Ab(4),s.jc("ngIf",null==e.f.key||null==e.f.key.errors?null:e.f.key.errors.required),s.Ab(1),s.jc("ngIf",null==e.f.key||null==e.f.key.errors?null:e.f.key.errors.pattern),s.Ab(4),s.jc("ngIf",e.errors.length>0),s.Ab(2),s.jc("text",e.text)("editorOptions",e.editorOptions)("height","100px"))},directives:[l.H,l.s,l.k,b.c,m.a,l.c,l.r,l.i,d.t,f.a,b.b,d.s],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var C=i("bTqV");function y(t,e){1&t&&(s.Rb(0,"div",2),s.Rb(1,"div",11),s.Mb(2,"i",12),s.Qb(),s.Qb())}function R(t,e){1&t&&(s.Rb(0,"div",2),s.Rb(1,"div",11),s.Ec(2,"...saving"),s.Qb(),s.Qb())}function Q(t,e){1&t&&(s.Rb(0,"div",2),s.Rb(1,"div",13),s.Mb(2,"i",14),s.Mb(3,"span",2),s.Qb(),s.Qb())}let I=(()=>{class t{constructor(t,e,i,n){this.data=t,this.httpService=e,this.itemService=i,this.dialogRef=n,this.actionState=o.a,this.subs=new r.a}ngOnInit(){var t;this.errors=null!==(t=this.data.errors)&&void 0!==t?t:[],this.item=this.data.item,this.currentState=o.a.IDLE,this.renderContext=this.data.renderContext}ngOnDestroy(){this.subs.unsubscribe(),this.currentState=o.a.IDLE}formChanged(t){this.form=t,this.currentState=t.dirty?t.valid?o.a.SUCCESS:o.a.ERROR:o.a.IDLE}saveVariables(){if(this.form&&this.form.valid){const{key:t,value:e}=this.form.value;t&&(this.data.variable.key&&delete this.item.variables[this.data.variable.key],this.item.variables[t]=e,this.subs.add(this.itemService.updateVariables(this.item.id,this.item.variables).subscribe(t=>{this.close(!0)})))}}close(t){this.dialogRef.close({updated:t})}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(n.a),s.Lb(c.a),s.Lb(a.a),s.Lb(n.h))},t.\u0275cmp=s.Fb({type:t,selectors:[["edit-variables-dialog"]],decls:17,vars:9,consts:[["mat-dialog-title",""],[1,"d-flex","align-items-center"],[1,""],[1,"ml-auto","pr-2","text-small"],[3,"ngSwitch"],["class","",4,"ngSwitchCase"],["mat-dialog-content",""],[3,"variable","renderContext","errors","onChange"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"],["mat-button","",3,"disabled","click"],[1,"ml-auto","text-success"],[1,"fa","fa-check-circle"],[1,"ml-auto","text-warning"],[1,"fa","fa-exclamation-triangle","text-warning"]],template:function(t,e){1&t&&(s.Rb(0,"h1",0),s.Rb(1,"div",1),s.Rb(2,"div",2),s.Rb(3,"h3"),s.Ec(4,"Edit Variable"),s.Qb(),s.Qb(),s.Rb(5,"div",3),s.Pb(6,4),s.Cc(7,y,3,0,"div",5),s.Cc(8,R,3,0,"div",5),s.Cc(9,Q,4,0,"div",5),s.Ob(),s.Qb(),s.Qb(),s.Qb(),s.Rb(10,"div",6),s.Rb(11,"variable-form",7),s.Zb("onChange",(function(t){return e.formChanged(t)})),s.Qb(),s.Qb(),s.Rb(12,"div",8),s.Rb(13,"button",9),s.Zb("click",(function(){return e.close(!0)})),s.Ec(14,"Cancel"),s.Qb(),s.Rb(15,"button",10),s.Zb("click",(function(){return e.saveVariables()})),s.Ec(16,"Save"),s.Qb(),s.Qb()),2&t&&(s.Ab(6),s.jc("ngSwitch",e.currentState),s.Ab(1),s.jc("ngSwitchCase",e.actionState.SUCCESS),s.Ab(1),s.jc("ngSwitchCase",e.actionState.PENDING),s.Ab(1),s.jc("ngSwitchCase",e.actionState.ERROR),s.Ab(2),s.jc("variable",e.data.variable)("renderContext",e.renderContext)("errors",e.errors),s.Ab(1),s.jc("align","end"),s.Ab(3),s.jc("disabled",null==e.form?null:e.form.invalid))},directives:[n.i,d.x,d.y,n.f,x,n.c,C.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})()},DuVo:function(t,e,i){"use strict";i.d(e,"a",(function(){return y}));var n=i("fXoL"),r=i("XNiG"),o=i("quSY"),s=i("Kj3r"),c=i("/uUt"),a=i("tlDy"),d=i("Qu3c"),l=i("tyNb"),u=i("ofXK"),b=i("bTqV"),m=i("lR5k"),f=i("1jDz");function p(t,e){if(1&t){const t=n.Sb();n.Rb(0,"button",12),n.Zb("click",(function(){return n.rc(t),n.dc().showSection("edit")})),n.Ec(1,"[ edit ]"),n.Qb()}if(2&t){const t=n.dc();n.Db("text-primary","edit"===t.section)}}function h(t,e){if(1&t){const t=n.Sb();n.Rb(0,"button",13),n.Zb("click",(function(){return n.rc(t),n.dc().showSection("preview")})),n.Ec(1,"[ preview ]"),n.Qb()}if(2&t){const t=n.dc();n.Db("text-primary","preview"===t.section)}}function g(t,e){if(1&t){const t=n.Sb();n.Pb(0),n.Rb(1,"div",15),n.Zb("click",(function(){return n.rc(t),n.dc(2).showSection("edit")})),n.Rb(2,"span",16),n.Ec(3,"No Readme Available. Click to edit."),n.Qb(),n.Qb(),n.Ob()}}function v(t,e){if(1&t&&(n.Pb(0),n.Mb(1,"markdown",17),n.Ob()),2&t){const t=n.dc(2);n.Ab(1),n.jc("data",t.text)}}function x(t,e){if(1&t&&(n.Rb(0,"div",1),n.Cc(1,g,4,0,"ng-container",14),n.Cc(2,v,2,1,"ng-container",14),n.Qb()),2&t){const t=n.dc();n.Ab(1),n.jc("ngIf",!t.text),n.Ab(1),n.jc("ngIf",!!t.text)}}function C(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",18),n.Rb(1,"file-editor",19),n.Zb("onContentChange",(function(e){return n.rc(t),n.dc().updateReadme(e)})),n.Qb(),n.Qb()}if(2&t){const t=n.dc();n.Ab(1),n.jc("text",t.text)("editorOptions",t.editorOptions)("height","100%")}}let y=(()=>{class t{constructor(t){this.itemService=t,this.textToSave$=new r.a,this.onConfigUpdated=new n.o,this.editorOptions={language:"markdown",matchBrackets:"never",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1},this.section="preview",this.subs=new o.a}ngOnInit(){this.showSection("preview"),this.text=this.item.readme,this.subs.add(this.textToSave$.pipe(Object(s.a)(250),Object(c.a)()).subscribe(t=>{this.item.readme=t,this.saveForm()}))}showSection(t){this.text=this.item.readme,"preview"===t&&(this.markdownHTML=this.item.readme),this.section=t}ngOnDestroy(){this.subs.unsubscribe()}saveForm(){this.subs.add(this.itemService.updateReadme(this.item.id,this.item.readme).subscribe(t=>this.onConfigUpdated.emit(!0)))}updateReadme(t){this.textToSave$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(a.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["config-info"]],inputs:{item:"item"},outputs:{onConfigUpdated:"onConfigUpdated"},decls:13,vars:6,consts:[[1,"px-2","py-2","d-flex","align-items-center"],[1,""],[1,"fab","fa-readme","text-muted","text-small"],[1,"ml-2"],[1,"text-small","as-link",3,"matTooltip","routerLink"],[1,"fa","fa-info-circle"],[1,"cursor-pointer","pl-2"],["mat-button","","class","",3,"text-primary","click",4,"ngIf"],["mat-button","",3,"text-primary","click",4,"ngIf"],[1,"p-2"],["class","",4,"ngIf"],["class","p-2 border","style","height:500px",4,"ngIf"],["mat-button","",1,"",3,"click"],["mat-button","",3,"click"],[4,"ngIf"],[1,"text-center",3,"click"],[1,"border-bottom","cursor-pointer"],[3,"data"],[1,"p-2","border",2,"height","500px"],[3,"text","editorOptions","height","onContentChange"]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Rb(1,"div",1),n.Mb(2,"i",2),n.Ec(3," Readme "),n.Qb(),n.Rb(4,"div",3),n.Rb(5,"span",4),n.Mb(6,"i",5),n.Qb(),n.Qb(),n.Rb(7,"div",6),n.Cc(8,p,2,2,"button",7),n.Cc(9,h,2,2,"button",8),n.Qb(),n.Qb(),n.Rb(10,"div",9),n.Cc(11,x,3,2,"div",10),n.Cc(12,C,2,3,"div",11),n.Qb()),2&t&&(n.Ab(5),n.jc("matTooltip","More Info")("routerLink","/documentation/generator-config/readme"),n.Ab(3),n.jc("ngIf","preview"===e.section),n.Ab(1),n.jc("ngIf","edit"===e.section),n.Ab(2),n.jc("ngIf","preview"===e.section),n.Ab(1),n.jc("ngIf","edit"===e.section))},directives:[d.a,l.d,u.t,b.b,m.a,f.a],styles:[""]}),t})()},GiAs:function(t,e,i){"use strict";i.d(e,"a",(function(){return at}));var n=i("fXoL"),r=i("GV7L"),o=i("quSY"),s=i("0IaG"),c=i("3Pt+"),a=i("+C0i"),d=i("JzR7"),l=i("ofXK"),u=i("kmnG"),b=i("d3UM"),m=i("FKr1");function f(t,e){if(1&t&&(n.Rb(0,"mat-option",6),n.Ec(1),n.Rb(2,"span",7),n.Ec(3),n.Qb(),n.Qb()),2&t){const t=e.$implicit;n.jc("value",t),n.Ab(1),n.Gc("",t.name," "),n.Ab(2),n.Gc("[",t.parent.name,"]")}}function p(t,e){if(1&t&&(n.Rb(0,"form",1),n.Rb(1,"div",2),n.Rb(2,"mat-form-field",3),n.Rb(3,"mat-label"),n.Ec(4,"Select Template"),n.Qb(),n.Rb(5,"mat-select",4),n.Cc(6,f,4,3,"mat-option",5),n.Qb(),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.dc();n.jc("formGroup",t.formGroup),n.Ab(6),n.jc("ngForOf",t.items)}}let h=(()=>{class t{constructor(t,e){this.fb=t,this.bluService=e,this.onChange=new n.o,this.items=[]}ngOnInit(){var t;this.chainedTemplate=null!==(t=this.chainedTemplate)&&void 0!==t?t:{templateId:"",inputs:{}},this.bluService.getItems().subscribe(t=>{this.items=t.sort((t,e)=>t.name>e.name?1:-1),this.initForm(),this.onChange.emit(this.formGroup),this.formGroup.valueChanges.subscribe(t=>{this.onChange.emit(this.formGroup)})})}initForm(){const t=this.items.find(t=>t.id===this.chainedTemplate.templateId);this.formGroup=this.fb.group({template:[t,[c.F.required]]})}get f(){var t;return null===(t=this.formGroup)||void 0===t?void 0:t.controls}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(c.f),n.Lb(d.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["command-form"]],inputs:{chainedTemplate:"chainedTemplate"},outputs:{onChange:"onChange"},decls:1,vars:1,consts:[["class","mat-form",3,"formGroup",4,"ngIf"],[1,"mat-form",3,"formGroup"],[1,""],["appearance","fill"],["formControlName","template"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"text-tiny","text-muted"]],template:function(t,e){1&t&&n.Cc(0,p,7,2,"form",0),2&t&&n.jc("ngIf",e.formGroup)},directives:[l.t,c.H,c.s,c.k,u.c,u.g,b.a,c.r,c.i,l.s,m.l],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var g=i("STbY"),v=i("NFeN"),x=i("qFsG"),C=i("/1cH"),y=i("1jDz");function R(t,e){if(1&t&&(n.Rb(0,"mat-option",11),n.Ec(1),n.Qb()),2&t){const t=e.$implicit;n.jc("value",t),n.Ab(1),n.Gc(" ",t," ")}}function Q(t,e){1&t&&(n.Rb(0,"mat-error"),n.Ec(1,"Input is required"),n.Qb())}function I(t,e){1&t&&(n.Rb(0,"mat-error"),n.Ec(1,"Only alpha-numeric and _ characters allowed. Must begin with a letter."),n.Qb())}function E(t,e){1&t&&(n.Rb(0,"mat-error"),n.Ec(1,"Input with this name already exits and would be overwritten"),n.Qb())}function S(t,e){if(1&t&&(n.Pb(0),n.Mb(1,"i",15),n.Ec(2),n.Ob()),2&t){const t=n.dc().$implicit;n.Ab(2),n.Gc(" ",null!=t.error.data&&null!=t.error.data.syntaxError&&t.error.data.syntaxError.error?null==t.error.data||null==t.error.data.syntaxError?null:t.error.data.syntaxError.error:null==t.error.data?null:t.error.data.message," ")}}function k(t,e){if(1&t&&(n.Rb(0,"div",14),n.Cc(1,S,3,1,"ng-container",6),n.Qb()),2&t){const t=e.$implicit;n.Ab(1),n.jc("ngIf",!!t.error.origin.property)}}function A(t,e){if(1&t&&(n.Rb(0,"div",12),n.Cc(1,k,2,1,"div",13),n.Qb()),2&t){const t=n.dc();n.Ab(1),n.jc("ngForOf",t.errors)}}let O=(()=>{class t{constructor(t,e){this.fb=t,this.bluEditorService=e,this.input={key:"",value:""},this.onChange=new n.o,this.errors=[],this.subs=new o.a,this.editorOptions={theme:"bluTheme",language:"bluLanguage",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1},this.inputNameSuggestions=[]}ngOnInit(){var t;this.inputNameSuggestions=this.bluEditorService.variableNameSuggestions,this.editCreateText=this.input.key?"Edit":"Add",this.text=null!==(t=this.input.value)&&void 0!==t?t:"",this.initForm(),this.formGroup.valueChanges.subscribe(t=>{this.onChange.emit(this.formGroup)})}initForm(){this.formGroup=this.fb.group({key:[this.input.key,[c.F.required,c.F.pattern(/^[$A-Z_][0-9A-Z_$]*$/i),this.inputNameExistsValidator(this.allInputs,this.input)]],value:[this.input.value,[c.F.required]]}),this.input.key&&this.formGroup.markAllAsTouched(),this.onChange.emit(this.formGroup)}get f(){return this.formGroup.controls}onEditorInit(t){this.editorModel=t,this.setContext(),this.editorModel.onDidChangeContent(t=>this.saveValue(this.editorModel.getValue()))}setContext(){this.editorModel&&this.bluEditorService.registerCompletionProvider(monaco,this.renderContext)}saveValue(t){this.f.value.setValue(t),this.f.value.markAsTouched(),this.f.value.markAsDirty()}ngOnDestroy(){this.subs.unsubscribe(),this.bluEditorService.disposeCompletionProvider()}inputNameExistsValidator(t,e){return i=>{const n=Object.keys(null!=t?t:{});return e.key!==""+(null==i?void 0:i.value)&&n.includes(""+(null==i?void 0:i.value))?{nameExists:{valid:!1}}:null}}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(c.f),n.Lb(a.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["add-input-form"]],inputs:{input:"input",allInputs:"allInputs",renderContext:"renderContext",errors:"errors"},outputs:{onChange:"onChange"},decls:17,vars:11,consts:[[1,"border-bottom"],[1,"mat-form",3,"formGroup"],[1,""],["placeholder","Input Name","type","text","spellcheck","false","matInput","","formControlName","key",3,"matAutocomplete"],["auto","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[1,"py-1"],["class","py-2",4,"ngIf"],[1,"border","rounded","p-1"],[3,"text","editorOptions","height","onEditorInit"],[3,"value"],[1,"py-2"],["class","text-danger small",4,"ngFor","ngForOf"],[1,"text-danger","small"],[1,"fa","fa-exclamation-triangle","text-danger","text-small"]],template:function(t,e){if(1&t&&(n.Rb(0,"h2",0),n.Ec(1),n.Qb(),n.Rb(2,"form",1),n.Rb(3,"div",2),n.Rb(4,"mat-form-field"),n.Mb(5,"input",3),n.Rb(6,"mat-autocomplete",null,4),n.Cc(8,R,2,2,"mat-option",5),n.Qb(),n.Cc(9,Q,2,0,"mat-error",6),n.Cc(10,I,2,0,"mat-error",6),n.Cc(11,E,2,0,"mat-error",6),n.Qb(),n.Qb(),n.Rb(12,"div",7),n.Ec(13,"Input Value:"),n.Qb(),n.Cc(14,A,2,1,"div",8),n.Rb(15,"div",9),n.Rb(16,"file-editor",10),n.Zb("onEditorInit",(function(t){return e.onEditorInit(t)})),n.Qb(),n.Qb(),n.Qb()),2&t){const t=n.oc(7);n.Ab(1),n.Gc("",e.editCreateText," Input"),n.Ab(1),n.jc("formGroup",e.formGroup),n.Ab(3),n.jc("matAutocomplete",t),n.Ab(3),n.jc("ngForOf",e.inputNameSuggestions),n.Ab(1),n.jc("ngIf",null==e.f.key||null==e.f.key.errors?null:e.f.key.errors.required),n.Ab(1),n.jc("ngIf",null==e.f.key||null==e.f.key.errors?null:e.f.key.errors.pattern),n.Ab(1),n.jc("ngIf",null==e.f.key||null==e.f.key.errors?null:e.f.key.errors.nameExists),n.Ab(3),n.jc("ngIf",e.errors.length>0),n.Ab(2),n.jc("text",e.text)("editorOptions",e.editorOptions)("height","100px")}},directives:[c.H,c.s,c.k,u.c,x.a,c.c,C.c,c.r,c.i,C.a,l.s,l.t,y.a,m.l,u.b],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}"]}),t})();var F=i("bTqV");function T(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",17),n.Zb("click",(function(){return n.rc(t),n.dc(2).createInput()})),n.Ec(1," No inputs present. Click "),n.Mb(2,"i",18),n.Ec(3," Add input to add one. "),n.Qb()}}function M(t,e){1&t&&n.Mb(0,"i",27)}const j=function(t){return{input:t}};function w(t,e){if(1&t){const t=n.Sb();n.Rb(0,"tr"),n.Rb(1,"td",22),n.Rb(2,"mat-icon",23),n.Ec(3,"more_vert"),n.Qb(),n.Qb(),n.Rb(4,"td",24),n.Zb("click",(function(){n.rc(t);const i=e.$implicit;return n.dc(3).editInput(i)})),n.Ec(5),n.Cc(6,M,1,0,"i",25),n.Qb(),n.Rb(7,"td",26),n.Zb("click",(function(){n.rc(t);const i=e.$implicit;return n.dc(3).editInput(i)})),n.Ec(8),n.Qb(),n.Qb()}if(2&t){const t=e.$implicit,i=n.dc(3),r=n.oc(12);n.Ab(2),n.jc("inline",!0)("matMenuTriggerFor",r)("matMenuTriggerData",n.lc(6,j,t)),n.Ab(3),n.Gc("",t.key," "),n.Ab(1),n.jc("ngIf",i.variableErrors[t.key]),n.Ab(2),n.Fc(t.value)}}function L(t,e){if(1&t&&(n.Rb(0,"div",19),n.Rb(1,"table",20),n.Cc(2,w,9,8,"tr",21),n.Qb(),n.Qb()),2&t){const t=n.dc(2);n.Ab(2),n.jc("ngForOf",t.inputsList)}}function D(t,e){if(1&t){const t=n.Sb();n.Pb(0),n.Rb(1,"div",10),n.Rb(2,"div",11),n.Rb(3,"div",12),n.Ec(4,"Inputs"),n.Qb(),n.Rb(5,"div",13),n.Zb("click",(function(){return n.rc(t),n.dc().createInput()})),n.Mb(6,"i",14),n.Ec(7," Add input"),n.Qb(),n.Qb(),n.Cc(8,T,4,0,"div",15),n.Cc(9,L,3,1,"div",16),n.Qb(),n.Ob()}if(2&t){const t=n.dc();n.Ab(8),n.jc("ngIf",0===t.inputsList.length),n.Ab(1),n.jc("ngIf",t.inputsList.length>0)}}function P(t,e){if(1&t){const t=n.Sb();n.Pb(0),n.Rb(1,"add-input-form",28),n.Zb("onChange",(function(e){return n.rc(t),n.dc().setInput(e)})),n.Qb(),n.Ob()}if(2&t){const t=n.dc();n.Ab(1),n.jc("input",t.selectedInput)("renderContext",t.data.renderContext)("allInputs",t.chainedTemplate.inputs)("errors",t.errors)}}function $(t,e){1&t&&n.Mb(0,"i",39)}function G(t,e){if(1&t&&(n.Pb(0),n.Rb(1,"span",37),n.Ec(2),n.Qb(),n.Cc(3,$,1,0,"i",38),n.Ob()),2&t){const t=e.$implicit,i=e.index,r=n.dc(2).$implicit;n.Ab(1),n.Db("text-danger",t.name===r.error.data.templateName),n.Ab(1),n.Fc(t.name),n.Ab(1),n.jc("ngIf",i<r.error.data.chainOrder.length-1)}}function N(t,e){if(1&t&&(n.Pb(0),n.Rb(1,"div",36),n.Cc(2,G,4,4,"ng-container",21),n.Qb(),n.Ob()),2&t){const t=n.dc().$implicit;n.Ab(2),n.jc("ngForOf",t.error.data.chainOrder)}}function _(t,e){if(1&t&&(n.Rb(0,"div",31),n.Rb(1,"div",32),n.Mb(2,"i",33),n.Ec(3),n.Qb(),n.Pb(4,34),n.Cc(5,N,3,1,"ng-container",35),n.Ob(),n.Qb()),2&t){const t=e.$implicit;n.Ab(3),n.Gc(" ",t.error.message,""),n.Ab(1),n.jc("ngSwitch",t.error.type),n.Ab(1),n.jc("ngSwitchCase","circularChain")}}function V(t,e){if(1&t&&(n.Rb(0,"div",29),n.Cc(1,_,6,3,"div",30),n.Qb()),2&t){const t=n.dc();n.Ab(1),n.jc("ngForOf",t.errors)}}function Z(t,e){if(1&t){const t=n.Sb();n.Pb(0),n.Rb(1,"button",40),n.Ec(2,"Cancel"),n.Qb(),n.Rb(3,"button",41),n.Zb("click",(function(){return n.rc(t),n.dc().save()})),n.Ec(4,"Save"),n.Qb(),n.Ob()}if(2&t){const t=n.dc();n.Ab(3),n.jc("disabled",null==t.form?null:t.form.invalid)}}function H(t,e){if(1&t){const t=n.Sb();n.Pb(0),n.Rb(1,"button",42),n.Zb("click",(function(){return n.rc(t),n.dc().cancelEditInput()})),n.Ec(2,"Cancel"),n.Qb(),n.Rb(3,"button",41),n.Zb("click",(function(){return n.rc(t),n.dc().saveInput()})),n.Ec(4,"Save Input"),n.Qb(),n.Ob()}if(2&t){const t=n.dc();n.Ab(3),n.jc("disabled",null==t.inputsForm?null:t.inputsForm.invalid)}}function U(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",43),n.Rb(1,"span",44),n.Ec(2,"Input: "),n.Qb(),n.Rb(3,"span",45),n.Ec(4),n.Qb(),n.Qb(),n.Rb(5,"button",46),n.Zb("click",(function(){n.rc(t);const i=e.input;return n.dc().duplicateInput(i)})),n.Mb(6,"i",47),n.Ec(7," Duplicate"),n.Qb(),n.Rb(8,"button",46),n.Zb("click",(function(){n.rc(t);const i=e.input;return n.dc().deleteInput(i)})),n.Mb(9,"i",48),n.Ec(10," Delete"),n.Qb()}if(2&t){const t=e.input;n.Ab(4),n.Fc(t.key)}}let X=(()=>{class t{constructor(t,e,i,n,r){this.fb=t,this.bluEditorService=e,this.cdr=i,this.data=n,this.dialogRef=r,this.inputsList=[],this.variableErrors={},this.subs=new o.a}ngOnInit(){var t,e;this.chainedTemplate=null!==(t=this.data.chainedTemplate)&&void 0!==t?t:{templateId:"",inputs:{}},this.errors=null!==(e=this.data.errors)&&void 0!==e?e:[],this.setErrors(),this.createInputsList()}ngOnDestroy(){this.subs.unsubscribe()}createInputsList(){this.inputsList=Object.keys(this.chainedTemplate.inputs).map(t=>({key:t,value:this.chainedTemplate.inputs[t]}))}close(){this.dialogRef.close(this.form.value)}setCommand(t){this.form=t,this.form.valid&&(this.chainedTemplate.templateId=this.form.controls.template.value.id)}save(){this.dialogRef.close({chainedTemplate:this.chainedTemplate,type:this.data.type,index:this.data.index})}createInput(){this.selectedInput={key:"",value:""},this.currentSection="editInput"}cancelEditInput(){this.currentSection=null}saveInput(){this.chainedTemplate.inputs[this.inputsForm.controls.key.value]=this.inputsForm.controls.value.value,this.createInputsList(),this.currentSection=null}setInput(t){this.inputsForm=t}duplicateInput(t){let e=t.key+"_copy";this.chainedTemplate.inputs[e]&&(e=`${t.key}_${Math.floor(1e3*Math.random())+1}`),this.chainedTemplate.inputs[e]=t.value,this.createInputsList()}deleteInput(t){delete this.chainedTemplate.inputs[t.key],this.createInputsList()}editInput(t){this.selectedInput=t,this.currentSection="editInput"}setErrors(){const t={};this.errors.forEach(e=>{var i,n;if((null===(i=e.error.origin)||void 0===i?void 0:i.location)===r.a.Execute.ErrorLocation.config&&(null===(n=e.error.origin)||void 0===n?void 0:n.section)===r.a.Execute.ErrorSection.chainedTemplates){const i=""+e.error.origin.property;t[i]||(t[i]=[]),t[i].push(e)}}),this.variableErrors=t}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(c.f),n.Lb(a.a),n.Lb(n.h),n.Lb(s.a),n.Lb(s.h))},t.\u0275cmp=n.Fb({type:t,selectors:[["edit-commands-dialog"]],decls:14,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[3,"chainedTemplate","onChange"],[1,"mt-1",2,"height","350px"],[4,"ngIf"],["class","p-2",4,"ngIf"],["mat-dialog-actions","",3,"align"],["yPosition","below"],["inputMenu","matMenu"],["matMenuContent",""],[1,""],[1,"d-flex"],[1,"pl-2"],[1,"ml-auto","cursor-pointer","pr-2",3,"click"],[1,"fa","fa-plus-square","text-muted"],["class","text-center text-muted cursor-pointer p-4",3,"click",4,"ngIf"],["class","pt-2",4,"ngIf"],[1,"text-center","text-muted","cursor-pointer","p-4",3,"click"],[1,"fa","fa-plus-square"],[1,"pt-2"],[1,"w-100","inputs-table"],[4,"ngFor","ngForOf"],[1,"input-menu","cursor-pointer"],[1,"input-menu-icon",3,"inline","matMenuTriggerFor","matMenuTriggerData"],[1,"name-field","cursor-pointer",3,"click"],["class","fa fa-exclamation-circle text-danger text-tiny",4,"ngIf"],[1,"cursor-pointer",3,"click"],[1,"fa","fa-exclamation-circle","text-danger","text-tiny"],[3,"input","renderContext","allInputs","errors","onChange"],[1,"p-2"],["class","pt-1",4,"ngFor","ngForOf"],[1,"pt-1"],[1,"text-danger","text-small"],[1,"fa","fa-exclamation-triangle"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"pl-4"],[1,"mr-1"],["class","fa fa-arrow-right mr-1 text-tiny",4,"ngIf"],[1,"fa","fa-arrow-right","mr-1","text-tiny"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"],["mat-button","",3,"click"],[1,"p-2","text-center","border-bottom"],[1,"text-capitalize"],[1,"text-bold"],["mat-menu-item","",3,"click"],[1,"far","fa-copy"],[1,"far","fa-trash-alt"]],template:function(t,e){1&t&&(n.Rb(0,"h1",0),n.Ec(1,"Chained Template"),n.Qb(),n.Rb(2,"div",1),n.Rb(3,"command-form",2),n.Zb("onChange",(function(t){return e.setCommand(t)})),n.Qb(),n.Rb(4,"div",3),n.Cc(5,D,10,2,"ng-container",4),n.Cc(6,P,2,4,"ng-container",4),n.Qb(),n.Cc(7,V,2,1,"div",5),n.Qb(),n.Rb(8,"div",6),n.Cc(9,Z,5,1,"ng-container",4),n.Cc(10,H,5,1,"ng-container",4),n.Qb(),n.Rb(11,"mat-menu",7,8),n.Cc(13,U,11,1,"ng-template",9),n.Qb()),2&t&&(n.Ab(3),n.jc("chainedTemplate",e.chainedTemplate),n.Ab(2),n.jc("ngIf","editInput"!==e.currentSection),n.Ab(1),n.jc("ngIf","editInput"===e.currentSection),n.Ab(1),n.jc("ngIf",e.errors.length>0),n.Ab(1),n.jc("align","end"),n.Ab(1),n.jc("ngIf","editInput"!==e.currentSection),n.Ab(1),n.jc("ngIf","editInput"===e.currentSection))},directives:[s.i,s.f,h,l.t,s.c,g.e,g.a,l.s,v.a,g.d,O,l.x,l.y,F.b,s.d,g.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}.input-menu[_ngcontent-%COMP%]{width:30px;padding:0!important;text-align:center}.input-menu-icon[_ngcontent-%COMP%]{display:none}.inputs-table[_ngcontent-%COMP%]   .name-field[_ngcontent-%COMP%]{min-width:200px}.inputs-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:2px 4px}.inputs-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.inputs-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover   .input-menu-icon[_ngcontent-%COMP%]{display:block!important}"]}),t})();var K=i("oFHb"),q=i("tyNb"),z=i("Qu3c");function J(t,e){1&t&&(n.Pb(0),n.Rb(1,"div",13),n.Ec(2,"No generators present in this chain. Click on 'Add Generator' to add one."),n.Qb(),n.Ob())}function W(t,e){if(1&t&&(n.Rb(0,"span"),n.Ec(1),n.Qb()),2&t){const t=n.dc().index;n.Ab(1),n.Fc(t+1)}}function Y(t,e){1&t&&(n.Rb(0,"span"),n.Mb(1,"i",29),n.Qb())}function B(t,e){1&t&&n.Mb(0,"i",39)}function tt(t,e){if(1&t&&(n.Pb(0),n.Rb(1,"span",37),n.Ec(2),n.Qb(),n.Cc(3,B,1,0,"i",38),n.Ob()),2&t){const t=e.$implicit,i=e.index,r=n.dc(2).$implicit;n.Ab(1),n.Db("text-danger",t.name===r.error.data.templateName),n.Ab(1),n.Fc(t.name),n.Ab(1),n.jc("ngIf",i<r.error.data.chainOrder.length-1)}}function et(t,e){if(1&t&&(n.Pb(0),n.Rb(1,"div",35),n.Cc(2,tt,4,4,"ng-container",36),n.Qb(),n.Ob()),2&t){const t=n.dc().$implicit;n.Ab(2),n.jc("ngForOf",t.error.data.chainOrder)}}function it(t,e){if(1&t&&(n.Rb(0,"div",31),n.Rb(1,"div",32),n.Mb(2,"i",29),n.Ec(3),n.Qb(),n.Pb(4,33),n.Cc(5,et,3,1,"ng-container",34),n.Ob(),n.Qb()),2&t){const t=e.$implicit;n.Ab(3),n.Gc(" ",t.error.message,""),n.Ab(1),n.jc("ngSwitch",t.error.type),n.Ab(1),n.jc("ngSwitchCase","circularChain")}}function nt(t,e){if(1&t&&(n.Rb(0,"div",20),n.Cc(1,it,6,3,"div",30),n.Qb()),2&t){const t=n.dc().$implicit;n.Ab(1),n.jc("ngForOf",t.errors)}}const rt=function(t,e){return{item:t,index:e}};function ot(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",15),n.Rb(1,"div",16),n.Rb(2,"div",17),n.Rb(3,"div",18),n.Cc(4,W,2,1,"span",9),n.Cc(5,Y,2,0,"span",9),n.Qb(),n.Qb(),n.Rb(6,"div",19),n.Rb(7,"div",20),n.Rb(8,"div",21),n.Rb(9,"div",22),n.Zb("click",(function(){n.rc(t);const i=e.$implicit,r=e.index;return n.dc(2).editCommand(i,r)})),n.Ec(10),n.Rb(11,"span",23),n.Ec(12),n.Qb(),n.Qb(),n.Rb(13,"div",24),n.Rb(14,"span",25),n.Zb("click",(function(){n.rc(t);const i=e.$implicit,r=e.index;return n.dc(2).editCommand(i,r)})),n.Ec(15,"Edit"),n.Qb(),n.Rb(16,"mat-icon",26),n.Ec(17,"more_vert"),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(18,"div",22),n.Zb("click",(function(){n.rc(t);const i=e.$implicit,r=e.index;return n.dc(2).editCommand(i,r)})),n.Rb(19,"div",27),n.Ec(20,"Inputs:"),n.Qb(),n.Rb(21,"pre"),n.Ec(22),n.ec(23,"json"),n.Qb(),n.Qb(),n.Cc(24,nt,2,1,"div",28),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=e.$implicit,i=e.index;n.dc(2);const r=n.oc(14);n.Ab(3),n.Db("chain-command-error",t.errors.length>0),n.Ab(1),n.jc("ngIf",0===t.errors.length),n.Ab(1),n.jc("ngIf",t.errors.length>0),n.Ab(5),n.Gc("",null==t.item?null:t.item.name," "),n.Ab(2),n.Gc("[",null==t.item?null:t.item.parent.name,"]"),n.Ab(4),n.jc("matMenuTriggerFor",r)("matMenuTriggerData",n.mc(13,rt,t,i))("inline",!0),n.Ab(6),n.Fc(n.fc(23,11,t.inputs)),n.Ab(2),n.jc("ngIf",t.errors.length>0)}}function st(t,e){if(1&t&&(n.Pb(0),n.Cc(1,ot,25,16,"div",14),n.Ob()),2&t){const t=n.dc();n.Ab(1),n.jc("ngForOf",t.chainedTemplates)}}function ct(t,e){if(1&t){const t=n.Sb();n.Rb(0,"button",40),n.Zb("click",(function(){n.rc(t);const i=e.index;return n.dc().addCommandBefore(i)})),n.Rb(1,"span"),n.Ec(2,"Add New Item Before"),n.Qb(),n.Qb(),n.Rb(3,"button",40),n.Zb("click",(function(){n.rc(t);const i=e.index;return n.dc().addCommandAfter(i)})),n.Rb(4,"span"),n.Ec(5,"Add New Item After"),n.Qb(),n.Qb(),n.Rb(6,"button",40),n.Zb("click",(function(){n.rc(t);const i=e.item;return n.dc().deleteCommand(i)})),n.Rb(7,"span"),n.Ec(8,"Delete Item"),n.Qb(),n.Qb()}}let at=(()=>{class t{constructor(t,e,i){this.templateService=t,this.bluService=e,this.dialog=i,this.errors=[],this.onConfigUpdated=new n.o,this.sectionErrors=[],this.chainedTemplates=[],this.subs=new o.a}ngOnInit(){this.bluService.getItems().subscribe(t=>{this.items=t,this.initCommands()})}initCommands(){var t;this.sectionErrors=this.getErrors(),this.chainedTemplates=(null!==(t=this.item.chainedTemplates)&&void 0!==t?t:[]).map(t=>{var e;const i=null===(e=this.items)||void 0===e?void 0:e.find(e=>e.id===t.templateId);return{templateId:t.templateId,inputs:t.inputs,item:i,errors:this.sectionErrors.filter(e=>e.error.data.templateId===t.templateId)}})}ngOnChanges(t){this.sectionErrors=this.getErrors(),this.initCommands()}ngOnDestroy(){this.subs.unsubscribe()}getErrors(){return this.errors.filter(t=>t.executeContext.item.id===this.item.id&&t.error.origin.location===r.a.Execute.ErrorLocation.config&&t.error.origin.section===r.a.Execute.ErrorSection.chainedTemplates)}configUpdated(){this.onConfigUpdated.emit(!0)}editCommand(t,e){this.openCommandDialog(t,"edit",e)}createCommand(){this.openCommandDialog(null,"create",-1)}deleteCommand(t){const e=this.item.chainedTemplates.findIndex(e=>e.templateId===t.templateId);e>=0&&(this.item.chainedTemplates.splice(e,1),this.saveConfig())}saveConfig(){this.subs.add(this.templateService.updateCommands(this.item.chainedTemplates,this.item.id).subscribe(t=>{this.initCommands(),this.configUpdated()}))}addCommandBefore(t){this.openCommandDialog(null,"create",t)}addCommandAfter(t){this.openCommandDialog(null,"create",t+1)}openCommandDialog(t,e,i){var n;const r=this.dialog.open(X,{data:{chainedTemplate:t?{templateId:t.templateId,inputs:t.inputs}:null,type:e,index:i,renderContext:this.renderContext,errors:null!==(n=null==t?void 0:t.errors)&&void 0!==n?n:[]},width:"600px",position:{top:"100px"},autoFocus:!0});this.subs.add(r.afterClosed().subscribe(t=>{"create"===t.type?(-1===i?this.item.chainedTemplates.push(t.chainedTemplate):this.item.chainedTemplates.splice(t.index,0,t.chainedTemplate),this.saveConfig()):"edit"===t.type&&(this.item.chainedTemplates.splice(t.index,1,t.chainedTemplate),this.saveConfig())}))}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(K.a),n.Lb(d.a),n.Lb(s.b))},t.\u0275cmp=n.Fb({type:t,selectors:[["config-commands"]],inputs:{item:"item",renderContext:"renderContext",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[n.yb],decls:16,vars:5,consts:[[1,"p-2","py-3"],[1,"fa","fa-list","text-muted","text-small"],[1,"text-small","as-link","ml-2",3,"routerLink","matTooltip"],[1,"fa","fa-info-circle"],[1,"px-2"],[1,"position-relative","pt-2"],[1,"d-flex","align-items-start","pb-2"],[1,"ml-auto"],["mat-button","",3,"click"],[4,"ngIf"],[3,"overlapTrigger"],["commandMenu","matMenu"],["matMenuContent",""],[1,"p-2","text-center"],["class","border p-2 mb-2 chain-command rounded",4,"ngFor","ngForOf"],[1,"border","p-2","mb-2","chain-command","rounded"],[1,"d-flex","align-items-start"],[1,"pr-3","pl-1"],[1,"chain-index"],[1,"flex-grow-1"],[1,""],[1,"d-flex","align-items-end"],[1,"cursor-pointer",3,"click"],[1,"text-tiny","text-muted"],[1,"ml-auto","cursor-pointer"],[1,"mr-2",3,"click"],[1,"item-menu",3,"matMenuTriggerFor","matMenuTriggerData","inline"],[1,"text-muted","small"],["class","",4,"ngIf"],[1,"fa","fa-exclamation-triangle"],["class","pt-1",4,"ngFor","ngForOf"],[1,"pt-1"],[1,"text-danger","text-small"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"pl-4"],[4,"ngFor","ngForOf"],[1,"mr-1"],["class","fa fa-arrow-right mr-1 text-tiny",4,"ngIf"],[1,"fa","fa-arrow-right","mr-1","text-tiny"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Mb(1,"i",1),n.Ec(2," List of chained Generators "),n.Rb(3,"span",2),n.Mb(4,"i",3),n.Qb(),n.Qb(),n.Rb(5,"div",4),n.Rb(6,"div",5),n.Rb(7,"div",6),n.Rb(8,"div",7),n.Rb(9,"button",8),n.Zb("click",(function(){return e.createCommand()})),n.Ec(10,"+ Add Generator"),n.Qb(),n.Qb(),n.Qb(),n.Cc(11,J,3,0,"ng-container",9),n.Cc(12,st,2,1,"ng-container",9),n.Qb(),n.Qb(),n.Rb(13,"mat-menu",10,11),n.Cc(15,ct,9,0,"ng-template",12),n.Qb()),2&t&&(n.Ab(3),n.jc("routerLink","/documentation/generator-config/chains")("matTooltip","More info"),n.Ab(8),n.jc("ngIf",0===e.chainedTemplates.length),n.Ab(1),n.jc("ngIf",e.chainedTemplates.length>0),n.Ab(1),n.jc("overlapTrigger",!0))},directives:[q.d,z.a,F.b,l.t,g.e,g.a,l.s,v.a,g.d,l.x,l.y,g.b],pipes:[l.k],styles:[".chain-index[_ngcontent-%COMP%]{background-color:#6c757d;color:#fff;font-weight:700;font-size:18px;border-radius:20px;padding:10px 15px}.chain-command[_ngcontent-%COMP%]{background-color:#f1f1f1}.chain-command-error[_ngcontent-%COMP%]{background-color:#dc3545!important}"]}),t})()},R7WQ:function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("ofXK"),r=i("jAiH"),o=i("fXoL");let s=(()=>{class t{}return t.\u0275mod=o.Jb({type:t}),t.\u0275inj=o.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.a]]}),t})()},SWd6:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("ofXK"),r=i("xyCH"),o=i("tyNb"),s=i("Qu3c"),c=i("fXoL");let a=(()=>{class t{}return t.\u0275mod=c.Jb({type:t}),t.\u0275inj=c.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.a,o.f,s.b]]}),t})()},"aH/c":function(t,e,i){"use strict";i.d(e,"a",(function(){return d}));var n=i("ofXK"),r=i("xyCH"),o=i("R7WQ"),s=i("tyNb"),c=i("Qu3c"),a=i("fXoL");let d=(()=>{class t{}return t.\u0275mod=a.Jb({type:t}),t.\u0275inj=a.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.a,o.a,s.f,c.b]]}),t})()},f4ua:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("ofXK"),r=i("fXoL");let o=(()=>{class t{}return t.\u0275mod=r.Jb({type:t}),t.\u0275inj=r.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c]]}),t})()},h6DH:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("fXoL");let r=(()=>{class t{constructor(){}ngOnInit(){}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Fb({type:t,selectors:[["config-links"]],decls:4,vars:0,consts:[[1,"p-2","py-3"],[1,"fa","fa-link","text-muted","text-small"],[1,"p-2"]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Mb(1,"i",1),n.Ec(2," Links\n"),n.Qb(),n.Mb(3,"div",2))},styles:[""]}),t})()},jysj:function(t,e,i){"use strict";i.d(e,"a",(function(){return S}));var n=i("0IaG"),r=i("quSY"),o=i("aSHc"),s=i("fXoL"),c=i("3Pt+"),a=i("CQMr"),d=i("ofXK"),l=i("bTqV"),u=i("Kj3r"),b=i("kmnG"),m=i("qFsG"),f=i("1jDz");function p(t,e){1&t&&(s.Rb(0,"mat-error"),s.Ec(1,"Input is required"),s.Qb())}function h(t,e){1&t&&(s.Rb(0,"mat-error"),s.Ec(1,"Only alpha-numeric and _ characters allowed"),s.Qb())}function g(t,e){if(1&t&&(s.Rb(0,"div",14),s.Mb(1,"i",15),s.Ec(2),s.Qb()),2&t){const t=e.$implicit;s.Ab(2),s.Gc(" ",null!=t.error.data&&null!=t.error.data.syntaxError&&t.error.data.syntaxError.error?null==t.error.data||null==t.error.data.syntaxError?null:t.error.data.syntaxError.error:null==t.error.data?null:t.error.data.message," ")}}function v(t,e){if(1&t&&(s.Rb(0,"div",12),s.Cc(1,g,3,1,"div",13),s.Qb()),2&t){const t=s.dc();s.Ab(1),s.jc("ngForOf",t.errors)}}let x=(()=>{class t{constructor(t){this.fb=t,this.form=new s.o,this.editorOptions={language:"javascript"},this.subs=new r.a}ngOnInit(){var t,e;this.functionText=""+(null!==(e=null===(t=this.functionForm)||void 0===t?void 0:t.contents)&&void 0!==e?e:""),this.initForm(),this.subs.add(this.formGroup.valueChanges.pipe(Object(u.a)(500)).subscribe(t=>{this.form.emit(this.formGroup)}))}initForm(){this.formGroup=this.fb.group({name:[this.functionForm.name,[c.F.required,c.F.pattern(/^[a-zA-Z0-9_]+$/)]],description:[this.functionForm.description,[]],contents:[this.functionForm.contents,[c.F.required]]})}get f(){return this.formGroup.controls}ngOnDestroy(){this.subs.unsubscribe()}saveFunction(t){this.f.contents.setValue(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(c.f))},t.\u0275cmp=s.Fb({type:t,selectors:[["functions-form"]],inputs:{functionForm:"functionForm",errors:"errors"},outputs:{form:"form"},decls:16,vars:7,consts:[[1,"mat-form",3,"formGroup"],[1,""],[1,"w-100"],["placeholder","Function name","type","text","matInput","","formControlName","name","required",""],[4,"ngIf"],[1,"pt-1"],["placeholder","Function Description","type","text","matInput","","formControlName","description"],[1,"row"],[1,"col"],[1,"pb-1"],["class","py-2",4,"ngIf"],[3,"text","editorOptions","height","onContentChange"],[1,"py-2"],["class","text-danger small",4,"ngFor","ngForOf"],[1,"text-danger","small"],[1,"fa","fa-exclamation-triangle","text-danger","text-small"]],template:function(t,e){1&t&&(s.Rb(0,"form",0),s.Rb(1,"div",1),s.Rb(2,"mat-form-field",2),s.Mb(3,"input",3),s.Cc(4,p,2,0,"mat-error",4),s.Cc(5,h,2,0,"mat-error",4),s.Qb(),s.Qb(),s.Rb(6,"div",5),s.Rb(7,"mat-form-field",2),s.Mb(8,"textarea",6),s.Qb(),s.Qb(),s.Qb(),s.Rb(9,"div",7),s.Rb(10,"div",8),s.Rb(11,"div",9),s.Rb(12,"div"),s.Ec(13,"Javascript Function:"),s.Qb(),s.Cc(14,v,2,1,"div",10),s.Qb(),s.Rb(15,"file-editor",11),s.Zb("onContentChange",(function(t){return e.saveFunction(t)})),s.Qb(),s.Qb(),s.Qb()),2&t&&(s.jc("formGroup",e.formGroup),s.Ab(4),s.jc("ngIf",null==e.f.name||null==e.f.name.errors?null:e.f.name.errors.required),s.Ab(1),s.jc("ngIf",null==e.f.name||null==e.f.name.errors?null:e.f.name.errors.pattern),s.Ab(9),s.jc("ngIf",e.errors.length>0),s.Ab(1),s.jc("text",e.functionText)("editorOptions",e.editorOptions)("height","400px"))},directives:[c.H,c.s,c.k,b.c,m.a,c.c,c.r,c.i,c.C,d.t,f.a,b.b,d.s],styles:[""]}),t})();function C(t,e){1&t&&(s.Rb(0,"div",2),s.Rb(1,"div",10),s.Mb(2,"i",11),s.Ec(3," Saved"),s.Qb(),s.Qb())}function y(t,e){1&t&&(s.Rb(0,"div",2),s.Rb(1,"div",10),s.Ec(2,"...saving"),s.Qb(),s.Qb())}function R(t,e){1&t&&(s.Rb(0,"div",2),s.Rb(1,"div",12),s.Mb(2,"i",13),s.Rb(3,"span",2),s.Ec(4," has errors"),s.Qb(),s.Qb(),s.Qb())}function Q(t,e){if(1&t){const t=s.Sb();s.Rb(0,"div",2),s.Rb(1,"functions-form",14),s.Zb("form",(function(e){return s.rc(t),s.dc().formChanged(e)})),s.Qb(),s.Qb()}if(2&t){const t=s.dc();s.Ab(1),s.jc("functionForm",t.functionForm)("errors",t.errors)}}let I=(()=>{class t{constructor(t,e,i,n){this.fb=t,this.data=e,this.functionService=i,this.dialogRef=n,this.currentState=o.a.IDLE,this.actionState=o.a,this.subs=new r.a}ngOnInit(){var t;this.errors=null!==(t=this.data.errors)&&void 0!==t?t:[],this.subs.add(this.functionService.getFunction(this.data.id).subscribe(t=>{this.functionForm={name:t.name,description:t.description,contents:t.contents}}))}ngOnDestroy(){}formChanged(t){this.form=t,this.saveForm()}saveForm(){this.updateFunction()}updateFunction(){if(this.form)if(this.form.valid){this.currentState=o.a.PENDING;const{name:t,description:e,contents:i}=this.form.value;t&&this.functionService.updateFunction(this.data.id,t,i,e).subscribe(t=>{this.currentState=o.a.SUCCESS})}else this.form.dirty&&(this.currentState=o.a.ERROR)}close(t){this.dialogRef.close({updated:t})}}return t.\u0275fac=function(e){return new(e||t)(s.Lb(c.f),s.Lb(n.a),s.Lb(a.a),s.Lb(n.h))},t.\u0275cmp=s.Fb({type:t,selectors:[["edit-function-dialog"]],decls:15,vars:6,consts:[["mat-dialog-title",""],[1,"d-flex","align-items-center"],[1,""],[1,"ml-auto","pr-2","text-small"],[3,"ngSwitch"],["class","",4,"ngSwitchCase"],["mat-dialog-content",""],["class","",4,"ngIf"],["mat-dialog-actions","",3,"align"],["mat-button","",3,"click"],[1,"ml-auto","text-success"],[1,"fa","fa-check-circle"],[1,"ml-auto","text-warning"],[1,"fa","fa-exclamation-triangle","text-warning"],[3,"functionForm","errors","form"]],template:function(t,e){1&t&&(s.Rb(0,"div",0),s.Rb(1,"div",1),s.Rb(2,"div",2),s.Rb(3,"h3"),s.Ec(4,"Edit Function"),s.Qb(),s.Qb(),s.Rb(5,"div",3),s.Pb(6,4),s.Cc(7,C,4,0,"div",5),s.Cc(8,y,3,0,"div",5),s.Cc(9,R,5,0,"div",5),s.Ob(),s.Qb(),s.Qb(),s.Qb(),s.Rb(10,"div",6),s.Cc(11,Q,2,2,"div",7),s.Qb(),s.Rb(12,"div",8),s.Rb(13,"button",9),s.Zb("click",(function(){return e.close(!0)})),s.Ec(14,"Close"),s.Qb(),s.Qb()),2&t&&(s.Ab(6),s.jc("ngSwitch",e.currentState),s.Ab(1),s.jc("ngSwitchCase",e.actionState.SUCCESS),s.Ab(1),s.jc("ngSwitchCase",e.actionState.PENDING),s.Ab(1),s.jc("ngSwitchCase",e.actionState.ERROR),s.Ab(2),s.jc("ngIf",e.functionForm),s.Ab(1),s.jc("align","end"))},directives:[n.i,d.x,d.y,n.f,d.t,n.c,l.b,x],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var E=i("lJxs");let S=(()=>{class t{constructor(t,e){this.dialog=t,this.functionService=e}editFunction(t,e){return this.dialog.open(I,{data:{id:t,errors:e},minWidth:"800px",position:{top:"100px"},autoFocus:!0})}createNewFunction(t,e,i,n){return this.functionService.createFunction(t,e,null!=i?i:this.getDefaultFunctionContents(),n)}createAndEditFunction(t,e,i,n){return this.functionService.createFunction(t,e,null!=i?i:this.getDefaultFunctionContents(),n).pipe(Object(E.a)(t=>this.editFunction(t.function.id)))}getDefaultFunctionContents(){return"(param) => {\n  return param;\n}"}}return t.\u0275fac=function(e){return new(e||t)(s.Vb(n.b),s.Vb(a.a))},t.\u0275prov=s.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},kiD8:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL"),r=i("nhot");let o=(()=>{class t{constructor(t){var e;this.appStateService=t,this.tooltipsDismissed={},this.stateKey="tooltipsDismissed",this.tooltipsDismissed=null!==(e=this.appStateService.appState[this.stateKey])&&void 0!==e?e:{}}hasSeenTooltip(t){return!!this.tooltipsDismissed[t]}markTooltipAsSeen(t){this.tooltipsDismissed[t]=!0,this.appStateService.setAppState(this.stateKey,this.tooltipsDismissed)}dismissTooltip(t){this.markTooltipAsSeen(t)}showTooltip(t){return!this.tooltipsDismissed[t]}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(r.a))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},"m/dn":function(t,e,i){"use strict";i.d(e,"a",(function(){return b}));var n=i("fXoL"),r=i("XNiG"),o=i("quSY"),s=i("Kj3r"),c=i("/uUt"),a=i("tlDy"),d=i("Qu3c"),l=i("tyNb"),u=i("1jDz");let b=(()=>{class t{constructor(t){this.itemService=t,this.onConfigUpdated=new n.o,this.property="description",this.descriptionText=null,this.editorOptions={language:"txt",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1},this.textToSave$=new r.a,this.subs=new o.a}ngOnInit(){this.editProperty(this.item),this.subs.add(this.textToSave$.pipe(Object(s.a)(250),Object(c.a)()).subscribe(t=>{this.selectedItem.config.description=t,this.saveForm()}))}ngOnDestroy(){this.subs.unsubscribe()}editProperty(t){setTimeout(()=>{this.descriptionText=null==t?void 0:t.config.description,this.selectedItem=t},20)}saveForm(){this.subs.add(this.itemService.updateConfig(this.selectedItem.id,this.selectedItem.config).subscribe(t=>this.onConfigUpdated.emit(!0)))}saveDescription(t){this.textToSave$.next(t)}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(a.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["config-description"]],inputs:{item:"item"},outputs:{onConfigUpdated:"onConfigUpdated"},decls:8,vars:5,consts:[[1,"p-2","py-3"],[1,"fa","fa-info-circle","text-muted","text-small"],[1,"text-small","as-link","ml-2",3,"matTooltip","routerLink"],[1,"fa","fa-info-circle"],[1,"p-2"],[1,"p-2","border","border-radius"],[3,"text","editorOptions","height","onContentChange"]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Mb(1,"i",1),n.Ec(2," Description "),n.Rb(3,"span",2),n.Mb(4,"i",3),n.Qb(),n.Qb(),n.Rb(5,"div",4),n.Rb(6,"div",5),n.Rb(7,"file-editor",6),n.Zb("onContentChange",(function(t){return e.saveDescription(t)})),n.Qb(),n.Qb(),n.Qb()),2&t&&(n.Ab(3),n.jc("matTooltip","More Info")("routerLink","/documentation/generator-config/description"),n.Ab(4),n.jc("text",e.descriptionText)("editorOptions",e.editorOptions)("height","60px"))},directives:[d.a,l.d,u.a],styles:[""]}),t})()},mjoc:function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("fXoL"),r=i("quSY"),o=i("eIep"),s=i("Mzu6"),c=i("0IaG"),a=i("CQMr"),d=i("kiD8"),l=i("jysj"),u=i("Qu3c"),b=i("tyNb"),m=i("ofXK"),f=i("STbY"),p=i("bTqV"),h=i("NFeN");function g(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",11),n.Rb(1,"div",12),n.Mb(2,"i",13),n.Qb(),n.Rb(3,"div",14),n.Ec(4,"Why are there multiple places to add "),n.Rb(5,"span",15),n.Ec(6,"custom functions"),n.Qb(),n.Ec(7,"? Where should I add a custom function? "),n.Rb(8,"span",15),n.Ec(9,"Find out how Stackjoy looks for functions"),n.Qb(),n.Ec(10,". "),n.Qb(),n.Rb(11,"div",16),n.Rb(12,"button",17),n.Zb("click",(function(){return n.rc(t),n.dc().tooltipService.dismissTooltip("config-functions-hierarchy-tooltip")})),n.Ec(13,"Dismiss"),n.Qb(),n.Qb(),n.Qb()}2&t&&(n.Ab(5),n.jc("routerLink","/documentation/generator-config/functions"),n.Ab(3),n.jc("routerLink","/documentation/structure/hierarchy"))}function v(t,e){1&t&&n.Mb(0,"i",39)}const x=function(t,e){return{item:t,func:e}};function C(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",30),n.Rb(1,"div",31),n.Mb(2,"div",32),n.Qb(),n.Rb(3,"div",33),n.Zb("click",(function(){n.rc(t);const i=e.$implicit,r=n.dc().$implicit;return n.dc().editFunction(r.item,i)})),n.Rb(4,"div",34),n.Ec(5),n.Cc(6,v,1,0,"i",35),n.Qb(),n.Rb(7,"div",36),n.Ec(8),n.Qb(),n.Qb(),n.Rb(9,"div",37),n.Rb(10,"mat-icon",38),n.Ec(11,"more_vert"),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=e.$implicit,i=n.dc().$implicit,r=n.dc(),o=n.oc(10);n.Ab(4),n.Db("text-danger",r.functionErrors[t.id]),n.Ab(1),n.Gc(" ",t.name?t.name:"[name required]"," "),n.Ab(1),n.jc("ngIf",r.functionErrors[t.id]),n.Ab(2),n.Fc(t.description),n.Ab(2),n.jc("inline",!0)("matMenuTriggerFor",o)("matMenuTriggerData",n.mc(8,x,i.item,t))}}const y=function(t){return{"padding-left":t}};function R(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",18),n.Rb(1,"div",19),n.Rb(2,"div",20),n.Rb(3,"div",21),n.Rb(4,"div",19),n.Mb(5,"i",22),n.Rb(6,"span",23),n.Ec(7),n.Qb(),n.Rb(8,"span",24),n.Ec(9),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Rb(10,"div",25),n.Rb(11,"div",19),n.Cc(12,C,12,11,"div",26),n.Rb(13,"div",27),n.Zb("click",(function(){n.rc(t);const i=e.$implicit;return n.dc().createNewFunction(i.item)})),n.Rb(14,"button",28),n.Mb(15,"i",29),n.Ec(16),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb(),n.Qb()}if(2&t){const t=e.$implicit,i=e.index;n.Ab(1),n.yc(n.lc(6,y,10*i+"px")),n.Ab(6),n.Fc(t.item.name),n.Ab(2),n.Gc("[","template"===t.item.type?"generator":t.item.type,"]"),n.Ab(3),n.jc("ngForOf",t.functions),n.Ab(4),n.Gc(" Add a custom function to ","template"===t.item.type?"generator":t.item.type," ")}}function Q(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",40),n.Rb(1,"span",41),n.Ec(2,"Function: "),n.Qb(),n.Rb(3,"span",42),n.Ec(4),n.Qb(),n.Qb(),n.Rb(5,"button",43),n.Zb("click",(function(){n.rc(t);const i=e.item,r=e.func;return n.dc().duplicateFunction(i,r)})),n.Mb(6,"i",44),n.Ec(7," Duplicate"),n.Qb(),n.Rb(8,"button",43),n.Zb("click",(function(){n.rc(t);const i=e.item,r=e.func;return n.dc().deleteFunction(i,r)})),n.Mb(9,"i",45),n.Ec(10," Delete"),n.Qb()}if(2&t){const t=e.func;n.Ab(4),n.Fc(t.name)}}let I=(()=>{class t{constructor(t,e,i,o){this.dialog=t,this.functionService=e,this.tooltipService=i,this.itemConfigService=o,this.errors=[],this.onConfigUpdated=new n.o,this.hierarchy=[],this.functionErrors={},this.subs=new r.a}ngOnInit(){this.setErrors(),this.determineHierarchy()}ngOnChanges(t){this.setErrors(),this.determineHierarchy()}determineHierarchy(){this.hierarchy=[];let t=this.item;if(t)for(this.setHierarchy(t);t.parent;)this.setHierarchy(t.parent),t=t.parent}setHierarchy(t){this.hierarchy.unshift({item:t,functions:t.functions})}ngOnDestroy(){this.subs.unsubscribe()}getPadding(t){return 20*t+"px"}formChanged(t){this.form=t}setErrors(){const t={};this.errors.forEach(e=>{var i,n,r,o,s;"functionError"===(null===(n=null===(i=e.error.data)||void 0===i?void 0:i.syntaxError)||void 0===n?void 0:n.type)&&(t[null===(r=e.error.data.syntaxError.funcObj)||void 0===r?void 0:r.id]||(t[null===(o=e.error.data.syntaxError.funcObj)||void 0===o?void 0:o.id]=[]),t[null===(s=e.error.data.syntaxError.funcObj)||void 0===s?void 0:s.id].push(e))}),this.functionErrors=t}createNewFunction(t){this.subs.add(this.itemConfigService.createAndEditFunction(t.id).pipe(Object(o.a)(t=>t.afterClosed())).subscribe(t=>this.configUpdated()))}editFunction(t,e){var i;const n=this.itemConfigService.editFunction(e.id,null!==(i=this.functionErrors[e.id])&&void 0!==i?i:[]);this.subs.add(n.afterClosed().subscribe(t=>this.configUpdated()))}configUpdated(){this.onConfigUpdated.emit(!0)}deleteFunction(t,e){this.dialog.open(s.a,{data:{title:`Delete function ${e.name}?`,text:"Deleting this function is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(i=>{!0===i&&this.subs.add(this.functionService.deleteFunction(e.id).subscribe(i=>{if(!0===i.success){const i=t.functions.findIndex(t=>t.id===e.id);i>=0&&t.functions.splice(i,1)}this.configUpdated()}))})}duplicateFunction(t,e){this.subs.add(this.functionService.duplicateFunction(e.id).subscribe(t=>this.configUpdated()))}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(c.b),n.Lb(a.a),n.Lb(d.a),n.Lb(l.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["config-functions"]],inputs:{item:"item",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[n.yb],decls:12,vars:4,consts:[[1,"p-2","pt-3"],[1,"fa","fa-magic","text-muted","text-small"],[1,"text-small","as-link","ml-2",3,"matTooltip","routerLink"],[1,"fa","fa-info-circle"],[1,"p-2"],["class","more-info-tip mb-3",4,"ngIf"],[1,"position-relative",2,"max-width","800px"],["class","cursor-pointer position-relative",4,"ngFor","ngForOf"],["yPosition","below"],["functionMenu","matMenu"],["matMenuContent",""],[1,"more-info-tip","mb-3"],[1,"tip-icon"],[1,"fa","fa-exclamation-circle","fa-2x"],[1,"tip-message"],[1,"as-link",3,"routerLink"],[1,"tip-button"],["mat-button","",3,"click"],[1,"cursor-pointer","position-relative"],[1,""],[1,"py-2"],[1,"d-flex","align-items-center"],[1,"fa","fa-chevron-right","text-tiny"],[1,"text-bold","mx-1"],[1,"text-tiny","text-muted"],[1,"pl-2","dashed-border"],["class","d-flex align-items-center config-item",4,"ngFor","ngForOf"],[1,"p-1","text-small","text-muted","ml-auto",3,"click"],["mat-button",""],[1,"fa","fa-plus-circle","text-tiny"],[1,"d-flex","align-items-center","config-item"],[1,"align-self-start","pr-2"],[1,"fa","fa-magic","text-tiny","text-muted"],[1,"",3,"click"],[1,"cursor-pointer","item-name"],["class","fa fa-exclamation-circle text-danger text-tiny",4,"ngIf"],[1,"text-muted","text-small"],[1,"item-menu","ml-auto","pr-3"],[1,"item-menu-icon",3,"inline","matMenuTriggerFor","matMenuTriggerData"],[1,"fa","fa-exclamation-circle","text-danger","text-tiny"],[1,"p-2","text-center","border-bottom"],[1,"text-capitalize"],[1,"text-bold"],["mat-menu-item","",3,"click"],[1,"far","fa-copy"],[1,"far","fa-trash-alt"]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Mb(1,"i",1),n.Ec(2," Functions "),n.Rb(3,"span",2),n.Mb(4,"i",3),n.Qb(),n.Qb(),n.Rb(5,"div",4),n.Cc(6,g,14,2,"div",5),n.Rb(7,"div",6),n.Cc(8,R,17,8,"div",7),n.Qb(),n.Qb(),n.Rb(9,"mat-menu",8,9),n.Cc(11,Q,11,1,"ng-template",10),n.Qb()),2&t&&(n.Ab(3),n.jc("matTooltip","More Info")("routerLink","/documentation/generator-config/functions"),n.Ab(3),n.jc("ngIf",e.tooltipService.showTooltip("config-functions-hierarchy-tooltip")),n.Ab(2),n.jc("ngForOf",e.hierarchy))},directives:[u.a,b.d,m.t,m.s,f.e,f.a,p.b,h.a,f.d,f.b],styles:[".dashed-border[_ngcontent-%COMP%]{border-left:1px dashed #d3d3d3;margin-left:2px}.config-item[_ngcontent-%COMP%]{padding:6px;border-radius:5px}.config-item[_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.config-item[_ngcontent-%COMP%]:hover   .item-menu-icon[_ngcontent-%COMP%]{display:block!important}.item-menu[_ngcontent-%COMP%]{font-size:18px;text-align:center}.item-menu[_ngcontent-%COMP%]   .item-menu-icon[_ngcontent-%COMP%]{display:none}.item-description[_ngcontent-%COMP%], .item-name[_ngcontent-%COMP%]{text-overflow:ellipsis}"]}),t})()},tlDy:function(t,e,i){"use strict";i.d(e,"a",(function(){return o}));var n=i("fXoL"),r=i("ZJV+");let o=(()=>{class t{constructor(t){this.httpService=t}updateReadme(t,e){return this.httpService.put(`/blueprints/item/${t}/readme`,{readme:e})}updateVariables(t,e){return this.httpService.put(`/blueprints/item/${t}/variables`,{variables:e})}updateConfig(t,e){return this.httpService.put(`/blueprints/item/${t}/config`,{config:e})}updateLinks(t,e){return this.httpService.put(`/blueprints/item/${t}/links`,{links:e})}}return t.\u0275fac=function(e){return new(e||t)(n.Vb(r.a))},t.\u0275prov=n.Hb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},ty4e:function(t,e,i){"use strict";i.d(e,"a",(function(){return R}));var n=i("fXoL"),r=i("GV7L"),o=i("XNiG"),s=i("quSY"),c=i("Kj3r"),a=i("/uUt"),d=i("tlDy"),l=i("+C0i"),u=i("Qu3c"),b=i("tyNb"),m=i("ofXK"),f=i("1jDz"),p=i("vazy");function h(t,e){if(1&t&&(n.Rb(0,"div",10),n.Mb(1,"i",11),n.Ec(2),n.Qb()),2&t){const t=e.$implicit;n.Ab(2),n.Gc(" ",t.error.data.message,"")}}function g(t,e){if(1&t&&(n.Rb(0,"div",8),n.Cc(1,h,3,1,"div",9),n.Qb()),2&t){const t=n.dc();n.Ab(1),n.jc("ngForOf",t.sectionErrors)}}function v(t,e){if(1&t&&(n.Pb(0),n.Rb(1,"div",20),n.Mb(2,"i",21),n.Ec(3," Rendered onSuccess"),n.Qb(),n.Rb(4,"div",22),n.Mb(5,"editor-run-success",23),n.Qb(),n.Ob()),2&t){const t=n.dc(4);n.Ab(5),n.jc("onSuccess",t.renderedOnSuccess)}}function x(t,e){if(1&t){const t=n.Sb();n.Rb(0,"div",15),n.Rb(1,"div",16),n.Rb(2,"file-editor",17),n.Zb("onEditorInit",(function(e){return n.rc(t),n.dc(3).onEditorInit(e)})),n.Qb(),n.Qb(),n.Rb(3,"div",18),n.Rb(4,"div",19),n.Ec(5," Note: use "),n.Rb(6,"b"),n.Ec(7,"``"),n.Qb(),n.Ec(8," (back ticks) to allow text to be copied in the console "),n.Qb(),n.Rb(9,"div",19),n.Ec(10," Example: "),n.Rb(11,"b"),n.Ec(12,"`this text can be coped easily in the console`"),n.Qb(),n.Qb(),n.Qb(),n.Cc(13,v,6,1,"ng-container",12),n.Qb()}if(2&t){const t=n.dc(3);n.Ab(2),n.jc("text",t.onSuccessText)("editorOptions",t.editorOptions)("height","250px"),n.Ab(11),n.jc("ngIf",t.renderedOnSuccess)}}function C(t,e){if(1&t&&(n.Pb(0),n.Rb(1,"div",13),n.Cc(2,x,14,4,"div",14),n.Qb(),n.Ob()),2&t){const t=n.dc(2);n.Ab(2),n.jc("ngIf",t.selectedItem)}}function y(t,e){if(1&t&&(n.Pb(0),n.Cc(1,C,3,1,"ng-container",12),n.Ob()),2&t){const t=e.$implicit;n.Ab(1),n.jc("ngIf",void 0!==t.property)}}let R=(()=>{class t{constructor(t,e){this.itemService=t,this.bluEditorService=e,this.errors=[],this.onConfigUpdated=new n.o,this.property="onSuccess",this.hierarchy=[],this.sectionErrors=[],this.onSuccessText=null,this.editorOptions={theme:"bluTheme",language:"bluLanguage",lineNumbers:"off",glyphMargin:!1,lineDecorationsWidth:"5px",renderLineHighlight:"none",folding:!1},this.textToSave$=new o.a,this.subs=new s.a}ngOnInit(){this.determineHierarchy(),this.sectionErrors=this.getErrors(),this.editProperty(this.item),this.subs.add(this.textToSave$.pipe(Object(c.a)(250),Object(a.a)()).subscribe(t=>{this.selectedItem.config.onSuccess=t,this.saveForm()}))}ngOnChanges(t){this.sectionErrors=this.getErrors()}determineHierarchy(){this.hierarchy=[];let t=this.item;for(this.setHierarchy(t);t.parent;)this.setHierarchy(t.parent),t=t.parent}setHierarchy(t){this.hierarchy.unshift({item:t,property:t.config[this.property]})}ngOnDestroy(){this.subs.unsubscribe()}editProperty(t){setTimeout(()=>{this.onSuccessText=t.config.onSuccess,this.selectedItem=t},20)}saveForm(){this.subs.add(this.itemService.updateConfig(this.selectedItem.id,this.selectedItem.config).subscribe(t=>this.onConfigUpdated.emit(!0)))}getErrors(){const t=[];return this.hierarchy.forEach(e=>{const i=this.errors.filter(t=>t.executeContext.item.id===e.item.id&&t.error.origin.location===r.a.Execute.ErrorLocation.config&&t.error.origin.section===r.a.Execute.ErrorSection.onSuccess);t.push(...i)}),t}onEditorInit(t){this.editorModel=t,this.setContext(),this.editorModel.onDidChangeContent(t=>{this.textToSave$.next(this.editorModel.getValue())})}setContext(){this.editorModel&&this.bluEditorService.registerCompletionProvider(monaco,this.renderContext)}}return t.\u0275fac=function(e){return new(e||t)(n.Lb(d.a),n.Lb(l.a))},t.\u0275cmp=n.Fb({type:t,selectors:[["config-on-success"]],inputs:{item:"item",renderContext:"renderContext",renderedOnSuccess:"renderedOnSuccess",errors:"errors"},outputs:{onConfigUpdated:"onConfigUpdated"},features:[n.yb],decls:9,vars:4,consts:[[1,"p-2","py-3"],[1,"fa","fa-check","text-muted","text-small"],[1,"text-small","as-link","ml-2",3,"matTooltip","routerLink"],[1,"fa","fa-info-circle"],[1,"p-2"],["class","pb-2",4,"ngIf"],[1,"position-relative"],[4,"ngFor","ngForOf"],[1,"pb-2"],["class","text-danger text-small",4,"ngFor","ngForOf"],[1,"text-danger","text-small"],[1,"fa","fa-exclamation-triangle"],[4,"ngIf"],[1,"pb-2","cursor-pointer","position-relative"],["class","pl-2 pt-1",4,"ngIf"],[1,"pl-2","pt-1"],[1,"border","border-radius","p-1"],[3,"text","editorOptions","height","onEditorInit"],[1,"p-2","text-small","text-muted"],[1,"pl-1"],[1,"pt-3","pb-1","border-bottom"],[1,"far","fa-clipboard","text-small","text-muted"],[1,"p-2","on-success-message"],[3,"onSuccess"]],template:function(t,e){1&t&&(n.Rb(0,"div",0),n.Mb(1,"i",1),n.Ec(2," On Success "),n.Rb(3,"span",2),n.Mb(4,"i",3),n.Qb(),n.Qb(),n.Rb(5,"div",4),n.Cc(6,g,2,1,"div",5),n.Rb(7,"div",6),n.Cc(8,y,2,1,"ng-container",7),n.Qb(),n.Qb()),2&t&&(n.Ab(3),n.jc("matTooltip","More Info")("routerLink","/documentation/generator-config/on-success"),n.Ab(3),n.jc("ngIf",e.sectionErrors.length>0),n.Ab(2),n.jc("ngForOf",e.hierarchy))},directives:[u.a,b.d,m.t,m.s,f.a,p.a],styles:[".on-success-message[_ngcontent-%COMP%]{max-width:1000px;line-height:1.8}"]}),t})()},vazy:function(t,e,i){"use strict";i.d(e,"a",(function(){return f}));var n=i("+QRC"),r=i("fXoL"),o=i("sfUx"),s=i("AZ65"),c=i("ofXK");function a(t,e){if(1&t&&(r.Pb(0),r.Rb(1,"div",3),r.Rb(2,"pre",4),r.Ec(3),r.Qb(),r.Qb(),r.Ob()),2&t){const t=r.dc().$implicit;r.Ab(3),r.Fc(t.text)}}function d(t,e){1&t&&(r.Rb(0,"div",11),r.Mb(1,"i",12),r.Rb(2,"span",13),r.Ec(3," copied"),r.Qb(),r.Qb())}function l(t,e){1&t&&(r.Rb(0,"div",14),r.Mb(1,"i",15),r.Ec(2," (click to copy)"),r.Qb())}function u(t,e){if(1&t){const t=r.Sb();r.Pb(0),r.Rb(1,"div",5),r.Zb("click",(function(){r.rc(t);const e=r.dc(),i=e.$implicit,n=e.index;return r.dc(2).copyToClip(i.text,n)})),r.Rb(2,"div",6),r.Rb(3,"pre",7),r.Ec(4),r.Qb(),r.Qb(),r.Rb(5,"div",8),r.Cc(6,d,4,0,"div",9),r.Cc(7,l,3,0,"div",10),r.Qb(),r.Qb(),r.Ob()}if(2&t){const t=r.dc(),e=t.$implicit,i=t.index,n=r.dc(2);r.Ab(4),r.Fc(e.text),r.Ab(2),r.jc("ngIf",n.copiedIndex===i),r.Ab(1),r.jc("ngIf",n.copiedIndex!==i)}}function b(t,e){if(1&t&&(r.Rb(0,"div"),r.Cc(1,a,4,1,"ng-container",0),r.Cc(2,u,8,3,"ng-container",0),r.Qb()),2&t){const t=e.$implicit;r.Ab(1),r.jc("ngIf",!t.copy),r.Ab(1),r.jc("ngIf",t.copy)}}function m(t,e){if(1&t&&(r.Pb(0),r.Rb(1,"div",1),r.Cc(2,b,3,2,"div",2),r.Qb(),r.Ob()),2&t){const t=r.dc();r.Ab(2),r.jc("ngForOf",t.onSuccessList)}}let f=(()=>{class t{constructor(t,e){this.bluConsoleService=t,this.generatorService=e,this.onSuccessList=[]}ngOnInit(){this.renderOnSuccess()}ngOnChanges(t){this.renderOnSuccess()}renderOnSuccess(){this.onSuccessList=this.generatorService.parseOnSuccess(this.onSuccess)}ngOnDestroy(){}copyToClip(t,e){this.copiedIndex=e,n(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Lb(o.a),r.Lb(s.a))},t.\u0275cmp=r.Fb({type:t,selectors:[["editor-run-success"]],inputs:{onSuccess:"onSuccess"},features:[r.yb],decls:1,vars:1,consts:[[4,"ngIf"],[1,"pt-2"],[4,"ngFor","ngForOf"],[1,"d-flex","align-items-center","px-1"],[1,"text-small","m-0","text-muted"],[1,"cursor-pointer","d-flex","align-items-center","success-message","bg-highlight",3,"click"],[1,"px-1","flex-grow-1",2,"overflow","hidden"],[1,"m-0","text-small",2,"overflow","hidden","text-overflow","ellipsis"],[1,"text-right","pr-1",2,"min-width","100px"],["class","ml-auto",4,"ngIf"],["class","text-tiny ml-auto",4,"ngIf"],[1,"ml-auto"],[1,"fa","fa-check","fa-sm"],[1,"small"],[1,"text-tiny","ml-auto"],[1,"fa","fa-copy","ml-auto","fa-sm"]],template:function(t,e){1&t&&r.Cc(0,m,3,1,"ng-container",0),2&t&&r.jc("ngIf",(null==e.onSuccess?null:e.onSuccess.length)>0)},directives:[c.t,c.s],styles:[".top-border[_ngcontent-%COMP%]{border-top:1px dashed #666}.success-message[_ngcontent-%COMP%]{border:1px solid transparent}.success-message[_ngcontent-%COMP%]:hover{border:1px dashed #888}.bg-highlight[_ngcontent-%COMP%]{border-radius:5px;background-color:#f1f1f1}.text-to-copy[_ngcontent-%COMP%]{color:#fff;box-shadow:inset 0 0 1px #999;border-radius:2px}"]}),t})()},y2UV:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("ofXK"),r=i("bTqV"),o=i("fmAS"),s=i("STbY"),c=i("NFeN"),a=i("tyNb"),d=i("Qu3c"),l=i("fXoL");let u=(()=>{class t{}return t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,r.c,o.a,s.c,c.b,a.f,d.b]]}),t})()}}]);