(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{hTrQ:function(t,e,i){"use strict";i.r(e),i.d(e,"BlueprintsModule",(function(){return Me}));var n=i("ofXK"),c=i("tyNb"),o=i("At8x"),a=i("quSY"),s=i("fXoL"),l=i("Kxoc"),r=i("GV7L"),b=i("XNiG"),m=i("0IaG"),u=i("3Pt+"),d=i("aSHc"),p=i("3guR"),f=i("kmnG"),g=i("qFsG"),S=i("d3UM"),h=i("FKr1"),v=i("bTqV");function k(t,e){if(1&t&&(s.Sb(0,"span"),s.Fc(1,"Create New "),s.Sb(2,"span",9),s.Fc(3),s.Rb(),s.Rb()),2&t){const t=s.ec();s.Bb(3),s.Gc(t.data.itemType)}}function R(t,e){if(1&t&&(s.Sb(0,"span"),s.Fc(1,"Rename "),s.Sb(2,"span",9),s.Fc(3),s.Rb(),s.Fc(4),s.Rb()),2&t){const t=s.ec();s.Bb(3),s.Gc(t.data.itemType),s.Bb(1),s.Hc(": ",t.data.item.name,"")}}function C(t,e){if(1&t&&(s.Sb(0,"span"),s.Fc(1),s.Rb()),2&t){const t=s.ec();s.Bb(1),s.Hc(" in ",t.data.collection.name," collection")}}function I(t,e){1&t&&(s.Sb(0,"mat-error"),s.Fc(1,"Input is required"),s.Rb())}function B(t,e){if(1&t&&(s.Sb(0,"mat-option",11),s.Fc(1),s.Rb()),2&t){const t=e.$implicit;s.kc("value",t),s.Bb(1),s.Gc(t.name)}}function F(t,e){1&t&&(s.Sb(0,"mat-form-field",4),s.Nb(1,"input",15),s.Rb())}function y(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"mat-form-field",4),s.Sb(2,"mat-label"),s.Fc(3,"Add to Collection:"),s.Rb(),s.Sb(4,"mat-select",10),s.Sb(5,"mat-option",11),s.Nb(6,"i",12),s.Fc(7," Create New Collection"),s.Rb(),s.Dc(8,B,2,2,"mat-option",13),s.Rb(),s.Rb(),s.Dc(9,F,2,0,"mat-form-field",14),s.Pb()),2&t){const t=s.ec();s.Bb(5),s.kc("value","create-new-collection"),s.Bb(3),s.kc("ngForOf",t.collections),s.Bb(1),s.kc("ngIf",t.createNewCollection)}}function x(t,e){if(1&t&&(s.Sb(0,"div",16),s.Nb(1,"i",17),s.Fc(2),s.Rb()),2&t){const t=s.ec();s.Bb(2),s.Hc(" ",t.errorMessage," ")}}function P(t,e){if(1&t&&(s.Sb(0,"span"),s.Nb(1,"i",19),s.Sb(2,"span",9),s.Fc(3),s.Rb(),s.Fc(4," created successfully"),s.Rb()),2&t){const t=s.ec(2);s.Bb(3),s.Gc(t.data.itemType)}}function w(t,e){if(1&t&&(s.Sb(0,"span"),s.Nb(1,"i",19),s.Sb(2,"span",9),s.Fc(3),s.Rb(),s.Fc(4," renamed successfully"),s.Rb()),2&t){const t=s.ec(2);s.Bb(3),s.Gc(t.data.itemType)}}function T(t,e){if(1&t&&(s.Sb(0,"div",18),s.Dc(1,P,5,1,"span",1),s.Dc(2,w,5,1,"span",1),s.Rb()),2&t){const t=s.ec();s.Bb(1),s.kc("ngIf","create"===t.data.type),s.Bb(1),s.kc("ngIf","rename"===t.data.type)}}function D(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"button",20),s.Fc(2,"Cancel"),s.Rb(),s.Sb(3,"button",21),s.ac("click",(function(){return s.sc(t),s.ec().save()})),s.Fc(4,"Save"),s.Rb(),s.Pb()}if(2&t){const t=s.ec();s.Bb(3),s.kc("disabled",!(null!=t.form&&t.form.valid)||t.currentState===t.actionState.FAILED)}}function M(t,e){1&t&&(s.Qb(0),s.Sb(1,"button",20),s.Fc(2,"Close"),s.Rb(),s.Pb())}let O=(()=>{class t{constructor(t,e,i,n,c){this.fb=t,this.templateService=e,this.bluService=i,this.data=n,this.dialogRef=c,this.actionState=d.a,this.currentState=d.a.IDLE,this.collections=[]}ngOnInit(){var t,e,i,n;this.form=this.fb.group({name:[null===(t=this.data.item)||void 0===t?void 0:t.name,[u.E.required]],collection:[null!==(n=null===(i=null===(e=this.data)||void 0===e?void 0:e.collection)||void 0===i?void 0:i.name)&&void 0!==n?n:"",[u.E.required]],newCollectionName:[""]}),this.form.valueChanges.subscribe(t=>{this.createNewCollection="create-new-collection"===t.collection,this.form.get("newCollectionName").setValidators(this.createNewCollection?[u.E.required]:[])}),this.data.collection?this.form.get("collection").setValue(this.data.collection.name):this.bluService.getCollections().subscribe(t=>{this.collections=t,this.form.get("collection").setValue(this.collections[0].name)})}onSubmit(){this.currentState===d.a.SUCCESS?this.close():this.save()}close(){this.dialogRef.close(this.form.value)}save(){if(this.form.valid&&this.currentState!==d.a.FAILED)switch(this.data.itemType){case r.a.Item.Type.Template:"create"===this.data.type?this.createTemplate():this.renameTemplate()}}createTemplate(){var t,e,i,n;const c=null===(t=this.form.get("name"))||void 0===t?void 0:t.value;let o=null,a=null;this.createNewCollection?a=this.form.get("newCollectionName").value:o=this.form.get("collection").value.id;const s=null!==(n=null===(i=null===(e=this.data)||void 0===e?void 0:e.collection)||void 0===i?void 0:i.id)&&void 0!==n?n:o;this.templateService.createTemplate(c,s,[],a).subscribe(t=>{this.currentState=d.a.SUCCESS},t=>{var e;this.currentState=d.a.FAILED,this.errorMessage=null===(e=t.error)||void 0===e?void 0:e.message})}renameTemplate(){var t;const e=null===(t=this.form.get("name"))||void 0===t?void 0:t.value;this.templateService.renameTemplate(e,this.data.item.id).subscribe(t=>{this.currentState=d.a.SUCCESS},t=>{var e;this.currentState=d.a.FAILED,this.errorMessage=null===(e=t.error)||void 0===e?void 0:e.message})}get f(){var t;return null===(t=this.form)||void 0===t?void 0:t.controls}ngOnDestroy(){}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(u.f),s.Mb(p.a),s.Mb(l.a),s.Mb(m.a),s.Mb(m.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["new-template-dialog"]],decls:15,vars:12,consts:[["mat-dialog-title",""],[4,"ngIf"],["mat-dialog-content",""],[3,"formGroup","keyup.enter"],[1,"mat-form-field"],["matInput","","formControlName","name",3,"placeholder"],["class","text-small text-warning",4,"ngIf"],["class","text-success",4,"ngIf"],["mat-dialog-actions","",3,"align"],[1,"text-capitalize"],["formControlName","collection"],[3,"value"],[1,"fa","fa-plus-circle"],[3,"value",4,"ngFor","ngForOf"],["class","mat-form-field",4,"ngIf"],["matInput","","placeholder","New Collection Name","formControlName","newCollectionName"],[1,"text-small","text-warning"],[1,"fa","fa-exclamation-triangle"],[1,"text-success"],[1,"fa","fa-check"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(s.Sb(0,"h1",0),s.Dc(1,k,4,1,"span",1),s.Dc(2,R,5,2,"span",1),s.Dc(3,C,2,1,"span",1),s.Rb(),s.Sb(4,"div",2),s.Sb(5,"form",3),s.ac("keyup.enter",(function(){return e.onSubmit()})),s.Sb(6,"mat-form-field",4),s.Nb(7,"input",5),s.Dc(8,I,2,0,"mat-error",1),s.Rb(),s.Dc(9,y,10,3,"ng-container",1),s.Rb(),s.Dc(10,x,3,1,"div",6),s.Dc(11,T,3,2,"div",7),s.Rb(),s.Sb(12,"div",8),s.Dc(13,D,5,1,"ng-container",1),s.Dc(14,M,3,0,"ng-container",1),s.Rb()),2&t&&(s.Bb(1),s.kc("ngIf","create"===e.data.type),s.Bb(1),s.kc("ngIf","rename"===e.data.type),s.Bb(1),s.kc("ngIf",e.data.collection),s.Bb(2),s.kc("formGroup",e.form),s.Bb(2),s.kc("placeholder",e.data.itemType+"Name"),s.Bb(1),s.kc("ngIf",null==e.f||null==e.f.name||null==e.f.name.errors?null:e.f.name.errors.required),s.Bb(1),s.kc("ngIf",!(null!=e.data&&e.data.collection)),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.FAILED),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.SUCCESS),s.Bb(1),s.kc("align","end"),s.Bb(1),s.kc("ngIf",e.currentState!==e.actionState.SUCCESS),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.SUCCESS))},directives:[m.i,n.t,m.f,u.G,u.r,u.j,f.c,g.a,u.c,u.q,u.i,m.c,f.b,f.g,S.a,h.i,n.s,v.b,m.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var N=i("3sFK");let E=(()=>{class t{constructor(t,e){this.dialog=t,this.appEnvironmentService=e,this.onBlueprintsUpdated=new b.a,this.loadState()}get selectedItem(){return this.state.selectedItem.item}get selectedItemId(){return this.state.selectedItem.id}saveState(){this.appEnvironmentService.setEnvironmentState("blueprints-tree-state",this.state)}loadState(){var t;this.state=null!==(t=this.appEnvironmentService.currentEnvironmentState["blueprints-tree-state"])&&void 0!==t?t:this.defaultState}getLastSelectedItem(t){return this.findItem(this.selectedItemId,t)}createTemplate(t){this.dialog.open(O,{data:{blueprints:this.blueprints,type:"create",collection:t,itemType:r.a.Item.Type.Template},width:"50%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.updateBlueprints())}createCollection(){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"create"},width:"50%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.updateBlueprints()})}updateBlueprints(){this.onBlueprintsUpdated.next(!0)}findItem(t,e){let i;return e.item.id===t?i=e.item:(e.collections.forEach(e=>{e.item.id===t?i=e.item:e.templates.forEach(e=>{e.id===t&&(i=e)})}),i||e.stacks.forEach(e=>{i||(i=this.findItem(t,e))})),i}get defaultState(){return{tree:{},selectedItem:{id:null,item:null}}}}return t.\u0275fac=function(e){return new(e||t)(s.Wb(m.b),s.Wb(N.a))},t.\u0275prov=s.Ib({token:t,factory:t.\u0275fac}),t})();function G(t,e){1&t&&s.Ob(0)}const _=function(t){return{$implicit:t,isRoot:!0}};function Q(t,e){if(1&t&&(s.Sb(0,"div"),s.Dc(1,G,1,0,"ng-container",2),s.Rb()),2&t){const t=s.ec(),e=s.pc(2);s.Bb(1),s.kc("ngTemplateOutlet",e)("ngTemplateOutletContext",s.mc(2,_,t.root))}}function $(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"span",9),s.Fc(2),s.Rb(),s.Sb(3,"span",10),s.Fc(4),s.Rb(),s.Pb()),2&t){const t=s.ec().$implicit;s.Bb(2),s.Gc(t.item.type),s.Bb(2),s.Hc("[",t.item.name,"]")}}function A(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"span"),s.Fc(2),s.Rb(),s.Pb()),2&t){const t=s.ec().$implicit;s.Bb(2),s.Gc(t.item.name)}}function q(t,e){1&t&&(s.Sb(0,"div",3),s.Sb(1,"div",20),s.Fc(2,"(empty)"),s.Rb(),s.Rb())}function L(t,e){1&t&&(s.Sb(0,"div",3),s.Sb(1,"div",20),s.Fc(2,"(empty)"),s.Rb(),s.Rb())}function U(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"div",23),s.ac("click",(function(){s.sc(t);const i=e.$implicit;return s.ec(6).selectItem(i)})),s.Nb(2,"div",13),s.Sb(3,"div",6),s.Nb(4,"i",24),s.Rb(),s.Sb(5,"div",25),s.Sb(6,"span"),s.Fc(7),s.Rb(),s.Rb(),s.Rb(),s.Pb()}if(2&t){const t=e.$implicit,i=s.ec(6);s.Bb(1),s.Eb("item-selected",i.isSelected(t.id)),s.Bb(6),s.Gc(t.name)}}function z(t,e){if(1&t&&(s.Sb(0,"div",11),s.Dc(1,L,3,0,"div",18),s.Dc(2,U,8,3,"ng-container",19),s.Rb()),2&t){const t=s.ec().$implicit;s.Bb(1),s.kc("ngIf",0===(null==t.templates?null:t.templates.length)),s.Bb(1),s.kc("ngForOf",t.templates)}}function H(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"div",3),s.Sb(2,"div",4),s.ac("click",(function(){s.sc(t);const i=e.$implicit;return s.ec(4).toggleItem(i.item.id)})),s.Nb(3,"i",5),s.Rb(),s.Sb(4,"div",21),s.ac("click",(function(){s.sc(t);const i=e.$implicit,n=s.ec(4);return n.openItem(i.item.id),n.selectItem(i.item)})),s.Nb(5,"i",22),s.Rb(),s.Sb(6,"div",7),s.ac("click",(function(){s.sc(t);const i=e.$implicit,n=s.ec(4);return n.openItem(i.item.id),n.selectItem(i.item)})),s.Sb(7,"span"),s.Fc(8),s.Rb(),s.Rb(),s.Sb(9,"div",16),s.ac("click",(function(i){s.sc(t);const n=e.$implicit;return s.ec(4).createTemplate(n.item),i.stopPropagation()})),s.Nb(10,"i",17),s.Rb(),s.Rb(),s.Dc(11,z,3,2,"div",8),s.Pb()}if(2&t){const t=e.$implicit,i=s.ec(4);s.Bb(1),s.Eb("item-selected",i.isSelected(t.item.id)),s.Bb(2),s.Eb("fa-caret-down",i.isOpen(t.item.id))("fa-caret-right",!i.isOpen(t.item.id)),s.Bb(5),s.Gc(t.item.name),s.Bb(3),s.kc("ngIf",i.isOpen(t.item.id))}}function j(t,e){if(1&t&&(s.Sb(0,"div",11),s.Dc(1,q,3,0,"div",18),s.Dc(2,H,12,8,"ng-container",19),s.Rb()),2&t){const t=s.ec(2).$implicit;s.Bb(1),s.kc("ngIf",0===(null==t.collections?null:t.collections.length)),s.Bb(1),s.kc("ngForOf",t.collections)}}function K(t,e){1&t&&(s.Sb(0,"div",3),s.Sb(1,"div",20),s.Fc(2,"(empty)"),s.Rb(),s.Rb())}function V(t,e){1&t&&s.Ob(0)}const J=function(t){return{$implicit:t,isRoot:!1}};function W(t,e){if(1&t&&(s.Qb(0),s.Dc(1,V,1,0,"ng-container",2),s.Pb()),2&t){const t=e.$implicit;s.ec(5);const i=s.pc(2);s.Bb(1),s.kc("ngTemplateOutlet",i)("ngTemplateOutletContext",s.mc(2,J,t))}}function X(t,e){if(1&t&&(s.Sb(0,"div",11),s.Dc(1,K,3,0,"div",18),s.Dc(2,W,2,4,"ng-container",19),s.Rb()),2&t){const t=s.ec(3).$implicit;s.Bb(1),s.kc("ngIf",0===(null==t.stacks?null:t.stacks.length)),s.Bb(1),s.kc("ngForOf",t.stacks)}}function Y(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"div",12),s.ac("click",(function(){s.sc(t);const e=s.ec(2).$implicit;return s.ec().toggleItem(e.item.id+".stacks")})),s.Sb(2,"div",13),s.Nb(3,"i",5),s.Rb(),s.Sb(4,"div",6),s.Nb(5,"i",14),s.Rb(),s.Sb(6,"div",15),s.Sb(7,"span"),s.Fc(8,"Stacks"),s.Rb(),s.Rb(),s.Rb(),s.Dc(9,X,3,2,"div",8),s.Pb()}if(2&t){const t=s.ec(2).$implicit,e=s.ec();s.Bb(3),s.Eb("fa-caret-down",e.isOpen(t.item.id+".stacks"))("fa-caret-right",!e.isOpen(t.item.id+".stacks")),s.Bb(6),s.kc("ngIf",e.isOpen(t.item.id+".stacks"))}}function Z(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",11),s.Sb(1,"div",12),s.ac("click",(function(){s.sc(t);const e=s.ec().$implicit;return s.ec().toggleItem(e.item.id+".collections")})),s.Sb(2,"div",13),s.Nb(3,"i",5),s.Rb(),s.Sb(4,"div",6),s.Nb(5,"i",14),s.Rb(),s.Sb(6,"div",15),s.Sb(7,"span"),s.Fc(8,"Collections"),s.Rb(),s.Rb(),s.Sb(9,"div",16),s.ac("click",(function(e){s.sc(t);const i=s.ec().$implicit;return s.ec().createCollection(i.item),e.stopPropagation()})),s.Nb(10,"i",17),s.Rb(),s.Rb(),s.Dc(11,j,3,2,"div",8),s.Dc(12,Y,10,5,"ng-container",0),s.Rb()}if(2&t){const t=s.ec().$implicit,e=s.ec();s.Bb(3),s.Eb("fa-caret-down",e.isOpen(t.item.id+".collections"))("fa-caret-right",!e.isOpen(t.item.id+".collections")),s.Bb(8),s.kc("ngIf",e.isOpen(t.item.id+".collections")),s.Bb(1),s.kc("ngIf",(null==t.stacks?null:t.stacks.length)>0)}}function tt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",3),s.Sb(1,"div",4),s.ac("click",(function(){s.sc(t);const i=e.$implicit;return s.ec().toggleItem(i.item.id)})),s.Nb(2,"i",5),s.Rb(),s.Sb(3,"div",6),s.Nb(4,"i",5),s.Rb(),s.Sb(5,"div",7),s.ac("click",(function(){s.sc(t);const i=e.$implicit,n=s.ec();return n.openItem(i.item.id),n.selectItem(i.item)})),s.Dc(6,$,5,2,"ng-container",0),s.Dc(7,A,3,1,"ng-container",0),s.Rb(),s.Rb(),s.Dc(8,Z,13,6,"div",8)}if(2&t){const t=e.$implicit,i=e.isRoot,n=s.ec();s.Eb("item-selected",n.isSelected(t.item.id)),s.Bb(2),s.Eb("fa-caret-down",n.isOpen(t.item.id))("fa-caret-right",!n.isOpen(t.item.id)),s.Bb(2),s.Eb("fa-dice-d6","workspace"===t.item.type)("fa-layer-group","stack"===t.item.type),s.Bb(2),s.kc("ngIf",i),s.Bb(1),s.kc("ngIf",!i),s.Bb(1),s.kc("ngIf",n.isOpen(t.item.id))}}let et=(()=>{class t{constructor(t){this.blueprintsTreeService=t,this.onItemSelect=new s.o,this.state=this.blueprintsTreeService.state}ngOnInit(){var t;this.selectedItem=null!==(t=this.selectedItem)&&void 0!==t?t:this.root.item,this.selectItem(this.selectedItem),this.state.tree[this.root.item.id]={open:!0}}ngOnChanges(t){var e,i;(null===(e=t.selectedItem)||void 0===e?void 0:e.currentValue)&&this.selectItem(null===(i=t.selectedItem)||void 0===i?void 0:i.currentValue)}selectItem(t){this.state.selectedItem.item=t,this.state.selectedItem.id=t.id,this.onItemSelect.emit(t),this.saveState()}openItem(t){this.state.tree[t]={open:!0},this.saveState()}toggleItem(t){this.state.tree[t]?this.state.tree[t].open=!this.state.tree[t].open:this.state.tree[t]={open:!0},this.saveState()}isOpen(t){var e;return null===(e=this.state.tree[t])||void 0===e?void 0:e.open}saveState(){this.blueprintsTreeService.saveState()}ngOnDestroy(){}isSelected(t){return this.state.selectedItem.id===t}createCollection(t){this.blueprintsTreeService.createCollection()}createTemplate(t){this.blueprintsTreeService.createTemplate(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(E))},t.\u0275cmp=s.Gb({type:t,selectors:[["blueprints-tree"]],inputs:{root:"root",selectedItem:"selectedItem"},outputs:{onItemSelect:"onItemSelect"},features:[s.Ab([]),s.zb],decls:3,vars:1,consts:[[4,"ngIf"],["workspace",""],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"tree-item"],[1,"item-pointer",3,"click"],[1,"fa"],[1,"item-icon"],[1,"item-name","ellipsis",3,"click"],["class","sub-dir",4,"ngIf"],[1,"text-capitalize"],[1,"text-small","text-muted","ml-1"],[1,"sub-dir"],[1,"tree-item",3,"click"],[1,"item-pointer"],[1,"fa","fa-folder"],[1,"item-name"],[1,"item-command-icon",3,"click"],[1,"far","fa-plus-square"],["class","tree-item",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-muted","text-tiny","empty-dir"],[1,"item-icon",3,"click"],[1,"fa","fa-cog"],[1,"tree-item","pt-1",3,"click"],[1,"far","fa-file"],[1,"item-name","ellipsis"]],template:function(t,e){1&t&&(s.Dc(0,Q,2,4,"div",0),s.Dc(1,tt,9,13,"ng-template",null,1,s.Ec)),2&t&&s.kc("ngIf",e.root)},directives:[n.t,n.A,n.s],styles:[".tree-item[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding-top:.25rem}.tree-item[_ngcontent-%COMP%]:hover{background-color:#f9fafe}.tree-item[_ngcontent-%COMP%]   .empty-dir[_ngcontent-%COMP%]{padding-left:25px}.tree-item[_ngcontent-%COMP%]   .item-pointer[_ngcontent-%COMP%]{width:20px;text-align:center;cursor:pointer}.tree-item.item-selected[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .tree-item.item-selected[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{color:#6469ff!important}.tree-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]{width:20px;text-align:center}.tree-item[_ngcontent-%COMP%]   .item-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#b3b4b3}.tree-item[_ngcontent-%COMP%]   .item-command-icon[_ngcontent-%COMP%]{width:20px;text-align:center;align-self:center;cursor:pointer}.tree-item[_ngcontent-%COMP%]   .item-command-icon[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#b3b4b3!important}.tree-item[_ngcontent-%COMP%]   .item-name[_ngcontent-%COMP%]{padding:0 .25rem;cursor:pointer}.tree-item[_ngcontent-%COMP%]   .item-name.active[_ngcontent-%COMP%]{background:#555;box-shadow:inset 0 0 1px #999;border-radius:2px}.tree-item[_ngcontent-%COMP%]   .relative-path[_ngcontent-%COMP%]{padding-left:.25rem;color:#b3b4b3}.sub-dir[_ngcontent-%COMP%]{padding-left:20px}"]}),t})();var it=i("oCqB");function nt(t,e){if(1&t&&(s.Sb(0,"mat-option",7),s.Fc(1),s.Rb()),2&t){const t=e.$implicit;s.kc("value",t.id),s.Bb(1),s.Gc(t.name)}}function ct(t,e){1&t&&(s.Sb(0,"mat-form-field",5),s.Nb(1,"input",14),s.Rb())}function ot(t,e){if(1&t&&(s.Sb(0,"div",15),s.Nb(1,"i",16),s.Sb(2,"span"),s.Fc(3," Collection: "),s.Sb(4,"span",3),s.Fc(5),s.Rb(),s.Fc(6," added to stack!"),s.Rb(),s.Rb()),2&t){const t=s.ec();s.Bb(5),s.Hc(" ",t.data.collection.name," ")}}function at(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",17),s.Sb(1,"button",18),s.Fc(2,"Cancel"),s.Rb(),s.Sb(3,"button",19),s.ac("click",(function(){return s.sc(t),s.ec().add()})),s.Fc(4,"Add"),s.Rb(),s.Rb()}if(2&t){const t=s.ec();s.Bb(3),s.kc("disabled",!t.form.valid)}}function st(t,e){1&t&&(s.Sb(0,"div",17),s.Sb(1,"button",18),s.Fc(2,"Close"),s.Rb(),s.Rb())}let lt=(()=>{class t{constructor(t,e,i,n){this.fb=t,this.stackService=e,this.data=i,this.dialogRef=n,this.actionState=d.a,this.currentState=d.a.IDLE,this.subs=new a.a,this.form=this.fb.group({stack:["",[u.E.required]],newStackName:[""]})}ngOnInit(){this.subs.add(this.stackService.getLocalStacks().subscribe(t=>this.stacks=t)),this.form.valueChanges.subscribe(t=>{this.createNewStack="create-new-stack"===t.stack,this.form.get("newStackName").setValidators(this.createNewStack?[u.E.required]:[])})}ngOnDestroy(){}close(){this.dialogRef.close(this.form.value)}add(){const t=this.stacks.find(t=>t.id=this.form.value.stack);this.addToStack(t.id,this.data.collection.name,this.data.collection.id).subscribe(t=>{this.currentState=this.actionState.SUCCESS},t=>this.currentState=this.actionState.FAILED)}addToStack(t,e,i){return this.stackService.addCollectionToStack(t,e,i)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(u.f),s.Mb(it.a),s.Mb(m.a),s.Mb(m.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["add-to-stack"]],decls:23,vars:9,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"p-2"],[1,"text-bold"],[3,"formGroup"],[1,"mat-form-field"],["formControlName","stack"],[3,"value"],[1,"fa","fa-plus-circle"],[3,"value",4,"ngFor","ngForOf"],["class","mat-form-field",4,"ngIf"],["class","p-2 text-center",4,"ngIf"],["mat-dialog-actions","",3,"align"],["class","text-right",4,"ngIf"],["matInput","","placeholder","New Stack Name","formControlName","newStackName"],[1,"p-2","text-center"],[1,"fa","fa-check","text-success"],[1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(s.Sb(0,"h1",0),s.Fc(1,"Add Collection To Stack"),s.Rb(),s.Sb(2,"div",1),s.Sb(3,"div",2),s.Sb(4,"p"),s.Fc(5,"Add collection: "),s.Sb(6,"span",3),s.Fc(7),s.Rb(),s.Fc(8," to stack:"),s.Rb(),s.Rb(),s.Sb(9,"form",4),s.Sb(10,"mat-form-field",5),s.Sb(11,"mat-label"),s.Fc(12,"Select stack:"),s.Rb(),s.Sb(13,"mat-select",6),s.Sb(14,"mat-option",7),s.Nb(15,"i",8),s.Fc(16," Create New Stack"),s.Rb(),s.Dc(17,nt,2,2,"mat-option",9),s.Rb(),s.Rb(),s.Dc(18,ct,2,0,"mat-form-field",10),s.Rb(),s.Dc(19,ot,7,1,"div",11),s.Rb(),s.Sb(20,"div",12),s.Dc(21,at,5,1,"div",13),s.Dc(22,st,3,0,"div",13),s.Rb()),2&t&&(s.Bb(7),s.Hc(" ",e.data.collection.name," "),s.Bb(2),s.kc("formGroup",e.form),s.Bb(5),s.kc("value","create-new-stack"),s.Bb(3),s.kc("ngForOf",e.stacks),s.Bb(1),s.kc("ngIf",e.createNewStack),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.SUCCESS),s.Bb(1),s.kc("align","end"),s.Bb(1),s.kc("ngIf",e.currentState!==e.actionState.SUCCESS),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.SUCCESS))},directives:[m.i,m.f,u.G,u.r,u.j,f.c,f.g,S.a,u.q,u.i,h.i,n.s,n.t,m.c,g.a,u.c,v.b,m.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var rt=i("Mzu6"),bt=i("eH1D"),mt=i("STbY"),ut=i("Qu3c"),dt=i("NFeN"),pt=i("pr2P"),ft=i("gpd5"),gt=i("+Ahk"),St=i("lsM1"),ht=i("kjm3");function vt(t,e){1&t&&(s.Sb(0,"div",26),s.Nb(1,"i",27),s.Rb())}function kt(t,e){if(1&t){const t=s.Tb();s.Qb(0,7),s.Sb(1,"div",24),s.ac("click",(function(){s.sc(t);const i=e.$implicit;return s.ec(3).selectPathItem(i.item)})),s.Fc(2),s.Rb(),s.Dc(3,vt,2,0,"div",25),s.Pb()}if(2&t){const t=e.$implicit,i=e.index,n=s.ec(3);s.Bb(1),s.kc("matTooltip",t.item.type),s.Bb(1),s.Gc(t.item.name),s.Bb(1),s.kc("ngIf",i<(null==n.itemPath?null:n.itemPath.length)-1)}}function Rt(t,e){if(1&t&&(s.Qb(0),s.Sb(1,"div",22),s.Dc(2,kt,4,3,"ng-container",23),s.Rb(),s.Pb()),2&t){const t=s.ec(2);s.Bb(2),s.kc("ngForOf",t.itemPath)}}const Ct=function(t){return{collection:t}};function It(t,e){if(1&t&&(s.Sb(0,"div",28),s.Fc(1," More Actions "),s.Sb(2,"mat-icon",29),s.Fc(3,"more_vert"),s.Rb(),s.Rb()),2&t){const t=s.ec(2),e=s.pc(2);s.kc("matMenuTriggerFor",e)("matMenuTriggerData",s.mc(3,Ct,t.collection)),s.Bb(2),s.kc("inline",!0)}}const Bt=function(t){return{env:t}};function Ft(t,e){if(1&t&&(s.Sb(0,"div",28),s.Fc(1," More Actions "),s.Sb(2,"mat-icon",29),s.Fc(3,"more_vert"),s.Rb(),s.Rb()),2&t){const t=s.ec(2),e=s.pc(5);s.kc("matMenuTriggerFor",e)("matMenuTriggerData",s.mc(3,Bt,t.collection)),s.Bb(2),s.kc("inline",!0)}}function yt(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-info",30),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.collection)}}function xt(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-filenames",30),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.collection)}}function Pt(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-functions",30),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.collection)}}function wt(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-variables",30),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.collection)}}function Tt(t,e){1&t&&(s.Qb(0),s.Nb(1,"config-links"),s.Pb())}function Dt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div"),s.Sb(1,"div",5),s.Sb(2,"div",6),s.Sb(3,"div",7),s.Sb(4,"span",8),s.Fc(5),s.Rb(),s.Sb(6,"span",9),s.Fc(7),s.Rb(),s.Rb(),s.Dc(8,Rt,3,1,"ng-container",0),s.Rb(),s.Dc(9,It,4,5,"div",10),s.Dc(10,Ft,4,5,"div",10),s.Rb(),s.Sb(11,"div",11),s.Sb(12,"div",12),s.Sb(13,"div",13),s.Sb(14,"div",14),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("readme")})),s.Nb(15,"i",15),s.Fc(16,"Readme"),s.Rb(),s.Sb(17,"div",14),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("filenames")})),s.Nb(18,"i",16),s.Fc(19,"Filenames"),s.Rb(),s.Sb(20,"div",14),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("functions")})),s.Nb(21,"i",17),s.Fc(22,"Functions"),s.Rb(),s.Sb(23,"div",14),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("variables")})),s.Nb(24,"i",18),s.Fc(25,"Variables"),s.Rb(),s.Rb(),s.Rb(),s.Sb(26,"div",19),s.Qb(27,20),s.Dc(28,yt,2,1,"ng-container",21),s.Dc(29,xt,2,1,"ng-container",21),s.Dc(30,Pt,2,1,"ng-container",21),s.Dc(31,wt,2,1,"ng-container",21),s.Dc(32,Tt,2,0,"ng-container",21),s.Pb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.ec();s.Bb(5),s.Gc(t.collection.name),s.Bb(2),s.Hc("[",t.collection.type,"]"),s.Bb(1),s.kc("ngIf",(null==t.itemPath?null:t.itemPath.length)>1),s.Bb(1),s.kc("ngIf",t.collection.type===t.itemTypes.Collection),s.Bb(1),s.kc("ngIf",t.collection.type!==t.itemTypes.Collection),s.Bb(4),s.Eb("text-primary","readme"===t.selectedSection),s.Bb(3),s.Eb("text-primary","filenames"===t.selectedSection),s.Bb(3),s.Eb("text-primary","functions"===t.selectedSection),s.Bb(3),s.Eb("text-primary","variables"===t.selectedSection),s.Bb(4),s.kc("ngSwitch",t.selectedSection),s.Bb(1),s.kc("ngSwitchCase","readme"),s.Bb(1),s.kc("ngSwitchCase","filenames"),s.Bb(1),s.kc("ngSwitchCase","functions"),s.Bb(1),s.kc("ngSwitchCase","variables"),s.Bb(1),s.kc("ngSwitchCase","links")}}function Mt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",31),s.Fc(1,"Collection: "),s.Sb(2,"span",32),s.Fc(3),s.Rb(),s.Rb(),s.Sb(4,"button",33),s.ac("click",(function(){s.sc(t);const i=e.collection;return s.ec().createTemplate(i)})),s.Sb(5,"span"),s.Fc(6,"Create New Template"),s.Rb(),s.Rb(),s.Sb(7,"button",33),s.ac("click",(function(){s.sc(t);const i=e.collection;return s.ec().renameCollection(i)})),s.Sb(8,"span"),s.Fc(9,"Rename Collection"),s.Rb(),s.Rb(),s.Sb(10,"button",33),s.ac("click",(function(){s.sc(t);const i=e.collection;return s.ec().addToStack(i)})),s.Sb(11,"span"),s.Fc(12,"Add Collection To Stack"),s.Rb(),s.Rb(),s.Sb(13,"button",33),s.ac("click",(function(){s.sc(t);const i=e.collection;return s.ec().deleteCollection(i)})),s.Sb(14,"span"),s.Fc(15,"Delete Collection"),s.Rb(),s.Rb()}if(2&t){const t=e.collection;s.Bb(3),s.Gc(t.name)}}function Ot(t,e){if(1&t){const t=s.Tb();s.Sb(0,"button",33),s.ac("click",(function(){s.sc(t);const e=s.ec().env;return s.ec().deleteStack(e)})),s.Sb(1,"span"),s.Fc(2,"Delete "),s.Sb(3,"span",34),s.Fc(4),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.ec().env;s.Bb(4),s.Gc(t.type)}}function Nt(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",31),s.Sb(1,"span",34),s.Fc(2),s.Rb(),s.Fc(3," : "),s.Sb(4,"span",32),s.Fc(5),s.Rb(),s.Rb(),s.Sb(6,"button",33),s.ac("click",(function(){return s.sc(t),s.ec().createCollection()})),s.Sb(7,"span"),s.Fc(8,"Create New Collection"),s.Rb(),s.Rb(),s.Dc(9,Ot,5,1,"button",35)}if(2&t){const t=e.env,i=s.ec();s.Bb(2),s.Gc(t.type),s.Bb(3),s.Gc(t.name),s.Bb(4),s.kc("ngIf",t.type!==i.itemTypes.Workspace)}}let Et=(()=>{class t{constructor(t,e,i){this.bluService=t,this.collectionService=e,this.dialog=i,this.onGetBlueprints=new s.o,this.onPathItemSelected=new s.o,this.selectedSection="readme",this.itemTypes=r.a.Item.Type}ngOnInit(){}ngOnChanges(t){this.refreshItem()}ngOnDestroy(){}refreshItem(){const t=this.collection;this.collection=null,setTimeout(()=>{this.collection=t,this.updateItemPath()})}updateItemPath(){this.itemPath=this.getItemPath(this.collection)}selectConfig(t){this.selectedSection=t}addToStack(t){this.dialog.open(lt,{data:{collection:t},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>console.log("dialog result: ",t))}deleteCollection(t){this.dialog.open(rt.a,{data:{title:`Delete collection ${t.name}?`,text:"Deleting this collection is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{!0===e&&this.collectionService.deleteCollection(t.id).subscribe(t=>this.getBlueprints())})}createCollection(){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"create"},width:"30%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.getBlueprints()})}renameCollection(t){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"rename",collection:t},width:"30%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.getBlueprints()})}createTemplate(t){this.dialog.open(O,{data:{blueprints:this.blueprints,type:"create",collection:t,itemType:r.a.Item.Type.Template},width:"300px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.getBlueprints())}getBlueprints(){this.onGetBlueprints.emit(!0)}getItemPath(t,e=[]){return e.unshift({item:t}),t.parent?this.getItemPath(t.parent,e):e}selectPathItem(t){this.onPathItemSelected.emit(t)}deleteStack(t){this.dialog.open(rt.a,{data:{title:`Delete stack ${t.name}?`,text:"Deleting this stack is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{!0===e&&this.bluService.deleteStack(t.id).subscribe(t=>this.getBlueprints())})}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(l.a),s.Mb(bt.a),s.Mb(m.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["blueprints-collection"]],inputs:{collection:"collection",blueprints:"blueprints"},outputs:{onGetBlueprints:"onGetBlueprints",onPathItemSelected:"onPathItemSelected"},features:[s.zb],decls:7,vars:3,consts:[[4,"ngIf"],[3,"overlapTrigger"],["collectionMenu","matMenu"],["matMenuContent",""],["environmentMenu","matMenu"],[1,"border-bottom","d-flex","align-items-center","item-header",2,"background-color","#F9FAFE","border-bottom-width","5px !important"],[1,"pl-3","py-2"],[1,""],[2,"font-size","1rem"],[1,"text-muted","text-small","ml-1"],["class","ml-auto cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData",4,"ngIf"],[1,"d-flex","pl-3","pt-3"],[1,"",2,"width","120px"],[1,"pl-1"],[1,"cursor-pointer","config-icon",3,"click"],[1,"fab","fa-readme","mr-2","fa-sm"],[1,"fa","fa-file-alt","mr-2","fa-sm"],[1,"fa","fa-magic","mr-2","fa-sm"],[1,"fa","fa-equals","mr-2","fa-sm"],[1,"flex-grow-1","px-2",2,"borderz","1px solid red"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"d-flex","align-items-center","text-small","text-muted","pr-3"],["class","",4,"ngFor","ngForOf"],[1,"as-link","cursor-pointer",3,"matTooltip","click"],["class","px-2",4,"ngIf"],[1,"px-2"],[1,"fa","fa-chevron-right"],[1,"ml-auto","cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData"],[1,"item-menu",3,"inline"],[3,"item"],[1,"p-2","text-center","border-bottom"],[1,"text-bold"],["mat-menu-item","",3,"click"],[1,"text-capitalize"],["mat-menu-item","",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(s.Dc(0,Dt,33,19,"div",0),s.Sb(1,"mat-menu",1,2),s.Dc(3,Mt,16,1,"ng-template",3),s.Rb(),s.Sb(4,"mat-menu",1,4),s.Dc(6,Nt,10,3,"ng-template",3),s.Rb()),2&t&&(s.kc("ngIf",e.collection),s.Bb(1),s.kc("overlapTrigger",!0),s.Bb(3),s.kc("overlapTrigger",!0))},directives:[n.t,mt.e,mt.a,n.x,n.y,n.s,ut.a,mt.d,dt.a,pt.a,ft.a,gt.a,St.a,ht.a,mt.b],styles:[".config-list[_ngcontent-%COMP%]{position:relative;width:100%}.config-list[_ngcontent-%COMP%]   .config-title[_ngcontent-%COMP%], .config-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:26px}.config-list[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]{left:10px;top:6px;position:absolute;font-size:.6rem;opacity:.8}"]}),t})();function Gt(t,e){if(1&t&&(s.Sb(0,"mat-option",6),s.Fc(1),s.Rb()),2&t){const t=e.$implicit;s.kc("value",t),s.Bb(1),s.Gc(t.name)}}function _t(t,e){1&t&&(s.Sb(0,"mat-form-field",4),s.Nb(1,"input",14),s.Rb())}function Qt(t,e){if(1&t&&(s.Sb(0,"div",15),s.Nb(1,"i",16),s.Fc(2),s.Rb()),2&t){const t=s.ec();s.Bb(2),s.Hc(" ",t.errorMessage," ")}}function $t(t,e){if(1&t&&(s.Sb(0,"div",17),s.Sb(1,"span"),s.Nb(2,"i",18),s.Sb(3,"span",1),s.Fc(4),s.Rb(),s.Fc(5," copied successfully"),s.Rb(),s.Rb()),2&t){const t=s.ec();s.Bb(4),s.Gc(t.data.item.type)}}function At(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"button",19),s.Fc(2,"Cancel"),s.Rb(),s.Sb(3,"button",20),s.ac("click",(function(){return s.sc(t),s.ec().save()})),s.Fc(4,"Copy"),s.Rb(),s.Pb()}if(2&t){const t=s.ec();s.Bb(3),s.kc("disabled",!(null!=t.form&&t.form.valid)||t.currentState===t.actionState.FAILED)}}function qt(t,e){1&t&&(s.Qb(0),s.Sb(1,"button",19),s.Fc(2,"Close"),s.Rb(),s.Pb())}let Lt=(()=>{class t{constructor(t,e,i,n,c){this.fb=t,this.templateService=e,this.bluService=i,this.data=n,this.dialogRef=c,this.actionState=d.a,this.currentState=d.a.IDLE,this.collections=[],this.subs=new a.a}ngOnInit(){this.form=this.fb.group({collection:["",[u.E.required]]}),this.subs.add(this.bluService.getCollections().subscribe(t=>{this.collections=t,this.form.get("collection").setValue(this.collections[0].name)}))}ngOnDestroy(){this.subs.unsubscribe()}close(){this.dialogRef.close(this.form.value)}save(){if(this.form.valid&&this.currentState!==d.a.FAILED){const t=this.form.get("collection").value.id;this.data.item.type===r.a.Item.Type.Template&&this.templateService.copyTemplate(this.data.item.id,t).subscribe(t=>{this.currentState=d.a.SUCCESS},t=>{var e;this.currentState=d.a.FAILED,this.errorMessage=null===(e=t.error)||void 0===e?void 0:e.message})}}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(u.f),s.Mb(p.a),s.Mb(l.a),s.Mb(m.a),s.Mb(m.h))},t.\u0275cmp=s.Gb({type:t,selectors:[["copy-template-dialog"]],decls:22,vars:11,consts:[["mat-dialog-title",""],[1,"text-capitalize"],["mat-dialog-content",""],[3,"formGroup"],[1,"mat-form-field"],["formControlName","collection"],[3,"value"],[1,"fa","fa-plus-circle"],[3,"value",4,"ngFor","ngForOf"],["class","mat-form-field",4,"ngIf"],["class","text-small text-warning",4,"ngIf"],["class","text-success",4,"ngIf"],["mat-dialog-actions","",3,"align"],[4,"ngIf"],["matInput","","placeholder","New Collection Name","formControlName","newCollectionName"],[1,"text-small","text-warning"],[1,"fa","fa-exclamation-triangle"],[1,"text-success"],[1,"fa","fa-check"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(s.Sb(0,"h1",0),s.Sb(1,"span"),s.Fc(2,"Copy "),s.Sb(3,"span",1),s.Fc(4),s.Rb(),s.Fc(5),s.Rb(),s.Rb(),s.Sb(6,"div",2),s.Sb(7,"form",3),s.Sb(8,"mat-form-field",4),s.Sb(9,"mat-label"),s.Fc(10,"Collection:"),s.Rb(),s.Sb(11,"mat-select",5),s.Sb(12,"mat-option",6),s.Nb(13,"i",7),s.Fc(14," Create New Collection"),s.Rb(),s.Dc(15,Gt,2,2,"mat-option",8),s.Rb(),s.Rb(),s.Dc(16,_t,2,0,"mat-form-field",9),s.Rb(),s.Dc(17,Qt,3,1,"div",10),s.Dc(18,$t,6,1,"div",11),s.Rb(),s.Sb(19,"div",12),s.Dc(20,At,5,1,"ng-container",13),s.Dc(21,qt,3,0,"ng-container",13),s.Rb()),2&t&&(s.Bb(4),s.Gc(e.data.item.type),s.Bb(1),s.Hc(" ",e.data.item.name," to:"),s.Bb(2),s.kc("formGroup",e.form),s.Bb(5),s.kc("value","create-new-collection"),s.Bb(3),s.kc("ngForOf",e.collections),s.Bb(1),s.kc("ngIf",e.createNewCollection),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.FAILED),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.SUCCESS),s.Bb(1),s.kc("align","end"),s.Bb(1),s.kc("ngIf",e.currentState!==e.actionState.SUCCESS),s.Bb(1),s.kc("ngIf",e.currentState===e.actionState.SUCCESS))},directives:[m.i,m.f,u.G,u.r,u.j,f.c,f.g,S.a,u.q,u.i,h.i,n.s,n.t,m.c,g.a,u.c,v.b,m.d],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),t})();var Ut=i("a8/g"),zt=i("xm+p"),Ht=i("6I3L"),jt=i("iFtu"),Kt=i("fCHT");function Vt(t,e){1&t&&(s.Sb(0,"div"),s.Sb(1,"div",4),s.Sb(2,"div"),s.Nb(3,"i",5),s.Rb(),s.Rb(),s.Rb())}function Jt(t,e){1&t&&(s.Sb(0,"div",37),s.Nb(1,"i",38),s.Rb())}function Wt(t,e){if(1&t){const t=s.Tb();s.Qb(0,16),s.Sb(1,"div",35),s.ac("click",(function(){s.sc(t);const i=e.$implicit;return s.ec(2).selectPathItem(i.item)})),s.Fc(2),s.Rb(),s.Dc(3,Jt,2,0,"div",36),s.Pb()}if(2&t){const t=e.$implicit,i=e.index,n=s.ec(2);s.Bb(1),s.kc("matTooltip",t.item.type),s.Bb(1),s.Gc(t.item.name),s.Bb(1),s.kc("ngIf",i<(null==n.itemPath?null:n.itemPath.length)-1)}}function Xt(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-info",39),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.item)}}function Yt(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-description",39),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.item)}}function Zt(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-filenames",39),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.item)}}function te(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-on-success",39),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.item)}}function ee(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-commands",39),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.item)}}function ie(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-functions",39),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.item)}}function ne(t,e){if(1&t&&(s.Qb(0),s.Nb(1,"config-variables",39),s.Pb()),2&t){const t=s.ec(2);s.Bb(1),s.kc("item",t.item)}}function ce(t,e){1&t&&(s.Qb(0),s.Nb(1,"config-links"),s.Pb())}const oe=function(t){return{item:t}};function ae(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div"),s.Sb(1,"div",6),s.Sb(2,"div",7),s.Sb(3,"div",8),s.Sb(4,"div",9),s.Fc(5),s.Sb(6,"span",10),s.Fc(7),s.Rb(),s.Rb(),s.Sb(8,"div",11),s.Dc(9,Wt,4,3,"ng-container",12),s.Rb(),s.Rb(),s.Sb(10,"div",13),s.Sb(11,"div",14),s.ac("click",(function(){s.sc(t);const e=s.ec();return e.launchConsole(e.item)})),s.Nb(12,"i",15),s.Rb(),s.Rb(),s.Sb(13,"div",16),s.Sb(14,"button",17),s.ac("click",(function(){s.sc(t);const e=s.ec();return e.editTemplate(e.item)})),s.Fc(15,"Edit"),s.Rb(),s.Rb(),s.Sb(16,"div",18),s.Sb(17,"button",19),s.Sb(18,"mat-icon",20),s.Fc(19,"more_vert"),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Rb(),s.Sb(20,"div",21),s.Sb(21,"div",22),s.Sb(22,"div",23),s.Sb(23,"div",24),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("readme")})),s.Nb(24,"i",25),s.Fc(25,"Readme"),s.Rb(),s.Sb(26,"div",24),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("description")})),s.Nb(27,"i",26),s.Fc(28,"Description"),s.Rb(),s.Sb(29,"div",24),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("onSuccess")})),s.Nb(30,"i",27),s.Fc(31,"On Success"),s.Rb(),s.Sb(32,"div",24),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("filenames")})),s.Nb(33,"i",28),s.Fc(34,"Filenames"),s.Rb(),s.Sb(35,"div",24),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("functions")})),s.Nb(36,"i",29),s.Fc(37,"Functions"),s.Rb(),s.Sb(38,"div",24),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("variables")})),s.Nb(39,"i",30),s.Fc(40,"Variables"),s.Rb(),s.Sb(41,"div",24),s.ac("click",(function(){return s.sc(t),s.ec().selectConfig("commands")})),s.Nb(42,"i",31),s.Fc(43,"Chain"),s.Rb(),s.Rb(),s.Rb(),s.Sb(44,"div",32),s.Qb(45,33),s.Dc(46,Xt,2,1,"ng-container",34),s.Dc(47,Yt,2,1,"ng-container",34),s.Dc(48,Zt,2,1,"ng-container",34),s.Dc(49,te,2,1,"ng-container",34),s.Dc(50,ee,2,1,"ng-container",34),s.Dc(51,ie,2,1,"ng-container",34),s.Dc(52,ne,2,1,"ng-container",34),s.Dc(53,ce,2,0,"ng-container",34),s.Pb(),s.Rb(),s.Rb(),s.Rb()}if(2&t){const t=s.ec(),e=s.pc(3);s.Bb(5),s.Hc("",t.item.name," "),s.Bb(2),s.Hc("[",t.item.type,"]"),s.Bb(2),s.kc("ngForOf",t.itemPath),s.Bb(7),s.kc("matMenuTriggerFor",e)("matMenuTriggerData",s.mc(29,oe,t.item)),s.Bb(2),s.kc("inline",!0),s.Bb(5),s.Eb("text-primary","readme"===t.selectedSection),s.Bb(3),s.Eb("text-primary","description"===t.selectedSection),s.Bb(3),s.Eb("text-primary","onSuccess"===t.selectedSection),s.Bb(3),s.Eb("text-primary","filenames"===t.selectedSection),s.Bb(3),s.Eb("text-primary","functions"===t.selectedSection),s.Bb(3),s.Eb("text-primary","variables"===t.selectedSection),s.Bb(3),s.Eb("text-primary","commands"===t.selectedSection),s.Bb(4),s.kc("ngSwitch",t.selectedSection),s.Bb(1),s.kc("ngSwitchCase","readme"),s.Bb(1),s.kc("ngSwitchCase","description"),s.Bb(1),s.kc("ngSwitchCase","filenames"),s.Bb(1),s.kc("ngSwitchCase","onSuccess"),s.Bb(1),s.kc("ngSwitchCase","commands"),s.Bb(1),s.kc("ngSwitchCase","functions"),s.Bb(1),s.kc("ngSwitchCase","variables"),s.Bb(1),s.kc("ngSwitchCase","links")}}function se(t,e){if(1&t){const t=s.Tb();s.Sb(0,"div",40),s.Sb(1,"span",41),s.Fc(2),s.Rb(),s.Sb(3,"span",42),s.Fc(4),s.Rb(),s.Rb(),s.Sb(5,"button",43),s.ac("click",(function(){s.sc(t);const i=e.item;return s.ec().editTemplate(i)})),s.Fc(6,"Edit "),s.Sb(7,"span",41),s.Fc(8),s.Rb(),s.Rb(),s.Sb(9,"button",43),s.ac("click",(function(){s.sc(t);const i=e.item;return s.ec().rename(i)})),s.Fc(10,"Rename "),s.Sb(11,"span",41),s.Fc(12),s.Rb(),s.Rb(),s.Sb(13,"button",43),s.ac("click",(function(){s.sc(t);const i=e.item;return s.ec().duplicate(i)})),s.Fc(14,"Duplicate "),s.Sb(15,"span",41),s.Fc(16),s.Rb(),s.Rb(),s.Sb(17,"button",43),s.ac("click",(function(){s.sc(t);const i=e.item;return s.ec().copyItem(i)})),s.Fc(18,"Copy "),s.Sb(19,"span",41),s.Fc(20),s.Rb(),s.Fc(21," To ..."),s.Rb(),s.Sb(22,"button",43),s.ac("click",(function(){s.sc(t);const i=e.item;return s.ec().delete(i)})),s.Fc(23,"Delete "),s.Sb(24,"span",41),s.Fc(25),s.Rb(),s.Rb()}if(2&t){const t=e.item;s.Bb(2),s.Hc("",t.type,": "),s.Bb(2),s.Ic("",t.parent.name,".",t.name,""),s.Bb(4),s.Gc(t.type),s.Bb(4),s.Gc(t.type),s.Bb(4),s.Gc(t.type),s.Bb(4),s.Gc(t.type),s.Bb(5),s.Gc(t.type)}}let le=(()=>{class t{constructor(t,e,i,n,c){this.bluService=t,this.appStateService=e,this.navigationService=i,this.templateService=n,this.dialog=c,this.onGetBlueprints=new s.o,this.onPathItemSelected=new s.o,this.selectedSection="readme"}ngOnInit(){}ngOnChanges(t){this.refreshItem()}ngOnDestroy(){}refreshItem(){const t=this.item;this.item=null,setTimeout(()=>{this.item=t,this.updateItemPath()},0)}updateItemPath(){this.itemPath=this.getItemPath(this.item)}selectConfig(t){this.selectedSection=t}renameTemplate(t,e){this.dialog.open(O,{data:{blueprints:this.blueprints,type:"rename",collection:t,item:e,itemType:r.a.Item.Type.Template},width:"300px",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.getBlueprints())}copyItem(t){this.dialog.open(Lt,{data:{item:t},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>this.getBlueprints())}rename(t){this.renameTemplate(t.parent,t)}delete(t){this.deleteTemplate(t)}deleteTemplate(t){this.dialog.open(rt.a,{data:{title:`Delete template ${t.name}?`,text:"Deleting this template is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(e=>{!0===e&&this.templateService.deleteTemplate(t.id).subscribe(t=>this.getBlueprints())})}duplicate(t){this.duplicateTemplate(t)}duplicateTemplate(t){this.templateService.duplicateTemplate(t.id).subscribe(t=>this.getBlueprints())}editTemplate(t){this.navigationService.navigateTo(["editor"],{queryParams:{mode:"preview",itemId:t.id,rootDestination:"./",inputs:JSON.stringify({name:"stackjoy"})}})}getBlueprints(){this.onGetBlueprints.emit(!0)}launchConsole(t){this.appStateService.openBluConsole({inputs:{},command:`generate "${t.namespace}"`,extraInfo:{itemId:t.id}})}getItemPath(t,e=[]){return e.unshift({item:t}),t.parent?this.getItemPath(t.parent,e):e}selectPathItem(t){this.onPathItemSelected.emit(t)}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(l.a),s.Mb(Ut.a),s.Mb(zt.a),s.Mb(p.a),s.Mb(m.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["blueprints-item"]],inputs:{item:"item",blueprints:"blueprints"},outputs:{onGetBlueprints:"onGetBlueprints",onPathItemSelected:"onPathItemSelected"},features:[s.zb],decls:5,vars:2,consts:[[4,"ngIf"],["yPosition","below"],["itemMenu","matMenu"],["matMenuContent",""],[1,"border-bottom","d-flex","align-items-center","p-2","item-header",2,"background-color","#F9FAFE"],[1,"fa","fa-spinner","fa-spin"],[1,"border-bottom","item-header",2,"background-color","#F9FAFE","border-bottom-width","5px !important"],[1,"d-flex","align-items-center"],[1,"pl-3","py-2"],[2,"font-size","1rem"],[1,"text-muted","text-small","ml-1"],[1,"d-flex","align-items-center","text-small","text-muted","pr-3"],["class","",4,"ngFor","ngForOf"],[1,"ml-auto"],[1,"console","mr-2","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,""],["mat-button","",3,"click"],[1,"cursor-pointer",3,"matMenuTriggerFor","matMenuTriggerData"],["mat-button","","mat-icon-button",""],[1,"item-menu",3,"inline"],[1,"d-flex","pl-3","pt-3"],[1,"",2,"width","120px"],[1,"pl-1"],[1,"cursor-pointer","config-icon",3,"click"],[1,"fab","fa-readme","mr-2","fa-sm"],[1,"fa","fa-info","mr-2","fa-sm"],[1,"fa","fa-check","mr-2","fa-sm"],[1,"fa","fa-file-alt","mr-2","fa-sm"],[1,"fa","fa-magic","mr-2","fa-sm"],[1,"fa","fa-equals","mr-2","fa-sm"],[1,"fa","fa-list","mr-2","fa-sm"],[1,"flex-grow-1","px-2",2,"borderz","1px solid red"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"as-link","cursor-pointer",3,"matTooltip","click"],["class","px-2",4,"ngIf"],[1,"px-2"],[1,"fa","fa-chevron-right"],[3,"item"],[1,"p-2","text-center","border-bottom"],[1,"text-capitalize"],[1,"text-bold"],["mat-menu-item","",3,"click"]],template:function(t,e){1&t&&(s.Dc(0,Vt,4,0,"div",0),s.Dc(1,ae,54,31,"div",0),s.Sb(2,"mat-menu",1,2),s.Dc(4,se,26,8,"ng-template",3),s.Rb()),2&t&&(s.kc("ngIf",!e.item),s.Bb(1),s.kc("ngIf",e.item))},directives:[n.t,mt.e,mt.a,n.s,v.b,mt.d,dt.a,n.x,n.y,ut.a,pt.a,Ht.a,ft.a,jt.a,Kt.a,gt.a,St.a,ht.a,mt.b],styles:[".config-list[_ngcontent-%COMP%]{position:relative;width:100%}.config-list[_ngcontent-%COMP%]   .config-title[_ngcontent-%COMP%], .config-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{position:relative;padding-left:26px}.config-list[_ngcontent-%COMP%]   .config-icon[_ngcontent-%COMP%]{left:10px;top:6px;position:absolute;font-size:.6rem;opacity:.8}"]}),t})();function re(t,e){if(1&t){const t=s.Tb();s.Sb(0,"blueprints-tree",10),s.ac("onItemSelect",(function(e){return s.sc(t),s.ec().selectItem(e)})),s.Rb()}if(2&t){const t=s.ec();s.kc("root",t.tree)("selectedItem",t.lastSelectedItem)}}function be(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"blueprints-collection",11),s.ac("onGetBlueprints",(function(){return s.sc(t),s.ec().getBlueprints()}))("onPathItemSelected",(function(e){return s.sc(t),s.ec().selectItem(e)})),s.Rb(),s.Pb()}if(2&t){const t=s.ec();s.Bb(1),s.kc("blueprints",t.blueprints)("collection",t.selectedItem)}}function me(t,e){if(1&t){const t=s.Tb();s.Qb(0),s.Sb(1,"blueprints-item",12),s.ac("onGetBlueprints",(function(){return s.sc(t),s.ec().getBlueprints()}))("onPathItemSelected",(function(e){return s.sc(t),s.ec().selectItem(e)})),s.Rb(),s.Pb()}if(2&t){const t=s.ec();s.Bb(1),s.kc("blueprints",t.blueprints)("item",t.selectedItem)}}const ue=function(){return["collection","workspace","stack"]},de=function(){return["template"]},pe=c.f.forChild([{path:"",component:(()=>{class t{constructor(t,e,i){this.bluService=t,this.blueprintsTreeService=e,this.dialog=i,this.state={},this.subs=new a.a}ngOnInit(){this.getBlueprints(),this.subs.add(this.blueprintsTreeService.onBlueprintsUpdated.subscribe(t=>this.getBlueprints()))}getBlueprints(){this.bluService.getBlueprintsTree().subscribe(t=>{var e;this.lastSelectedItem=null!==(e=this.blueprintsTreeService.getLastSelectedItem(t))&&void 0!==e?e:t.item,this.tree=t})}ngOnDestroy(){this.subs.unsubscribe()}toggleSectionState(t,e){this.state[t][e]=!this.state[t][e]}createCollection(){this.dialog.open(o.a,{data:{blueprints:this.blueprints,type:"create"},width:"30%",position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{this.getBlueprints()})}selectItem(t){this.selectedItem=t,this.lastSelectedItem=t,this.selectedItemPath=this.getItemPath(this.selectedItem)}getItemPath(t,e=[]){return e.unshift({item:t}),t.parent?this.getItemPath(t.parent,e):e}}return t.\u0275fac=function(e){return new(e||t)(s.Mb(l.a),s.Mb(E),s.Mb(m.b))},t.\u0275cmp=s.Gb({type:t,selectors:[["blueprints"]],decls:12,vars:6,consts:[[1,"bg-white"],[1,""],[1,"text-capitalize","text-large","px-4","py-3"],[1,"fa","fa-terminal","mt-1","mr-1"],[1,"border-top","d-flex",2,"border-top-width","2px !important"],[1,"border-right","p-2",2,"width","300px"],[3,"root","selectedItem","onItemSelect",4,"ngIf"],[1,"p-0","flex-grow-1"],[3,"ngSwitch"],[4,"ngSwitchCase"],[3,"root","selectedItem","onItemSelect"],[3,"blueprints","collection","onGetBlueprints","onPathItemSelected"],[3,"blueprints","item","onGetBlueprints","onPathItemSelected"]],template:function(t,e){1&t&&(s.Sb(0,"div",0),s.Sb(1,"div",1),s.Sb(2,"div",2),s.Nb(3,"i",3),s.Fc(4," Blueprints "),s.Rb(),s.Rb(),s.Sb(5,"div",4),s.Sb(6,"div",5),s.Dc(7,re,1,2,"blueprints-tree",6),s.Rb(),s.Sb(8,"div",7),s.Qb(9,8),s.Dc(10,be,2,2,"ng-container",9),s.Dc(11,me,2,2,"ng-container",9),s.Pb(),s.Rb(),s.Rb(),s.Rb()),2&t&&(s.Bb(7),s.kc("ngIf",e.tree),s.Bb(2),s.kc("ngSwitch",null==e.selectedItem?null:e.selectedItem.type),s.Bb(1),s.kc("ngSwitchCase",s.lc(4,ue).includes(null==e.selectedItem?null:e.selectedItem.type)?e.selectedItem.type:""),s.Bb(1),s.kc("ngSwitchCase",s.lc(5,de).includes(null==e.selectedItem?null:e.selectedItem.type)?e.selectedItem.type:""))},directives:[n.t,n.x,n.y,et,Et,le],styles:[""]}),t})()}]);var fe=i("QibW");let ge=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,f.e,u.A,S.b,fe.c,g.b]]}),t})(),Se=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,m.g,g.b,u.l,v.c,fe.c,u.A,S.b,ge]]}),t})();var he=i("lK0z"),ve=i("AvgW"),ke=i("yjV7"),Re=i("Eow3"),Ce=i("2VJ6"),Ie=i("Bp5M"),Be=i("vabg");let Fe=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,dt.b,mt.c,ve.a,Re.a,Ce.a,Ie.a,Be.a,ut.b]]}),t})();var ye=i("KjPU"),xe=i("nC7K");let Pe=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,m.g,g.b,u.l,v.c,fe.c,u.A,S.b]]}),t})(),we=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c,dt.b,mt.c,ve.a,Re.a,Ce.a,Ie.a,Be.a,ke.a,ye.a,xe.a,ut.b,v.c,Pe]]}),t})(),Te=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[],imports:[[n.c]]}),t})();var De=i("6sPB");let Me=(()=>{class t{}return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},providers:[E],imports:[[n.c,pe,mt.c,dt.b,v.c,Se,he.a,De.a,ve.a,ke.a,Re.a,Ce.a,Ie.a,Be.a,Fe,we,ut.b,Te]]}),t})()}}]);