(window.webpackJsonp=window.webpackJsonp||[]).push([[16],{"4uq3":function(e,t,o){"use strict";o.r(t),o.d(t,"DataModelListModule",(function(){return A}));var a=o("ofXK"),n=o("tyNb"),r=o("Mzu6"),i=o("fXoL"),c=o("0btQ"),l=o("0IaG"),d=o("bTqV"),s=o("dTU6"),b=o("a8/g"),u=o("3Pt+"),p=o("kmnG"),m=o("qFsG");let f=(()=>{class e{constructor(e){this.fb=e,this.onChange=new i.o,this.onDelete=new i.o,this.onCancel=new i.o}ngOnInit(){this.form=this.fb.group({name:[this.dataModel.name]}),this.form.valueChanges.subscribe(e=>{})}ngOnDestroy(){}saveForm(){this.onChange.emit(this.form.value)}deleteModel(){this.onDelete.emit(this.dataModel)}cancel(){this.onCancel.emit(this.dataModel)}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(u.f))},e.\u0275cmp=i.Gb({type:e,selectors:[["model-structure-form"]],inputs:{dataModel:"dataModel"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:15,vars:1,consts:[[1,"p-2","d-flex","align-items-center","border-bottom"],[1,""],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer",3,"click"],[1,"p-2"],[3,"formGroup"],[1,"mat-form-field"],["placeholder","Model Name","matInput","","formControlName","name"],[1,"row"],[1,"col","text-right"],["mat-button","","mat-raised-button","",1,"mr-1",3,"click"],["mat-button","","mat-raised-button","",3,"click"]],template:function(e,t){1&e&&(i.Sb(0,"div",0),i.Sb(1,"div",1),i.Ec(2,"Model Settings"),i.Rb(),i.Sb(3,"div",2),i.Sb(4,"i",3),i.ac("click",(function(){return t.deleteModel()})),i.Rb(),i.Rb(),i.Rb(),i.Sb(5,"div",4),i.Sb(6,"form",5),i.Sb(7,"mat-form-field",6),i.Nb(8,"input",7),i.Rb(),i.Rb(),i.Sb(9,"div",8),i.Sb(10,"div",9),i.Sb(11,"button",10),i.ac("click",(function(){return t.cancel()})),i.Ec(12,"Cancel"),i.Rb(),i.Sb(13,"button",11),i.ac("click",(function(){return t.saveForm()})),i.Ec(14,"Save"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&e&&(i.Bb(6),i.kc("formGroup",t.form))},directives:[u.G,u.r,u.j,p.c,m.a,u.c,u.q,u.i,d.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var h=o("Qu3c"),v=o("d3UM"),g=o("FKr1"),M=o("QibW");function S(e,t){1&e&&(i.Sb(0,"mat-error"),i.Ec(1,"Input is required"),i.Rb())}function R(e,t){1&e&&(i.Sb(0,"mat-error"),i.Ec(1,"Input is required"),i.Rb())}function y(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",30),i.Sb(1,"div",31),i.Sb(2,"mat-form-field"),i.Nb(3,"input",32),i.Rb(),i.Rb(),i.Sb(4,"div",22),i.ac("click",(function(){i.sc(e);const o=t.index;return i.ec().deleteItem("values",o)})),i.Nb(5,"i",33),i.Rb(),i.Rb()}if(2&e){const e=t.index;i.Bb(3),i.kc("formControlName",e)}}let C=(()=>{class e{constructor(e){this.fb=e,this.onChange=new i.o,this.onDelete=new i.o,this.onCancel=new i.o}ngOnInit(){this.form=this.fb.group({name:[this.dataModelProperty.name,[u.E.required]],type:[this.dataModelProperty.type,[u.E.required]],required:[this.dataModelProperty.required],description:[this.dataModelProperty.description],label:[this.dataModelProperty.label],validationRegex:[this.dataModelProperty.validationRegex],visible:[this.dataModelProperty.visible],values:this.fb.array(this.dataModelProperty.values||[])}),this.form.valueChanges.subscribe(e=>{})}get f(){return this.form.controls}addItem(e){this.f[e].push(this.fb.control(""))}deleteItem(e,t){this.f[e].removeAt(t)}ngOnDestroy(){}cancel(){this.onCancel.emit(this.dataModelProperty)}saveForm(){this.onChange.emit(this.form.value)}deleteProperty(){this.onDelete.emit(this.dataModelProperty)}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(u.f))},e.\u0275cmp=i.Gb({type:e,selectors:[["model-property-form"]],inputs:{dataModelProperty:"dataModelProperty"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:74,vars:13,consts:[[1,"d-flex","align-items-center","property-form-header","p-2"],[1,"small","text-muted"],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer","text-small",3,"click"],[1,""],[1,"mat-form",3,"formGroup"],[1,"form-field-item"],[1,"form-field-holder"],[1,"mat-form-field"],["placeholder","Property Name","matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type","required",""],[3,"value"],["placeholder","Label","matInput","","formControlName","label"],["placeholder","Description","matInput","","formControlName","description"],["placeholder","Validation Regex","matInput","","formControlName","validationRegex"],["aria-label","Select an option","formControlName","required",1,"mat-radio-group"],["id","radio-group"],[1,"ml-4"],[1,"mat-radio-button",3,"value"],["formArrayName","values",1,"form-array-group"],[1,"d-flex","align-items-center","group-header"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"fa","fa-plus-circle"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"row"],[1,"col","text-right"],[1,"p-2","pt-4"],["mat-button","","mat-raised-button","",1,"mr-2",3,"click"],["mat-button","","mat-raised-button","",3,"click"],[1,"d-flex","align-items-center"],[1,"w-100","pr-3"],["placeholder","Value","matInput","",3,"formControlName"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(i.Sb(0,"div",0),i.Sb(1,"div",1),i.Ec(2,"Property Settings"),i.Rb(),i.Sb(3,"div",2),i.Sb(4,"i",3),i.ac("click",(function(){return t.deleteProperty()})),i.Rb(),i.Rb(),i.Rb(),i.Sb(5,"div",4),i.Sb(6,"form",5),i.Sb(7,"div",6),i.Sb(8,"div",7),i.Sb(9,"mat-form-field",8),i.Nb(10,"input",9),i.Cc(11,S,2,0,"mat-error",10),i.Rb(),i.Rb(),i.Rb(),i.Sb(12,"div",6),i.Sb(13,"div",7),i.Sb(14,"mat-form-field",8),i.Sb(15,"mat-label"),i.Ec(16,"Type"),i.Rb(),i.Sb(17,"mat-select",11),i.Sb(18,"mat-option",12),i.Ec(19,"String"),i.Rb(),i.Sb(20,"mat-option",12),i.Ec(21,"Email"),i.Rb(),i.Sb(22,"mat-option",12),i.Ec(23,"Password"),i.Rb(),i.Sb(24,"mat-option",12),i.Ec(25,"Number"),i.Rb(),i.Sb(26,"mat-option",12),i.Ec(27,"Boolean"),i.Rb(),i.Sb(28,"mat-option",12),i.Ec(29,"List"),i.Rb(),i.Sb(30,"mat-option",12),i.Ec(31,"Array"),i.Rb(),i.Rb(),i.Cc(32,R,2,0,"mat-error",10),i.Rb(),i.Rb(),i.Rb(),i.Sb(33,"div",6),i.Sb(34,"div",7),i.Sb(35,"mat-form-field",8),i.Nb(36,"input",13),i.Rb(),i.Rb(),i.Rb(),i.Sb(37,"div",6),i.Sb(38,"div",7),i.Sb(39,"mat-form-field",8),i.Nb(40,"input",14),i.Rb(),i.Rb(),i.Rb(),i.Sb(41,"div",6),i.Sb(42,"div",7),i.Sb(43,"mat-form-field",8),i.Nb(44,"input",15),i.Rb(),i.Rb(),i.Rb(),i.Sb(45,"div",6),i.Sb(46,"div",7),i.Sb(47,"div",4),i.Sb(48,"mat-radio-group",16),i.Sb(49,"label",17),i.Ec(50,"Required: "),i.Rb(),i.Sb(51,"span",18),i.Sb(52,"mat-radio-button",19),i.Ec(53,"True"),i.Rb(),i.Rb(),i.Sb(54,"span",18),i.Sb(55,"mat-radio-button",19),i.Ec(56,"False"),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Sb(57,"div",6),i.Sb(58,"div",7),i.Sb(59,"div",20),i.Sb(60,"div",21),i.Sb(61,"div"),i.Sb(62,"h6"),i.Ec(63,"Default Value(s)"),i.Rb(),i.Rb(),i.Sb(64,"div",22),i.ac("click",(function(){return t.addItem("values")})),i.Nb(65,"i",23),i.Rb(),i.Rb(),i.Cc(66,y,6,1,"div",24),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Sb(67,"div",25),i.Sb(68,"div",26),i.Sb(69,"div",27),i.Sb(70,"button",28),i.ac("click",(function(){return t.cancel()})),i.Ec(71,"Cancel"),i.Rb(),i.Sb(72,"button",29),i.ac("click",(function(){return t.saveForm()})),i.Ec(73,"Save"),i.Rb(),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&e&&(i.Bb(6),i.kc("formGroup",t.form),i.Bb(5),i.kc("ngIf",null==t.f.name||null==t.f.name.errors?null:t.f.name.errors.required),i.Bb(7),i.kc("value","string"),i.Bb(2),i.kc("value","email"),i.Bb(2),i.kc("value","password"),i.Bb(2),i.kc("value","number"),i.Bb(2),i.kc("value","boolean"),i.Bb(2),i.kc("value","list"),i.Bb(2),i.kc("value","array"),i.Bb(2),i.kc("ngIf",null==t.f.type||null==t.f.type.errors?null:t.f.type.errors.required),i.Bb(20),i.kc("value",!0),i.Bb(3),i.kc("value",!1),i.Bb(11),i.kc("ngForOf",null==t.f.values?null:t.f.values.controls))},directives:[u.G,u.r,u.j,p.c,m.a,u.c,u.q,u.i,u.B,a.t,p.g,v.a,g.i,M.b,M.a,u.e,a.s,d.b,p.b],styles:[".mat-form-field[_ngcontent-%COMP%]{width:100%}.form-field-item[_ngcontent-%COMP%]   .form-field-holder[_ngcontent-%COMP%]{padding:10px 20px}.form-field-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.property-form-header[_ngcontent-%COMP%]{border-bottom:1px solid #f1f1f1}"]}),e})();function k(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",3),i.Sb(1,"model-structure-form",4),i.ac("onDelete",(function(t){return i.sc(e),i.ec().deleteModel(t)}))("onCancel",(function(t){return i.sc(e),i.ec().cancelEditModel(t)}))("onChange",(function(t){return i.sc(e),i.ec().updateDataModel(t)})),i.Rb(),i.Rb()}if(2&e){const e=i.ec();i.Bb(1),i.kc("dataModel",e.dataModel)}}function P(e,t){1&e&&(i.Sb(0,"div",23),i.Ec(1,"Properties"),i.Rb())}function E(e,t){1&e&&(i.Sb(0,"span",23),i.Ec(1,"[required]"),i.Rb())}function D(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",26),i.ac("click",(function(){i.sc(e);const o=t.$implicit;return i.ec(4).editDataProperty(o)})),i.Sb(1,"div",17),i.Sb(2,"div",27),i.ac("click",(function(o){i.sc(e);const a=t.$implicit;return i.ec(4).toggleVisibility(a,o)})),i.Nb(3,"i",28),i.Rb(),i.Sb(4,"div",29),i.Ec(5),i.Cc(6,E,2,0,"span",18),i.Rb(),i.Sb(7,"div",30),i.Ec(8),i.Rb(),i.Sb(9,"div",31),i.Nb(10,"i",32),i.Rb(),i.Rb(),i.Rb()}if(2&e){const e=t.$implicit;i.Bb(3),i.Eb("data-property-visible",e.visible)("data-property-hidden",!e.visible),i.Bb(2),i.Gc("",e.name," "),i.Bb(1),i.kc("ngIf",e.required),i.Bb(2),i.Fc(e.type)}}function x(e,t){if(1&e&&(i.Sb(0,"div",3),i.Sb(1,"div",24),i.Cc(2,D,11,7,"div",25),i.Rb(),i.Rb()),2&e){const e=i.ec(3);i.Bb(2),i.kc("ngForOf",e.dataModel.properties)}}function w(e,t){1&e&&(i.Sb(0,"div",33),i.Ec(1," Model has no properties "),i.Rb())}function I(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div"),i.Sb(1,"div",16),i.Sb(2,"div",17),i.Cc(3,P,2,0,"div",18),i.Sb(4,"div",19),i.ac("click",(function(){return i.sc(e),i.ec(2).addNewProperty()})),i.Ec(5,"Add Property "),i.Nb(6,"i",20),i.Rb(),i.Rb(),i.Rb(),i.Cc(7,x,3,1,"div",21),i.Cc(8,w,2,0,"div",22),i.Rb()}if(2&e){const e=i.ec(2);i.Bb(3),i.kc("ngIf",e.dataModel.hasProperties),i.Bb(4),i.kc("ngIf",e.dataModel.hasProperties),i.Bb(1),i.kc("ngIf",!e.dataModel.hasProperties)}}function B(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div"),i.Sb(1,"model-property-form",34),i.ac("onDelete",(function(t){return i.sc(e),i.ec(2).deleteProperty(t)}))("onCancel",(function(){return i.sc(e),i.ec(2).cancelEditProperty()}))("onChange",(function(t){return i.sc(e),i.ec(2).updateDataProperty(t)})),i.Rb(),i.Rb()}if(2&e){const e=i.ec(2);i.Bb(1),i.kc("dataModelProperty",e.propertyToEdit)}}function N(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",5),i.Sb(1,"div",6),i.ac("click",(function(){i.sc(e);const t=i.ec();return t.toggleModelAuth(t.dataModel)})),i.Nb(2,"i",7),i.Rb(),i.Sb(3,"div",8),i.Ec(4),i.Rb(),i.Sb(5,"div",9),i.ac("click",(function(){return i.sc(e),i.ec().launchConsole()})),i.Nb(6,"i",10),i.Rb(),i.Sb(7,"div",11),i.ac("click",(function(){return i.sc(e),i.ec().editModel()})),i.Nb(8,"i",12),i.Rb(),i.Rb(),i.Sb(9,"div",13),i.Cc(10,I,9,3,"div",14),i.Cc(11,B,2,1,"ng-template",null,15,i.Dc),i.Rb()}if(2&e){const e=i.pc(12),t=i.ec();i.Bb(1),i.kc("matTooltip",(t.dataModel.authorizationRequired?"Requires":"Does not require")+" user authentication"),i.Bb(1),i.Eb("fa-lock",t.dataModel.authorizationRequired)("fa-lock-open",!t.dataModel.authorizationRequired),i.Bb(2),i.Fc(t.dataModel.name),i.Bb(6),i.kc("ngIf",!t.editProperty)("ngIfElse",e)}}let O=(()=>{class e{constructor(e){this.appStateService=e,this.onChange=new i.o,this.onDelete=new i.o,this.edit=!1,this.editProperty=!1,this.propertyToEdit=null}ngOnInit(){this.dataModel=new s.a(this.dataMember),this.edit=!this.dataModel.name}ngOnDestroy(){}updateDataProperty(e){this.dataModel.updateProperty(this.propertyToEdit,e),this.saveModel(),this.cancelEditProperty()}cancelEditProperty(){this.propertyToEdit=null,this.editProperty=!1}editDataProperty(e){this.propertyToEdit=e,this.editProperty=!0}addNewProperty(){const e=s.a.newProperty();this.dataModel.addProperty(e),this.editDataProperty(e)}deleteProperty(e){this.dataModel.deleteProperty(e),this.saveModel(),this.cancelEditProperty()}updateDataModel(e){this.dataModel.name=e.name,this.edit=!1,this.saveModel()}saveModel(){this.onChange.emit(this.dataModel)}editModel(){this.editProperty=!1,this.edit=!0}deleteModel(e){this.onDelete.emit(e)}cancelEditModel(e){this.edit=!1}launchConsole(){const e=this.dataModel.toJSON();this.appStateService.openBluConsole({inputs:{dataModel:e},command:"generate",suggestedNames:[e.name]})}toggleVisibility(e,t){e.visible=!e.visible,t.stopPropagation(),this.saveModel()}toggleModelAuth(e){e.authorizationRequired=!e.authorizationRequired,this.saveModel()}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(b.a))},e.\u0275cmp=i.Gb({type:e,selectors:[["data-model-object"]],inputs:{dataMember:"dataMember"},outputs:{onChange:"onChange",onDelete:"onDelete"},decls:4,vars:2,consts:[[1,"data-model"],["class","",4,"ngIf","ngIfElse"],["displayModel",""],[1,""],[3,"dataModel","onDelete","onCancel","onChange"],[1,"data-model-header","d-flex","align-items-center","border-bottom","p-2"],[1,"pt-1","pr-2","cursor-pointer","text-muted","small",3,"matTooltip","click"],[1,"fa","fa-lock"],[1,"pr-2"],[1,"console","ml-auto","mr-2","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,"cursor-pointer",3,"click"],[1,"fas","fa-cog"],[1,"data-model-body"],[4,"ngIf","ngIfElse"],["dataProperties",""],[1,"data-properties-header","p-2"],[1,"d-flex","align-items-center"],["class","small text-muted",4,"ngIf"],[1,"small","cursor-pointer","ml-auto","text-muted",3,"click"],[1,"fa","fa-plus-circle","text-tiny","ml-1"],["class","",4,"ngIf"],["class","text-center p-4 text-muted small",4,"ngIf"],[1,"small","text-muted"],[1,"data-property","cursor-pointer"],["class","p-2",3,"click",4,"ngFor","ngForOf"],[1,"p-2",3,"click"],[1,"",3,"click"],[1,"far","fa-sm","fa-eye"],[1,"pl-2"],[1,"text-muted","small","ml-auto"],[1,"small","pl-3"],[1,"fa","fa-cog"],[1,"text-center","p-4","text-muted","small"],[3,"dataModelProperty","onDelete","onCancel","onChange"]],template:function(e,t){if(1&e&&(i.Sb(0,"div",0),i.Cc(1,k,2,1,"div",1),i.Cc(2,N,13,8,"ng-template",null,2,i.Dc),i.Rb()),2&e){const e=i.pc(3);i.Bb(1),i.kc("ngIf",t.edit||!t.dataModel.name)("ngIfElse",e)}},directives:[a.t,f,h.a,a.s,C],styles:[".data-model[_ngcontent-%COMP%]{width:300px;border-radius:3px;border:1px solid #f1f1f1}.data-model-header[_ngcontent-%COMP%]{background-color:#f1f1f1}.data-properties-header[_ngcontent-%COMP%]{border-bottom:1px solid #f1f1f1}.data-property[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover{background-color:#f1f1f1}.data-property-hidden[_ngcontent-%COMP%]{opacity:.2;color:#6c757d!important}.data-property-visible[_ngcontent-%COMP%]{opacity:.8;color:#6c757d!important}"]}),e})();function q(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",4),i.Sb(1,"div",5),i.Sb(2,"data-model-object",6),i.ac("onDelete",(function(t){return i.sc(e),i.ec().deleteModel(t)}))("onChange",(function(t){return i.sc(e),i.ec().updateDataModel(t)})),i.Rb(),i.Rb(),i.Rb()}if(2&e){const e=t.$implicit;i.Bb(2),i.kc("dataMember",e)}}const F=n.f.forChild([{path:"",component:(()=>{class e{constructor(e,t){this.dataModelService=e,this.dialog=t}ngOnInit(){this.dataModelService.getDataModels().subscribe(e=>this.dataMembers=e)}ngOnDestroy(){}newDataModel(){this.dataModelService.createDataModel().subscribe(e=>{e.success&&this.dataMembers.push(e.dataMember)})}deleteModel(e){this.dialog.open(r.a,{data:{title:"Delete Model?",text:"Deleting this model is a permanent action and cannot be undone.",button:{yes:"Delete",no:"Cancel"}},position:{top:"100px"},autoFocus:!0}).afterClosed().subscribe(t=>{if(!0===t){const t=this.dataMembers.findIndex(t=>t.id===e.dataMember.id);t>=0&&this.dataModelService.deleteDataModel(e.dataMember.id).subscribe(e=>{this.dataMembers.splice(t,1)})}})}updateDataModel(e){this.dataModelService.updateDataModel(e.dataMember.id,e.toJSON()).subscribe(e=>console.log("model updated:",e))}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(c.a),i.Mb(l.b))},e.\u0275cmp=i.Gb({type:e,selectors:[["data-model-list"]],decls:5,vars:1,consts:[["mat-button","",3,"click"],[1,"fa","fa-plus"],[1,"p-2"],["class","d-inline-block align-top ",4,"ngFor","ngForOf"],[1,"d-inline-block","align-top"],[1,"shadow","rounded","border"],[3,"dataMember","onDelete","onChange"]],template:function(e,t){1&e&&(i.Sb(0,"button",0),i.ac("click",(function(){return t.newDataModel()})),i.Nb(1,"i",1),i.Ec(2," New Data Model"),i.Rb(),i.Sb(3,"div",2),i.Cc(4,q,3,1,"div",3),i.Rb()),2&e&&(i.Bb(4),i.kc("ngForOf",t.dataMembers))},directives:[d.b,a.s,O],styles:[".model-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;align-items:stretch}"]}),e})()}]);let T=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,m.b,u.l,d.c,M.c,u.A,v.b]]}),e})(),_=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,m.b,u.l,d.c,M.c,u.A,v.b]]}),e})(),G=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,T,m.b,u.A,d.c,_,h.b]]}),e})();var j=o("lK0z");let A=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,F,G,d.c,j.a]]}),e})()}}]);