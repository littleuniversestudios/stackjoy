(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"4uq3":function(e,t,o){"use strict";o.r(t),o.d(t,"DataModelListModule",(function(){return j}));var a=o("ofXK"),r=o("tyNb");class n{constructor(e,t=[],o=!1){this.name=e,this.properties=t,this.auth=o}static newProperty(){return{name:"",type:"string",required:!1,description:"",label:"",validationRegex:"",visible:!0,values:[]}}static load(e){return e?e.map(e=>new n(e.name,e.properties,e.auth)):[]}get hasProperties(){return this.properties.length>0}updateProperty(e,t){const o=this.properties.findIndex(t=>t===e);o>=0&&(this.properties[o]=t)}addProperty(e){this.properties.push(e)}deleteProperty(e){this.properties.includes(e)&&this.properties.splice(this.properties.indexOf(e),1)}toJSON(){return{auth:this.auth,name:this.name,properties:[...this.properties]}}}var i=o("fXoL"),c=o("Ni13");let l=(()=>{class e{constructor(e){this.localStorageService=e,this.storageKey="dataModels"}getDataModels(){return n.load(this.localStorageService.getItem(this.storageKey))}saveDataModels(e){this.localStorageService.setItem(this.storageKey,e)}}return e.\u0275fac=function(t){return new(t||e)(i.Wb(c.a))},e.\u0275prov=i.Ib({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var s=o("bTqV"),d=o("thzI"),b=o("3Pt+"),u=o("kmnG"),p=o("qFsG");let m=(()=>{class e{constructor(e){this.fb=e,this.onChange=new i.o,this.onDelete=new i.o,this.onCancel=new i.o}ngOnInit(){this.form=this.fb.group({name:[this.dataModel.name]}),this.form.valueChanges.subscribe(e=>{})}ngOnDestroy(){}saveForm(){this.onChange.emit(this.form.value)}deleteModel(){this.onDelete.emit(this.dataModel)}cancel(){this.onCancel.emit(this.dataModel)}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(b.f))},e.\u0275cmp=i.Gb({type:e,selectors:[["model-structure-form"]],inputs:{dataModel:"dataModel"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:15,vars:1,consts:[[1,"p-2","d-flex","align-items-center","border-bottom"],[1,""],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer",3,"click"],[1,"p-2"],[3,"formGroup"],[1,"mat-form-field"],["placeholder","Model Name","matInput","","formControlName","name"],[1,"row"],[1,"col","text-right"],["mat-button","","mat-raised-button","",1,"mr-1",3,"click"],["mat-button","","mat-raised-button","",3,"click"]],template:function(e,t){1&e&&(i.Sb(0,"div",0),i.Sb(1,"div",1),i.Ec(2,"Model Settings"),i.Rb(),i.Sb(3,"div",2),i.Sb(4,"i",3),i.ac("click",(function(){return t.deleteModel()})),i.Rb(),i.Rb(),i.Rb(),i.Sb(5,"div",4),i.Sb(6,"form",5),i.Sb(7,"mat-form-field",6),i.Nb(8,"input",7),i.Rb(),i.Rb(),i.Sb(9,"div",8),i.Sb(10,"div",9),i.Sb(11,"button",10),i.ac("click",(function(){return t.cancel()})),i.Ec(12,"Cancel"),i.Rb(),i.Sb(13,"button",11),i.ac("click",(function(){return t.saveForm()})),i.Ec(14,"Save"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&e&&(i.Bb(6),i.kc("formGroup",t.form))},directives:[b.G,b.r,b.j,u.c,p.a,b.c,b.q,b.i,s.b],styles:[".mat-form-field[_ngcontent-%COMP%], .mat-radio-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin:15px 0}.mat-radio-button[_ngcontent-%COMP%]{margin:5px}"]}),e})();var f=o("Qu3c"),h=o("d3UM"),v=o("FKr1"),g=o("QibW");function y(e,t){1&e&&(i.Sb(0,"mat-error"),i.Ec(1,"Input is required"),i.Rb())}function S(e,t){1&e&&(i.Sb(0,"mat-error"),i.Ec(1,"Input is required"),i.Rb())}function M(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",0),i.Sb(1,"div",26),i.Sb(2,"mat-form-field"),i.Nb(3,"input",27),i.Rb(),i.Rb(),i.Sb(4,"div",19),i.ac("click",(function(){i.sc(e);const o=t.index;return i.ec().deleteItem("values",o)})),i.Nb(5,"i",28),i.Rb(),i.Rb()}if(2&e){const e=t.index;i.Bb(3),i.kc("formControlName",e)}}let R=(()=>{class e{constructor(e){this.fb=e,this.onChange=new i.o,this.onDelete=new i.o,this.onCancel=new i.o}ngOnInit(){this.form=this.fb.group({name:[this.dataModelProperty.name,[b.E.required]],type:[this.dataModelProperty.type,[b.E.required]],required:[this.dataModelProperty.required],description:[this.dataModelProperty.description],label:[this.dataModelProperty.label],validationRegex:[this.dataModelProperty.validationRegex],visible:[this.dataModelProperty.visible],values:this.fb.array(this.dataModelProperty.values||[])}),this.form.valueChanges.subscribe(e=>{console.log("form data",e)})}get f(){return this.form.controls}addItem(e){this.f[e].push(this.fb.control(""))}deleteItem(e,t){this.f[e].removeAt(t)}ngOnDestroy(){}cancel(){this.onCancel.emit(this.dataModelProperty)}saveForm(){this.onChange.emit(this.form.value)}deleteProperty(){this.onDelete.emit(this.dataModelProperty)}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(b.f))},e.\u0275cmp=i.Gb({type:e,selectors:[["model-property-form"]],inputs:{dataModelProperty:"dataModelProperty"},outputs:{onChange:"onChange",onDelete:"onDelete",onCancel:"onCancel"},decls:67,vars:13,consts:[[1,"d-flex","align-items-center"],[1,"small","text-muted"],[1,"ml-auto"],[1,"fa","fa-trash","cursor-pointer","small",3,"click"],[1,""],[1,"mat-form",3,"formGroup"],[1,"mat-form-field"],["placeholder","Property Name","matInput","","formControlName","name","required",""],[4,"ngIf"],["formControlName","type","required",""],[3,"value"],["placeholder","Label","matInput","","formControlName","label"],["placeholder","Description","matInput","","formControlName","description"],["placeholder","Validation Regex","matInput","","formControlName","validationRegex"],["aria-label","Select an option","formControlName","required",1,"mat-radio-group"],["id","radio-group"],[1,"mat-radio-button",3,"value"],["formArrayName","values",1,"form-array-group"],[1,"d-flex","align-items-center","group-header"],[1,"ml-auto","cursor-pointer",3,"click"],[1,"fa","fa-plus-circle"],["class","d-flex align-items-center",4,"ngFor","ngForOf"],[1,"row"],[1,"col","text-right"],["mat-button","","mat-raised-button","",1,"mr-2",3,"click"],["mat-button","","mat-raised-button","",3,"click"],[1,"w-100","pr-3"],["placeholder","Value","matInput","",3,"formControlName"],[1,"fa","fa-trash"]],template:function(e,t){1&e&&(i.Sb(0,"div",0),i.Sb(1,"div",1),i.Ec(2,"Property Settings"),i.Rb(),i.Sb(3,"div",2),i.Sb(4,"i",3),i.ac("click",(function(){return t.deleteProperty()})),i.Rb(),i.Rb(),i.Rb(),i.Sb(5,"div",4),i.Sb(6,"form",5),i.Sb(7,"mat-form-field",6),i.Nb(8,"input",7),i.Sb(9,"mat-hint"),i.Ec(10,"Name of the property"),i.Rb(),i.Cc(11,y,2,0,"mat-error",8),i.Rb(),i.Sb(12,"mat-form-field",6),i.Sb(13,"mat-label"),i.Ec(14,"Type"),i.Rb(),i.Sb(15,"mat-select",9),i.Sb(16,"mat-option",10),i.Ec(17,"String"),i.Rb(),i.Sb(18,"mat-option",10),i.Ec(19,"Email"),i.Rb(),i.Sb(20,"mat-option",10),i.Ec(21,"Password"),i.Rb(),i.Sb(22,"mat-option",10),i.Ec(23,"Number"),i.Rb(),i.Sb(24,"mat-option",10),i.Ec(25,"Boolean"),i.Rb(),i.Sb(26,"mat-option",10),i.Ec(27,"List"),i.Rb(),i.Sb(28,"mat-option",10),i.Ec(29,"Array"),i.Rb(),i.Rb(),i.Sb(30,"mat-hint"),i.Ec(31,"Property Data type"),i.Rb(),i.Cc(32,S,2,0,"mat-error",8),i.Rb(),i.Sb(33,"mat-form-field",6),i.Nb(34,"input",11),i.Sb(35,"mat-hint"),i.Ec(36,"Readable name that appears on forms"),i.Rb(),i.Rb(),i.Sb(37,"mat-form-field",6),i.Nb(38,"input",12),i.Sb(39,"mat-hint"),i.Ec(40,"Property description that appears on forms"),i.Rb(),i.Rb(),i.Sb(41,"mat-form-field",6),i.Nb(42,"input",13),i.Sb(43,"mat-hint"),i.Ec(44,"Regex to validate the property"),i.Rb(),i.Rb(),i.Sb(45,"div",4),i.Sb(46,"mat-radio-group",14),i.Sb(47,"label",15),i.Ec(48,"Required: "),i.Rb(),i.Sb(49,"mat-radio-button",16),i.Ec(50,"True"),i.Rb(),i.Sb(51,"mat-radio-button",16),i.Ec(52,"False"),i.Rb(),i.Rb(),i.Rb(),i.Sb(53,"div",17),i.Sb(54,"div",18),i.Sb(55,"div"),i.Sb(56,"h6"),i.Ec(57,"Default Value(s)"),i.Rb(),i.Rb(),i.Sb(58,"div",19),i.ac("click",(function(){return t.addItem("values")})),i.Nb(59,"i",20),i.Rb(),i.Rb(),i.Cc(60,M,6,1,"div",21),i.Rb(),i.Rb(),i.Sb(61,"div",22),i.Sb(62,"div",23),i.Sb(63,"button",24),i.ac("click",(function(){return t.cancel()})),i.Ec(64,"Cancel"),i.Rb(),i.Sb(65,"button",25),i.ac("click",(function(){return t.saveForm()})),i.Ec(66,"Save"),i.Rb(),i.Rb(),i.Rb(),i.Rb()),2&e&&(i.Bb(6),i.kc("formGroup",t.form),i.Bb(5),i.kc("ngIf",null==t.f.name||null==t.f.name.errors?null:t.f.name.errors.required),i.Bb(5),i.kc("value","string"),i.Bb(2),i.kc("value","email"),i.Bb(2),i.kc("value","password"),i.Bb(2),i.kc("value","number"),i.Bb(2),i.kc("value","boolean"),i.Bb(2),i.kc("value","list"),i.Bb(2),i.kc("value","array"),i.Bb(4),i.kc("ngIf",null==t.f.type||null==t.f.type.errors?null:t.f.type.errors.required),i.Bb(17),i.kc("value",!0),i.Bb(2),i.kc("value",!1),i.Bb(9),i.kc("ngForOf",null==t.f.values?null:t.f.values.controls))},directives:[b.G,b.r,b.j,u.c,p.a,b.c,b.q,b.i,b.B,u.f,a.t,u.g,h.a,v.g,g.b,g.a,b.e,a.s,s.b,u.b],styles:[""]}),e})();function C(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",3),i.Sb(1,"model-structure-form",4),i.ac("onDelete",(function(t){return i.sc(e),i.ec().deleteModel(t)}))("onCancel",(function(t){return i.sc(e),i.ec().cancelEditModel(t)}))("onChange",(function(t){return i.sc(e),i.ec().updateDataModel(t)})),i.Rb(),i.Rb()}if(2&e){const e=i.ec();i.Bb(1),i.kc("dataModel",e.dataModel)}}function k(e,t){1&e&&(i.Sb(0,"div",23),i.Ec(1,"Properties"),i.Rb())}function P(e,t){1&e&&(i.Sb(0,"span",23),i.Ec(1,"[required]"),i.Rb())}function E(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",25),i.Sb(1,"div",26),i.ac("click",(function(){i.sc(e);const o=t.$implicit;return i.ec(4).editDataProperty(o)})),i.Sb(2,"div",27),i.ac("click",(function(o){i.sc(e);const a=t.$implicit;return i.ec(4).toggleVisibility(a,o)})),i.Nb(3,"i",28),i.Rb(),i.Sb(4,"div",29),i.Ec(5),i.Cc(6,P,2,0,"span",17),i.Rb(),i.Sb(7,"div",30),i.Ec(8),i.Rb(),i.Sb(9,"div",31),i.Nb(10,"i",32),i.Rb(),i.Rb(),i.Rb()}if(2&e){const e=t.$implicit;i.Bb(3),i.Eb("data-property-visible",e.visible)("data-property-hidden",!e.visible),i.Bb(2),i.Gc("",e.name," "),i.Bb(1),i.kc("ngIf",e.required),i.Bb(2),i.Fc(e.type)}}function D(e,t){if(1&e&&(i.Sb(0,"div",3),i.Cc(1,E,11,7,"div",24),i.Rb()),2&e){const e=i.ec(3);i.Bb(1),i.kc("ngForOf",e.dataModel.properties)}}function w(e,t){1&e&&(i.Sb(0,"div",33),i.Ec(1," Model has no properties "),i.Rb())}function x(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div"),i.Sb(1,"div",3),i.Sb(2,"div",16),i.Cc(3,k,2,0,"div",17),i.Sb(4,"div",18),i.ac("click",(function(){return i.sc(e),i.ec(2).addNewProperty()})),i.Ec(5,"Add Property"),i.Rb(),i.Sb(6,"div",19),i.ac("click",(function(){return i.sc(e),i.ec(2).addNewProperty()})),i.Nb(7,"i",20),i.Rb(),i.Rb(),i.Rb(),i.Cc(8,D,2,1,"div",21),i.Cc(9,w,2,0,"div",22),i.Rb()}if(2&e){const e=i.ec(2);i.Bb(3),i.kc("ngIf",e.dataModel.hasProperties),i.Bb(5),i.kc("ngIf",e.dataModel.hasProperties),i.Bb(1),i.kc("ngIf",!e.dataModel.hasProperties)}}function I(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",34),i.Sb(1,"model-property-form",35),i.ac("onDelete",(function(t){return i.sc(e),i.ec(2).deleteProperty(t)}))("onCancel",(function(){return i.sc(e),i.ec(2).cancelEditProperty()}))("onChange",(function(t){return i.sc(e),i.ec(2).updateDataProperty(t)})),i.Rb(),i.Rb()}if(2&e){const e=i.ec(2);i.Bb(1),i.kc("dataModelProperty",e.propertyToEdit)}}function N(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",5),i.Sb(1,"div",6),i.ac("click",(function(){i.sc(e);const t=i.ec();return t.toggleModelAuth(t.dataModel)})),i.Nb(2,"i",7),i.Rb(),i.Sb(3,"div",8),i.Ec(4),i.Rb(),i.Sb(5,"div",9),i.ac("click",(function(){return i.sc(e),i.ec().launchConsole()})),i.Nb(6,"i",10),i.Rb(),i.Sb(7,"div",11),i.ac("click",(function(){return i.sc(e),i.ec().editModel()})),i.Nb(8,"i",12),i.Rb(),i.Rb(),i.Sb(9,"div",13),i.Cc(10,x,10,3,"div",14),i.Cc(11,I,2,1,"ng-template",null,15,i.Dc),i.Rb()}if(2&e){const e=i.pc(12),t=i.ec();i.Bb(1),i.kc("matTooltip",(t.dataModel.auth?"Requires":"Does not require")+" user authentication"),i.Bb(1),i.Eb("fa-lock",t.dataModel.auth)("fa-lock-open",!t.dataModel.auth),i.Bb(2),i.Fc(t.dataModel.name),i.Bb(6),i.kc("ngIf",!t.editProperty)("ngIfElse",e)}}let B=(()=>{class e{constructor(e){this.appStateService=e,this.onChange=new i.o,this.onDelete=new i.o,this.edit=!1,this.editProperty=!1,this.propertyToEdit=null}ngOnInit(){this.edit=!this.dataModel.name}ngOnDestroy(){}updateDataProperty(e){this.dataModel.updateProperty(this.propertyToEdit,e),this.saveModel(),this.cancelEditProperty()}cancelEditProperty(){this.propertyToEdit=null,this.editProperty=!1}editDataProperty(e){this.propertyToEdit=e,this.editProperty=!0}addNewProperty(){const e=n.newProperty();this.dataModel.addProperty(e),this.editDataProperty(e)}deleteProperty(e){this.dataModel.deleteProperty(e),this.saveModel(),this.cancelEditProperty()}updateDataModel(e){console.log("form values1:",e),this.dataModel.name=e.name,this.edit=!1,this.saveModel()}saveModel(){this.onChange.emit(this.dataModel)}editModel(){this.editProperty=!1,this.edit=!0}deleteModel(e){this.onDelete.emit(e)}cancelEditModel(e){this.edit=!1}launchConsole(){const e=this.dataModel.toJSON();this.appStateService.openBluConsole({inputs:{dataModel:e},command:"generate",suggestedNames:[e.name]})}toggleVisibility(e,t){e.visible=!e.visible,t.stopPropagation(),this.saveModel()}toggleModelAuth(e){e.auth=!e.auth,this.saveModel()}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(d.a))},e.\u0275cmp=i.Gb({type:e,selectors:[["data-model-object"]],inputs:{dataModel:"dataModel"},outputs:{onChange:"onChange",onDelete:"onDelete"},decls:4,vars:2,consts:[[1,"data-model"],["class","",4,"ngIf","ngIfElse"],["displayModel",""],[1,""],[3,"dataModel","onDelete","onCancel","onChange"],[1,"data-model-header","d-flex","align-items-center","border-bottom","p-2"],[1,"pt-1","pr-2","cursor-pointer","text-muted","small",3,"matTooltip","click"],[1,"fa","fa-lock"],[1,"pr-2"],[1,"console","ml-auto","mr-2","cursor-pointer",3,"click"],[1,"fa","fa-terminal","fa-sm"],[1,"cursor-pointer",3,"click"],[1,"fas","fa-cog"],[1,"data-model-body"],[4,"ngIf","ngIfElse"],["dataProperties",""],[1,"d-flex","align-items-center","p-1"],["class","small text-muted",4,"ngIf"],[1,"pr-1","small","cursor-pointer","ml-auto","text-muted",3,"click"],[1,"pl-1","cursor-pointer",3,"click"],[1,"fa","fa","fa-plus-circle","small"],["class","",4,"ngIf"],["class","text-center p-4 text-muted small",4,"ngIf"],[1,"small","text-muted"],["class","p-1",4,"ngFor","ngForOf"],[1,"p-1"],[1,"d-flex","align-items-center","cursor-pointer",3,"click"],[1,"",3,"click"],[1,"far","fa-sm","fa-eye"],[1,"pl-2"],[1,"text-muted","small","ml-auto"],[1,"small","pl-3"],[1,"fa","fa-cog"],[1,"text-center","p-4","text-muted","small"],[1,"p-2"],[3,"dataModelProperty","onDelete","onCancel","onChange"]],template:function(e,t){if(1&e&&(i.Sb(0,"div",0),i.Cc(1,C,2,1,"div",1),i.Cc(2,N,13,8,"ng-template",null,2,i.Dc),i.Rb()),2&e){const e=i.pc(3);i.Bb(1),i.kc("ngIf",t.edit||!t.dataModel.name)("ngIfElse",e)}},directives:[a.t,m,f.a,a.s,R],styles:[".data-model[_ngcontent-%COMP%]{width:300px;border-radius:3px;border:1px solid #f1f1f1}.data-model-body[_ngcontent-%COMP%]{padding:4px}.data-property-hidden[_ngcontent-%COMP%]{opacity:.2;color:#6c757d!important}.data-property-visible[_ngcontent-%COMP%]{opacity:.8;color:#6c757d!important}"]}),e})();function O(e,t){if(1&e){const e=i.Tb();i.Sb(0,"div",4),i.Sb(1,"div",5),i.Sb(2,"data-model-object",6),i.ac("onDelete",(function(t){return i.sc(e),i.ec().deleteModel(t)}))("onChange",(function(){return i.sc(e),i.ec().saveDataModels()})),i.Rb(),i.Rb(),i.Rb()}if(2&e){const e=t.$implicit;i.Bb(2),i.kc("dataModel",e)}}const q=r.f.forChild([{path:"",component:(()=>{class e{constructor(e){this.dataModelService=e}ngOnInit(){this.dataModels=this.dataModelService.getDataModels(),console.log("whaaa?",this.dataModels)}ngOnDestroy(){}newDataModel(){this.dataModels.unshift(new n(null))}saveDataModels(){this.dataModelService.saveDataModels(this.dataModels)}deleteModel(e){this.dataModels.includes(e)&&(this.dataModels.splice(this.dataModels.indexOf(e),1),this.saveDataModels())}}return e.\u0275fac=function(t){return new(t||e)(i.Mb(l))},e.\u0275cmp=i.Gb({type:e,selectors:[["data-model-list"]],decls:5,vars:1,consts:[["mat-button","",3,"click"],[1,"fa","fa-plus"],[1,"p-2"],["class","p-2 d-inline-block align-top",4,"ngFor","ngForOf"],[1,"p-2","d-inline-block","align-top"],[1,"shadow"],[3,"dataModel","onDelete","onChange"]],template:function(e,t){1&e&&(i.Sb(0,"button",0),i.ac("click",(function(){return t.newDataModel()})),i.Nb(1,"i",1),i.Ec(2," New Data Model"),i.Rb(),i.Sb(3,"div",2),i.Cc(4,O,3,1,"div",3),i.Rb()),2&e&&(i.Bb(4),i.kc("ngForOf",t.dataModels))},directives:[s.b,a.s,B],styles:[".model-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;flex-wrap:wrap;justify-content:flex-start;align-content:flex-start;align-items:stretch}"]}),e})()}]);let F=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,p.b,b.l,s.c,g.c,b.A,h.b]]}),e})(),T=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,p.b,b.l,s.c,g.c,b.A,h.b]]}),e})(),G=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,F,p.b,b.A,s.c,T,f.b]]}),e})(),j=(()=>{class e{}return e.\u0275mod=i.Kb({type:e}),e.\u0275inj=i.Jb({factory:function(t){return new(t||e)},providers:[],imports:[[a.c,q,G,s.c]]}),e})()}}]);