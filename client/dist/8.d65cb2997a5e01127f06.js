(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{x3qw:function(i,t,e){"use strict";e.r(t),e.d(t,"CreateAccountModule",(function(){return A}));var n=e("ofXK"),r=e("tyNb"),o=e("quSY"),s=e("aSHc"),a=e("eIep"),c=e("fXoL"),b=e("IYfF"),d=e("xm+p"),u=e("IjCo"),l=e("3sFK"),p=e("Wp6s"),m=e("3Pt+"),g=e("kmnG"),v=e("qFsG"),h=e("bTqV"),f=e("bv9b");function S(i,t){if(1&i&&(c.Rb(0,"div",12),c.Ec(1),c.Qb()),2&i){const i=c.dc();c.Ab(1),c.Fc(i.signupForm.error)}}function w(i,t){1&i&&(c.Rb(0,"div"),c.Rb(1,"div",1),c.Mb(2,"mat-progress-bar",13),c.Qb(),c.Qb())}function C(i,t){1&i&&(c.Rb(0,"div",14),c.Rb(1,"div",15),c.Ec(2," Thanks for signing up!"),c.Qb(),c.Rb(3,"div",1),c.Mb(4,"i",16),c.Ec(5," You received one additional workspace."),c.Qb(),c.Qb())}function E(i,t){1&i&&(c.Rb(0,"div",2),c.Mb(1,"i",20),c.Ec(2,"Password too weak. Please provide a stronger password."),c.Qb())}function Q(i,t){if(1&i){const i=c.Sb();c.Rb(0,"div",2),c.Rb(1,"div",2),c.Mb(2,"i",20),c.Ec(3," Email Already in use."),c.Qb(),c.Rb(4,"div",21),c.Zb("click",(function(){return c.rc(i),c.dc(2).forgotPassword()})),c.Ec(5,"(Click here to reset password)"),c.Qb(),c.Qb()}}function R(i,t){1&i&&(c.Rb(0,"div",2),c.Mb(1,"i",20),c.Ec(2," Error Occurred."),c.Qb())}function F(i,t){if(1&i&&(c.Rb(0,"div",14),c.Pb(1,17),c.Cc(2,E,3,0,"div",18),c.Cc(3,Q,6,0,"div",18),c.Cc(4,R,3,0,"div",19),c.Ob(),c.Qb()),2&i){const i=c.dc();c.Ab(1),c.jc("ngSwitch",i.errorCode),c.Ab(1),c.jc("ngSwitchCase","auth/weak-password"),c.Ab(1),c.jc("ngSwitchCase","auth/email-already-in-use")}}function y(i,t){if(1&i){const i=c.Sb();c.Pb(0),c.Rb(1,"div",22),c.Zb("click",(function(){return c.rc(i),c.dc().forgotPassword()})),c.Ec(2,"Forgot Password"),c.Qb(),c.Rb(3,"div",23),c.Zb("click",(function(){return c.rc(i),c.dc().login()})),c.Ec(4,"Login"),c.Qb(),c.Ob()}}function I(i,t){if(1&i){const i=c.Sb();c.Pb(0),c.Rb(1,"div",24),c.Zb("click",(function(){return c.rc(i),c.dc().continue()})),c.Ec(2,"Continue "),c.Mb(3,"i",25),c.Qb(),c.Ob()}}const k=r.f.forChild([{path:"",component:(()=>{class i{constructor(i,t,e,n,r,a){this.authService=i,this.route=t,this.navigationService=e,this.systemService=n,this.appEnvironmentService=r,this.ngZone=a,this.signupForm={email:"",password:"",error:"",disabled:!1,inviteCode:"",displayName:""},this.subs=new o.a,this.currentState=s.a.IDLE,this.actionState=s.a}ngOnInit(){var i;this.signupForm.email=null!==(i=this.route.snapshot.queryParams.email)&&void 0!==i?i:"",this.subs.add(this.authService.user$.subscribe(i=>this.user=i)),this.subs.add(this.appEnvironmentService.currentEnvironment$.subscribe(i=>this.currentEnvironment=i))}ngOnDestroy(){this.subs.unsubscribe()}login(){const i={};this.signupForm.email&&(i.email=this.signupForm.email),this.navigationService.navigateTo(["login"],{queryParams:i})}forgotPassword(){const i={};this.signupForm.email&&(i.email=this.signupForm.email),this.navigationService.navigateTo(["forgot-password"],{queryParams:i})}createAccount(){this.currentState=s.a.PENDING,this.authService.createUser(this.signupForm.email,this.signupForm.password,this.signupForm.displayName).subscribe(i=>this.currentState=s.a.SUCCESS,i=>{var t,e,n;this.currentState=s.a.FAILED,this.error=i,this.errorCode=null!==(n=null===(e=null===(t=null==i?void 0:i.error)||void 0===t?void 0:t.data)||void 0===e?void 0:e.code)&&void 0!==n?n:"unknown_error",console.log("Login error Code: ",this.errorCode)})}acceptInvite(){this.systemService.acceptInvite(this.signupForm.inviteCode,this.signupForm.displayName,this.signupForm.password).toPromise().then(i=>{this.authService.login(i.data.email,this.signupForm.password)}).catch(i=>{console.error("Failed: ",i)})}logout(){this.authService.logout().pipe(Object(a.a)(i=>this.appEnvironmentService.switchToSystemWorkspace())).subscribe(i=>this.navigationService.navigateTo(["app-environment"]))}continue(){this.navigationService.navigateTo([this.currentEnvironment?"app-environment":"my-items"])}}return i.\u0275fac=function(t){return new(t||i)(c.Lb(b.a),c.Lb(r.a),c.Lb(d.a),c.Lb(u.a),c.Lb(l.a),c.Lb(c.A))},i.\u0275cmp=c.Fb({type:i,selectors:[["create-account"]],decls:29,vars:11,consts:[[1,"d-flex","justify-content-center","pt-4"],[1,"p-2"],[1,""],[1,"text-bold"],[1,"form",3,"ngSubmit"],["matInput","","placeholder","Email","type","email","name","email","required","",3,"ngModel","disabled","ngModelChange"],["matInput","","placeholder","Password","type","password","name","password","required","",3,"ngModel","disabled","ngModelChange"],["class","error",4,"ngIf"],["mat-raised-button","","type","submit",3,"disabled"],[4,"ngIf"],["class","pt-4 text-break","style","width: 250px;",4,"ngIf"],[1,"d-flex","p-2","pt-4"],[1,"error"],["mode","indeterminate"],[1,"pt-4","text-break",2,"width","250px"],[1,"text-center"],[1,"fa","fa-check-circle","text-success"],[3,"ngSwitch"],["class","",4,"ngSwitchCase"],["class","",4,"ngSwitchDefault"],[1,"fa","fa-exclamation-triangle","text-warning"],[1,"text-small","as-link","pt-1","cursor-pointer",3,"click"],[1,"cursor-pointer",3,"click"],[1,"cursor-pointer","ml-auto","pl-4",3,"click"],[1,"cursor-pointer","ml-auto",3,"click"],[1,"fa","fa-arrow-alt-circle-right"]],template:function(i,t){1&i&&(c.Rb(0,"div",0),c.Rb(1,"mat-card"),c.Rb(2,"div",1),c.Rb(3,"div",2),c.Pb(4),c.Rb(5,"div",3),c.Ec(6,"Create Account:"),c.Qb(),c.Rb(7,"div",1),c.Rb(8,"form",4),c.Zb("ngSubmit",(function(){return t.createAccount()})),c.Rb(9,"div",2),c.Rb(10,"mat-form-field"),c.Rb(11,"mat-label"),c.Ec(12,"Email"),c.Qb(),c.Rb(13,"input",5),c.Zb("ngModelChange",(function(i){return t.signupForm.email=i})),c.Qb(),c.Qb(),c.Qb(),c.Rb(14,"div",2),c.Rb(15,"mat-form-field"),c.Rb(16,"mat-label"),c.Ec(17,"Password"),c.Qb(),c.Rb(18,"input",6),c.Zb("ngModelChange",(function(i){return t.signupForm.password=i})),c.Qb(),c.Qb(),c.Qb(),c.Cc(19,S,2,1,"div",7),c.Rb(20,"button",8),c.Ec(21,"Create Account"),c.Qb(),c.Mb(22,"br"),c.Cc(23,w,3,0,"div",9),c.Qb(),c.Cc(24,C,6,0,"div",10),c.Cc(25,F,5,3,"div",10),c.Qb(),c.Ob(),c.Qb(),c.Rb(26,"div",11),c.Cc(27,y,5,0,"ng-container",9),c.Cc(28,I,4,0,"ng-container",9),c.Qb(),c.Qb(),c.Qb(),c.Qb()),2&i&&(c.Ab(13),c.jc("ngModel",t.signupForm.email)("disabled",t.signupForm.disabled),c.Ab(5),c.jc("ngModel",t.signupForm.password)("disabled",t.signupForm.disabled),c.Ab(1),c.jc("ngIf",""!==t.signupForm.error),c.Ab(1),c.jc("disabled",t.currentState===t.actionState.PENDING),c.Ab(3),c.jc("ngIf",t.currentState===t.actionState.PENDING),c.Ab(1),c.jc("ngIf",t.currentState===t.actionState.SUCCESS),c.Ab(1),c.jc("ngIf",t.currentState===t.actionState.FAILED),c.Ab(2),c.jc("ngIf",!t.user),c.Ab(1),c.jc("ngIf",t.user))},directives:[p.a,m.G,m.r,m.s,g.c,g.g,v.a,m.c,m.B,m.q,m.t,n.t,h.b,f.a,n.x,n.y,n.z],styles:[""]}),i})(),children:[]}]);let A=(()=>{class i{}return i.\u0275mod=c.Jb({type:i}),i.\u0275inj=c.Ib({factory:function(t){return new(t||i)},providers:[],imports:[[n.c,k,h.c,m.l,v.b,p.d,f.b]]}),i})()}}]);