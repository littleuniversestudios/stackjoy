(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{aSHc:function(t,e,c){"use strict";c.d(e,"a",(function(){return o}));var o=function(t){return t[t.FAILED=0]="FAILED",t[t.SUCCESS=1]="SUCCESS",t[t.PENDING=2]="PENDING",t[t.DONE=3]="DONE",t[t.INCOMPLETE=4]="INCOMPLETE",t[t.DELETING=5]="DELETING",t[t.EDITING=6]="EDITING",t[t.ACQUIRING=7]="ACQUIRING",t[t.IDLE=8]="IDLE",t}({})},fV2E:function(t,e,c){"use strict";c.r(e),c.d(e,"SearchModule",(function(){return L}));var o=c("ofXK"),i=c("tyNb"),n=c("fXoL"),r=c("ZJV+"),a=c("3Pt+"),s=c("bTqV"),d=c("0IaG"),l=c("QibW"),h=c("kmnG"),u=c("qFsG");function p(t,e){if(1&t&&(n.ic(0,"div",5),n.ic(1,"mat-radio-button",6),n.bd(2),n.hc(),n.hc()),2&t){const t=e.$implicit;n.Ob(1),n.Ec("value",t),n.Ob(1),n.cd(t)}}function m(t,e){if(1&t){const t=n.jc();n.ic(0,"div",14),n.ic(1,"mat-form-field"),n.ic(2,"div",15),n.bd(3,"Custom project name:"),n.hc(),n.ic(4,"input",16),n.uc("ngModelChange",(function(e){return n.Rc(t),n.yc().newProjectName=e})),n.hc(),n.hc(),n.hc()}if(2&t){const t=n.yc();n.Ob(4),n.Ec("ngModel",t.newProjectName)}}const f=function(t,e){return{name:t,overwrite:e}};let b=(()=>{class t{constructor(t,e,c){this.dialogRef=t,this.fb=e,this.data=c,this.myForm=this.fb.group({selection:[]})}ngOnInit(){this.myForm.valueChanges.subscribe(t=>{switch(t.selection){case"set_custom_name":this.newProjectName="",this.showCustomName=!0;break;case"overwrite_project":this.newProjectName=this.data.name,this.overwriteProject=!0;break;default:this.overwriteProject=!1,this.showCustomName=!1,this.newProjectName=t.selection}})}ngOnDestroy(){}choiceMade(){return!!this.newProjectName}}return t.\u0275fac=function(e){return new(e||t)(n.cc(d.g),n.cc(a.f),n.cc(d.a))},t.\u0275cmp=n.Wb({type:t,selectors:[["project-exists-dialog"]],decls:22,vars:11,consts:[["mat-dialog-title",""],["mat-dialog-content","",1,"p-3"],[3,"formGroup"],["aria-label","Select an option","formControlName","selection"],["id","radio-group-overwrite"],[1,""],[3,"value"],[1,"pt-3"],["id","radio-group-names"],["class","",4,"ngFor","ngForOf"],["class","pl-3",4,"ngIf"],["mat-dialog-actions","",1,"text-right"],["mat-button","","mat-dialog-close",""],["mat-button","",3,"mat-dialog-close","disabled"],[1,"pl-3"],[1,"pb-1"],["matInput","",3,"ngModel","ngModelChange"]],template:function(t,e){1&t&&(n.ic(0,"h1",0),n.bd(1),n.hc(),n.ic(2,"div",1),n.ic(3,"form",2),n.ic(4,"mat-radio-group",3),n.ic(5,"label",4),n.bd(6,"Overwrite existing project: "),n.hc(),n.ic(7,"div",5),n.ic(8,"mat-radio-button",6),n.bd(9,"Overwrite Project"),n.hc(),n.hc(),n.ic(10,"div",7),n.ic(11,"label",8),n.bd(12,"Choose a new project name: "),n.hc(),n.Zc(13,p,3,2,"div",9),n.ic(14,"mat-radio-button",6),n.bd(15,"Set Custom Name"),n.hc(),n.hc(),n.hc(),n.hc(),n.Zc(16,m,5,1,"div",10),n.hc(),n.ic(17,"div",11),n.ic(18,"button",12),n.bd(19,"Cancel"),n.hc(),n.ic(20,"button",13),n.bd(21,"Install"),n.hc(),n.hc()),2&t&&(n.Ob(1),n.dd("Project '",e.data.name,"' exists on your system."),n.Ob(2),n.Ec("formGroup",e.myForm),n.Ob(5),n.Ec("value","overwrite_project"),n.Ob(5),n.Ec("ngForOf",e.data.suggestions),n.Ob(1),n.Ec("value","set_custom_name"),n.Ob(2),n.Ec("ngIf",e.showCustomName),n.Ob(4),n.Ec("mat-dialog-close",n.Jc(8,f,e.newProjectName,e.overwriteProject))("disabled",!e.choiceMade()))},directives:[d.h,d.e,a.z,a.q,a.k,l.b,a.p,a.i,l.a,o.t,o.u,d.c,s.a,d.d,h.c,u.b,a.c,a.s],styles:[""]}),t})();var g=c("aSHc");let v=(()=>{class t{constructor(t){this.httpService=t}downloadProject(t,e,c,o=!1,i){return this.httpService.get(`/stackjoy/project/${t}/download`,{name:e,version:c,overwrite:o,isSeed:i})}}return t.\u0275fac=function(e){return new(e||t)(n.qc(r.a))},t.\u0275prov=n.Yb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var j=c("xm+p"),w=c("CPZX"),E=c("1kSV"),S=c("bv9b");function I(t,e){1&t&&n.dc(0,"i",12)}function O(t,e){1&t&&n.dc(0,"i",13)}function y(t,e){if(1&t){const t=n.jc();n.ic(0,"button",9),n.uc("click",(function(){return n.Rc(t),n.yc().install()})),n.dc(1,"i",14),n.bd(2," Install"),n.hc()}}function C(t,e){1&t&&(n.ic(0,"div"),n.dc(1,"i",17),n.bd(2," Seed downloaded, beginning installation... "),n.hc())}function k(t,e){if(1&t){const t=n.jc();n.ic(0,"div"),n.dc(1,"i",17),n.ic(2,"span",18),n.uc("click",(function(){return n.Rc(t),n.yc(2).goToBluCollection()})),n.bd(3,"Collection Download. Click here to start using it."),n.hc(),n.hc()}}function N(t,e){if(1&t&&(n.ic(0,"div",15),n.Zc(1,C,3,0,"div",16),n.Zc(2,k,4,0,"div",16),n.hc()),2&t){const t=n.yc();n.Ob(1),n.Ec("ngIf",t.project.isSeed),n.Ob(1),n.Ec("ngIf",!t.project.isSeed)}}function P(t,e){1&t&&(n.ic(0,"div",15),n.ic(1,"div"),n.bd(2,"Downloading..."),n.hc(),n.dc(3,"mat-progress-bar",19),n.hc())}let D=(()=>{class t{constructor(t,e,c,o){this.stackjoyService=t,this.navigationService=e,this.codebaseService=c,this.dialog=o,this.downloadState=g.a.IDLE,this.actionStates=g.a,this.installAfterDownload=!1}ngOnInit(){}ngOnDestroy(){}openDialog(){this.dialog.open(b,{data:{name:this.project.name,suggestions:[`@stackjoy-${this.project.name}`,`${this.project.name}-1`,`${this.project.name}_1`]}}).afterClosed().subscribe(t=>{t&&this.downloadProject(this.project.id,t.name,this.project.version,t.overwrite,this.project.isSeed)})}install(){this.installAfterDownload=!0,this.downloadProject(this.project.id,this.project.name,this.project.version,!1,this.project.isSeed)}downloadProject(t,e,c,o=!1,i=!1){this.downloadState=g.a.PENDING,this.stackjoyService.downloadProject(t,e,c,o,i).subscribe(t=>{this.downloadState=g.a.SUCCESS,this.downloadedProject=t,setTimeout(()=>{this.codebaseService.getRootDir().subscribe(t=>{this.navigationService.navigateTo(["blu","install",`seeds.${e}`],{queryParams:{name:e,destination:t.path}})})},2e3)},t=>{"download-project-exists"===t.error.code&&(this.downloadState=g.a.FAILED,this.openDialog())})}download(){this.downloadProject(this.project.id,this.project.name,this.project.version,!1,this.project.isSeed)}goToBluCollection(){this.navigationService.navigateTo(["blu","collection","view",this.downloadedProject.projectName])}}return t.\u0275fac=function(e){return new(e||t)(n.cc(v),n.cc(j.a),n.cc(w.a),n.cc(d.b))},t.\u0275cmp=n.Wb({type:t,selectors:[["stackjoy-project"]],inputs:{project:"project",searchTerm:"searchTerm"},decls:17,vars:9,consts:[[1,"box","rounded","p-2","bg-white"],[1,"border-0","w-100"],[1,"cursor-pointer","project-name"],["class","fa fa-seedling fa-sm",4,"ngIf"],["class","fa fa-folder fa-sm",4,"ngIf"],[1,"pl-1",3,"result","term"],[1,"cursor-pointer","description"],[1,"text-right"],["mat-button","","mat-raised-button","","class","ml-2",3,"click",4,"ngIf"],["mat-button","","mat-raised-button","",1,"ml-2",3,"click"],[1,"fa","fa-download"],["class","p-2",4,"ngIf"],[1,"fa","fa-seedling","fa-sm"],[1,"fa","fa-folder","fa-sm"],[1,"fa","fa-cog"],[1,"p-2"],[4,"ngIf"],[1,"fa","fa-check","mr-1","text-success"],[1,"as-link",3,"click"],["mode","buffer"]],template:function(t,e){1&t&&(n.ic(0,"div",0),n.ic(1,"table",1),n.ic(2,"tr"),n.ic(3,"td"),n.ic(4,"div",2),n.Zc(5,I,1,0,"i",3),n.Zc(6,O,1,0,"i",4),n.dc(7,"ngb-highlight",5),n.hc(),n.ic(8,"div",6),n.dc(9,"ngb-highlight",5),n.hc(),n.hc(),n.ic(10,"td",7),n.Zc(11,y,3,0,"button",8),n.ic(12,"button",9),n.uc("click",(function(){return e.download()})),n.dc(13,"i",10),n.bd(14," Download"),n.hc(),n.hc(),n.hc(),n.hc(),n.Zc(15,N,3,2,"div",11),n.Zc(16,P,4,0,"div",11),n.hc()),2&t&&(n.Ob(5),n.Ec("ngIf",e.project.isSeed),n.Ob(1),n.Ec("ngIf",!e.project.isSeed),n.Ob(1),n.Ec("result",e.project.name)("term",e.searchTerm),n.Ob(2),n.Ec("result",e.project.description)("term",e.searchTerm),n.Ob(2),n.Ec("ngIf",e.project.isSeed),n.Ob(4),n.Ec("ngIf",e.downloadState===e.actionStates.SUCCESS),n.Ob(1),n.Ec("ngIf",e.downloadState===e.actionStates.PENDING))},directives:[o.u,E.a,s.a,S.a],styles:[".project-name[_ngcontent-%COMP%]{text-transform:capitalize;font-size:1.2rem}.description[_ngcontent-%COMP%]{text-transform:capitalize;font-size:.8rem;padding-left:3px}.box[_ngcontent-%COMP%]{box-shadow:0 2px 3px rgba(10,10,10,.1),0 0 0 1px rgba(10,10,10,.1)}"]}),t})();const T=["searchElement"];function x(t,e){if(1&t){const t=n.jc();n.ic(0,"div",9),n.uc("click",(function(){return n.Rc(t),n.yc().searchTerm=null})),n.ic(1,"span",10),n.dc(2,"span",11),n.hc(),n.hc()}}function M(t,e){if(1&t&&n.dc(0,"stackjoy-project",12),2&t){const t=e.$implicit,c=n.yc();n.Ec("project",t)("searchTerm",c.searchTerm)}}const G=i.e.forChild([{path:"",component:(()=>{class t{constructor(t){this.httpService=t}ngOnInit(){this.httpService.get("/stackjoy/project",{term:"aa"}).subscribe(t=>this.projects=t)}ngAfterViewInit(){setTimeout(()=>{this.searchElement.nativeElement.focus()},0)}ngOnDestroy(){}search(){this.httpService.get("/stackjoy/project",{name:"test"}).subscribe(t=>this.projects=t)}}return t.\u0275fac=function(e){return new(e||t)(n.cc(r.a))},t.\u0275cmp=n.Wb({type:t,selectors:[["search"]],viewQuery:function(t,e){var c;1&t&&n.gd(T,!0),2&t&&n.Mc(c=n.vc())&&(e.searchElement=c.first)},decls:13,vars:3,consts:[[1,"row"],[1,"col"],[1,"p-3"],[1,"input-group","pb-3","pt-3"],["type","text","autofocus","",1,"form-control","search-input","text-muted",3,"ngModel","ngModelChange"],["searchElement",""],["class","input-group-append cursor-pointer",3,"click",4,"ngIf"],["mat-raised-button","",3,"click"],[3,"project","searchTerm",4,"ngFor","ngForOf"],[1,"input-group-append","cursor-pointer",3,"click"],[1,"input-group-text","bg-white"],[1,"fa","fa-times"],[3,"project","searchTerm"]],template:function(t,e){1&t&&(n.ic(0,"div",0),n.ic(1,"div",1),n.ic(2,"div",2),n.ic(3,"h5"),n.bd(4,"Search Stackjoy"),n.hc(),n.ic(5,"div",3),n.ic(6,"input",4,5),n.uc("ngModelChange",(function(t){return e.searchTerm=t})),n.hc(),n.Zc(8,x,3,0,"div",6),n.ic(9,"button",7),n.uc("click",(function(){return e.search()})),n.bd(10,"Search"),n.hc(),n.hc(),n.hc(),n.ic(11,"div",2),n.Zc(12,M,1,2,"stackjoy-project",8),n.hc(),n.hc(),n.hc()),2&t&&(n.Ob(6),n.Ec("ngModel",e.searchTerm),n.Ob(2),n.Ec("ngIf",e.searchTerm),n.Ob(4),n.Ec("ngForOf",e.projects))},directives:[a.c,a.p,a.s,o.u,s.a,o.t,D],styles:[""]}),t})()}]);var Z=c("9Xeq");let F=(()=>{class t{}return t.\u0275mod=n.ac({type:t}),t.\u0275inj=n.Zb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,E.b,s.b,S.b]]}),t})(),L=(()=>{class t{}return t.\u0275mod=n.ac({type:t}),t.\u0275inj=n.Zb({factory:function(e){return new(e||t)},providers:[],imports:[[o.c,G,a.l,Z.a,F,s.b]]}),t})()}}]);